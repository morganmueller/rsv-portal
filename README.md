#  NYC Respiratory Virus Data Tracker

This project powers a responsive, modular dashboard for the NYC Department of Health and Mental Hygiene (DOHMH), visualizing respiratory virus trends across COVID-19, Influenza, RSV, ARI, and more. It supports seasonal comparisons, chart explainers, plain-language summaries, and interactive data filtering.

---

## üìÅ Project Structure
  /components
  * cards/ # Stat cards (e.g. COVID, Flu)
  * charts/ # Vega-lite chart wrappers
  * contentUtils/ # Markdown rendering & text utilities
  * controls/ # Virus and view toggle components
  * grids/ # Layout grid components
  * layout/ # Page layouts, container logic
  * popups/ # Info modal components
  
  /public/content
  * sections/ # Summary markdown (e.g. edSectionText.md)
  * modals/ # Chart explainer markdown
  
  /data
  * edPageConfig.js # Config for Emergency Dept page
  * caseDataPageConfig.js
  * covidDeathPageConfig.js
  
  /utils
  * chartRegistry.js # Dynamic chart registry
  * contentUtils.js # Dot notation text resolver
  * downloadUtils.js # CSV export helper
  * trendUtils.js # Calculates week-over-week trends
  * loadMarkdownWithMeta.js

## ‚öôÔ∏è Config-Driven Architecture

Each data page is generated by passing a config object to `<ConfigDrivenPage />`. This enables low-code page creation by defining:

- Titles and subtitles
- Chart metadata and props
- Info modals and markdown section targets
- Chart-level data sources

### Example

```js
{
  id: "emergencyDeptPage",
  titleKey: "emergencyDeptPage.mainTitle",
  summary: {
    title: "Page Overview",
    markdownPath: "../../public/content/sections/edSectionText.md"
  },
  sections: [
    {
      title: "emergencyDeptPage.charts.seasonalEdVisits.title",
      chart: {
        type: "edSeasonalComparisonChart",
        props: {
          dataSourceKey: "seasonalEDData",
          virus: "{virus}",
          view: "{view}"
        }
      },
      modal: {
        title: "Seasonal ED {view}",
        markdownPath: "../../public/content/modals/emergency-dept-explainer.md"
      }
    }
  ],
  data: {
    seasonalEDData: [...]
  }
}
```

üîç Key Features
‚úÖ Markdown-Powered Content
Summary and modal content lives in .md files under /public/content/

Supports {view}, {virus}, {trend} templating in markdown

Optional ## Section targeting with fallback if not found

‚úÖ Interactive Controls
virusToggle: Filter by virus

viewToggle: Switch between ED visits and admits

Shared state provided via usePageState()

‚úÖ Chart Modularization
All charts are registered in /utils/chartRegistry.js

Components accept data, view, virus via props

Uses react-vega and Vega-Lite JSON specs

‚úÖ Responsive Layout
Grids use clamp()-based fluid spacing

Breakpoints and CSS modules for scoped styles

Components support fade-in animations on scroll

üìä Trend & Export Logic
Trends are computed via getTrendFromTimeSeries(data, metric)

Downloadable CSVs generated by downloadCSV(data, filename)

Summary cards and subtitles automatically show up/down arrows and percent change



