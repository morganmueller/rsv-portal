var xY=Object.defineProperty;var NN=e=>{throw TypeError(e)};var wY=(e,t,n)=>t in e?xY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ee=(e,t,n)=>wY(e,typeof t!="symbol"?t+"":t,n),FN=(e,t,n)=>t.has(e)||NN("Cannot "+n);var MN=(e,t,n)=>(FN(e,t,"read from private field"),n?n.call(e):t.get(e)),DN=(e,t,n)=>t.has(e)?NN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),kb=(e,t,n,r)=>(FN(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Z_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sb={exports:{}},mh={},_b={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON;function bY(){if(ON)return Ke;ON=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(I){return I===null||typeof I!="object"?null:(I=h&&I[h]||I["@@iterator"],typeof I=="function"?I:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function w(I,G,ve){this.props=I,this.context=G,this.refs=v,this.updater=ve||m}w.prototype.isReactComponent={},w.prototype.setState=function(I,G){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,G,"setState")},w.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function b(){}b.prototype=w.prototype;function k(I,G,ve){this.props=I,this.context=G,this.refs=v,this.updater=ve||m}var _=k.prototype=new b;_.constructor=k,y(_,w.prototype),_.isPureReactComponent=!0;var C=Array.isArray,$=Object.prototype.hasOwnProperty,R={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function N(I,G,ve){var Ce,be={},Be=null,nt=null;if(G!=null)for(Ce in G.ref!==void 0&&(nt=G.ref),G.key!==void 0&&(Be=""+G.key),G)$.call(G,Ce)&&!A.hasOwnProperty(Ce)&&(be[Ce]=G[Ce]);var Xe=arguments.length-2;if(Xe===1)be.children=ve;else if(1<Xe){for(var he=Array(Xe),Oe=0;Oe<Xe;Oe++)he[Oe]=arguments[Oe+2];be.children=he}if(I&&I.defaultProps)for(Ce in Xe=I.defaultProps,Xe)be[Ce]===void 0&&(be[Ce]=Xe[Ce]);return{$$typeof:e,type:I,key:Be,ref:nt,props:be,_owner:R.current}}function F(I,G){return{$$typeof:e,type:I.type,key:G,ref:I.ref,props:I.props,_owner:I._owner}}function L(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function O(I){var G={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ve){return G[ve]})}var K=/\/+/g;function W(I,G){return typeof I=="object"&&I!==null&&I.key!=null?O(""+I.key):G.toString(36)}function j(I,G,ve,Ce,be){var Be=typeof I;(Be==="undefined"||Be==="boolean")&&(I=null);var nt=!1;if(I===null)nt=!0;else switch(Be){case"string":case"number":nt=!0;break;case"object":switch(I.$$typeof){case e:case t:nt=!0}}if(nt)return nt=I,be=be(nt),I=Ce===""?"."+W(nt,0):Ce,C(be)?(ve="",I!=null&&(ve=I.replace(K,"$&/")+"/"),j(be,G,ve,"",function(Oe){return Oe})):be!=null&&(L(be)&&(be=F(be,ve+(!be.key||nt&&nt.key===be.key?"":(""+be.key).replace(K,"$&/")+"/")+I)),G.push(be)),1;if(nt=0,Ce=Ce===""?".":Ce+":",C(I))for(var Xe=0;Xe<I.length;Xe++){Be=I[Xe];var he=Ce+W(Be,Xe);nt+=j(Be,G,ve,he,be)}else if(he=p(I),typeof he=="function")for(I=he.call(I),Xe=0;!(Be=I.next()).done;)Be=Be.value,he=Ce+W(Be,Xe++),nt+=j(Be,G,ve,he,be);else if(Be==="object")throw G=String(I),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return nt}function M(I,G,ve){if(I==null)return I;var Ce=[],be=0;return j(I,Ce,"","",function(Be){return G.call(ve,Be,be++)}),Ce}function U(I){if(I._status===-1){var G=I._result;G=G(),G.then(function(ve){(I._status===0||I._status===-1)&&(I._status=1,I._result=ve)},function(ve){(I._status===0||I._status===-1)&&(I._status=2,I._result=ve)}),I._status===-1&&(I._status=0,I._result=G)}if(I._status===1)return I._result.default;throw I._result}var X={current:null},q={transition:null},H={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:q,ReactCurrentOwner:R};function J(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:M,forEach:function(I,G,ve){M(I,function(){G.apply(this,arguments)},ve)},count:function(I){var G=0;return M(I,function(){G++}),G},toArray:function(I){return M(I,function(G){return G})||[]},only:function(I){if(!L(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ke.Component=w,Ke.Fragment=n,Ke.Profiler=i,Ke.PureComponent=k,Ke.StrictMode=r,Ke.Suspense=l,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Ke.act=J,Ke.cloneElement=function(I,G,ve){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var Ce=y({},I.props),be=I.key,Be=I.ref,nt=I._owner;if(G!=null){if(G.ref!==void 0&&(Be=G.ref,nt=R.current),G.key!==void 0&&(be=""+G.key),I.type&&I.type.defaultProps)var Xe=I.type.defaultProps;for(he in G)$.call(G,he)&&!A.hasOwnProperty(he)&&(Ce[he]=G[he]===void 0&&Xe!==void 0?Xe[he]:G[he])}var he=arguments.length-2;if(he===1)Ce.children=ve;else if(1<he){Xe=Array(he);for(var Oe=0;Oe<he;Oe++)Xe[Oe]=arguments[Oe+2];Ce.children=Xe}return{$$typeof:e,type:I.type,key:be,ref:Be,props:Ce,_owner:nt}},Ke.createContext=function(I){return I={$$typeof:s,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:o,_context:I},I.Consumer=I},Ke.createElement=N,Ke.createFactory=function(I){var G=N.bind(null,I);return G.type=I,G},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(I){return{$$typeof:a,render:I}},Ke.isValidElement=L,Ke.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:U}},Ke.memo=function(I,G){return{$$typeof:u,type:I,compare:G===void 0?null:G}},Ke.startTransition=function(I){var G=q.transition;q.transition={};try{I()}finally{q.transition=G}},Ke.unstable_act=J,Ke.useCallback=function(I,G){return X.current.useCallback(I,G)},Ke.useContext=function(I){return X.current.useContext(I)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(I){return X.current.useDeferredValue(I)},Ke.useEffect=function(I,G){return X.current.useEffect(I,G)},Ke.useId=function(){return X.current.useId()},Ke.useImperativeHandle=function(I,G,ve){return X.current.useImperativeHandle(I,G,ve)},Ke.useInsertionEffect=function(I,G){return X.current.useInsertionEffect(I,G)},Ke.useLayoutEffect=function(I,G){return X.current.useLayoutEffect(I,G)},Ke.useMemo=function(I,G){return X.current.useMemo(I,G)},Ke.useReducer=function(I,G,ve){return X.current.useReducer(I,G,ve)},Ke.useRef=function(I){return X.current.useRef(I)},Ke.useState=function(I){return X.current.useState(I)},Ke.useSyncExternalStore=function(I,G,ve){return X.current.useSyncExternalStore(I,G,ve)},Ke.useTransition=function(){return X.current.useTransition()},Ke.version="18.3.1",Ke}var PN;function J_(){return PN||(PN=1,_b.exports=bY()),_b.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LN;function EY(){if(LN)return mh;LN=1;var e=J_(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,u){var f,h={},p=null,m=null;u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(m=l.ref);for(f in l)r.call(l,f)&&!o.hasOwnProperty(f)&&(h[f]=l[f]);if(a&&a.defaultProps)for(f in l=a.defaultProps,l)h[f]===void 0&&(h[f]=l[f]);return{$$typeof:t,type:a,key:p,ref:m,props:h,_owner:i.current}}return mh.Fragment=n,mh.jsx=s,mh.jsxs=s,mh}var IN;function kY(){return IN||(IN=1,Sb.exports=EY()),Sb.exports}var P=kY(),Z=J_();const pu=Z_(Z);var gm={},Cb={exports:{}},$r={},$b={exports:{}},Ab={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zN;function SY(){return zN||(zN=1,function(e){function t(q,H){var J=q.length;q.push(H);e:for(;0<J;){var I=J-1>>>1,G=q[I];if(0<i(G,H))q[I]=H,q[J]=G,J=I;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var H=q[0],J=q.pop();if(J!==H){q[0]=J;e:for(var I=0,G=q.length,ve=G>>>1;I<ve;){var Ce=2*(I+1)-1,be=q[Ce],Be=Ce+1,nt=q[Be];if(0>i(be,J))Be<G&&0>i(nt,be)?(q[I]=nt,q[Be]=J,I=Be):(q[I]=be,q[Ce]=J,I=Ce);else if(Be<G&&0>i(nt,J))q[I]=nt,q[Be]=J,I=Be;else break e}}return H}function i(q,H){var J=q.sortIndex-H.sortIndex;return J!==0?J:q.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],f=1,h=null,p=3,m=!1,y=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(q){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=q)r(u),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(u)}}function C(q){if(v=!1,_(q),!y)if(n(l)!==null)y=!0,U($);else{var H=n(u);H!==null&&X(C,H.startTime-q)}}function $(q,H){y=!1,v&&(v=!1,b(N),N=-1),m=!0;var J=p;try{for(_(H),h=n(l);h!==null&&(!(h.expirationTime>H)||q&&!O());){var I=h.callback;if(typeof I=="function"){h.callback=null,p=h.priorityLevel;var G=I(h.expirationTime<=H);H=e.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),_(H)}else r(l);h=n(l)}if(h!==null)var ve=!0;else{var Ce=n(u);Ce!==null&&X(C,Ce.startTime-H),ve=!1}return ve}finally{h=null,p=J,m=!1}}var R=!1,A=null,N=-1,F=5,L=-1;function O(){return!(e.unstable_now()-L<F)}function K(){if(A!==null){var q=e.unstable_now();L=q;var H=!0;try{H=A(!0,q)}finally{H?W():(R=!1,A=null)}}else R=!1}var W;if(typeof k=="function")W=function(){k(K)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,M=j.port2;j.port1.onmessage=K,W=function(){M.postMessage(null)}}else W=function(){w(K,0)};function U(q){A=q,R||(R=!0,W())}function X(q,H){N=w(function(){q(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,U($))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(q){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var J=p;p=H;try{return q()}finally{p=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,H){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=p;p=q;try{return H()}finally{p=J}},e.unstable_scheduleCallback=function(q,H,J){var I=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?I+J:I):J=I,q){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=J+G,q={id:f++,callback:H,priorityLevel:q,startTime:J,expirationTime:G,sortIndex:-1},J>I?(q.sortIndex=J,t(u,q),n(l)===null&&q===n(u)&&(v?(b(N),N=-1):v=!0,X(C,J-I))):(q.sortIndex=G,t(l,q),y||m||(y=!0,U($))),q},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(q){var H=p;return function(){var J=p;p=H;try{return q.apply(this,arguments)}finally{p=J}}}}(Ab)),Ab}var jN;function _Y(){return jN||(jN=1,$b.exports=SY()),$b.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BN;function CY(){if(BN)return $r;BN=1;var e=J_(),t=_Y();function n(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(c,d){s(c,d),s(c+"Capture",d)}function s(c,d){for(i[c]=d,c=0;c<d.length;c++)r.add(d[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function p(c){return l.call(h,c)?!0:l.call(f,c)?!1:u.test(c)?h[c]=!0:(f[c]=!0,!1)}function m(c,d,g,x){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return x?!1:g!==null?!g.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function y(c,d,g,x){if(d===null||typeof d>"u"||m(c,d,g,x))return!0;if(x)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function v(c,d,g,x,E,S,T){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=x,this.attributeNamespace=E,this.mustUseProperty=g,this.propertyName=c,this.type=d,this.sanitizeURL=S,this.removeEmptyString=T}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){w[c]=new v(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];w[d]=new v(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){w[c]=new v(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){w[c]=new v(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){w[c]=new v(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){w[c]=new v(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){w[c]=new v(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){w[c]=new v(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){w[c]=new v(c,5,!1,c.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function k(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(b,k);w[d]=new v(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(b,k);w[d]=new v(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(b,k);w[d]=new v(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){w[c]=new v(c,1,!1,c.toLowerCase(),null,!1,!1)}),w.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){w[c]=new v(c,1,!1,c.toLowerCase(),null,!0,!0)});function _(c,d,g,x){var E=w.hasOwnProperty(d)?w[d]:null;(E!==null?E.type!==0:x||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(y(d,g,E,x)&&(g=null),x||E===null?p(d)&&(g===null?c.removeAttribute(d):c.setAttribute(d,""+g)):E.mustUseProperty?c[E.propertyName]=g===null?E.type===3?!1:"":g:(d=E.attributeName,x=E.attributeNamespace,g===null?c.removeAttribute(d):(E=E.type,g=E===3||E===4&&g===!0?"":""+g,x?c.setAttributeNS(x,d,g):c.setAttribute(d,g))))}var C=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),R=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),O=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),q=Symbol.iterator;function H(c){return c===null||typeof c!="object"?null:(c=q&&c[q]||c["@@iterator"],typeof c=="function"?c:null)}var J=Object.assign,I;function G(c){if(I===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);I=d&&d[1]||""}return`
`+I+c}var ve=!1;function Ce(c,d){if(!c||ve)return"";ve=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Q){var x=Q}Reflect.construct(c,[],d)}else{try{d.call()}catch(Q){x=Q}c.call(d.prototype)}else{try{throw Error()}catch(Q){x=Q}c()}}catch(Q){if(Q&&x&&typeof Q.stack=="string"){for(var E=Q.stack.split(`
`),S=x.stack.split(`
`),T=E.length-1,D=S.length-1;1<=T&&0<=D&&E[T]!==S[D];)D--;for(;1<=T&&0<=D;T--,D--)if(E[T]!==S[D]){if(T!==1||D!==1)do if(T--,D--,0>D||E[T]!==S[D]){var z=`
`+E[T].replace(" at new "," at ");return c.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",c.displayName)),z}while(1<=T&&0<=D);break}}}finally{ve=!1,Error.prepareStackTrace=g}return(c=c?c.displayName||c.name:"")?G(c):""}function be(c){switch(c.tag){case 5:return G(c.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return c=Ce(c.type,!1),c;case 11:return c=Ce(c.type.render,!1),c;case 1:return c=Ce(c.type,!0),c;default:return""}}function Be(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case A:return"Fragment";case R:return"Portal";case F:return"Profiler";case N:return"StrictMode";case W:return"Suspense";case j:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case O:return(c.displayName||"Context")+".Consumer";case L:return(c._context.displayName||"Context")+".Provider";case K:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case M:return d=c.displayName||null,d!==null?d:Be(c.type)||"Memo";case U:d=c._payload,c=c._init;try{return Be(c(d))}catch{}}return null}function nt(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(d);case 8:return d===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Xe(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function he(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Oe(c){var d=he(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),x=""+c[d];if(!c.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,S=g.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return E.call(this)},set:function(T){x=""+T,S.call(this,T)}}),Object.defineProperty(c,d,{enumerable:g.enumerable}),{getValue:function(){return x},setValue:function(T){x=""+T},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function He(c){c._valueTracker||(c._valueTracker=Oe(c))}function ue(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var g=d.getValue(),x="";return c&&(x=he(c)?c.checked?"true":"false":c.value),c=x,c!==g?(d.setValue(c),!0):!1}function jt(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function it(c,d){var g=d.checked;return J({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??c._wrapperState.initialChecked})}function Vt(c,d){var g=d.defaultValue==null?"":d.defaultValue,x=d.checked!=null?d.checked:d.defaultChecked;g=Xe(d.value!=null?d.value:g),c._wrapperState={initialChecked:x,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function nn(c,d){d=d.checked,d!=null&&_(c,"checked",d,!1)}function Ur(c,d){nn(c,d);var g=Xe(d.value),x=d.type;if(g!=null)x==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+g):c.value!==""+g&&(c.value=""+g);else if(x==="submit"||x==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Fx(c,d.type,g):d.hasOwnProperty("defaultValue")&&Fx(c,d.type,Xe(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function Rd(c,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var x=d.type;if(!(x!=="submit"&&x!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,g||d===c.value||(c.value=d),c.defaultValue=d}g=c.name,g!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,g!==""&&(c.name=g)}function Fx(c,d,g){(d!=="number"||jt(c.ownerDocument)!==c)&&(g==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+g&&(c.defaultValue=""+g))}var Nd=Array.isArray;function hc(c,d,g,x){if(c=c.options,d){d={};for(var E=0;E<g.length;E++)d["$"+g[E]]=!0;for(g=0;g<c.length;g++)E=d.hasOwnProperty("$"+c[g].value),c[g].selected!==E&&(c[g].selected=E),E&&x&&(c[g].defaultSelected=!0)}else{for(g=""+Xe(g),d=null,E=0;E<c.length;E++){if(c[E].value===g){c[E].selected=!0,x&&(c[E].defaultSelected=!0);return}d!==null||c[E].disabled||(d=c[E])}d!==null&&(d.selected=!0)}}function Mx(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function BT(c,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(n(92));if(Nd(g)){if(1<g.length)throw Error(n(93));g=g[0]}d=g}d==null&&(d=""),g=d}c._wrapperState={initialValue:Xe(g)}}function UT(c,d){var g=Xe(d.value),x=Xe(d.defaultValue);g!=null&&(g=""+g,g!==c.value&&(c.value=g),d.defaultValue==null&&c.defaultValue!==g&&(c.defaultValue=g)),x!=null&&(c.defaultValue=""+x)}function qT(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function WT(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dx(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?WT(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var a0,HT=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,x,E){MSApp.execUnsafeLocalFunction(function(){return c(d,g,x,E)})}:c}(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(a0=a0||document.createElement("div"),a0.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=a0.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function Fd(c,d){if(d){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=d;return}}c.textContent=d}var Md={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kV=["Webkit","ms","Moz","O"];Object.keys(Md).forEach(function(c){kV.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),Md[d]=Md[c]})});function VT(c,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||Md.hasOwnProperty(c)&&Md[c]?(""+d).trim():d+"px"}function GT(c,d){c=c.style;for(var g in d)if(d.hasOwnProperty(g)){var x=g.indexOf("--")===0,E=VT(g,d[g],x);g==="float"&&(g="cssFloat"),x?c.setProperty(g,E):c[g]=E}}var SV=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ox(c,d){if(d){if(SV[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function Px(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lx=null;function Ix(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var zx=null,pc=null,gc=null;function YT(c){if(c=th(c)){if(typeof zx!="function")throw Error(n(280));var d=c.stateNode;d&&(d=R0(d),zx(c.stateNode,c.type,d))}}function XT(c){pc?gc?gc.push(c):gc=[c]:pc=c}function KT(){if(pc){var c=pc,d=gc;if(gc=pc=null,YT(c),d)for(c=0;c<d.length;c++)YT(d[c])}}function QT(c,d){return c(d)}function ZT(){}var jx=!1;function JT(c,d,g){if(jx)return c(d,g);jx=!0;try{return QT(c,d,g)}finally{jx=!1,(pc!==null||gc!==null)&&(ZT(),KT())}}function Dd(c,d){var g=c.stateNode;if(g===null)return null;var x=R0(g);if(x===null)return null;g=x[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(c=c.type,x=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!x;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(n(231,d,typeof g));return g}var Bx=!1;if(a)try{var Od={};Object.defineProperty(Od,"passive",{get:function(){Bx=!0}}),window.addEventListener("test",Od,Od),window.removeEventListener("test",Od,Od)}catch{Bx=!1}function _V(c,d,g,x,E,S,T,D,z){var Q=Array.prototype.slice.call(arguments,3);try{d.apply(g,Q)}catch(se){this.onError(se)}}var Pd=!1,l0=null,u0=!1,Ux=null,CV={onError:function(c){Pd=!0,l0=c}};function $V(c,d,g,x,E,S,T,D,z){Pd=!1,l0=null,_V.apply(CV,arguments)}function AV(c,d,g,x,E,S,T,D,z){if($V.apply(this,arguments),Pd){if(Pd){var Q=l0;Pd=!1,l0=null}else throw Error(n(198));u0||(u0=!0,Ux=Q)}}function Rl(c){var d=c,g=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(g=d.return),c=d.return;while(c)}return d.tag===3?g:null}function eR(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function tR(c){if(Rl(c)!==c)throw Error(n(188))}function TV(c){var d=c.alternate;if(!d){if(d=Rl(c),d===null)throw Error(n(188));return d!==c?null:c}for(var g=c,x=d;;){var E=g.return;if(E===null)break;var S=E.alternate;if(S===null){if(x=E.return,x!==null){g=x;continue}break}if(E.child===S.child){for(S=E.child;S;){if(S===g)return tR(E),c;if(S===x)return tR(E),d;S=S.sibling}throw Error(n(188))}if(g.return!==x.return)g=E,x=S;else{for(var T=!1,D=E.child;D;){if(D===g){T=!0,g=E,x=S;break}if(D===x){T=!0,x=E,g=S;break}D=D.sibling}if(!T){for(D=S.child;D;){if(D===g){T=!0,g=S,x=E;break}if(D===x){T=!0,x=S,g=E;break}D=D.sibling}if(!T)throw Error(n(189))}}if(g.alternate!==x)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?c:d}function nR(c){return c=TV(c),c!==null?rR(c):null}function rR(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=rR(c);if(d!==null)return d;c=c.sibling}return null}var iR=t.unstable_scheduleCallback,oR=t.unstable_cancelCallback,RV=t.unstable_shouldYield,NV=t.unstable_requestPaint,Gt=t.unstable_now,FV=t.unstable_getCurrentPriorityLevel,qx=t.unstable_ImmediatePriority,sR=t.unstable_UserBlockingPriority,c0=t.unstable_NormalPriority,MV=t.unstable_LowPriority,aR=t.unstable_IdlePriority,f0=null,So=null;function DV(c){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(f0,c,void 0,(c.current.flags&128)===128)}catch{}}var Pi=Math.clz32?Math.clz32:LV,OV=Math.log,PV=Math.LN2;function LV(c){return c>>>=0,c===0?32:31-(OV(c)/PV|0)|0}var d0=64,h0=4194304;function Ld(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function p0(c,d){var g=c.pendingLanes;if(g===0)return 0;var x=0,E=c.suspendedLanes,S=c.pingedLanes,T=g&268435455;if(T!==0){var D=T&~E;D!==0?x=Ld(D):(S&=T,S!==0&&(x=Ld(S)))}else T=g&~E,T!==0?x=Ld(T):S!==0&&(x=Ld(S));if(x===0)return 0;if(d!==0&&d!==x&&(d&E)===0&&(E=x&-x,S=d&-d,E>=S||E===16&&(S&4194240)!==0))return d;if((x&4)!==0&&(x|=g&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=x;0<d;)g=31-Pi(d),E=1<<g,x|=c[g],d&=~E;return x}function IV(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zV(c,d){for(var g=c.suspendedLanes,x=c.pingedLanes,E=c.expirationTimes,S=c.pendingLanes;0<S;){var T=31-Pi(S),D=1<<T,z=E[T];z===-1?((D&g)===0||(D&x)!==0)&&(E[T]=IV(D,d)):z<=d&&(c.expiredLanes|=D),S&=~D}}function Wx(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function lR(){var c=d0;return d0<<=1,(d0&4194240)===0&&(d0=64),c}function Hx(c){for(var d=[],g=0;31>g;g++)d.push(c);return d}function Id(c,d,g){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-Pi(d),c[d]=g}function jV(c,d){var g=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var x=c.eventTimes;for(c=c.expirationTimes;0<g;){var E=31-Pi(g),S=1<<E;d[E]=0,x[E]=-1,c[E]=-1,g&=~S}}function Vx(c,d){var g=c.entangledLanes|=d;for(c=c.entanglements;g;){var x=31-Pi(g),E=1<<x;E&d|c[x]&d&&(c[x]|=d),g&=~E}}var gt=0;function uR(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var cR,Gx,fR,dR,hR,Yx=!1,g0=[],ca=null,fa=null,da=null,zd=new Map,jd=new Map,ha=[],BV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pR(c,d){switch(c){case"focusin":case"focusout":ca=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":da=null;break;case"pointerover":case"pointerout":zd.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":jd.delete(d.pointerId)}}function Bd(c,d,g,x,E,S){return c===null||c.nativeEvent!==S?(c={blockedOn:d,domEventName:g,eventSystemFlags:x,nativeEvent:S,targetContainers:[E]},d!==null&&(d=th(d),d!==null&&Gx(d)),c):(c.eventSystemFlags|=x,d=c.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),c)}function UV(c,d,g,x,E){switch(d){case"focusin":return ca=Bd(ca,c,d,g,x,E),!0;case"dragenter":return fa=Bd(fa,c,d,g,x,E),!0;case"mouseover":return da=Bd(da,c,d,g,x,E),!0;case"pointerover":var S=E.pointerId;return zd.set(S,Bd(zd.get(S)||null,c,d,g,x,E)),!0;case"gotpointercapture":return S=E.pointerId,jd.set(S,Bd(jd.get(S)||null,c,d,g,x,E)),!0}return!1}function gR(c){var d=Nl(c.target);if(d!==null){var g=Rl(d);if(g!==null){if(d=g.tag,d===13){if(d=eR(g),d!==null){c.blockedOn=d,hR(c.priority,function(){fR(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function m0(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var g=Kx(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(g===null){g=c.nativeEvent;var x=new g.constructor(g.type,g);Lx=x,g.target.dispatchEvent(x),Lx=null}else return d=th(g),d!==null&&Gx(d),c.blockedOn=g,!1;d.shift()}return!0}function mR(c,d,g){m0(c)&&g.delete(d)}function qV(){Yx=!1,ca!==null&&m0(ca)&&(ca=null),fa!==null&&m0(fa)&&(fa=null),da!==null&&m0(da)&&(da=null),zd.forEach(mR),jd.forEach(mR)}function Ud(c,d){c.blockedOn===d&&(c.blockedOn=null,Yx||(Yx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qV)))}function qd(c){function d(E){return Ud(E,c)}if(0<g0.length){Ud(g0[0],c);for(var g=1;g<g0.length;g++){var x=g0[g];x.blockedOn===c&&(x.blockedOn=null)}}for(ca!==null&&Ud(ca,c),fa!==null&&Ud(fa,c),da!==null&&Ud(da,c),zd.forEach(d),jd.forEach(d),g=0;g<ha.length;g++)x=ha[g],x.blockedOn===c&&(x.blockedOn=null);for(;0<ha.length&&(g=ha[0],g.blockedOn===null);)gR(g),g.blockedOn===null&&ha.shift()}var mc=C.ReactCurrentBatchConfig,y0=!0;function WV(c,d,g,x){var E=gt,S=mc.transition;mc.transition=null;try{gt=1,Xx(c,d,g,x)}finally{gt=E,mc.transition=S}}function HV(c,d,g,x){var E=gt,S=mc.transition;mc.transition=null;try{gt=4,Xx(c,d,g,x)}finally{gt=E,mc.transition=S}}function Xx(c,d,g,x){if(y0){var E=Kx(c,d,g,x);if(E===null)hw(c,d,x,v0,g),pR(c,x);else if(UV(E,c,d,g,x))x.stopPropagation();else if(pR(c,x),d&4&&-1<BV.indexOf(c)){for(;E!==null;){var S=th(E);if(S!==null&&cR(S),S=Kx(c,d,g,x),S===null&&hw(c,d,x,v0,g),S===E)break;E=S}E!==null&&x.stopPropagation()}else hw(c,d,x,null,g)}}var v0=null;function Kx(c,d,g,x){if(v0=null,c=Ix(x),c=Nl(c),c!==null)if(d=Rl(c),d===null)c=null;else if(g=d.tag,g===13){if(c=eR(d),c!==null)return c;c=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return v0=c,null}function yR(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FV()){case qx:return 1;case sR:return 4;case c0:case MV:return 16;case aR:return 536870912;default:return 16}default:return 16}}var pa=null,Qx=null,x0=null;function vR(){if(x0)return x0;var c,d=Qx,g=d.length,x,E="value"in pa?pa.value:pa.textContent,S=E.length;for(c=0;c<g&&d[c]===E[c];c++);var T=g-c;for(x=1;x<=T&&d[g-x]===E[S-x];x++);return x0=E.slice(c,1<x?1-x:void 0)}function w0(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function b0(){return!0}function xR(){return!1}function qr(c){function d(g,x,E,S,T){this._reactName=g,this._targetInst=E,this.type=x,this.nativeEvent=S,this.target=T,this.currentTarget=null;for(var D in c)c.hasOwnProperty(D)&&(g=c[D],this[D]=g?g(S):S[D]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?b0:xR,this.isPropagationStopped=xR,this}return J(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=b0)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=b0)},persist:function(){},isPersistent:b0}),d}var yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zx=qr(yc),Wd=J({},yc,{view:0,detail:0}),VV=qr(Wd),Jx,ew,Hd,E0=J({},Wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nw,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Hd&&(Hd&&c.type==="mousemove"?(Jx=c.screenX-Hd.screenX,ew=c.screenY-Hd.screenY):ew=Jx=0,Hd=c),Jx)},movementY:function(c){return"movementY"in c?c.movementY:ew}}),wR=qr(E0),GV=J({},E0,{dataTransfer:0}),YV=qr(GV),XV=J({},Wd,{relatedTarget:0}),tw=qr(XV),KV=J({},yc,{animationName:0,elapsedTime:0,pseudoElement:0}),QV=qr(KV),ZV=J({},yc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),JV=qr(ZV),eG=J({},yc,{data:0}),bR=qr(eG),tG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iG(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=rG[c])?!!d[c]:!1}function nw(){return iG}var oG=J({},Wd,{key:function(c){if(c.key){var d=tG[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=w0(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?nG[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nw,charCode:function(c){return c.type==="keypress"?w0(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?w0(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),sG=qr(oG),aG=J({},E0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ER=qr(aG),lG=J({},Wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nw}),uG=qr(lG),cG=J({},yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),fG=qr(cG),dG=J({},E0,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),hG=qr(dG),pG=[9,13,27,32],rw=a&&"CompositionEvent"in window,Vd=null;a&&"documentMode"in document&&(Vd=document.documentMode);var gG=a&&"TextEvent"in window&&!Vd,kR=a&&(!rw||Vd&&8<Vd&&11>=Vd),SR=" ",_R=!1;function CR(c,d){switch(c){case"keyup":return pG.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $R(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var vc=!1;function mG(c,d){switch(c){case"compositionend":return $R(d);case"keypress":return d.which!==32?null:(_R=!0,SR);case"textInput":return c=d.data,c===SR&&_R?null:c;default:return null}}function yG(c,d){if(vc)return c==="compositionend"||!rw&&CR(c,d)?(c=vR(),x0=Qx=pa=null,vc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return kR&&d.locale!=="ko"?null:d.data;default:return null}}var vG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AR(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!vG[c.type]:d==="textarea"}function TR(c,d,g,x){XT(x),d=$0(d,"onChange"),0<d.length&&(g=new Zx("onChange","change",null,g,x),c.push({event:g,listeners:d}))}var Gd=null,Yd=null;function xG(c){GR(c,0)}function k0(c){var d=kc(c);if(ue(d))return c}function wG(c,d){if(c==="change")return d}var RR=!1;if(a){var iw;if(a){var ow="oninput"in document;if(!ow){var NR=document.createElement("div");NR.setAttribute("oninput","return;"),ow=typeof NR.oninput=="function"}iw=ow}else iw=!1;RR=iw&&(!document.documentMode||9<document.documentMode)}function FR(){Gd&&(Gd.detachEvent("onpropertychange",MR),Yd=Gd=null)}function MR(c){if(c.propertyName==="value"&&k0(Yd)){var d=[];TR(d,Yd,c,Ix(c)),JT(xG,d)}}function bG(c,d,g){c==="focusin"?(FR(),Gd=d,Yd=g,Gd.attachEvent("onpropertychange",MR)):c==="focusout"&&FR()}function EG(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return k0(Yd)}function kG(c,d){if(c==="click")return k0(d)}function SG(c,d){if(c==="input"||c==="change")return k0(d)}function _G(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Li=typeof Object.is=="function"?Object.is:_G;function Xd(c,d){if(Li(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var g=Object.keys(c),x=Object.keys(d);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var E=g[x];if(!l.call(d,E)||!Li(c[E],d[E]))return!1}return!0}function DR(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function OR(c,d){var g=DR(c);c=0;for(var x;g;){if(g.nodeType===3){if(x=c+g.textContent.length,c<=d&&x>=d)return{node:g,offset:d-c};c=x}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=DR(g)}}function PR(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?PR(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function LR(){for(var c=window,d=jt();d instanceof c.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)c=d.contentWindow;else break;d=jt(c.document)}return d}function sw(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function CG(c){var d=LR(),g=c.focusedElem,x=c.selectionRange;if(d!==g&&g&&g.ownerDocument&&PR(g.ownerDocument.documentElement,g)){if(x!==null&&sw(g)){if(d=x.start,c=x.end,c===void 0&&(c=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(c,g.value.length);else if(c=(d=g.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var E=g.textContent.length,S=Math.min(x.start,E);x=x.end===void 0?S:Math.min(x.end,E),!c.extend&&S>x&&(E=x,x=S,S=E),E=OR(g,S);var T=OR(g,x);E&&T&&(c.rangeCount!==1||c.anchorNode!==E.node||c.anchorOffset!==E.offset||c.focusNode!==T.node||c.focusOffset!==T.offset)&&(d=d.createRange(),d.setStart(E.node,E.offset),c.removeAllRanges(),S>x?(c.addRange(d),c.extend(T.node,T.offset)):(d.setEnd(T.node,T.offset),c.addRange(d)))}}for(d=[],c=g;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)c=d[g],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var $G=a&&"documentMode"in document&&11>=document.documentMode,xc=null,aw=null,Kd=null,lw=!1;function IR(c,d,g){var x=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;lw||xc==null||xc!==jt(x)||(x=xc,"selectionStart"in x&&sw(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Kd&&Xd(Kd,x)||(Kd=x,x=$0(aw,"onSelect"),0<x.length&&(d=new Zx("onSelect","select",null,d,g),c.push({event:d,listeners:x}),d.target=xc)))}function S0(c,d){var g={};return g[c.toLowerCase()]=d.toLowerCase(),g["Webkit"+c]="webkit"+d,g["Moz"+c]="moz"+d,g}var wc={animationend:S0("Animation","AnimationEnd"),animationiteration:S0("Animation","AnimationIteration"),animationstart:S0("Animation","AnimationStart"),transitionend:S0("Transition","TransitionEnd")},uw={},zR={};a&&(zR=document.createElement("div").style,"AnimationEvent"in window||(delete wc.animationend.animation,delete wc.animationiteration.animation,delete wc.animationstart.animation),"TransitionEvent"in window||delete wc.transitionend.transition);function _0(c){if(uw[c])return uw[c];if(!wc[c])return c;var d=wc[c],g;for(g in d)if(d.hasOwnProperty(g)&&g in zR)return uw[c]=d[g];return c}var jR=_0("animationend"),BR=_0("animationiteration"),UR=_0("animationstart"),qR=_0("transitionend"),WR=new Map,HR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(c,d){WR.set(c,d),o(d,[c])}for(var cw=0;cw<HR.length;cw++){var fw=HR[cw],AG=fw.toLowerCase(),TG=fw[0].toUpperCase()+fw.slice(1);ga(AG,"on"+TG)}ga(jR,"onAnimationEnd"),ga(BR,"onAnimationIteration"),ga(UR,"onAnimationStart"),ga("dblclick","onDoubleClick"),ga("focusin","onFocus"),ga("focusout","onBlur"),ga(qR,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RG=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qd));function VR(c,d,g){var x=c.type||"unknown-event";c.currentTarget=g,AV(x,d,void 0,c),c.currentTarget=null}function GR(c,d){d=(d&4)!==0;for(var g=0;g<c.length;g++){var x=c[g],E=x.event;x=x.listeners;e:{var S=void 0;if(d)for(var T=x.length-1;0<=T;T--){var D=x[T],z=D.instance,Q=D.currentTarget;if(D=D.listener,z!==S&&E.isPropagationStopped())break e;VR(E,D,Q),S=z}else for(T=0;T<x.length;T++){if(D=x[T],z=D.instance,Q=D.currentTarget,D=D.listener,z!==S&&E.isPropagationStopped())break e;VR(E,D,Q),S=z}}}if(u0)throw c=Ux,u0=!1,Ux=null,c}function Ct(c,d){var g=d[xw];g===void 0&&(g=d[xw]=new Set);var x=c+"__bubble";g.has(x)||(YR(d,c,2,!1),g.add(x))}function dw(c,d,g){var x=0;d&&(x|=4),YR(g,c,x,d)}var C0="_reactListening"+Math.random().toString(36).slice(2);function Zd(c){if(!c[C0]){c[C0]=!0,r.forEach(function(g){g!=="selectionchange"&&(RG.has(g)||dw(g,!1,c),dw(g,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[C0]||(d[C0]=!0,dw("selectionchange",!1,d))}}function YR(c,d,g,x){switch(yR(d)){case 1:var E=WV;break;case 4:E=HV;break;default:E=Xx}g=E.bind(null,d,g,c),E=void 0,!Bx||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),x?E!==void 0?c.addEventListener(d,g,{capture:!0,passive:E}):c.addEventListener(d,g,!0):E!==void 0?c.addEventListener(d,g,{passive:E}):c.addEventListener(d,g,!1)}function hw(c,d,g,x,E){var S=x;if((d&1)===0&&(d&2)===0&&x!==null)e:for(;;){if(x===null)return;var T=x.tag;if(T===3||T===4){var D=x.stateNode.containerInfo;if(D===E||D.nodeType===8&&D.parentNode===E)break;if(T===4)for(T=x.return;T!==null;){var z=T.tag;if((z===3||z===4)&&(z=T.stateNode.containerInfo,z===E||z.nodeType===8&&z.parentNode===E))return;T=T.return}for(;D!==null;){if(T=Nl(D),T===null)return;if(z=T.tag,z===5||z===6){x=S=T;continue e}D=D.parentNode}}x=x.return}JT(function(){var Q=S,se=Ix(g),ce=[];e:{var oe=WR.get(c);if(oe!==void 0){var Se=Zx,$e=c;switch(c){case"keypress":if(w0(g)===0)break e;case"keydown":case"keyup":Se=sG;break;case"focusin":$e="focus",Se=tw;break;case"focusout":$e="blur",Se=tw;break;case"beforeblur":case"afterblur":Se=tw;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=wR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=YV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=uG;break;case jR:case BR:case UR:Se=QV;break;case qR:Se=fG;break;case"scroll":Se=VV;break;case"wheel":Se=hG;break;case"copy":case"cut":case"paste":Se=JV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=ER}var Ae=(d&4)!==0,Yt=!Ae&&c==="scroll",V=Ae?oe!==null?oe+"Capture":null:oe;Ae=[];for(var B=Q,Y;B!==null;){Y=B;var ge=Y.stateNode;if(Y.tag===5&&ge!==null&&(Y=ge,V!==null&&(ge=Dd(B,V),ge!=null&&Ae.push(Jd(B,ge,Y)))),Yt)break;B=B.return}0<Ae.length&&(oe=new Se(oe,$e,null,g,se),ce.push({event:oe,listeners:Ae}))}}if((d&7)===0){e:{if(oe=c==="mouseover"||c==="pointerover",Se=c==="mouseout"||c==="pointerout",oe&&g!==Lx&&($e=g.relatedTarget||g.fromElement)&&(Nl($e)||$e[ms]))break e;if((Se||oe)&&(oe=se.window===se?se:(oe=se.ownerDocument)?oe.defaultView||oe.parentWindow:window,Se?($e=g.relatedTarget||g.toElement,Se=Q,$e=$e?Nl($e):null,$e!==null&&(Yt=Rl($e),$e!==Yt||$e.tag!==5&&$e.tag!==6)&&($e=null)):(Se=null,$e=Q),Se!==$e)){if(Ae=wR,ge="onMouseLeave",V="onMouseEnter",B="mouse",(c==="pointerout"||c==="pointerover")&&(Ae=ER,ge="onPointerLeave",V="onPointerEnter",B="pointer"),Yt=Se==null?oe:kc(Se),Y=$e==null?oe:kc($e),oe=new Ae(ge,B+"leave",Se,g,se),oe.target=Yt,oe.relatedTarget=Y,ge=null,Nl(se)===Q&&(Ae=new Ae(V,B+"enter",$e,g,se),Ae.target=Y,Ae.relatedTarget=Yt,ge=Ae),Yt=ge,Se&&$e)t:{for(Ae=Se,V=$e,B=0,Y=Ae;Y;Y=bc(Y))B++;for(Y=0,ge=V;ge;ge=bc(ge))Y++;for(;0<B-Y;)Ae=bc(Ae),B--;for(;0<Y-B;)V=bc(V),Y--;for(;B--;){if(Ae===V||V!==null&&Ae===V.alternate)break t;Ae=bc(Ae),V=bc(V)}Ae=null}else Ae=null;Se!==null&&XR(ce,oe,Se,Ae,!1),$e!==null&&Yt!==null&&XR(ce,Yt,$e,Ae,!0)}}e:{if(oe=Q?kc(Q):window,Se=oe.nodeName&&oe.nodeName.toLowerCase(),Se==="select"||Se==="input"&&oe.type==="file")var Ne=wG;else if(AR(oe))if(RR)Ne=SG;else{Ne=EG;var Ie=bG}else(Se=oe.nodeName)&&Se.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Ne=kG);if(Ne&&(Ne=Ne(c,Q))){TR(ce,Ne,g,se);break e}Ie&&Ie(c,oe,Q),c==="focusout"&&(Ie=oe._wrapperState)&&Ie.controlled&&oe.type==="number"&&Fx(oe,"number",oe.value)}switch(Ie=Q?kc(Q):window,c){case"focusin":(AR(Ie)||Ie.contentEditable==="true")&&(xc=Ie,aw=Q,Kd=null);break;case"focusout":Kd=aw=xc=null;break;case"mousedown":lw=!0;break;case"contextmenu":case"mouseup":case"dragend":lw=!1,IR(ce,g,se);break;case"selectionchange":if($G)break;case"keydown":case"keyup":IR(ce,g,se)}var ze;if(rw)e:{switch(c){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else vc?CR(c,g)&&(Ue="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(Ue="onCompositionStart");Ue&&(kR&&g.locale!=="ko"&&(vc||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&vc&&(ze=vR()):(pa=se,Qx="value"in pa?pa.value:pa.textContent,vc=!0)),Ie=$0(Q,Ue),0<Ie.length&&(Ue=new bR(Ue,c,null,g,se),ce.push({event:Ue,listeners:Ie}),ze?Ue.data=ze:(ze=$R(g),ze!==null&&(Ue.data=ze)))),(ze=gG?mG(c,g):yG(c,g))&&(Q=$0(Q,"onBeforeInput"),0<Q.length&&(se=new bR("onBeforeInput","beforeinput",null,g,se),ce.push({event:se,listeners:Q}),se.data=ze))}GR(ce,d)})}function Jd(c,d,g){return{instance:c,listener:d,currentTarget:g}}function $0(c,d){for(var g=d+"Capture",x=[];c!==null;){var E=c,S=E.stateNode;E.tag===5&&S!==null&&(E=S,S=Dd(c,g),S!=null&&x.unshift(Jd(c,S,E)),S=Dd(c,d),S!=null&&x.push(Jd(c,S,E))),c=c.return}return x}function bc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function XR(c,d,g,x,E){for(var S=d._reactName,T=[];g!==null&&g!==x;){var D=g,z=D.alternate,Q=D.stateNode;if(z!==null&&z===x)break;D.tag===5&&Q!==null&&(D=Q,E?(z=Dd(g,S),z!=null&&T.unshift(Jd(g,z,D))):E||(z=Dd(g,S),z!=null&&T.push(Jd(g,z,D)))),g=g.return}T.length!==0&&c.push({event:d,listeners:T})}var NG=/\r\n?/g,FG=/\u0000|\uFFFD/g;function KR(c){return(typeof c=="string"?c:""+c).replace(NG,`
`).replace(FG,"")}function A0(c,d,g){if(d=KR(d),KR(c)!==d&&g)throw Error(n(425))}function T0(){}var pw=null,gw=null;function mw(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var yw=typeof setTimeout=="function"?setTimeout:void 0,MG=typeof clearTimeout=="function"?clearTimeout:void 0,QR=typeof Promise=="function"?Promise:void 0,DG=typeof queueMicrotask=="function"?queueMicrotask:typeof QR<"u"?function(c){return QR.resolve(null).then(c).catch(OG)}:yw;function OG(c){setTimeout(function(){throw c})}function vw(c,d){var g=d,x=0;do{var E=g.nextSibling;if(c.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(x===0){c.removeChild(E),qd(d);return}x--}else g!=="$"&&g!=="$?"&&g!=="$!"||x++;g=E}while(g);qd(d)}function ma(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function ZR(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return c;d--}else g==="/$"&&d++}c=c.previousSibling}return null}var Ec=Math.random().toString(36).slice(2),_o="__reactFiber$"+Ec,eh="__reactProps$"+Ec,ms="__reactContainer$"+Ec,xw="__reactEvents$"+Ec,PG="__reactListeners$"+Ec,LG="__reactHandles$"+Ec;function Nl(c){var d=c[_o];if(d)return d;for(var g=c.parentNode;g;){if(d=g[ms]||g[_o]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(c=ZR(c);c!==null;){if(g=c[_o])return g;c=ZR(c)}return d}c=g,g=c.parentNode}return null}function th(c){return c=c[_o]||c[ms],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function kc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(n(33))}function R0(c){return c[eh]||null}var ww=[],Sc=-1;function ya(c){return{current:c}}function $t(c){0>Sc||(c.current=ww[Sc],ww[Sc]=null,Sc--)}function St(c,d){Sc++,ww[Sc]=c.current,c.current=d}var va={},Ln=ya(va),Er=ya(!1),Fl=va;function _c(c,d){var g=c.type.contextTypes;if(!g)return va;var x=c.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===d)return x.__reactInternalMemoizedMaskedChildContext;var E={},S;for(S in g)E[S]=d[S];return x&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=E),E}function kr(c){return c=c.childContextTypes,c!=null}function N0(){$t(Er),$t(Ln)}function JR(c,d,g){if(Ln.current!==va)throw Error(n(168));St(Ln,d),St(Er,g)}function e4(c,d,g){var x=c.stateNode;if(d=d.childContextTypes,typeof x.getChildContext!="function")return g;x=x.getChildContext();for(var E in x)if(!(E in d))throw Error(n(108,nt(c)||"Unknown",E));return J({},g,x)}function F0(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||va,Fl=Ln.current,St(Ln,c),St(Er,Er.current),!0}function t4(c,d,g){var x=c.stateNode;if(!x)throw Error(n(169));g?(c=e4(c,d,Fl),x.__reactInternalMemoizedMergedChildContext=c,$t(Er),$t(Ln),St(Ln,c)):$t(Er),St(Er,g)}var ys=null,M0=!1,bw=!1;function n4(c){ys===null?ys=[c]:ys.push(c)}function IG(c){M0=!0,n4(c)}function xa(){if(!bw&&ys!==null){bw=!0;var c=0,d=gt;try{var g=ys;for(gt=1;c<g.length;c++){var x=g[c];do x=x(!0);while(x!==null)}ys=null,M0=!1}catch(E){throw ys!==null&&(ys=ys.slice(c+1)),iR(qx,xa),E}finally{gt=d,bw=!1}}return null}var Cc=[],$c=0,D0=null,O0=0,li=[],ui=0,Ml=null,vs=1,xs="";function Dl(c,d){Cc[$c++]=O0,Cc[$c++]=D0,D0=c,O0=d}function r4(c,d,g){li[ui++]=vs,li[ui++]=xs,li[ui++]=Ml,Ml=c;var x=vs;c=xs;var E=32-Pi(x)-1;x&=~(1<<E),g+=1;var S=32-Pi(d)+E;if(30<S){var T=E-E%5;S=(x&(1<<T)-1).toString(32),x>>=T,E-=T,vs=1<<32-Pi(d)+E|g<<E|x,xs=S+c}else vs=1<<S|g<<E|x,xs=c}function Ew(c){c.return!==null&&(Dl(c,1),r4(c,1,0))}function kw(c){for(;c===D0;)D0=Cc[--$c],Cc[$c]=null,O0=Cc[--$c],Cc[$c]=null;for(;c===Ml;)Ml=li[--ui],li[ui]=null,xs=li[--ui],li[ui]=null,vs=li[--ui],li[ui]=null}var Wr=null,Hr=null,Rt=!1,Ii=null;function i4(c,d){var g=hi(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=c,d=c.deletions,d===null?(c.deletions=[g],c.flags|=16):d.push(g)}function o4(c,d){switch(c.tag){case 5:var g=c.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,Wr=c,Hr=ma(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,Wr=c,Hr=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=Ml!==null?{id:vs,overflow:xs}:null,c.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=hi(18,null,null,0),g.stateNode=d,g.return=c,c.child=g,Wr=c,Hr=null,!0):!1;default:return!1}}function Sw(c){return(c.mode&1)!==0&&(c.flags&128)===0}function _w(c){if(Rt){var d=Hr;if(d){var g=d;if(!o4(c,d)){if(Sw(c))throw Error(n(418));d=ma(g.nextSibling);var x=Wr;d&&o4(c,d)?i4(x,g):(c.flags=c.flags&-4097|2,Rt=!1,Wr=c)}}else{if(Sw(c))throw Error(n(418));c.flags=c.flags&-4097|2,Rt=!1,Wr=c}}}function s4(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Wr=c}function P0(c){if(c!==Wr)return!1;if(!Rt)return s4(c),Rt=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!mw(c.type,c.memoizedProps)),d&&(d=Hr)){if(Sw(c))throw a4(),Error(n(418));for(;d;)i4(c,d),d=ma(d.nextSibling)}if(s4(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"){if(d===0){Hr=ma(c.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}c=c.nextSibling}Hr=null}}else Hr=Wr?ma(c.stateNode.nextSibling):null;return!0}function a4(){for(var c=Hr;c;)c=ma(c.nextSibling)}function Ac(){Hr=Wr=null,Rt=!1}function Cw(c){Ii===null?Ii=[c]:Ii.push(c)}var zG=C.ReactCurrentBatchConfig;function nh(c,d,g){if(c=g.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var x=g.stateNode}if(!x)throw Error(n(147,c));var E=x,S=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===S?d.ref:(d=function(T){var D=E.refs;T===null?delete D[S]:D[S]=T},d._stringRef=S,d)}if(typeof c!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,c))}return c}function L0(c,d){throw c=Object.prototype.toString.call(d),Error(n(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function l4(c){var d=c._init;return d(c._payload)}function u4(c){function d(V,B){if(c){var Y=V.deletions;Y===null?(V.deletions=[B],V.flags|=16):Y.push(B)}}function g(V,B){if(!c)return null;for(;B!==null;)d(V,B),B=B.sibling;return null}function x(V,B){for(V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function E(V,B){return V=$a(V,B),V.index=0,V.sibling=null,V}function S(V,B,Y){return V.index=Y,c?(Y=V.alternate,Y!==null?(Y=Y.index,Y<B?(V.flags|=2,B):Y):(V.flags|=2,B)):(V.flags|=1048576,B)}function T(V){return c&&V.alternate===null&&(V.flags|=2),V}function D(V,B,Y,ge){return B===null||B.tag!==6?(B=yb(Y,V.mode,ge),B.return=V,B):(B=E(B,Y),B.return=V,B)}function z(V,B,Y,ge){var Ne=Y.type;return Ne===A?se(V,B,Y.props.children,ge,Y.key):B!==null&&(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===U&&l4(Ne)===B.type)?(ge=E(B,Y.props),ge.ref=nh(V,B,Y),ge.return=V,ge):(ge=am(Y.type,Y.key,Y.props,null,V.mode,ge),ge.ref=nh(V,B,Y),ge.return=V,ge)}function Q(V,B,Y,ge){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=vb(Y,V.mode,ge),B.return=V,B):(B=E(B,Y.children||[]),B.return=V,B)}function se(V,B,Y,ge,Ne){return B===null||B.tag!==7?(B=Ul(Y,V.mode,ge,Ne),B.return=V,B):(B=E(B,Y),B.return=V,B)}function ce(V,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number")return B=yb(""+B,V.mode,Y),B.return=V,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case $:return Y=am(B.type,B.key,B.props,null,V.mode,Y),Y.ref=nh(V,null,B),Y.return=V,Y;case R:return B=vb(B,V.mode,Y),B.return=V,B;case U:var ge=B._init;return ce(V,ge(B._payload),Y)}if(Nd(B)||H(B))return B=Ul(B,V.mode,Y,null),B.return=V,B;L0(V,B)}return null}function oe(V,B,Y,ge){var Ne=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ne!==null?null:D(V,B,""+Y,ge);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:return Y.key===Ne?z(V,B,Y,ge):null;case R:return Y.key===Ne?Q(V,B,Y,ge):null;case U:return Ne=Y._init,oe(V,B,Ne(Y._payload),ge)}if(Nd(Y)||H(Y))return Ne!==null?null:se(V,B,Y,ge,null);L0(V,Y)}return null}function Se(V,B,Y,ge,Ne){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return V=V.get(Y)||null,D(B,V,""+ge,Ne);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case $:return V=V.get(ge.key===null?Y:ge.key)||null,z(B,V,ge,Ne);case R:return V=V.get(ge.key===null?Y:ge.key)||null,Q(B,V,ge,Ne);case U:var Ie=ge._init;return Se(V,B,Y,Ie(ge._payload),Ne)}if(Nd(ge)||H(ge))return V=V.get(Y)||null,se(B,V,ge,Ne,null);L0(B,ge)}return null}function $e(V,B,Y,ge){for(var Ne=null,Ie=null,ze=B,Ue=B=0,gn=null;ze!==null&&Ue<Y.length;Ue++){ze.index>Ue?(gn=ze,ze=null):gn=ze.sibling;var st=oe(V,ze,Y[Ue],ge);if(st===null){ze===null&&(ze=gn);break}c&&ze&&st.alternate===null&&d(V,ze),B=S(st,B,Ue),Ie===null?Ne=st:Ie.sibling=st,Ie=st,ze=gn}if(Ue===Y.length)return g(V,ze),Rt&&Dl(V,Ue),Ne;if(ze===null){for(;Ue<Y.length;Ue++)ze=ce(V,Y[Ue],ge),ze!==null&&(B=S(ze,B,Ue),Ie===null?Ne=ze:Ie.sibling=ze,Ie=ze);return Rt&&Dl(V,Ue),Ne}for(ze=x(V,ze);Ue<Y.length;Ue++)gn=Se(ze,V,Ue,Y[Ue],ge),gn!==null&&(c&&gn.alternate!==null&&ze.delete(gn.key===null?Ue:gn.key),B=S(gn,B,Ue),Ie===null?Ne=gn:Ie.sibling=gn,Ie=gn);return c&&ze.forEach(function(Aa){return d(V,Aa)}),Rt&&Dl(V,Ue),Ne}function Ae(V,B,Y,ge){var Ne=H(Y);if(typeof Ne!="function")throw Error(n(150));if(Y=Ne.call(Y),Y==null)throw Error(n(151));for(var Ie=Ne=null,ze=B,Ue=B=0,gn=null,st=Y.next();ze!==null&&!st.done;Ue++,st=Y.next()){ze.index>Ue?(gn=ze,ze=null):gn=ze.sibling;var Aa=oe(V,ze,st.value,ge);if(Aa===null){ze===null&&(ze=gn);break}c&&ze&&Aa.alternate===null&&d(V,ze),B=S(Aa,B,Ue),Ie===null?Ne=Aa:Ie.sibling=Aa,Ie=Aa,ze=gn}if(st.done)return g(V,ze),Rt&&Dl(V,Ue),Ne;if(ze===null){for(;!st.done;Ue++,st=Y.next())st=ce(V,st.value,ge),st!==null&&(B=S(st,B,Ue),Ie===null?Ne=st:Ie.sibling=st,Ie=st);return Rt&&Dl(V,Ue),Ne}for(ze=x(V,ze);!st.done;Ue++,st=Y.next())st=Se(ze,V,Ue,st.value,ge),st!==null&&(c&&st.alternate!==null&&ze.delete(st.key===null?Ue:st.key),B=S(st,B,Ue),Ie===null?Ne=st:Ie.sibling=st,Ie=st);return c&&ze.forEach(function(vY){return d(V,vY)}),Rt&&Dl(V,Ue),Ne}function Yt(V,B,Y,ge){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:e:{for(var Ne=Y.key,Ie=B;Ie!==null;){if(Ie.key===Ne){if(Ne=Y.type,Ne===A){if(Ie.tag===7){g(V,Ie.sibling),B=E(Ie,Y.props.children),B.return=V,V=B;break e}}else if(Ie.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===U&&l4(Ne)===Ie.type){g(V,Ie.sibling),B=E(Ie,Y.props),B.ref=nh(V,Ie,Y),B.return=V,V=B;break e}g(V,Ie);break}else d(V,Ie);Ie=Ie.sibling}Y.type===A?(B=Ul(Y.props.children,V.mode,ge,Y.key),B.return=V,V=B):(ge=am(Y.type,Y.key,Y.props,null,V.mode,ge),ge.ref=nh(V,B,Y),ge.return=V,V=ge)}return T(V);case R:e:{for(Ie=Y.key;B!==null;){if(B.key===Ie)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){g(V,B.sibling),B=E(B,Y.children||[]),B.return=V,V=B;break e}else{g(V,B);break}else d(V,B);B=B.sibling}B=vb(Y,V.mode,ge),B.return=V,V=B}return T(V);case U:return Ie=Y._init,Yt(V,B,Ie(Y._payload),ge)}if(Nd(Y))return $e(V,B,Y,ge);if(H(Y))return Ae(V,B,Y,ge);L0(V,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,B!==null&&B.tag===6?(g(V,B.sibling),B=E(B,Y),B.return=V,V=B):(g(V,B),B=yb(Y,V.mode,ge),B.return=V,V=B),T(V)):g(V,B)}return Yt}var Tc=u4(!0),c4=u4(!1),I0=ya(null),z0=null,Rc=null,$w=null;function Aw(){$w=Rc=z0=null}function Tw(c){var d=I0.current;$t(I0),c._currentValue=d}function Rw(c,d,g){for(;c!==null;){var x=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,x!==null&&(x.childLanes|=d)):x!==null&&(x.childLanes&d)!==d&&(x.childLanes|=d),c===g)break;c=c.return}}function Nc(c,d){z0=c,$w=Rc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(Sr=!0),c.firstContext=null)}function ci(c){var d=c._currentValue;if($w!==c)if(c={context:c,memoizedValue:d,next:null},Rc===null){if(z0===null)throw Error(n(308));Rc=c,z0.dependencies={lanes:0,firstContext:c}}else Rc=Rc.next=c;return d}var Ol=null;function Nw(c){Ol===null?Ol=[c]:Ol.push(c)}function f4(c,d,g,x){var E=d.interleaved;return E===null?(g.next=g,Nw(d)):(g.next=E.next,E.next=g),d.interleaved=g,ws(c,x)}function ws(c,d){c.lanes|=d;var g=c.alternate;for(g!==null&&(g.lanes|=d),g=c,c=c.return;c!==null;)c.childLanes|=d,g=c.alternate,g!==null&&(g.childLanes|=d),g=c,c=c.return;return g.tag===3?g.stateNode:null}var wa=!1;function Fw(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d4(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function bs(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function ba(c,d,g){var x=c.updateQueue;if(x===null)return null;if(x=x.shared,(ot&2)!==0){var E=x.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),x.pending=d,ws(c,g)}return E=x.interleaved,E===null?(d.next=d,Nw(x)):(d.next=E.next,E.next=d),x.interleaved=d,ws(c,g)}function j0(c,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var x=d.lanes;x&=c.pendingLanes,g|=x,d.lanes=g,Vx(c,g)}}function h4(c,d){var g=c.updateQueue,x=c.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var E=null,S=null;if(g=g.firstBaseUpdate,g!==null){do{var T={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};S===null?E=S=T:S=S.next=T,g=g.next}while(g!==null);S===null?E=S=d:S=S.next=d}else E=S=d;g={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:S,shared:x.shared,effects:x.effects},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=d:c.next=d,g.lastBaseUpdate=d}function B0(c,d,g,x){var E=c.updateQueue;wa=!1;var S=E.firstBaseUpdate,T=E.lastBaseUpdate,D=E.shared.pending;if(D!==null){E.shared.pending=null;var z=D,Q=z.next;z.next=null,T===null?S=Q:T.next=Q,T=z;var se=c.alternate;se!==null&&(se=se.updateQueue,D=se.lastBaseUpdate,D!==T&&(D===null?se.firstBaseUpdate=Q:D.next=Q,se.lastBaseUpdate=z))}if(S!==null){var ce=E.baseState;T=0,se=Q=z=null,D=S;do{var oe=D.lane,Se=D.eventTime;if((x&oe)===oe){se!==null&&(se=se.next={eventTime:Se,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var $e=c,Ae=D;switch(oe=d,Se=g,Ae.tag){case 1:if($e=Ae.payload,typeof $e=="function"){ce=$e.call(Se,ce,oe);break e}ce=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Ae.payload,oe=typeof $e=="function"?$e.call(Se,ce,oe):$e,oe==null)break e;ce=J({},ce,oe);break e;case 2:wa=!0}}D.callback!==null&&D.lane!==0&&(c.flags|=64,oe=E.effects,oe===null?E.effects=[D]:oe.push(D))}else Se={eventTime:Se,lane:oe,tag:D.tag,payload:D.payload,callback:D.callback,next:null},se===null?(Q=se=Se,z=ce):se=se.next=Se,T|=oe;if(D=D.next,D===null){if(D=E.shared.pending,D===null)break;oe=D,D=oe.next,oe.next=null,E.lastBaseUpdate=oe,E.shared.pending=null}}while(!0);if(se===null&&(z=ce),E.baseState=z,E.firstBaseUpdate=Q,E.lastBaseUpdate=se,d=E.shared.interleaved,d!==null){E=d;do T|=E.lane,E=E.next;while(E!==d)}else S===null&&(E.shared.lanes=0);Il|=T,c.lanes=T,c.memoizedState=ce}}function p4(c,d,g){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var x=c[d],E=x.callback;if(E!==null){if(x.callback=null,x=g,typeof E!="function")throw Error(n(191,E));E.call(x)}}}var rh={},Co=ya(rh),ih=ya(rh),oh=ya(rh);function Pl(c){if(c===rh)throw Error(n(174));return c}function Mw(c,d){switch(St(oh,d),St(ih,c),St(Co,rh),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Dx(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=Dx(d,c)}$t(Co),St(Co,d)}function Fc(){$t(Co),$t(ih),$t(oh)}function g4(c){Pl(oh.current);var d=Pl(Co.current),g=Dx(d,c.type);d!==g&&(St(ih,c),St(Co,g))}function Dw(c){ih.current===c&&($t(Co),$t(ih))}var Ot=ya(0);function U0(c){for(var d=c;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Ow=[];function Pw(){for(var c=0;c<Ow.length;c++)Ow[c]._workInProgressVersionPrimary=null;Ow.length=0}var q0=C.ReactCurrentDispatcher,Lw=C.ReactCurrentBatchConfig,Ll=0,Pt=null,rn=null,hn=null,W0=!1,sh=!1,ah=0,jG=0;function In(){throw Error(n(321))}function Iw(c,d){if(d===null)return!1;for(var g=0;g<d.length&&g<c.length;g++)if(!Li(c[g],d[g]))return!1;return!0}function zw(c,d,g,x,E,S){if(Ll=S,Pt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,q0.current=c===null||c.memoizedState===null?WG:HG,c=g(x,E),sh){S=0;do{if(sh=!1,ah=0,25<=S)throw Error(n(301));S+=1,hn=rn=null,d.updateQueue=null,q0.current=VG,c=g(x,E)}while(sh)}if(q0.current=G0,d=rn!==null&&rn.next!==null,Ll=0,hn=rn=Pt=null,W0=!1,d)throw Error(n(300));return c}function jw(){var c=ah!==0;return ah=0,c}function $o(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Pt.memoizedState=hn=c:hn=hn.next=c,hn}function fi(){if(rn===null){var c=Pt.alternate;c=c!==null?c.memoizedState:null}else c=rn.next;var d=hn===null?Pt.memoizedState:hn.next;if(d!==null)hn=d,rn=c;else{if(c===null)throw Error(n(310));rn=c,c={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},hn===null?Pt.memoizedState=hn=c:hn=hn.next=c}return hn}function lh(c,d){return typeof d=="function"?d(c):d}function Bw(c){var d=fi(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=c;var x=rn,E=x.baseQueue,S=g.pending;if(S!==null){if(E!==null){var T=E.next;E.next=S.next,S.next=T}x.baseQueue=E=S,g.pending=null}if(E!==null){S=E.next,x=x.baseState;var D=T=null,z=null,Q=S;do{var se=Q.lane;if((Ll&se)===se)z!==null&&(z=z.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),x=Q.hasEagerState?Q.eagerState:c(x,Q.action);else{var ce={lane:se,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};z===null?(D=z=ce,T=x):z=z.next=ce,Pt.lanes|=se,Il|=se}Q=Q.next}while(Q!==null&&Q!==S);z===null?T=x:z.next=D,Li(x,d.memoizedState)||(Sr=!0),d.memoizedState=x,d.baseState=T,d.baseQueue=z,g.lastRenderedState=x}if(c=g.interleaved,c!==null){E=c;do S=E.lane,Pt.lanes|=S,Il|=S,E=E.next;while(E!==c)}else E===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function Uw(c){var d=fi(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=c;var x=g.dispatch,E=g.pending,S=d.memoizedState;if(E!==null){g.pending=null;var T=E=E.next;do S=c(S,T.action),T=T.next;while(T!==E);Li(S,d.memoizedState)||(Sr=!0),d.memoizedState=S,d.baseQueue===null&&(d.baseState=S),g.lastRenderedState=S}return[S,x]}function m4(){}function y4(c,d){var g=Pt,x=fi(),E=d(),S=!Li(x.memoizedState,E);if(S&&(x.memoizedState=E,Sr=!0),x=x.queue,qw(w4.bind(null,g,x,c),[c]),x.getSnapshot!==d||S||hn!==null&&hn.memoizedState.tag&1){if(g.flags|=2048,uh(9,x4.bind(null,g,x,E,d),void 0,null),pn===null)throw Error(n(349));(Ll&30)!==0||v4(g,d,E)}return E}function v4(c,d,g){c.flags|=16384,c={getSnapshot:d,value:g},d=Pt.updateQueue,d===null?(d={lastEffect:null,stores:null},Pt.updateQueue=d,d.stores=[c]):(g=d.stores,g===null?d.stores=[c]:g.push(c))}function x4(c,d,g,x){d.value=g,d.getSnapshot=x,b4(d)&&E4(c)}function w4(c,d,g){return g(function(){b4(d)&&E4(c)})}function b4(c){var d=c.getSnapshot;c=c.value;try{var g=d();return!Li(c,g)}catch{return!0}}function E4(c){var d=ws(c,1);d!==null&&Ui(d,c,1,-1)}function k4(c){var d=$o();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lh,lastRenderedState:c},d.queue=c,c=c.dispatch=qG.bind(null,Pt,c),[d.memoizedState,c]}function uh(c,d,g,x){return c={tag:c,create:d,destroy:g,deps:x,next:null},d=Pt.updateQueue,d===null?(d={lastEffect:null,stores:null},Pt.updateQueue=d,d.lastEffect=c.next=c):(g=d.lastEffect,g===null?d.lastEffect=c.next=c:(x=g.next,g.next=c,c.next=x,d.lastEffect=c)),c}function S4(){return fi().memoizedState}function H0(c,d,g,x){var E=$o();Pt.flags|=c,E.memoizedState=uh(1|d,g,void 0,x===void 0?null:x)}function V0(c,d,g,x){var E=fi();x=x===void 0?null:x;var S=void 0;if(rn!==null){var T=rn.memoizedState;if(S=T.destroy,x!==null&&Iw(x,T.deps)){E.memoizedState=uh(d,g,S,x);return}}Pt.flags|=c,E.memoizedState=uh(1|d,g,S,x)}function _4(c,d){return H0(8390656,8,c,d)}function qw(c,d){return V0(2048,8,c,d)}function C4(c,d){return V0(4,2,c,d)}function $4(c,d){return V0(4,4,c,d)}function A4(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function T4(c,d,g){return g=g!=null?g.concat([c]):null,V0(4,4,A4.bind(null,d,c),g)}function Ww(){}function R4(c,d){var g=fi();d=d===void 0?null:d;var x=g.memoizedState;return x!==null&&d!==null&&Iw(d,x[1])?x[0]:(g.memoizedState=[c,d],c)}function N4(c,d){var g=fi();d=d===void 0?null:d;var x=g.memoizedState;return x!==null&&d!==null&&Iw(d,x[1])?x[0]:(c=c(),g.memoizedState=[c,d],c)}function F4(c,d,g){return(Ll&21)===0?(c.baseState&&(c.baseState=!1,Sr=!0),c.memoizedState=g):(Li(g,d)||(g=lR(),Pt.lanes|=g,Il|=g,c.baseState=!0),d)}function BG(c,d){var g=gt;gt=g!==0&&4>g?g:4,c(!0);var x=Lw.transition;Lw.transition={};try{c(!1),d()}finally{gt=g,Lw.transition=x}}function M4(){return fi().memoizedState}function UG(c,d,g){var x=_a(c);if(g={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null},D4(c))O4(d,g);else if(g=f4(c,d,g,x),g!==null){var E=rr();Ui(g,c,x,E),P4(g,d,x)}}function qG(c,d,g){var x=_a(c),E={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null};if(D4(c))O4(d,E);else{var S=c.alternate;if(c.lanes===0&&(S===null||S.lanes===0)&&(S=d.lastRenderedReducer,S!==null))try{var T=d.lastRenderedState,D=S(T,g);if(E.hasEagerState=!0,E.eagerState=D,Li(D,T)){var z=d.interleaved;z===null?(E.next=E,Nw(d)):(E.next=z.next,z.next=E),d.interleaved=E;return}}catch{}finally{}g=f4(c,d,E,x),g!==null&&(E=rr(),Ui(g,c,x,E),P4(g,d,x))}}function D4(c){var d=c.alternate;return c===Pt||d!==null&&d===Pt}function O4(c,d){sh=W0=!0;var g=c.pending;g===null?d.next=d:(d.next=g.next,g.next=d),c.pending=d}function P4(c,d,g){if((g&4194240)!==0){var x=d.lanes;x&=c.pendingLanes,g|=x,d.lanes=g,Vx(c,g)}}var G0={readContext:ci,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},WG={readContext:ci,useCallback:function(c,d){return $o().memoizedState=[c,d===void 0?null:d],c},useContext:ci,useEffect:_4,useImperativeHandle:function(c,d,g){return g=g!=null?g.concat([c]):null,H0(4194308,4,A4.bind(null,d,c),g)},useLayoutEffect:function(c,d){return H0(4194308,4,c,d)},useInsertionEffect:function(c,d){return H0(4,2,c,d)},useMemo:function(c,d){var g=$o();return d=d===void 0?null:d,c=c(),g.memoizedState=[c,d],c},useReducer:function(c,d,g){var x=$o();return d=g!==void 0?g(d):d,x.memoizedState=x.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},x.queue=c,c=c.dispatch=UG.bind(null,Pt,c),[x.memoizedState,c]},useRef:function(c){var d=$o();return c={current:c},d.memoizedState=c},useState:k4,useDebugValue:Ww,useDeferredValue:function(c){return $o().memoizedState=c},useTransition:function(){var c=k4(!1),d=c[0];return c=BG.bind(null,c[1]),$o().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,g){var x=Pt,E=$o();if(Rt){if(g===void 0)throw Error(n(407));g=g()}else{if(g=d(),pn===null)throw Error(n(349));(Ll&30)!==0||v4(x,d,g)}E.memoizedState=g;var S={value:g,getSnapshot:d};return E.queue=S,_4(w4.bind(null,x,S,c),[c]),x.flags|=2048,uh(9,x4.bind(null,x,S,g,d),void 0,null),g},useId:function(){var c=$o(),d=pn.identifierPrefix;if(Rt){var g=xs,x=vs;g=(x&~(1<<32-Pi(x)-1)).toString(32)+g,d=":"+d+"R"+g,g=ah++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=jG++,d=":"+d+"r"+g.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},HG={readContext:ci,useCallback:R4,useContext:ci,useEffect:qw,useImperativeHandle:T4,useInsertionEffect:C4,useLayoutEffect:$4,useMemo:N4,useReducer:Bw,useRef:S4,useState:function(){return Bw(lh)},useDebugValue:Ww,useDeferredValue:function(c){var d=fi();return F4(d,rn.memoizedState,c)},useTransition:function(){var c=Bw(lh)[0],d=fi().memoizedState;return[c,d]},useMutableSource:m4,useSyncExternalStore:y4,useId:M4,unstable_isNewReconciler:!1},VG={readContext:ci,useCallback:R4,useContext:ci,useEffect:qw,useImperativeHandle:T4,useInsertionEffect:C4,useLayoutEffect:$4,useMemo:N4,useReducer:Uw,useRef:S4,useState:function(){return Uw(lh)},useDebugValue:Ww,useDeferredValue:function(c){var d=fi();return rn===null?d.memoizedState=c:F4(d,rn.memoizedState,c)},useTransition:function(){var c=Uw(lh)[0],d=fi().memoizedState;return[c,d]},useMutableSource:m4,useSyncExternalStore:y4,useId:M4,unstable_isNewReconciler:!1};function zi(c,d){if(c&&c.defaultProps){d=J({},d),c=c.defaultProps;for(var g in c)d[g]===void 0&&(d[g]=c[g]);return d}return d}function Hw(c,d,g,x){d=c.memoizedState,g=g(x,d),g=g==null?d:J({},d,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var Y0={isMounted:function(c){return(c=c._reactInternals)?Rl(c)===c:!1},enqueueSetState:function(c,d,g){c=c._reactInternals;var x=rr(),E=_a(c),S=bs(x,E);S.payload=d,g!=null&&(S.callback=g),d=ba(c,S,E),d!==null&&(Ui(d,c,E,x),j0(d,c,E))},enqueueReplaceState:function(c,d,g){c=c._reactInternals;var x=rr(),E=_a(c),S=bs(x,E);S.tag=1,S.payload=d,g!=null&&(S.callback=g),d=ba(c,S,E),d!==null&&(Ui(d,c,E,x),j0(d,c,E))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var g=rr(),x=_a(c),E=bs(g,x);E.tag=2,d!=null&&(E.callback=d),d=ba(c,E,x),d!==null&&(Ui(d,c,x,g),j0(d,c,x))}};function L4(c,d,g,x,E,S,T){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(x,S,T):d.prototype&&d.prototype.isPureReactComponent?!Xd(g,x)||!Xd(E,S):!0}function I4(c,d,g){var x=!1,E=va,S=d.contextType;return typeof S=="object"&&S!==null?S=ci(S):(E=kr(d)?Fl:Ln.current,x=d.contextTypes,S=(x=x!=null)?_c(c,E):va),d=new d(g,S),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Y0,c.stateNode=d,d._reactInternals=c,x&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=E,c.__reactInternalMemoizedMaskedChildContext=S),d}function z4(c,d,g,x){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,x),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,x),d.state!==c&&Y0.enqueueReplaceState(d,d.state,null)}function Vw(c,d,g,x){var E=c.stateNode;E.props=g,E.state=c.memoizedState,E.refs={},Fw(c);var S=d.contextType;typeof S=="object"&&S!==null?E.context=ci(S):(S=kr(d)?Fl:Ln.current,E.context=_c(c,S)),E.state=c.memoizedState,S=d.getDerivedStateFromProps,typeof S=="function"&&(Hw(c,d,S,g),E.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&Y0.enqueueReplaceState(E,E.state,null),B0(c,g,E,x),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308)}function Mc(c,d){try{var g="",x=d;do g+=be(x),x=x.return;while(x);var E=g}catch(S){E=`
Error generating stack: `+S.message+`
`+S.stack}return{value:c,source:d,stack:E,digest:null}}function Gw(c,d,g){return{value:c,source:null,stack:g??null,digest:d??null}}function Yw(c,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var GG=typeof WeakMap=="function"?WeakMap:Map;function j4(c,d,g){g=bs(-1,g),g.tag=3,g.payload={element:null};var x=d.value;return g.callback=function(){tm||(tm=!0,ub=x),Yw(c,d)},g}function B4(c,d,g){g=bs(-1,g),g.tag=3;var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var E=d.value;g.payload=function(){return x(E)},g.callback=function(){Yw(c,d)}}var S=c.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(g.callback=function(){Yw(c,d),typeof x!="function"&&(ka===null?ka=new Set([this]):ka.add(this));var T=d.stack;this.componentDidCatch(d.value,{componentStack:T!==null?T:""})}),g}function U4(c,d,g){var x=c.pingCache;if(x===null){x=c.pingCache=new GG;var E=new Set;x.set(d,E)}else E=x.get(d),E===void 0&&(E=new Set,x.set(d,E));E.has(g)||(E.add(g),c=aY.bind(null,c,d,g),d.then(c,c))}function q4(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function W4(c,d,g,x,E){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=bs(-1,1),d.tag=2,ba(g,d,1))),g.lanes|=1),c):(c.flags|=65536,c.lanes=E,c)}var YG=C.ReactCurrentOwner,Sr=!1;function nr(c,d,g,x){d.child=c===null?c4(d,null,g,x):Tc(d,c.child,g,x)}function H4(c,d,g,x,E){g=g.render;var S=d.ref;return Nc(d,E),x=zw(c,d,g,x,S,E),g=jw(),c!==null&&!Sr?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~E,Es(c,d,E)):(Rt&&g&&Ew(d),d.flags|=1,nr(c,d,x,E),d.child)}function V4(c,d,g,x,E){if(c===null){var S=g.type;return typeof S=="function"&&!mb(S)&&S.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=S,G4(c,d,S,x,E)):(c=am(g.type,null,x,d,d.mode,E),c.ref=d.ref,c.return=d,d.child=c)}if(S=c.child,(c.lanes&E)===0){var T=S.memoizedProps;if(g=g.compare,g=g!==null?g:Xd,g(T,x)&&c.ref===d.ref)return Es(c,d,E)}return d.flags|=1,c=$a(S,x),c.ref=d.ref,c.return=d,d.child=c}function G4(c,d,g,x,E){if(c!==null){var S=c.memoizedProps;if(Xd(S,x)&&c.ref===d.ref)if(Sr=!1,d.pendingProps=x=S,(c.lanes&E)!==0)(c.flags&131072)!==0&&(Sr=!0);else return d.lanes=c.lanes,Es(c,d,E)}return Xw(c,d,g,x,E)}function Y4(c,d,g){var x=d.pendingProps,E=x.children,S=c!==null?c.memoizedState:null;if(x.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Oc,Vr),Vr|=g;else{if((g&1073741824)===0)return c=S!==null?S.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,St(Oc,Vr),Vr|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=S!==null?S.baseLanes:g,St(Oc,Vr),Vr|=x}else S!==null?(x=S.baseLanes|g,d.memoizedState=null):x=g,St(Oc,Vr),Vr|=x;return nr(c,d,E,g),d.child}function X4(c,d){var g=d.ref;(c===null&&g!==null||c!==null&&c.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function Xw(c,d,g,x,E){var S=kr(g)?Fl:Ln.current;return S=_c(d,S),Nc(d,E),g=zw(c,d,g,x,S,E),x=jw(),c!==null&&!Sr?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~E,Es(c,d,E)):(Rt&&x&&Ew(d),d.flags|=1,nr(c,d,g,E),d.child)}function K4(c,d,g,x,E){if(kr(g)){var S=!0;F0(d)}else S=!1;if(Nc(d,E),d.stateNode===null)K0(c,d),I4(d,g,x),Vw(d,g,x,E),x=!0;else if(c===null){var T=d.stateNode,D=d.memoizedProps;T.props=D;var z=T.context,Q=g.contextType;typeof Q=="object"&&Q!==null?Q=ci(Q):(Q=kr(g)?Fl:Ln.current,Q=_c(d,Q));var se=g.getDerivedStateFromProps,ce=typeof se=="function"||typeof T.getSnapshotBeforeUpdate=="function";ce||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==x||z!==Q)&&z4(d,T,x,Q),wa=!1;var oe=d.memoizedState;T.state=oe,B0(d,x,T,E),z=d.memoizedState,D!==x||oe!==z||Er.current||wa?(typeof se=="function"&&(Hw(d,g,se,x),z=d.memoizedState),(D=wa||L4(d,g,D,x,oe,z,Q))?(ce||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(d.flags|=4194308)):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=x,d.memoizedState=z),T.props=x,T.state=z,T.context=Q,x=D):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),x=!1)}else{T=d.stateNode,d4(c,d),D=d.memoizedProps,Q=d.type===d.elementType?D:zi(d.type,D),T.props=Q,ce=d.pendingProps,oe=T.context,z=g.contextType,typeof z=="object"&&z!==null?z=ci(z):(z=kr(g)?Fl:Ln.current,z=_c(d,z));var Se=g.getDerivedStateFromProps;(se=typeof Se=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==ce||oe!==z)&&z4(d,T,x,z),wa=!1,oe=d.memoizedState,T.state=oe,B0(d,x,T,E);var $e=d.memoizedState;D!==ce||oe!==$e||Er.current||wa?(typeof Se=="function"&&(Hw(d,g,Se,x),$e=d.memoizedState),(Q=wa||L4(d,g,Q,x,oe,$e,z)||!1)?(se||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(x,$e,z),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(x,$e,z)),typeof T.componentDidUpdate=="function"&&(d.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===c.memoizedProps&&oe===c.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&oe===c.memoizedState||(d.flags|=1024),d.memoizedProps=x,d.memoizedState=$e),T.props=x,T.state=$e,T.context=z,x=Q):(typeof T.componentDidUpdate!="function"||D===c.memoizedProps&&oe===c.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&oe===c.memoizedState||(d.flags|=1024),x=!1)}return Kw(c,d,g,x,S,E)}function Kw(c,d,g,x,E,S){X4(c,d);var T=(d.flags&128)!==0;if(!x&&!T)return E&&t4(d,g,!1),Es(c,d,S);x=d.stateNode,YG.current=d;var D=T&&typeof g.getDerivedStateFromError!="function"?null:x.render();return d.flags|=1,c!==null&&T?(d.child=Tc(d,c.child,null,S),d.child=Tc(d,null,D,S)):nr(c,d,D,S),d.memoizedState=x.state,E&&t4(d,g,!0),d.child}function Q4(c){var d=c.stateNode;d.pendingContext?JR(c,d.pendingContext,d.pendingContext!==d.context):d.context&&JR(c,d.context,!1),Mw(c,d.containerInfo)}function Z4(c,d,g,x,E){return Ac(),Cw(E),d.flags|=256,nr(c,d,g,x),d.child}var Qw={dehydrated:null,treeContext:null,retryLane:0};function Zw(c){return{baseLanes:c,cachePool:null,transitions:null}}function J4(c,d,g){var x=d.pendingProps,E=Ot.current,S=!1,T=(d.flags&128)!==0,D;if((D=T)||(D=c!==null&&c.memoizedState===null?!1:(E&2)!==0),D?(S=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(E|=1),St(Ot,E&1),c===null)return _w(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(T=x.children,c=x.fallback,S?(x=d.mode,S=d.child,T={mode:"hidden",children:T},(x&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=T):S=lm(T,x,0,null),c=Ul(c,x,g,null),S.return=d,c.return=d,S.sibling=c,d.child=S,d.child.memoizedState=Zw(g),d.memoizedState=Qw,c):Jw(d,T));if(E=c.memoizedState,E!==null&&(D=E.dehydrated,D!==null))return XG(c,d,T,x,D,E,g);if(S){S=x.fallback,T=d.mode,E=c.child,D=E.sibling;var z={mode:"hidden",children:x.children};return(T&1)===0&&d.child!==E?(x=d.child,x.childLanes=0,x.pendingProps=z,d.deletions=null):(x=$a(E,z),x.subtreeFlags=E.subtreeFlags&14680064),D!==null?S=$a(D,S):(S=Ul(S,T,g,null),S.flags|=2),S.return=d,x.return=d,x.sibling=S,d.child=x,x=S,S=d.child,T=c.child.memoizedState,T=T===null?Zw(g):{baseLanes:T.baseLanes|g,cachePool:null,transitions:T.transitions},S.memoizedState=T,S.childLanes=c.childLanes&~g,d.memoizedState=Qw,x}return S=c.child,c=S.sibling,x=$a(S,{mode:"visible",children:x.children}),(d.mode&1)===0&&(x.lanes=g),x.return=d,x.sibling=null,c!==null&&(g=d.deletions,g===null?(d.deletions=[c],d.flags|=16):g.push(c)),d.child=x,d.memoizedState=null,x}function Jw(c,d){return d=lm({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function X0(c,d,g,x){return x!==null&&Cw(x),Tc(d,c.child,null,g),c=Jw(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function XG(c,d,g,x,E,S,T){if(g)return d.flags&256?(d.flags&=-257,x=Gw(Error(n(422))),X0(c,d,T,x)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(S=x.fallback,E=d.mode,x=lm({mode:"visible",children:x.children},E,0,null),S=Ul(S,E,T,null),S.flags|=2,x.return=d,S.return=d,x.sibling=S,d.child=x,(d.mode&1)!==0&&Tc(d,c.child,null,T),d.child.memoizedState=Zw(T),d.memoizedState=Qw,S);if((d.mode&1)===0)return X0(c,d,T,null);if(E.data==="$!"){if(x=E.nextSibling&&E.nextSibling.dataset,x)var D=x.dgst;return x=D,S=Error(n(419)),x=Gw(S,x,void 0),X0(c,d,T,x)}if(D=(T&c.childLanes)!==0,Sr||D){if(x=pn,x!==null){switch(T&-T){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(x.suspendedLanes|T))!==0?0:E,E!==0&&E!==S.retryLane&&(S.retryLane=E,ws(c,E),Ui(x,c,E,-1))}return gb(),x=Gw(Error(n(421))),X0(c,d,T,x)}return E.data==="$?"?(d.flags|=128,d.child=c.child,d=lY.bind(null,c),E._reactRetry=d,null):(c=S.treeContext,Hr=ma(E.nextSibling),Wr=d,Rt=!0,Ii=null,c!==null&&(li[ui++]=vs,li[ui++]=xs,li[ui++]=Ml,vs=c.id,xs=c.overflow,Ml=d),d=Jw(d,x.children),d.flags|=4096,d)}function eN(c,d,g){c.lanes|=d;var x=c.alternate;x!==null&&(x.lanes|=d),Rw(c.return,d,g)}function eb(c,d,g,x,E){var S=c.memoizedState;S===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:E}:(S.isBackwards=d,S.rendering=null,S.renderingStartTime=0,S.last=x,S.tail=g,S.tailMode=E)}function tN(c,d,g){var x=d.pendingProps,E=x.revealOrder,S=x.tail;if(nr(c,d,x.children,g),x=Ot.current,(x&2)!==0)x=x&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&eN(c,g,d);else if(c.tag===19)eN(c,g,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}x&=1}if(St(Ot,x),(d.mode&1)===0)d.memoizedState=null;else switch(E){case"forwards":for(g=d.child,E=null;g!==null;)c=g.alternate,c!==null&&U0(c)===null&&(E=g),g=g.sibling;g=E,g===null?(E=d.child,d.child=null):(E=g.sibling,g.sibling=null),eb(d,!1,E,g,S);break;case"backwards":for(g=null,E=d.child,d.child=null;E!==null;){if(c=E.alternate,c!==null&&U0(c)===null){d.child=E;break}c=E.sibling,E.sibling=g,g=E,E=c}eb(d,!0,g,null,S);break;case"together":eb(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function K0(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function Es(c,d,g){if(c!==null&&(d.dependencies=c.dependencies),Il|=d.lanes,(g&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(n(153));if(d.child!==null){for(c=d.child,g=$a(c,c.pendingProps),d.child=g,g.return=d;c.sibling!==null;)c=c.sibling,g=g.sibling=$a(c,c.pendingProps),g.return=d;g.sibling=null}return d.child}function KG(c,d,g){switch(d.tag){case 3:Q4(d),Ac();break;case 5:g4(d);break;case 1:kr(d.type)&&F0(d);break;case 4:Mw(d,d.stateNode.containerInfo);break;case 10:var x=d.type._context,E=d.memoizedProps.value;St(I0,x._currentValue),x._currentValue=E;break;case 13:if(x=d.memoizedState,x!==null)return x.dehydrated!==null?(St(Ot,Ot.current&1),d.flags|=128,null):(g&d.child.childLanes)!==0?J4(c,d,g):(St(Ot,Ot.current&1),c=Es(c,d,g),c!==null?c.sibling:null);St(Ot,Ot.current&1);break;case 19:if(x=(g&d.childLanes)!==0,(c.flags&128)!==0){if(x)return tN(c,d,g);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),St(Ot,Ot.current),x)break;return null;case 22:case 23:return d.lanes=0,Y4(c,d,g)}return Es(c,d,g)}var nN,tb,rN,iN;nN=function(c,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)c.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},tb=function(){},rN=function(c,d,g,x){var E=c.memoizedProps;if(E!==x){c=d.stateNode,Pl(Co.current);var S=null;switch(g){case"input":E=it(c,E),x=it(c,x),S=[];break;case"select":E=J({},E,{value:void 0}),x=J({},x,{value:void 0}),S=[];break;case"textarea":E=Mx(c,E),x=Mx(c,x),S=[];break;default:typeof E.onClick!="function"&&typeof x.onClick=="function"&&(c.onclick=T0)}Ox(g,x);var T;g=null;for(Q in E)if(!x.hasOwnProperty(Q)&&E.hasOwnProperty(Q)&&E[Q]!=null)if(Q==="style"){var D=E[Q];for(T in D)D.hasOwnProperty(T)&&(g||(g={}),g[T]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?S||(S=[]):(S=S||[]).push(Q,null));for(Q in x){var z=x[Q];if(D=E!=null?E[Q]:void 0,x.hasOwnProperty(Q)&&z!==D&&(z!=null||D!=null))if(Q==="style")if(D){for(T in D)!D.hasOwnProperty(T)||z&&z.hasOwnProperty(T)||(g||(g={}),g[T]="");for(T in z)z.hasOwnProperty(T)&&D[T]!==z[T]&&(g||(g={}),g[T]=z[T])}else g||(S||(S=[]),S.push(Q,g)),g=z;else Q==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,D=D?D.__html:void 0,z!=null&&D!==z&&(S=S||[]).push(Q,z)):Q==="children"?typeof z!="string"&&typeof z!="number"||(S=S||[]).push(Q,""+z):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(z!=null&&Q==="onScroll"&&Ct("scroll",c),S||D===z||(S=[])):(S=S||[]).push(Q,z))}g&&(S=S||[]).push("style",g);var Q=S;(d.updateQueue=Q)&&(d.flags|=4)}},iN=function(c,d,g,x){g!==x&&(d.flags|=4)};function ch(c,d){if(!Rt)switch(c.tailMode){case"hidden":d=c.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:x.sibling=null}}function zn(c){var d=c.alternate!==null&&c.alternate.child===c.child,g=0,x=0;if(d)for(var E=c.child;E!==null;)g|=E.lanes|E.childLanes,x|=E.subtreeFlags&14680064,x|=E.flags&14680064,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)g|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=x,c.childLanes=g,d}function QG(c,d,g){var x=d.pendingProps;switch(kw(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(d),null;case 1:return kr(d.type)&&N0(),zn(d),null;case 3:return x=d.stateNode,Fc(),$t(Er),$t(Ln),Pw(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(c===null||c.child===null)&&(P0(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ii!==null&&(db(Ii),Ii=null))),tb(c,d),zn(d),null;case 5:Dw(d);var E=Pl(oh.current);if(g=d.type,c!==null&&d.stateNode!=null)rN(c,d,g,x,E),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!x){if(d.stateNode===null)throw Error(n(166));return zn(d),null}if(c=Pl(Co.current),P0(d)){x=d.stateNode,g=d.type;var S=d.memoizedProps;switch(x[_o]=d,x[eh]=S,c=(d.mode&1)!==0,g){case"dialog":Ct("cancel",x),Ct("close",x);break;case"iframe":case"object":case"embed":Ct("load",x);break;case"video":case"audio":for(E=0;E<Qd.length;E++)Ct(Qd[E],x);break;case"source":Ct("error",x);break;case"img":case"image":case"link":Ct("error",x),Ct("load",x);break;case"details":Ct("toggle",x);break;case"input":Vt(x,S),Ct("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!S.multiple},Ct("invalid",x);break;case"textarea":BT(x,S),Ct("invalid",x)}Ox(g,S),E=null;for(var T in S)if(S.hasOwnProperty(T)){var D=S[T];T==="children"?typeof D=="string"?x.textContent!==D&&(S.suppressHydrationWarning!==!0&&A0(x.textContent,D,c),E=["children",D]):typeof D=="number"&&x.textContent!==""+D&&(S.suppressHydrationWarning!==!0&&A0(x.textContent,D,c),E=["children",""+D]):i.hasOwnProperty(T)&&D!=null&&T==="onScroll"&&Ct("scroll",x)}switch(g){case"input":He(x),Rd(x,S,!0);break;case"textarea":He(x),qT(x);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(x.onclick=T0)}x=E,d.updateQueue=x,x!==null&&(d.flags|=4)}else{T=E.nodeType===9?E:E.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=WT(g)),c==="http://www.w3.org/1999/xhtml"?g==="script"?(c=T.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof x.is=="string"?c=T.createElement(g,{is:x.is}):(c=T.createElement(g),g==="select"&&(T=c,x.multiple?T.multiple=!0:x.size&&(T.size=x.size))):c=T.createElementNS(c,g),c[_o]=d,c[eh]=x,nN(c,d,!1,!1),d.stateNode=c;e:{switch(T=Px(g,x),g){case"dialog":Ct("cancel",c),Ct("close",c),E=x;break;case"iframe":case"object":case"embed":Ct("load",c),E=x;break;case"video":case"audio":for(E=0;E<Qd.length;E++)Ct(Qd[E],c);E=x;break;case"source":Ct("error",c),E=x;break;case"img":case"image":case"link":Ct("error",c),Ct("load",c),E=x;break;case"details":Ct("toggle",c),E=x;break;case"input":Vt(c,x),E=it(c,x),Ct("invalid",c);break;case"option":E=x;break;case"select":c._wrapperState={wasMultiple:!!x.multiple},E=J({},x,{value:void 0}),Ct("invalid",c);break;case"textarea":BT(c,x),E=Mx(c,x),Ct("invalid",c);break;default:E=x}Ox(g,E),D=E;for(S in D)if(D.hasOwnProperty(S)){var z=D[S];S==="style"?GT(c,z):S==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&HT(c,z)):S==="children"?typeof z=="string"?(g!=="textarea"||z!=="")&&Fd(c,z):typeof z=="number"&&Fd(c,""+z):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?z!=null&&S==="onScroll"&&Ct("scroll",c):z!=null&&_(c,S,z,T))}switch(g){case"input":He(c),Rd(c,x,!1);break;case"textarea":He(c),qT(c);break;case"option":x.value!=null&&c.setAttribute("value",""+Xe(x.value));break;case"select":c.multiple=!!x.multiple,S=x.value,S!=null?hc(c,!!x.multiple,S,!1):x.defaultValue!=null&&hc(c,!!x.multiple,x.defaultValue,!0);break;default:typeof E.onClick=="function"&&(c.onclick=T0)}switch(g){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return zn(d),null;case 6:if(c&&d.stateNode!=null)iN(c,d,c.memoizedProps,x);else{if(typeof x!="string"&&d.stateNode===null)throw Error(n(166));if(g=Pl(oh.current),Pl(Co.current),P0(d)){if(x=d.stateNode,g=d.memoizedProps,x[_o]=d,(S=x.nodeValue!==g)&&(c=Wr,c!==null))switch(c.tag){case 3:A0(x.nodeValue,g,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&A0(x.nodeValue,g,(c.mode&1)!==0)}S&&(d.flags|=4)}else x=(g.nodeType===9?g:g.ownerDocument).createTextNode(x),x[_o]=d,d.stateNode=x}return zn(d),null;case 13:if($t(Ot),x=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Rt&&Hr!==null&&(d.mode&1)!==0&&(d.flags&128)===0)a4(),Ac(),d.flags|=98560,S=!1;else if(S=P0(d),x!==null&&x.dehydrated!==null){if(c===null){if(!S)throw Error(n(318));if(S=d.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[_o]=d}else Ac(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;zn(d),S=!1}else Ii!==null&&(db(Ii),Ii=null),S=!0;if(!S)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=g,d):(x=x!==null,x!==(c!==null&&c.memoizedState!==null)&&x&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(Ot.current&1)!==0?on===0&&(on=3):gb())),d.updateQueue!==null&&(d.flags|=4),zn(d),null);case 4:return Fc(),tb(c,d),c===null&&Zd(d.stateNode.containerInfo),zn(d),null;case 10:return Tw(d.type._context),zn(d),null;case 17:return kr(d.type)&&N0(),zn(d),null;case 19:if($t(Ot),S=d.memoizedState,S===null)return zn(d),null;if(x=(d.flags&128)!==0,T=S.rendering,T===null)if(x)ch(S,!1);else{if(on!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(T=U0(c),T!==null){for(d.flags|=128,ch(S,!1),x=T.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),d.subtreeFlags=0,x=g,g=d.child;g!==null;)S=g,c=x,S.flags&=14680066,T=S.alternate,T===null?(S.childLanes=0,S.lanes=c,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=T.childLanes,S.lanes=T.lanes,S.child=T.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=T.memoizedProps,S.memoizedState=T.memoizedState,S.updateQueue=T.updateQueue,S.type=T.type,c=T.dependencies,S.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),g=g.sibling;return St(Ot,Ot.current&1|2),d.child}c=c.sibling}S.tail!==null&&Gt()>Pc&&(d.flags|=128,x=!0,ch(S,!1),d.lanes=4194304)}else{if(!x)if(c=U0(T),c!==null){if(d.flags|=128,x=!0,g=c.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),ch(S,!0),S.tail===null&&S.tailMode==="hidden"&&!T.alternate&&!Rt)return zn(d),null}else 2*Gt()-S.renderingStartTime>Pc&&g!==1073741824&&(d.flags|=128,x=!0,ch(S,!1),d.lanes=4194304);S.isBackwards?(T.sibling=d.child,d.child=T):(g=S.last,g!==null?g.sibling=T:d.child=T,S.last=T)}return S.tail!==null?(d=S.tail,S.rendering=d,S.tail=d.sibling,S.renderingStartTime=Gt(),d.sibling=null,g=Ot.current,St(Ot,x?g&1|2:g&1),d):(zn(d),null);case 22:case 23:return pb(),x=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==x&&(d.flags|=8192),x&&(d.mode&1)!==0?(Vr&1073741824)!==0&&(zn(d),d.subtreeFlags&6&&(d.flags|=8192)):zn(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function ZG(c,d){switch(kw(d),d.tag){case 1:return kr(d.type)&&N0(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Fc(),$t(Er),$t(Ln),Pw(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return Dw(d),null;case 13:if($t(Ot),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Ac()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return $t(Ot),null;case 4:return Fc(),null;case 10:return Tw(d.type._context),null;case 22:case 23:return pb(),null;case 24:return null;default:return null}}var Q0=!1,jn=!1,JG=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Dc(c,d){var g=c.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(x){Bt(c,d,x)}else g.current=null}function nb(c,d,g){try{g()}catch(x){Bt(c,d,x)}}var oN=!1;function eY(c,d){if(pw=y0,c=LR(),sw(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var x=g.getSelection&&g.getSelection();if(x&&x.rangeCount!==0){g=x.anchorNode;var E=x.anchorOffset,S=x.focusNode;x=x.focusOffset;try{g.nodeType,S.nodeType}catch{g=null;break e}var T=0,D=-1,z=-1,Q=0,se=0,ce=c,oe=null;t:for(;;){for(var Se;ce!==g||E!==0&&ce.nodeType!==3||(D=T+E),ce!==S||x!==0&&ce.nodeType!==3||(z=T+x),ce.nodeType===3&&(T+=ce.nodeValue.length),(Se=ce.firstChild)!==null;)oe=ce,ce=Se;for(;;){if(ce===c)break t;if(oe===g&&++Q===E&&(D=T),oe===S&&++se===x&&(z=T),(Se=ce.nextSibling)!==null)break;ce=oe,oe=ce.parentNode}ce=Se}g=D===-1||z===-1?null:{start:D,end:z}}else g=null}g=g||{start:0,end:0}}else g=null;for(gw={focusedElem:c,selectionRange:g},y0=!1,_e=d;_e!==null;)if(d=_e,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,_e=c;else for(;_e!==null;){d=_e;try{var $e=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var Ae=$e.memoizedProps,Yt=$e.memoizedState,V=d.stateNode,B=V.getSnapshotBeforeUpdate(d.elementType===d.type?Ae:zi(d.type,Ae),Yt);V.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Y=d.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ge){Bt(d,d.return,ge)}if(c=d.sibling,c!==null){c.return=d.return,_e=c;break}_e=d.return}return $e=oN,oN=!1,$e}function fh(c,d,g){var x=d.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var E=x=x.next;do{if((E.tag&c)===c){var S=E.destroy;E.destroy=void 0,S!==void 0&&nb(d,g,S)}E=E.next}while(E!==x)}}function Z0(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&c)===c){var x=g.create;g.destroy=x()}g=g.next}while(g!==d)}}function rb(c){var d=c.ref;if(d!==null){var g=c.stateNode;switch(c.tag){case 5:c=g;break;default:c=g}typeof d=="function"?d(c):d.current=c}}function sN(c){var d=c.alternate;d!==null&&(c.alternate=null,sN(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[_o],delete d[eh],delete d[xw],delete d[PG],delete d[LG])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function aN(c){return c.tag===5||c.tag===3||c.tag===4}function lN(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||aN(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ib(c,d,g){var x=c.tag;if(x===5||x===6)c=c.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(c,d):g.insertBefore(c,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(c,g)):(d=g,d.appendChild(c)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=T0));else if(x!==4&&(c=c.child,c!==null))for(ib(c,d,g),c=c.sibling;c!==null;)ib(c,d,g),c=c.sibling}function ob(c,d,g){var x=c.tag;if(x===5||x===6)c=c.stateNode,d?g.insertBefore(c,d):g.appendChild(c);else if(x!==4&&(c=c.child,c!==null))for(ob(c,d,g),c=c.sibling;c!==null;)ob(c,d,g),c=c.sibling}var Cn=null,ji=!1;function Ea(c,d,g){for(g=g.child;g!==null;)uN(c,d,g),g=g.sibling}function uN(c,d,g){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(f0,g)}catch{}switch(g.tag){case 5:jn||Dc(g,d);case 6:var x=Cn,E=ji;Cn=null,Ea(c,d,g),Cn=x,ji=E,Cn!==null&&(ji?(c=Cn,g=g.stateNode,c.nodeType===8?c.parentNode.removeChild(g):c.removeChild(g)):Cn.removeChild(g.stateNode));break;case 18:Cn!==null&&(ji?(c=Cn,g=g.stateNode,c.nodeType===8?vw(c.parentNode,g):c.nodeType===1&&vw(c,g),qd(c)):vw(Cn,g.stateNode));break;case 4:x=Cn,E=ji,Cn=g.stateNode.containerInfo,ji=!0,Ea(c,d,g),Cn=x,ji=E;break;case 0:case 11:case 14:case 15:if(!jn&&(x=g.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){E=x=x.next;do{var S=E,T=S.destroy;S=S.tag,T!==void 0&&((S&2)!==0||(S&4)!==0)&&nb(g,d,T),E=E.next}while(E!==x)}Ea(c,d,g);break;case 1:if(!jn&&(Dc(g,d),x=g.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=g.memoizedProps,x.state=g.memoizedState,x.componentWillUnmount()}catch(D){Bt(g,d,D)}Ea(c,d,g);break;case 21:Ea(c,d,g);break;case 22:g.mode&1?(jn=(x=jn)||g.memoizedState!==null,Ea(c,d,g),jn=x):Ea(c,d,g);break;default:Ea(c,d,g)}}function cN(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var g=c.stateNode;g===null&&(g=c.stateNode=new JG),d.forEach(function(x){var E=uY.bind(null,c,x);g.has(x)||(g.add(x),x.then(E,E))})}}function Bi(c,d){var g=d.deletions;if(g!==null)for(var x=0;x<g.length;x++){var E=g[x];try{var S=c,T=d,D=T;e:for(;D!==null;){switch(D.tag){case 5:Cn=D.stateNode,ji=!1;break e;case 3:Cn=D.stateNode.containerInfo,ji=!0;break e;case 4:Cn=D.stateNode.containerInfo,ji=!0;break e}D=D.return}if(Cn===null)throw Error(n(160));uN(S,T,E),Cn=null,ji=!1;var z=E.alternate;z!==null&&(z.return=null),E.return=null}catch(Q){Bt(E,d,Q)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)fN(d,c),d=d.sibling}function fN(c,d){var g=c.alternate,x=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Bi(d,c),Ao(c),x&4){try{fh(3,c,c.return),Z0(3,c)}catch(Ae){Bt(c,c.return,Ae)}try{fh(5,c,c.return)}catch(Ae){Bt(c,c.return,Ae)}}break;case 1:Bi(d,c),Ao(c),x&512&&g!==null&&Dc(g,g.return);break;case 5:if(Bi(d,c),Ao(c),x&512&&g!==null&&Dc(g,g.return),c.flags&32){var E=c.stateNode;try{Fd(E,"")}catch(Ae){Bt(c,c.return,Ae)}}if(x&4&&(E=c.stateNode,E!=null)){var S=c.memoizedProps,T=g!==null?g.memoizedProps:S,D=c.type,z=c.updateQueue;if(c.updateQueue=null,z!==null)try{D==="input"&&S.type==="radio"&&S.name!=null&&nn(E,S),Px(D,T);var Q=Px(D,S);for(T=0;T<z.length;T+=2){var se=z[T],ce=z[T+1];se==="style"?GT(E,ce):se==="dangerouslySetInnerHTML"?HT(E,ce):se==="children"?Fd(E,ce):_(E,se,ce,Q)}switch(D){case"input":Ur(E,S);break;case"textarea":UT(E,S);break;case"select":var oe=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!S.multiple;var Se=S.value;Se!=null?hc(E,!!S.multiple,Se,!1):oe!==!!S.multiple&&(S.defaultValue!=null?hc(E,!!S.multiple,S.defaultValue,!0):hc(E,!!S.multiple,S.multiple?[]:"",!1))}E[eh]=S}catch(Ae){Bt(c,c.return,Ae)}}break;case 6:if(Bi(d,c),Ao(c),x&4){if(c.stateNode===null)throw Error(n(162));E=c.stateNode,S=c.memoizedProps;try{E.nodeValue=S}catch(Ae){Bt(c,c.return,Ae)}}break;case 3:if(Bi(d,c),Ao(c),x&4&&g!==null&&g.memoizedState.isDehydrated)try{qd(d.containerInfo)}catch(Ae){Bt(c,c.return,Ae)}break;case 4:Bi(d,c),Ao(c);break;case 13:Bi(d,c),Ao(c),E=c.child,E.flags&8192&&(S=E.memoizedState!==null,E.stateNode.isHidden=S,!S||E.alternate!==null&&E.alternate.memoizedState!==null||(lb=Gt())),x&4&&cN(c);break;case 22:if(se=g!==null&&g.memoizedState!==null,c.mode&1?(jn=(Q=jn)||se,Bi(d,c),jn=Q):Bi(d,c),Ao(c),x&8192){if(Q=c.memoizedState!==null,(c.stateNode.isHidden=Q)&&!se&&(c.mode&1)!==0)for(_e=c,se=c.child;se!==null;){for(ce=_e=se;_e!==null;){switch(oe=_e,Se=oe.child,oe.tag){case 0:case 11:case 14:case 15:fh(4,oe,oe.return);break;case 1:Dc(oe,oe.return);var $e=oe.stateNode;if(typeof $e.componentWillUnmount=="function"){x=oe,g=oe.return;try{d=x,$e.props=d.memoizedProps,$e.state=d.memoizedState,$e.componentWillUnmount()}catch(Ae){Bt(x,g,Ae)}}break;case 5:Dc(oe,oe.return);break;case 22:if(oe.memoizedState!==null){pN(ce);continue}}Se!==null?(Se.return=oe,_e=Se):pN(ce)}se=se.sibling}e:for(se=null,ce=c;;){if(ce.tag===5){if(se===null){se=ce;try{E=ce.stateNode,Q?(S=E.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(D=ce.stateNode,z=ce.memoizedProps.style,T=z!=null&&z.hasOwnProperty("display")?z.display:null,D.style.display=VT("display",T))}catch(Ae){Bt(c,c.return,Ae)}}}else if(ce.tag===6){if(se===null)try{ce.stateNode.nodeValue=Q?"":ce.memoizedProps}catch(Ae){Bt(c,c.return,Ae)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===c)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===c)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===c)break e;se===ce&&(se=null),ce=ce.return}se===ce&&(se=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Bi(d,c),Ao(c),x&4&&cN(c);break;case 21:break;default:Bi(d,c),Ao(c)}}function Ao(c){var d=c.flags;if(d&2){try{e:{for(var g=c.return;g!==null;){if(aN(g)){var x=g;break e}g=g.return}throw Error(n(160))}switch(x.tag){case 5:var E=x.stateNode;x.flags&32&&(Fd(E,""),x.flags&=-33);var S=lN(c);ob(c,S,E);break;case 3:case 4:var T=x.stateNode.containerInfo,D=lN(c);ib(c,D,T);break;default:throw Error(n(161))}}catch(z){Bt(c,c.return,z)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function tY(c,d,g){_e=c,dN(c)}function dN(c,d,g){for(var x=(c.mode&1)!==0;_e!==null;){var E=_e,S=E.child;if(E.tag===22&&x){var T=E.memoizedState!==null||Q0;if(!T){var D=E.alternate,z=D!==null&&D.memoizedState!==null||jn;D=Q0;var Q=jn;if(Q0=T,(jn=z)&&!Q)for(_e=E;_e!==null;)T=_e,z=T.child,T.tag===22&&T.memoizedState!==null?gN(E):z!==null?(z.return=T,_e=z):gN(E);for(;S!==null;)_e=S,dN(S),S=S.sibling;_e=E,Q0=D,jn=Q}hN(c)}else(E.subtreeFlags&8772)!==0&&S!==null?(S.return=E,_e=S):hN(c)}}function hN(c){for(;_e!==null;){var d=_e;if((d.flags&8772)!==0){var g=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:jn||Z0(5,d);break;case 1:var x=d.stateNode;if(d.flags&4&&!jn)if(g===null)x.componentDidMount();else{var E=d.elementType===d.type?g.memoizedProps:zi(d.type,g.memoizedProps);x.componentDidUpdate(E,g.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var S=d.updateQueue;S!==null&&p4(d,S,x);break;case 3:var T=d.updateQueue;if(T!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}p4(d,T,g)}break;case 5:var D=d.stateNode;if(g===null&&d.flags&4){g=D;var z=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&g.focus();break;case"img":z.src&&(g.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Q=d.alternate;if(Q!==null){var se=Q.memoizedState;if(se!==null){var ce=se.dehydrated;ce!==null&&qd(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}jn||d.flags&512&&rb(d)}catch(oe){Bt(d,d.return,oe)}}if(d===c){_e=null;break}if(g=d.sibling,g!==null){g.return=d.return,_e=g;break}_e=d.return}}function pN(c){for(;_e!==null;){var d=_e;if(d===c){_e=null;break}var g=d.sibling;if(g!==null){g.return=d.return,_e=g;break}_e=d.return}}function gN(c){for(;_e!==null;){var d=_e;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{Z0(4,d)}catch(z){Bt(d,g,z)}break;case 1:var x=d.stateNode;if(typeof x.componentDidMount=="function"){var E=d.return;try{x.componentDidMount()}catch(z){Bt(d,E,z)}}var S=d.return;try{rb(d)}catch(z){Bt(d,S,z)}break;case 5:var T=d.return;try{rb(d)}catch(z){Bt(d,T,z)}}}catch(z){Bt(d,d.return,z)}if(d===c){_e=null;break}var D=d.sibling;if(D!==null){D.return=d.return,_e=D;break}_e=d.return}}var nY=Math.ceil,J0=C.ReactCurrentDispatcher,sb=C.ReactCurrentOwner,di=C.ReactCurrentBatchConfig,ot=0,pn=null,Jt=null,$n=0,Vr=0,Oc=ya(0),on=0,dh=null,Il=0,em=0,ab=0,hh=null,_r=null,lb=0,Pc=1/0,ks=null,tm=!1,ub=null,ka=null,nm=!1,Sa=null,rm=0,ph=0,cb=null,im=-1,om=0;function rr(){return(ot&6)!==0?Gt():im!==-1?im:im=Gt()}function _a(c){return(c.mode&1)===0?1:(ot&2)!==0&&$n!==0?$n&-$n:zG.transition!==null?(om===0&&(om=lR()),om):(c=gt,c!==0||(c=window.event,c=c===void 0?16:yR(c.type)),c)}function Ui(c,d,g,x){if(50<ph)throw ph=0,cb=null,Error(n(185));Id(c,g,x),((ot&2)===0||c!==pn)&&(c===pn&&((ot&2)===0&&(em|=g),on===4&&Ca(c,$n)),Cr(c,x),g===1&&ot===0&&(d.mode&1)===0&&(Pc=Gt()+500,M0&&xa()))}function Cr(c,d){var g=c.callbackNode;zV(c,d);var x=p0(c,c===pn?$n:0);if(x===0)g!==null&&oR(g),c.callbackNode=null,c.callbackPriority=0;else if(d=x&-x,c.callbackPriority!==d){if(g!=null&&oR(g),d===1)c.tag===0?IG(yN.bind(null,c)):n4(yN.bind(null,c)),DG(function(){(ot&6)===0&&xa()}),g=null;else{switch(uR(x)){case 1:g=qx;break;case 4:g=sR;break;case 16:g=c0;break;case 536870912:g=aR;break;default:g=c0}g=_N(g,mN.bind(null,c))}c.callbackPriority=d,c.callbackNode=g}}function mN(c,d){if(im=-1,om=0,(ot&6)!==0)throw Error(n(327));var g=c.callbackNode;if(Lc()&&c.callbackNode!==g)return null;var x=p0(c,c===pn?$n:0);if(x===0)return null;if((x&30)!==0||(x&c.expiredLanes)!==0||d)d=sm(c,x);else{d=x;var E=ot;ot|=2;var S=xN();(pn!==c||$n!==d)&&(ks=null,Pc=Gt()+500,jl(c,d));do try{oY();break}catch(D){vN(c,D)}while(!0);Aw(),J0.current=S,ot=E,Jt!==null?d=0:(pn=null,$n=0,d=on)}if(d!==0){if(d===2&&(E=Wx(c),E!==0&&(x=E,d=fb(c,E))),d===1)throw g=dh,jl(c,0),Ca(c,x),Cr(c,Gt()),g;if(d===6)Ca(c,x);else{if(E=c.current.alternate,(x&30)===0&&!rY(E)&&(d=sm(c,x),d===2&&(S=Wx(c),S!==0&&(x=S,d=fb(c,S))),d===1))throw g=dh,jl(c,0),Ca(c,x),Cr(c,Gt()),g;switch(c.finishedWork=E,c.finishedLanes=x,d){case 0:case 1:throw Error(n(345));case 2:Bl(c,_r,ks);break;case 3:if(Ca(c,x),(x&130023424)===x&&(d=lb+500-Gt(),10<d)){if(p0(c,0)!==0)break;if(E=c.suspendedLanes,(E&x)!==x){rr(),c.pingedLanes|=c.suspendedLanes&E;break}c.timeoutHandle=yw(Bl.bind(null,c,_r,ks),d);break}Bl(c,_r,ks);break;case 4:if(Ca(c,x),(x&4194240)===x)break;for(d=c.eventTimes,E=-1;0<x;){var T=31-Pi(x);S=1<<T,T=d[T],T>E&&(E=T),x&=~S}if(x=E,x=Gt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*nY(x/1960))-x,10<x){c.timeoutHandle=yw(Bl.bind(null,c,_r,ks),x);break}Bl(c,_r,ks);break;case 5:Bl(c,_r,ks);break;default:throw Error(n(329))}}}return Cr(c,Gt()),c.callbackNode===g?mN.bind(null,c):null}function fb(c,d){var g=hh;return c.current.memoizedState.isDehydrated&&(jl(c,d).flags|=256),c=sm(c,d),c!==2&&(d=_r,_r=g,d!==null&&db(d)),c}function db(c){_r===null?_r=c:_r.push.apply(_r,c)}function rY(c){for(var d=c;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var x=0;x<g.length;x++){var E=g[x],S=E.getSnapshot;E=E.value;try{if(!Li(S(),E))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ca(c,d){for(d&=~ab,d&=~em,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var g=31-Pi(d),x=1<<g;c[g]=-1,d&=~x}}function yN(c){if((ot&6)!==0)throw Error(n(327));Lc();var d=p0(c,0);if((d&1)===0)return Cr(c,Gt()),null;var g=sm(c,d);if(c.tag!==0&&g===2){var x=Wx(c);x!==0&&(d=x,g=fb(c,x))}if(g===1)throw g=dh,jl(c,0),Ca(c,d),Cr(c,Gt()),g;if(g===6)throw Error(n(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Bl(c,_r,ks),Cr(c,Gt()),null}function hb(c,d){var g=ot;ot|=1;try{return c(d)}finally{ot=g,ot===0&&(Pc=Gt()+500,M0&&xa())}}function zl(c){Sa!==null&&Sa.tag===0&&(ot&6)===0&&Lc();var d=ot;ot|=1;var g=di.transition,x=gt;try{if(di.transition=null,gt=1,c)return c()}finally{gt=x,di.transition=g,ot=d,(ot&6)===0&&xa()}}function pb(){Vr=Oc.current,$t(Oc)}function jl(c,d){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;if(g!==-1&&(c.timeoutHandle=-1,MG(g)),Jt!==null)for(g=Jt.return;g!==null;){var x=g;switch(kw(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&N0();break;case 3:Fc(),$t(Er),$t(Ln),Pw();break;case 5:Dw(x);break;case 4:Fc();break;case 13:$t(Ot);break;case 19:$t(Ot);break;case 10:Tw(x.type._context);break;case 22:case 23:pb()}g=g.return}if(pn=c,Jt=c=$a(c.current,null),$n=Vr=d,on=0,dh=null,ab=em=Il=0,_r=hh=null,Ol!==null){for(d=0;d<Ol.length;d++)if(g=Ol[d],x=g.interleaved,x!==null){g.interleaved=null;var E=x.next,S=g.pending;if(S!==null){var T=S.next;S.next=E,x.next=T}g.pending=x}Ol=null}return c}function vN(c,d){do{var g=Jt;try{if(Aw(),q0.current=G0,W0){for(var x=Pt.memoizedState;x!==null;){var E=x.queue;E!==null&&(E.pending=null),x=x.next}W0=!1}if(Ll=0,hn=rn=Pt=null,sh=!1,ah=0,sb.current=null,g===null||g.return===null){on=1,dh=d,Jt=null;break}e:{var S=c,T=g.return,D=g,z=d;if(d=$n,D.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var Q=z,se=D,ce=se.tag;if((se.mode&1)===0&&(ce===0||ce===11||ce===15)){var oe=se.alternate;oe?(se.updateQueue=oe.updateQueue,se.memoizedState=oe.memoizedState,se.lanes=oe.lanes):(se.updateQueue=null,se.memoizedState=null)}var Se=q4(T);if(Se!==null){Se.flags&=-257,W4(Se,T,D,S,d),Se.mode&1&&U4(S,Q,d),d=Se,z=Q;var $e=d.updateQueue;if($e===null){var Ae=new Set;Ae.add(z),d.updateQueue=Ae}else $e.add(z);break e}else{if((d&1)===0){U4(S,Q,d),gb();break e}z=Error(n(426))}}else if(Rt&&D.mode&1){var Yt=q4(T);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),W4(Yt,T,D,S,d),Cw(Mc(z,D));break e}}S=z=Mc(z,D),on!==4&&(on=2),hh===null?hh=[S]:hh.push(S),S=T;do{switch(S.tag){case 3:S.flags|=65536,d&=-d,S.lanes|=d;var V=j4(S,z,d);h4(S,V);break e;case 1:D=z;var B=S.type,Y=S.stateNode;if((S.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ka===null||!ka.has(Y)))){S.flags|=65536,d&=-d,S.lanes|=d;var ge=B4(S,D,d);h4(S,ge);break e}}S=S.return}while(S!==null)}bN(g)}catch(Ne){d=Ne,Jt===g&&g!==null&&(Jt=g=g.return);continue}break}while(!0)}function xN(){var c=J0.current;return J0.current=G0,c===null?G0:c}function gb(){(on===0||on===3||on===2)&&(on=4),pn===null||(Il&268435455)===0&&(em&268435455)===0||Ca(pn,$n)}function sm(c,d){var g=ot;ot|=2;var x=xN();(pn!==c||$n!==d)&&(ks=null,jl(c,d));do try{iY();break}catch(E){vN(c,E)}while(!0);if(Aw(),ot=g,J0.current=x,Jt!==null)throw Error(n(261));return pn=null,$n=0,on}function iY(){for(;Jt!==null;)wN(Jt)}function oY(){for(;Jt!==null&&!RV();)wN(Jt)}function wN(c){var d=SN(c.alternate,c,Vr);c.memoizedProps=c.pendingProps,d===null?bN(c):Jt=d,sb.current=null}function bN(c){var d=c;do{var g=d.alternate;if(c=d.return,(d.flags&32768)===0){if(g=QG(g,d,Vr),g!==null){Jt=g;return}}else{if(g=ZG(g,d),g!==null){g.flags&=32767,Jt=g;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{on=6,Jt=null;return}}if(d=d.sibling,d!==null){Jt=d;return}Jt=d=c}while(d!==null);on===0&&(on=5)}function Bl(c,d,g){var x=gt,E=di.transition;try{di.transition=null,gt=1,sY(c,d,g,x)}finally{di.transition=E,gt=x}return null}function sY(c,d,g,x){do Lc();while(Sa!==null);if((ot&6)!==0)throw Error(n(327));g=c.finishedWork;var E=c.finishedLanes;if(g===null)return null;if(c.finishedWork=null,c.finishedLanes=0,g===c.current)throw Error(n(177));c.callbackNode=null,c.callbackPriority=0;var S=g.lanes|g.childLanes;if(jV(c,S),c===pn&&(Jt=pn=null,$n=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||nm||(nm=!0,_N(c0,function(){return Lc(),null})),S=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||S){S=di.transition,di.transition=null;var T=gt;gt=1;var D=ot;ot|=4,sb.current=null,eY(c,g),fN(g,c),CG(gw),y0=!!pw,gw=pw=null,c.current=g,tY(g),NV(),ot=D,gt=T,di.transition=S}else c.current=g;if(nm&&(nm=!1,Sa=c,rm=E),S=c.pendingLanes,S===0&&(ka=null),DV(g.stateNode),Cr(c,Gt()),d!==null)for(x=c.onRecoverableError,g=0;g<d.length;g++)E=d[g],x(E.value,{componentStack:E.stack,digest:E.digest});if(tm)throw tm=!1,c=ub,ub=null,c;return(rm&1)!==0&&c.tag!==0&&Lc(),S=c.pendingLanes,(S&1)!==0?c===cb?ph++:(ph=0,cb=c):ph=0,xa(),null}function Lc(){if(Sa!==null){var c=uR(rm),d=di.transition,g=gt;try{if(di.transition=null,gt=16>c?16:c,Sa===null)var x=!1;else{if(c=Sa,Sa=null,rm=0,(ot&6)!==0)throw Error(n(331));var E=ot;for(ot|=4,_e=c.current;_e!==null;){var S=_e,T=S.child;if((_e.flags&16)!==0){var D=S.deletions;if(D!==null){for(var z=0;z<D.length;z++){var Q=D[z];for(_e=Q;_e!==null;){var se=_e;switch(se.tag){case 0:case 11:case 15:fh(8,se,S)}var ce=se.child;if(ce!==null)ce.return=se,_e=ce;else for(;_e!==null;){se=_e;var oe=se.sibling,Se=se.return;if(sN(se),se===Q){_e=null;break}if(oe!==null){oe.return=Se,_e=oe;break}_e=Se}}}var $e=S.alternate;if($e!==null){var Ae=$e.child;if(Ae!==null){$e.child=null;do{var Yt=Ae.sibling;Ae.sibling=null,Ae=Yt}while(Ae!==null)}}_e=S}}if((S.subtreeFlags&2064)!==0&&T!==null)T.return=S,_e=T;else e:for(;_e!==null;){if(S=_e,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:fh(9,S,S.return)}var V=S.sibling;if(V!==null){V.return=S.return,_e=V;break e}_e=S.return}}var B=c.current;for(_e=B;_e!==null;){T=_e;var Y=T.child;if((T.subtreeFlags&2064)!==0&&Y!==null)Y.return=T,_e=Y;else e:for(T=B;_e!==null;){if(D=_e,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Z0(9,D)}}catch(Ne){Bt(D,D.return,Ne)}if(D===T){_e=null;break e}var ge=D.sibling;if(ge!==null){ge.return=D.return,_e=ge;break e}_e=D.return}}if(ot=E,xa(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(f0,c)}catch{}x=!0}return x}finally{gt=g,di.transition=d}}return!1}function EN(c,d,g){d=Mc(g,d),d=j4(c,d,1),c=ba(c,d,1),d=rr(),c!==null&&(Id(c,1,d),Cr(c,d))}function Bt(c,d,g){if(c.tag===3)EN(c,c,g);else for(;d!==null;){if(d.tag===3){EN(d,c,g);break}else if(d.tag===1){var x=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ka===null||!ka.has(x))){c=Mc(g,c),c=B4(d,c,1),d=ba(d,c,1),c=rr(),d!==null&&(Id(d,1,c),Cr(d,c));break}}d=d.return}}function aY(c,d,g){var x=c.pingCache;x!==null&&x.delete(d),d=rr(),c.pingedLanes|=c.suspendedLanes&g,pn===c&&($n&g)===g&&(on===4||on===3&&($n&130023424)===$n&&500>Gt()-lb?jl(c,0):ab|=g),Cr(c,d)}function kN(c,d){d===0&&((c.mode&1)===0?d=1:(d=h0,h0<<=1,(h0&130023424)===0&&(h0=4194304)));var g=rr();c=ws(c,d),c!==null&&(Id(c,d,g),Cr(c,g))}function lY(c){var d=c.memoizedState,g=0;d!==null&&(g=d.retryLane),kN(c,g)}function uY(c,d){var g=0;switch(c.tag){case 13:var x=c.stateNode,E=c.memoizedState;E!==null&&(g=E.retryLane);break;case 19:x=c.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(d),kN(c,g)}var SN;SN=function(c,d,g){if(c!==null)if(c.memoizedProps!==d.pendingProps||Er.current)Sr=!0;else{if((c.lanes&g)===0&&(d.flags&128)===0)return Sr=!1,KG(c,d,g);Sr=(c.flags&131072)!==0}else Sr=!1,Rt&&(d.flags&1048576)!==0&&r4(d,O0,d.index);switch(d.lanes=0,d.tag){case 2:var x=d.type;K0(c,d),c=d.pendingProps;var E=_c(d,Ln.current);Nc(d,g),E=zw(null,d,x,c,E,g);var S=jw();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,kr(x)?(S=!0,F0(d)):S=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Fw(d),E.updater=Y0,d.stateNode=E,E._reactInternals=d,Vw(d,x,c,g),d=Kw(null,d,x,!0,S,g)):(d.tag=0,Rt&&S&&Ew(d),nr(null,d,E,g),d=d.child),d;case 16:x=d.elementType;e:{switch(K0(c,d),c=d.pendingProps,E=x._init,x=E(x._payload),d.type=x,E=d.tag=fY(x),c=zi(x,c),E){case 0:d=Xw(null,d,x,c,g);break e;case 1:d=K4(null,d,x,c,g);break e;case 11:d=H4(null,d,x,c,g);break e;case 14:d=V4(null,d,x,zi(x.type,c),g);break e}throw Error(n(306,x,""))}return d;case 0:return x=d.type,E=d.pendingProps,E=d.elementType===x?E:zi(x,E),Xw(c,d,x,E,g);case 1:return x=d.type,E=d.pendingProps,E=d.elementType===x?E:zi(x,E),K4(c,d,x,E,g);case 3:e:{if(Q4(d),c===null)throw Error(n(387));x=d.pendingProps,S=d.memoizedState,E=S.element,d4(c,d),B0(d,x,null,g);var T=d.memoizedState;if(x=T.element,S.isDehydrated)if(S={element:x,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},d.updateQueue.baseState=S,d.memoizedState=S,d.flags&256){E=Mc(Error(n(423)),d),d=Z4(c,d,x,g,E);break e}else if(x!==E){E=Mc(Error(n(424)),d),d=Z4(c,d,x,g,E);break e}else for(Hr=ma(d.stateNode.containerInfo.firstChild),Wr=d,Rt=!0,Ii=null,g=c4(d,null,x,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ac(),x===E){d=Es(c,d,g);break e}nr(c,d,x,g)}d=d.child}return d;case 5:return g4(d),c===null&&_w(d),x=d.type,E=d.pendingProps,S=c!==null?c.memoizedProps:null,T=E.children,mw(x,E)?T=null:S!==null&&mw(x,S)&&(d.flags|=32),X4(c,d),nr(c,d,T,g),d.child;case 6:return c===null&&_w(d),null;case 13:return J4(c,d,g);case 4:return Mw(d,d.stateNode.containerInfo),x=d.pendingProps,c===null?d.child=Tc(d,null,x,g):nr(c,d,x,g),d.child;case 11:return x=d.type,E=d.pendingProps,E=d.elementType===x?E:zi(x,E),H4(c,d,x,E,g);case 7:return nr(c,d,d.pendingProps,g),d.child;case 8:return nr(c,d,d.pendingProps.children,g),d.child;case 12:return nr(c,d,d.pendingProps.children,g),d.child;case 10:e:{if(x=d.type._context,E=d.pendingProps,S=d.memoizedProps,T=E.value,St(I0,x._currentValue),x._currentValue=T,S!==null)if(Li(S.value,T)){if(S.children===E.children&&!Er.current){d=Es(c,d,g);break e}}else for(S=d.child,S!==null&&(S.return=d);S!==null;){var D=S.dependencies;if(D!==null){T=S.child;for(var z=D.firstContext;z!==null;){if(z.context===x){if(S.tag===1){z=bs(-1,g&-g),z.tag=2;var Q=S.updateQueue;if(Q!==null){Q=Q.shared;var se=Q.pending;se===null?z.next=z:(z.next=se.next,se.next=z),Q.pending=z}}S.lanes|=g,z=S.alternate,z!==null&&(z.lanes|=g),Rw(S.return,g,d),D.lanes|=g;break}z=z.next}}else if(S.tag===10)T=S.type===d.type?null:S.child;else if(S.tag===18){if(T=S.return,T===null)throw Error(n(341));T.lanes|=g,D=T.alternate,D!==null&&(D.lanes|=g),Rw(T,g,d),T=S.sibling}else T=S.child;if(T!==null)T.return=S;else for(T=S;T!==null;){if(T===d){T=null;break}if(S=T.sibling,S!==null){S.return=T.return,T=S;break}T=T.return}S=T}nr(c,d,E.children,g),d=d.child}return d;case 9:return E=d.type,x=d.pendingProps.children,Nc(d,g),E=ci(E),x=x(E),d.flags|=1,nr(c,d,x,g),d.child;case 14:return x=d.type,E=zi(x,d.pendingProps),E=zi(x.type,E),V4(c,d,x,E,g);case 15:return G4(c,d,d.type,d.pendingProps,g);case 17:return x=d.type,E=d.pendingProps,E=d.elementType===x?E:zi(x,E),K0(c,d),d.tag=1,kr(x)?(c=!0,F0(d)):c=!1,Nc(d,g),I4(d,x,E),Vw(d,x,E,g),Kw(null,d,x,!0,c,g);case 19:return tN(c,d,g);case 22:return Y4(c,d,g)}throw Error(n(156,d.tag))};function _N(c,d){return iR(c,d)}function cY(c,d,g,x){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(c,d,g,x){return new cY(c,d,g,x)}function mb(c){return c=c.prototype,!(!c||!c.isReactComponent)}function fY(c){if(typeof c=="function")return mb(c)?1:0;if(c!=null){if(c=c.$$typeof,c===K)return 11;if(c===M)return 14}return 2}function $a(c,d){var g=c.alternate;return g===null?(g=hi(c.tag,d,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=d,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&14680064,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,d=c.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g}function am(c,d,g,x,E,S){var T=2;if(x=c,typeof c=="function")mb(c)&&(T=1);else if(typeof c=="string")T=5;else e:switch(c){case A:return Ul(g.children,E,S,d);case N:T=8,E|=8;break;case F:return c=hi(12,g,d,E|2),c.elementType=F,c.lanes=S,c;case W:return c=hi(13,g,d,E),c.elementType=W,c.lanes=S,c;case j:return c=hi(19,g,d,E),c.elementType=j,c.lanes=S,c;case X:return lm(g,E,S,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case L:T=10;break e;case O:T=9;break e;case K:T=11;break e;case M:T=14;break e;case U:T=16,x=null;break e}throw Error(n(130,c==null?c:typeof c,""))}return d=hi(T,g,d,E),d.elementType=c,d.type=x,d.lanes=S,d}function Ul(c,d,g,x){return c=hi(7,c,x,d),c.lanes=g,c}function lm(c,d,g,x){return c=hi(22,c,x,d),c.elementType=X,c.lanes=g,c.stateNode={isHidden:!1},c}function yb(c,d,g){return c=hi(6,c,null,d),c.lanes=g,c}function vb(c,d,g){return d=hi(4,c.children!==null?c.children:[],c.key,d),d.lanes=g,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function dY(c,d,g,x,E){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hx(0),this.expirationTimes=Hx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hx(0),this.identifierPrefix=x,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function xb(c,d,g,x,E,S,T,D,z){return c=new dY(c,d,g,D,z),d===1?(d=1,S===!0&&(d|=8)):d=0,S=hi(3,null,null,d),c.current=S,S.stateNode=c,S.memoizedState={element:x,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fw(S),c}function hY(c,d,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:x==null?null:""+x,children:c,containerInfo:d,implementation:g}}function CN(c){if(!c)return va;c=c._reactInternals;e:{if(Rl(c)!==c||c.tag!==1)throw Error(n(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(kr(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(c.tag===1){var g=c.type;if(kr(g))return e4(c,g,d)}return d}function $N(c,d,g,x,E,S,T,D,z){return c=xb(g,x,!0,c,E,S,T,D,z),c.context=CN(null),g=c.current,x=rr(),E=_a(g),S=bs(x,E),S.callback=d??null,ba(g,S,E),c.current.lanes=E,Id(c,E,x),Cr(c,x),c}function um(c,d,g,x){var E=d.current,S=rr(),T=_a(E);return g=CN(g),d.context===null?d.context=g:d.pendingContext=g,d=bs(S,T),d.payload={element:c},x=x===void 0?null:x,x!==null&&(d.callback=x),c=ba(E,d,T),c!==null&&(Ui(c,E,T,S),j0(c,E,T)),T}function cm(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function AN(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<d?g:d}}function wb(c,d){AN(c,d),(c=c.alternate)&&AN(c,d)}function pY(){return null}var TN=typeof reportError=="function"?reportError:function(c){console.error(c)};function bb(c){this._internalRoot=c}fm.prototype.render=bb.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(n(409));um(c,d,null,null)},fm.prototype.unmount=bb.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;zl(function(){um(null,c,null,null)}),d[ms]=null}};function fm(c){this._internalRoot=c}fm.prototype.unstable_scheduleHydration=function(c){if(c){var d=dR();c={blockedOn:null,target:c,priority:d};for(var g=0;g<ha.length&&d!==0&&d<ha[g].priority;g++);ha.splice(g,0,c),g===0&&gR(c)}};function Eb(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function dm(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function RN(){}function gY(c,d,g,x,E){if(E){if(typeof x=="function"){var S=x;x=function(){var Q=cm(T);S.call(Q)}}var T=$N(d,x,c,0,null,!1,!1,"",RN);return c._reactRootContainer=T,c[ms]=T.current,Zd(c.nodeType===8?c.parentNode:c),zl(),T}for(;E=c.lastChild;)c.removeChild(E);if(typeof x=="function"){var D=x;x=function(){var Q=cm(z);D.call(Q)}}var z=xb(c,0,!1,null,null,!1,!1,"",RN);return c._reactRootContainer=z,c[ms]=z.current,Zd(c.nodeType===8?c.parentNode:c),zl(function(){um(d,z,g,x)}),z}function hm(c,d,g,x,E){var S=g._reactRootContainer;if(S){var T=S;if(typeof E=="function"){var D=E;E=function(){var z=cm(T);D.call(z)}}um(d,T,c,E)}else T=gY(g,d,c,E,x);return cm(T)}cR=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var g=Ld(d.pendingLanes);g!==0&&(Vx(d,g|1),Cr(d,Gt()),(ot&6)===0&&(Pc=Gt()+500,xa()))}break;case 13:zl(function(){var x=ws(c,1);if(x!==null){var E=rr();Ui(x,c,1,E)}}),wb(c,1)}},Gx=function(c){if(c.tag===13){var d=ws(c,134217728);if(d!==null){var g=rr();Ui(d,c,134217728,g)}wb(c,134217728)}},fR=function(c){if(c.tag===13){var d=_a(c),g=ws(c,d);if(g!==null){var x=rr();Ui(g,c,d,x)}wb(c,d)}},dR=function(){return gt},hR=function(c,d){var g=gt;try{return gt=c,d()}finally{gt=g}},zx=function(c,d,g){switch(d){case"input":if(Ur(c,g),d=g.name,g.type==="radio"&&d!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var x=g[d];if(x!==c&&x.form===c.form){var E=R0(x);if(!E)throw Error(n(90));ue(x),Ur(x,E)}}}break;case"textarea":UT(c,g);break;case"select":d=g.value,d!=null&&hc(c,!!g.multiple,d,!1)}},QT=hb,ZT=zl;var mY={usingClientEntryPoint:!1,Events:[th,kc,R0,XT,KT,hb]},gh={findFiberByHostInstance:Nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yY={bundleType:gh.bundleType,version:gh.version,rendererPackageName:gh.rendererPackageName,rendererConfig:gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=nR(c),c===null?null:c.stateNode},findFiberByHostInstance:gh.findFiberByHostInstance||pY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{f0=pm.inject(yY),So=pm}catch{}}return $r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mY,$r.createPortal=function(c,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eb(d))throw Error(n(200));return hY(c,d,null,g)},$r.createRoot=function(c,d){if(!Eb(c))throw Error(n(299));var g=!1,x="",E=TN;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=xb(c,1,!1,null,null,g,!1,x,E),c[ms]=d.current,Zd(c.nodeType===8?c.parentNode:c),new bb(d)},$r.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(n(188)):(c=Object.keys(c).join(","),Error(n(268,c)));return c=nR(d),c=c===null?null:c.stateNode,c},$r.flushSync=function(c){return zl(c)},$r.hydrate=function(c,d,g){if(!dm(d))throw Error(n(200));return hm(null,c,d,!0,g)},$r.hydrateRoot=function(c,d,g){if(!Eb(c))throw Error(n(405));var x=g!=null&&g.hydratedSources||null,E=!1,S="",T=TN;if(g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&(S=g.identifierPrefix),g.onRecoverableError!==void 0&&(T=g.onRecoverableError)),d=$N(d,null,c,1,g??null,E,!1,S,T),c[ms]=d.current,Zd(c),x)for(c=0;c<x.length;c++)g=x[c],E=g._getVersion,E=E(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,E]:d.mutableSourceEagerHydrationData.push(g,E);return new fm(d)},$r.render=function(c,d,g){if(!dm(d))throw Error(n(200));return hm(null,c,d,!1,g)},$r.unmountComponentAtNode=function(c){if(!dm(c))throw Error(n(40));return c._reactRootContainer?(zl(function(){hm(null,null,c,!1,function(){c._reactRootContainer=null,c[ms]=null})}),!0):!1},$r.unstable_batchedUpdates=hb,$r.unstable_renderSubtreeIntoContainer=function(c,d,g,x){if(!dm(g))throw Error(n(200));if(c==null||c._reactInternals===void 0)throw Error(n(38));return hm(c,d,g,!1,x)},$r.version="18.3.1-next-f1338f8080-20240426",$r}var UN;function $Y(){if(UN)return Cb.exports;UN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Cb.exports=CY(),Cb.exports}var qN;function AY(){if(qN)return gm;qN=1;var e=$Y();return gm.createRoot=e.createRoot,gm.hydrateRoot=e.hydrateRoot,gm}var TY=AY(),yh={},WN;function RY(){if(WN)return yh;WN=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.parse=s,yh.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function s(p,m){const y=new o,v=p.length;if(v<2)return y;const w=(m==null?void 0:m.decode)||f;let b=0;do{const k=p.indexOf("=",b);if(k===-1)break;const _=p.indexOf(";",b),C=_===-1?v:_;if(k>C){b=p.lastIndexOf(";",k-1)+1;continue}const $=a(p,b,k),R=l(p,k,$),A=p.slice($,R);if(y[A]===void 0){let N=a(p,k+1,C),F=l(p,C,N);const L=w(p.slice(N,F));y[A]=L}b=C+1}while(b<v);return y}function a(p,m,y){do{const v=p.charCodeAt(m);if(v!==32&&v!==9)return m}while(++m<y);return y}function l(p,m,y){for(;m>y;){const v=p.charCodeAt(--m);if(v!==32&&v!==9)return m+1}return y}function u(p,m,y){const v=(y==null?void 0:y.encode)||encodeURIComponent;if(!e.test(p))throw new TypeError(`argument name is invalid: ${p}`);const w=v(m);if(!t.test(w))throw new TypeError(`argument val is invalid: ${m}`);let b=p+"="+w;if(!y)return b;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);b+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);b+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);b+="; Path="+y.path}if(y.expires){if(!h(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);b+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(b+="; HttpOnly"),y.secure&&(b+="; Secure"),y.partitioned&&(b+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return b}function f(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function h(p){return i.call(p)==="[object Date]"}return yh}RY();var HN="popstate";function NY(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return Ak("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Fp(i)}return MY(t,n,null,e)}function Mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function FY(){return Math.random().toString(36).substring(2,10)}function VN(e,t){return{usr:e.state,key:e.key,idx:t}}function Ak(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ed(t):t,state:n,key:t&&t.key||r||FY()}}function Fp({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ed(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function MY(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){a="POP";let w=f(),b=w==null?null:w-u;u=w,l&&l({action:a,location:v.location,delta:b})}function p(w,b){a="PUSH";let k=Ak(v.location,w,b);u=f()+1;let _=VN(k,u),C=v.createHref(k);try{s.pushState(_,"",C)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(C)}o&&l&&l({action:a,location:v.location,delta:1})}function m(w,b){a="REPLACE";let k=Ak(v.location,w,b);u=f();let _=VN(k,u),C=v.createHref(k);s.replaceState(_,"",C),o&&l&&l({action:a,location:v.location,delta:0})}function y(w){let b=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof w=="string"?w:Fp(w);return k=k.replace(/ $/,"%20"),Mt(b,`No window.location.(origin|href) available to create URL for href: ${k}`),new URL(k,b)}let v={get action(){return a},get location(){return e(i,s)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(HN,h),l=w,()=>{i.removeEventListener(HN,h),l=null}},createHref(w){return t(i,w)},createURL:y,encodeLocation(w){let b=y(w);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(w){return s.go(w)}};return v}function VO(e,t,n="/"){return DY(e,t,n,!1)}function DY(e,t,n,r){let i=typeof t=="string"?ed(t):t,o=Ys(i.pathname||"/",n);if(o==null)return null;let s=GO(e);OY(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=VY(o);a=WY(s[l],u,r)}return a}function GO(e,t=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Mt(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=zs([r,l.relativePath]),f=n.concat(l);o.children&&o.children.length>0&&(Mt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),GO(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:UY(u,o.index),routesMeta:f})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of YO(o.path))i(o,s,l)}),t}function YO(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=YO(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function OY(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:qY(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var PY=/^:[\w-]+$/,LY=3,IY=2,zY=1,jY=10,BY=-2,GN=e=>e==="*";function UY(e,t){let n=e.split("/"),r=n.length;return n.some(GN)&&(r+=BY),t&&(r+=IY),n.filter(i=>!GN(i)).reduce((i,o)=>i+(PY.test(o)?LY:o===""?zY:jY),r)}function qY(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function WY(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=O1({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),p=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=O1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:zs([o,h.pathname]),pathnameBase:KY(zs([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=zs([o,h.pathnameBase]))}return s}function O1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=HY(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},p)=>{if(f==="*"){let y=a[p]||"";s=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const m=a[p];return h&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function HY(e,t=!1,n=!0){oo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function VY(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return oo(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ys(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function GY(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ed(e):e;return{pathname:n?n.startsWith("/")?n:YY(n,t):t,search:QY(r),hash:ZY(i)}}function YY(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Tb(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XY(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function eC(e){let t=XY(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function tC(e,t,n,r=!1){let i;typeof e=="string"?i=ed(e):(i={...e},Mt(!i.pathname||!i.pathname.includes("?"),Tb("?","pathname","search",i)),Mt(!i.pathname||!i.pathname.includes("#"),Tb("#","pathname","hash",i)),Mt(!i.search||!i.search.includes("#"),Tb("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let h=t.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?t[h]:"/"}let l=GY(i,a),u=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}var zs=e=>e.join("/").replace(/\/\/+/g,"/"),KY=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),QY=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZY=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function JY(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var XO=["POST","PUT","PATCH","DELETE"];new Set(XO);var eX=["GET",...XO];new Set(eX);var td=Z.createContext(null);td.displayName="DataRouter";var vv=Z.createContext(null);vv.displayName="DataRouterState";var KO=Z.createContext({isTransitioning:!1});KO.displayName="ViewTransition";var tX=Z.createContext(new Map);tX.displayName="Fetchers";var nX=Z.createContext(null);nX.displayName="Await";var po=Z.createContext(null);po.displayName="Navigation";var cg=Z.createContext(null);cg.displayName="Location";var go=Z.createContext({outlet:null,matches:[],isDataRoute:!1});go.displayName="Route";var nC=Z.createContext(null);nC.displayName="RouteError";function rX(e,{relative:t}={}){Mt(nd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=Z.useContext(po),{hash:i,pathname:o,search:s}=fg(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:zs([n,o])),r.createHref({pathname:a,search:s,hash:i})}function nd(){return Z.useContext(cg)!=null}function ns(){return Mt(nd(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(cg).location}var QO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ZO(e){Z.useContext(po).static||Z.useLayoutEffect(e)}function xv(){let{isDataRoute:e}=Z.useContext(go);return e?yX():iX()}function iX(){Mt(nd(),"useNavigate() may be used only in the context of a <Router> component.");let e=Z.useContext(td),{basename:t,navigator:n}=Z.useContext(po),{matches:r}=Z.useContext(go),{pathname:i}=ns(),o=JSON.stringify(eC(r)),s=Z.useRef(!1);return ZO(()=>{s.current=!0}),Z.useCallback((l,u={})=>{if(oo(s.current,QO),!s.current)return;if(typeof l=="number"){n.go(l);return}let f=tC(l,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:zs([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,o,i,e])}Z.createContext(null);function oX(){let{matches:e}=Z.useContext(go),t=e[e.length-1];return t?t.params:{}}function fg(e,{relative:t}={}){let{matches:n}=Z.useContext(go),{pathname:r}=ns(),i=JSON.stringify(eC(n));return Z.useMemo(()=>tC(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function sX(e,t){return JO(e,t)}function JO(e,t,n,r){var k;Mt(nd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=Z.useContext(po),{matches:s}=Z.useContext(go),a=s[s.length-1],l=a?a.params:{},u=a?a.pathname:"/",f=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";e7(u,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=ns(),m;if(t){let _=typeof t=="string"?ed(t):t;Mt(f==="/"||((k=_.pathname)==null?void 0:k.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${_.pathname}" was given in the \`location\` prop.`),m=_}else m=p;let y=m.pathname||"/",v=y;if(f!=="/"){let _=f.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=!o&&n&&n.matches&&n.matches.length>0?n.matches:VO(e,{pathname:v});oo(h||w!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),oo(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=fX(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:zs([f,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?f:zs([f,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return t&&b?Z.createElement(cg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function aX(){let e=mX(),t=JY(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:o},"ErrorBoundary")," or"," ",Z.createElement("code",{style:o},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},t),n?Z.createElement("pre",{style:i},n):null,s)}var lX=Z.createElement(aX,null),uX=class extends Z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Z.createElement(go.Provider,{value:this.props.routeContext},Z.createElement(nC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cX({routeContext:e,match:t,children:n}){let r=Z.useContext(td);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),Z.createElement(go.Provider,{value:e},n)}function fX(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Mt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:f,errors:h}=n,p=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||p){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,f)=>{let h,p=!1,m=null,y=null;n&&(h=o&&u.route.id?o[u.route.id]:void 0,m=u.route.errorElement||lX,s&&(a<0&&f===0?(e7("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,y=null):a===f&&(p=!0,y=u.route.hydrateFallbackElement||null)));let v=t.concat(i.slice(0,f+1)),w=()=>{let b;return h?b=m:p?b=y:u.route.Component?b=Z.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=l,Z.createElement(cX,{match:u,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:b})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?Z.createElement(uX,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}function rC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dX(e){let t=Z.useContext(td);return Mt(t,rC(e)),t}function hX(e){let t=Z.useContext(vv);return Mt(t,rC(e)),t}function pX(e){let t=Z.useContext(go);return Mt(t,rC(e)),t}function iC(e){let t=pX(e),n=t.matches[t.matches.length-1];return Mt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function gX(){return iC("useRouteId")}function mX(){var r;let e=Z.useContext(nC),t=hX("useRouteError"),n=iC("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function yX(){let{router:e}=dX("useNavigate"),t=iC("useNavigate"),n=Z.useRef(!1);return ZO(()=>{n.current=!0}),Z.useCallback(async(i,o={})=>{oo(n.current,QO),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var YN={};function e7(e,t,n){!t&&!YN[e]&&(YN[e]=!0,oo(!1,n))}Z.memo(vX);function vX({routes:e,future:t,state:n}){return JO(e,void 0,n,t)}function xX({to:e,replace:t,state:n,relative:r}){Mt(nd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=Z.useContext(po);oo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=Z.useContext(go),{pathname:s}=ns(),a=xv(),l=tC(e,eC(o),s,r==="path"),u=JSON.stringify(l);return Z.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function tu(e){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function wX({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Mt(!nd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),a=Z.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=ed(n));let{pathname:l="/",search:u="",hash:f="",state:h=null,key:p="default"}=n,m=Z.useMemo(()=>{let y=Ys(l,s);return y==null?null:{location:{pathname:y,search:u,hash:f,state:h,key:p},navigationType:r}},[s,l,u,f,h,p,r]);return oo(m!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:Z.createElement(po.Provider,{value:a},Z.createElement(cg.Provider,{children:t,value:m}))}function bX({children:e,location:t}){return sX(Tk(e),t)}function Tk(e,t=[]){let n=[];return Z.Children.forEach(e,(r,i)=>{if(!Z.isValidElement(r))return;let o=[...t,i];if(r.type===Z.Fragment){n.push.apply(n,Tk(r.props.children,o));return}Mt(r.type===tu,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Tk(r.props.children,o)),n.push(s)}),n}var a1="get",l1="application/x-www-form-urlencoded";function wv(e){return e!=null&&typeof e.tagName=="string"}function EX(e){return wv(e)&&e.tagName.toLowerCase()==="button"}function kX(e){return wv(e)&&e.tagName.toLowerCase()==="form"}function SX(e){return wv(e)&&e.tagName.toLowerCase()==="input"}function _X(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function CX(e,t){return e.button===0&&(!t||t==="_self")&&!_X(e)}var mm=null;function $X(){if(mm===null)try{new FormData(document.createElement("form"),0),mm=!1}catch{mm=!0}return mm}var AX=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rb(e){return e!=null&&!AX.has(e)?(oo(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${l1}"`),null):e}function TX(e,t){let n,r,i,o,s;if(kX(e)){let a=e.getAttribute("action");r=a?Ys(a,t):null,n=e.getAttribute("method")||a1,i=Rb(e.getAttribute("enctype"))||l1,o=new FormData(e)}else if(EX(e)||SX(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ys(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||a1,i=Rb(e.getAttribute("formenctype"))||Rb(a.getAttribute("enctype"))||l1,o=new FormData(a,e),!$X()){let{name:u,type:f,value:h}=e;if(f==="image"){let p=u?`${u}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else u&&o.append(u,h)}}else{if(wv(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=a1,r=null,i=l1,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function oC(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function RX(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NX(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function FX(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await RX(o,n);return s.links?s.links():[]}return[]}));return PX(r.flat(1).filter(NX).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function XN(e,t,n,r,i,o){let s=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var f;return n[u].pathname!==l.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var h;let f=r.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function MX(e,t,{includeHydrateFallback:n}={}){return DX(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function DX(e){return[...new Set(e)]}function OX(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function PX(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(OX(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}var LX=new Set([100,101,204,205]);function IX(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Ys(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function t7(){let e=Z.useContext(td);return oC(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function zX(){let e=Z.useContext(vv);return oC(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var sC=Z.createContext(void 0);sC.displayName="FrameworkContext";function n7(){let e=Z.useContext(sC);return oC(e,"You must render this element inside a <HydratedRouter> element"),e}function jX(e,t){let n=Z.useContext(sC),[r,i]=Z.useState(!1),[o,s]=Z.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=t,p=Z.useRef(null);Z.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let v=b=>{b.forEach(k=>{s(k.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return p.current&&w.observe(p.current),()=>{w.disconnect()}}},[e]),Z.useEffect(()=>{if(r){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{i(!0)},y=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,p,{}]:[o,p,{onFocus:vh(a,m),onBlur:vh(l,y),onMouseEnter:vh(u,m),onMouseLeave:vh(f,y),onTouchStart:vh(h,m)}]:[!1,p,{}]}function vh(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function BX({page:e,...t}){let{router:n}=t7(),r=Z.useMemo(()=>VO(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?Z.createElement(qX,{page:e,matches:r,...t}):null}function UX(e){let{manifest:t,routeModules:n}=n7(),[r,i]=Z.useState([]);return Z.useEffect(()=>{let o=!1;return FX(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function qX({page:e,matches:t,...n}){let r=ns(),{manifest:i,routeModules:o}=n7(),{basename:s}=t7(),{loaderData:a,matches:l}=zX(),u=Z.useMemo(()=>XN(e,t,l,i,r,"data"),[e,t,l,i,r]),f=Z.useMemo(()=>XN(e,t,l,i,r,"assets"),[e,t,l,i,r]),h=Z.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let y=new Set,v=!1;if(t.forEach(b=>{var _;let k=i.routes[b.route.id];!k||!k.hasLoader||(!u.some(C=>C.route.id===b.route.id)&&b.route.id in a&&((_=o[b.route.id])!=null&&_.shouldRevalidate)||k.hasClientLoader?v=!0:y.add(b.route.id))}),y.size===0)return[];let w=IX(e,s);return v&&y.size>0&&w.searchParams.set("_routes",t.filter(b=>y.has(b.route.id)).map(b=>b.route.id).join(",")),[w.pathname+w.search]},[s,a,r,i,u,t,e,o]),p=Z.useMemo(()=>MX(f,i),[f,i]),m=UX(f);return Z.createElement(Z.Fragment,null,h.map(y=>Z.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),p.map(y=>Z.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),m.map(({key:y,link:v})=>Z.createElement("link",{key:y,...v})))}function WX(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var r7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{r7&&(window.__reactRouterVersion="7.5.3")}catch{}function HX({basename:e,children:t,window:n}){let r=Z.useRef();r.current==null&&(r.current=NY({window:n,v5Compat:!0}));let i=r.current,[o,s]=Z.useState({action:i.action,location:i.location}),a=Z.useCallback(l=>{Z.startTransition(()=>s(l))},[s]);return Z.useLayoutEffect(()=>i.listen(a),[i,a]),Z.createElement(wX,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var i7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o7=Z.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:f,viewTransition:h,...p},m){let{basename:y}=Z.useContext(po),v=typeof u=="string"&&i7.test(u),w,b=!1;if(typeof u=="string"&&v&&(w=u,r7))try{let F=new URL(window.location.href),L=u.startsWith("//")?new URL(F.protocol+u):new URL(u),O=Ys(L.pathname,y);L.origin===F.origin&&O!=null?u=O+L.search+L.hash:b=!0}catch{oo(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=rX(u,{relative:i}),[_,C,$]=jX(r,p),R=XX(u,{replace:s,state:a,target:l,preventScrollReset:f,relative:i,viewTransition:h});function A(F){t&&t(F),F.defaultPrevented||R(F)}let N=Z.createElement("a",{...p,...$,href:w||k,onClick:b||o?t:A,ref:WX(m,C),target:l,"data-discover":!v&&n==="render"?"true":void 0});return _&&!v?Z.createElement(Z.Fragment,null,N,Z.createElement(BX,{page:k})):N});o7.displayName="Link";var VX=Z.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},f){let h=fg(s,{relative:u.relative}),p=ns(),m=Z.useContext(vv),{navigator:y,basename:v}=Z.useContext(po),w=m!=null&&eK(h)&&a===!0,b=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,k=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(k=k.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&v&&(_=Ys(_,v)||_);const C=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let $=k===b||!i&&k.startsWith(b)&&k.charAt(C)==="/",R=_!=null&&(_===b||!i&&_.startsWith(b)&&_.charAt(b.length)==="/"),A={isActive:$,isPending:R,isTransitioning:w},N=$?t:void 0,F;typeof r=="function"?F=r(A):F=[r,$?"active":null,R?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let L=typeof o=="function"?o(A):o;return Z.createElement(o7,{...u,"aria-current":N,className:F,ref:f,style:L,to:s,viewTransition:a},typeof l=="function"?l(A):l)});VX.displayName="NavLink";var GX=Z.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=a1,action:a,onSubmit:l,relative:u,preventScrollReset:f,viewTransition:h,...p},m)=>{let y=ZX(),v=JX(a,{relative:u}),w=s.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&i7.test(a),k=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let C=_.nativeEvent.submitter,$=(C==null?void 0:C.getAttribute("formmethod"))||s;y(C||_.currentTarget,{fetcherKey:t,method:$,navigate:n,replace:i,state:o,relative:u,preventScrollReset:f,viewTransition:h})};return Z.createElement("form",{ref:m,method:w,action:v,onSubmit:r?l:k,...p,"data-discover":!b&&e==="render"?"true":void 0})});GX.displayName="Form";function YX(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function s7(e){let t=Z.useContext(td);return Mt(t,YX(e)),t}function XX(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=xv(),l=ns(),u=fg(e,{relative:o});return Z.useCallback(f=>{if(CX(f,t)){f.preventDefault();let h=n!==void 0?n:Fp(l)===Fp(u);a(e,{replace:h,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,n,r,t,e,i,o,s])}var KX=0,QX=()=>`__${String(++KX)}__`;function ZX(){let{router:e}=s7("useSubmit"),{basename:t}=Z.useContext(po),n=gX();return Z.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=TX(r,t);if(i.navigate===!1){let f=i.fetcherKey||QX();await e.fetch(f,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function JX(e,{relative:t}={}){let{basename:n}=Z.useContext(po),r=Z.useContext(go);Mt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...fg(e||".",{relative:t})},s=ns();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(f=>f==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let f=a.toString();o.search=f?`?${f}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:zs([n,o.pathname])),Fp(o)}function eK(e,t={}){let n=Z.useContext(KO);Mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=s7("useViewTransitionState"),i=fg(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Ys(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Ys(n.nextLocation.pathname,r)||n.nextLocation.pathname;return O1(i.pathname,s)!=null||O1(i.pathname,o)!=null}new TextEncoder;[...LX];const tK=()=>{const[e,t]=Z.useState(!1);return P.jsx("div",{className:"top-bar",children:P.jsxs("div",{className:"top-bar-container",children:[P.jsxs("button",{className:"hamburger",onClick:()=>t(!e),"aria-label":"Toggle menu",children:[P.jsx("span",{className:"hamburger-line"}),P.jsx("span",{className:"hamburger-line"}),P.jsx("span",{className:"hamburger-line"})]}),P.jsxs("div",{className:`top-bar-nav ${e?"open":""}`,children:[P.jsx("div",{className:"nav-link",children:"Home"}),P.jsx("div",{className:"nav-link",children:"Data"}),P.jsx("div",{className:"nav-link",children:"About"})]}),P.jsx("div",{className:"top-bar-search",children:P.jsx("input",{className:"search-input",type:"text",placeholder:"Search..."})})]})})},nK=({activeButton:e})=>{const t=xv();return P.jsxs("div",{className:"header-buttons",children:[P.jsx("button",{className:`outline-button ${e==="overview"?"active":""}`,onClick:()=>t("/"),children:"Overview"}),P.jsx("button",{className:`outline-button ${e==="explorer"?"active":""}`,onClick:()=>t("/data-explorer"),children:"Data Explorer"}),P.jsx("button",{className:`outline-button ${e==="info"?"active":""}`,onClick:()=>t("/about"),children:"About"})]})},rK=()=>{const e=xv(),n=ns().pathname.split("/")[2]||"emergency-dept",r=i=>{const o=i.target.value;o!==n&&e(`/data-explorer/${o}`)};return P.jsxs("select",{className:"data-topic-select",onChange:r,value:n,children:[P.jsx("option",{value:"emergency-dept",children:"Emergency Department Visits and Admits"}),P.jsx("option",{value:"cases",children:"Lab-Reported Cases"}),P.jsx("option",{value:"deaths",children:"COVID-19 Deaths"})]})},iK=()=>{const t=ns().pathname;let n="overview";return t.startsWith("/data-explorer")?n="explorer":t.startsWith("/about")&&(n="info"),P.jsx("section",{className:"header-section",children:P.jsxs("div",{className:"header-container",children:[P.jsxs("div",{className:"header-content",children:[P.jsx("h1",{className:"header-title",children:"Respiratory Illness Data Tracker"}),P.jsx("p",{className:"header-subtitle",children:"Data insights for respiratory illnesses in New York City"}),P.jsx(nK,{activeButton:n}),n==="explorer"&&P.jsx("div",{className:"data-dropdown-wrapper",children:P.jsx(rK,{})})]}),P.jsx("div",{className:"header-image-wrapper",children:P.jsx("img",{src:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fanalyticsintell.com%2Fwp-content%2Fuploads%2F2020%2F06%2FNYC_Health-540px-1-1-300x150.png&f=1&nofb=1&ipt=7fb1ea11033f84918c7072faff8f2e8a917897a4ece8fb0a175bb77a22b8c10a",alt:"NYC Health Logo",className:"header-image"})})]})})},oK=()=>P.jsxs("div",{className:"footer-section about",children:[P.jsx("h3",{className:"footer-title",children:"About DOHMH"}),P.jsx("p",{className:"footer-text",children:"Department of Health and Mental Hygiene, New York City"})]}),sK=()=>P.jsxs("div",{className:"footer-section links",children:[P.jsx("h3",{className:"footer-title",children:"Quick Links"}),P.jsxs("ul",{className:"footer-list",children:[P.jsx("li",{className:"footer-list-item",children:"Data Dashboard"}),P.jsx("li",{className:"footer-list-item",children:"Reports"}),P.jsx("li",{className:"footer-list-item",children:"Resources"})]})]}),aK=()=>P.jsxs("div",{className:"footer-section contact",children:[P.jsx("h3",{className:"footer-title",children:"Contact"}),P.jsxs("ul",{className:"footer-list",children:[P.jsxs("li",{className:"footer-list-item",children:[P.jsx("span",{className:"footer-contact-text",children:"(212) 555-0123"}),P.jsx("img",{className:"footer-icon",alt:"Phone Icon",src:"https://c.animaapp.com/gDgDv3V4/img/frame-17.svg"})]}),P.jsxs("li",{className:"footer-list-item",children:[P.jsx("span",{className:"footer-contact-text",children:"info@dohmh.nyc.gov"}),P.jsx("img",{className:"footer-icon",alt:"Email Icon",src:"https://c.animaapp.com/gDgDv3V4/img/frame-18.svg"})]})]})]}),lK=()=>P.jsxs("div",{className:"footer-section subscribe",children:[P.jsx("h3",{className:"footer-title",children:"Stay Updated"}),P.jsxs("div",{className:"subscribe-form",children:[P.jsx("input",{className:"subscribe-input",placeholder:"Enter your email",type:"email"}),P.jsx("button",{className:"subscribe-button",children:"Subscribe"})]})]}),uK=()=>P.jsx("footer",{className:"footer",children:P.jsxs("div",{className:"footer-content",children:[P.jsxs("div",{className:"footer-top",children:[P.jsx(oK,{}),P.jsx(sK,{}),P.jsx(aK,{}),P.jsx(lK,{})]}),P.jsx("div",{className:"footer-bottom",children:P.jsx("p",{className:"footer-copy",children:" 2025 NYC Department of Health and Mental Hygiene. All rights reserved."})})]})}),Hn={gray100:"#F9FAFB",gray700:"#4B5563",gray800:"#374151",bluePrimary:"#1E40AF",purplePrimary:"#5B21B6",purpleAccent:"#7C3AED",greenPrimary:"#065F46",greenMuted:"#059669",orangePrimary:"#FF6600",orangeAccent:"#B36C31",orangeMuted:"#FF6C0B"},ym=({title:e,year:t,icon:n,visitPercent:r,admitPercent:i,visitChange:o,admitChange:s,visitIcon:a,admitIcon:l,subtitle:u,backgroundColor:f=Hn.gray100})=>{const p={"COVID-19":Hn.bluePrimary,Influenza:Hn.purplePrimary,RSV:Hn.greenPrimary,ARI:Hn.orangePrimary,"Acute Respiratory Infections":Hn.orangePrimary}[e]||Hn.gray800,m=y=>{const w=parseFloat(y)>=0,b=w?"":"",k=w?Hn.orangeAccent:Hn.greenMuted;return P.jsx("span",{style:{color:k,marginLeft:4},children:b})};return P.jsxs("div",{className:"stat-card",style:{backgroundColor:f},children:[P.jsxs("div",{className:"stat-card-header",children:[n&&P.jsx("img",{className:"stat-card-icon",src:n,alt:`${e} icon`}),P.jsx("div",{className:"stat-card-title",children:e}),P.jsx("div",{className:"stat-card-year",children:t})]}),P.jsx("div",{className:"stat-subtitle",children:u}),P.jsxs("div",{className:"stat-columns",children:[P.jsxs("div",{className:"stat-column",children:[P.jsx("div",{className:"stat-percent",style:{color:p},children:r}),P.jsx("div",{className:"stat-label",children:"Visits"}),P.jsxs("div",{className:"stat-change",children:[m(o),o]})]}),P.jsxs("div",{className:"stat-column",children:[P.jsx("div",{className:"stat-percent",style:{color:p},children:i}),P.jsx("div",{className:"stat-label",children:"Admits"}),P.jsxs("div",{className:"stat-change",children:[m(s),s]})]})]})]})},cK=()=>P.jsxs("div",{className:"stat-grid",children:[P.jsxs("div",{className:"top-row",children:[P.jsx(ym,{title:"Acute Respiratory Infections",year:"2025",icon:"/assets/ari-vector.svg",visitPercent:"3.8%",admitPercent:"2.5%",visitChange:"9%",admitChange:"6%",subtitle:"Emergency Department",backgroundColor:"#F4C4A5"}),P.jsxs("div",{className:"stat-info-box",children:[P.jsx("h4",{className:"stat-info-title",children:"Emergency Department Trends"}),P.jsx("p",{className:"stat-info-description",children:"This summary highlights recent patterns in ED visits and admissions related to respiratory viruses across NYC. Use the toggles and filters above to explore further."})]})]}),P.jsxs("div",{className:"bottom-row",children:[P.jsx(ym,{title:"COVID-19",year:"2025",icon:"/assets/covid-vector.svg",visitPercent:"1.2%",admitPercent:"0.8%",visitChange:"12%",admitChange:"12%",subtitle:"Emergency Department",backgroundColor:"#EFF6FF"}),P.jsx(ym,{title:"Influenza",year:"2025",icon:"/assets/flu-vector.svg",visitPercent:"4.3%",admitPercent:"3.1%",visitChange:"8%",admitChange:"7%",subtitle:"Emergency Department",backgroundColor:"#F5F3FF"}),P.jsx(ym,{title:"RSV",year:"2025",icon:"/assets/rsv-vector.svg",visitPercent:"2.3%",admitPercent:"1.2%",visitChange:"5%",admitChange:"4%",subtitle:"Emergency Department",backgroundColor:"#ECFDF5"})]})]}),fK=()=>{const e=[{title:"ED Visits & Admissions",description:"Explore emergency department trends across boroughs.",link:"/data-explorer/emergency-dept"},{title:"Explore our Github Repository",description:"Visit our Github repo to get code, file an issue, or download data",link:"https://github.com/nychealth/respiratory-data-portal"},{title:"Prevention Measures",description:"Learn about best practices to avoid respiratory viruses",link:"/about#prevention"}];return P.jsx("section",{className:"overview-grid",children:e.map((t,n)=>P.jsxs("a",{className:"grid-card",href:t.link,target:t.link.startsWith("http")?"_blank":"_self",rel:"noopener noreferrer",children:[P.jsx("h3",{children:t.title}),P.jsx("p",{children:t.description})]},n))})};var Nb={exports:{}},Fb,KN;function dK(){if(KN)return Fb;KN=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Fb=e,Fb}var Mb,QN;function hK(){if(QN)return Mb;QN=1;var e=dK();function t(){}function n(){}return n.resetWarningCache=t,Mb=function(){function r(s,a,l,u,f,h){if(h!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},Mb}var ZN;function pK(){return ZN||(ZN=1,Nb.exports=hK()()),Nb.exports}var gK=pK();const Pe=Z_(gK),bv=({title:e,subtitle:t,chart:n,sidebar:r,footer:i})=>P.jsxs("div",{className:"chart-container",children:[P.jsx("div",{className:"chart-header",children:P.jsx("div",{className:"chart-title-section",children:t&&P.jsx("p",{className:"chart-subtitle",children:t})})}),P.jsxs("div",{className:"chart-content",children:[r&&P.jsx("div",{className:"chart-sidebar",children:r}),P.jsx("div",{className:"chart-body",children:n&&P.jsx("div",{className:"chart-vega",children:n})})]}),i&&P.jsx("div",{className:"chart-footer",children:i})]});bv.propTypes={title:Pe.string,subtitle:Pe.node,chart:Pe.node,sidebar:Pe.node,footer:Pe.node};const JN={};function Rk(e,t){e===void 0&&(e=JN),t===void 0&&(t=JN);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}const mK=/("(?:[^\\"]|\\.)*")|[:,]/g;function Db(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return function o(s,a,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const u=JSON.stringify(s,i);if(u===void 0)return u;const f=r-a.length-l;if(u.length<=f){const h=u.replace(mK,(p,m)=>m||`${p} `);if(h.length<=f)return h}if(i!=null&&(s=JSON.parse(u),i=void 0),typeof s=="object"&&s!==null){const h=a+n,p=[];let m=0,y,v;if(Array.isArray(s)){y="[",v="]";const{length:w}=s;for(;m<w;m++)p.push(o(s[m],h,m===w-1?0:1)||"null")}else{y="{",v="}";const w=Object.keys(s),{length:b}=w;for(;m<b;m++){const k=w[m],_=`${JSON.stringify(k)}: `,C=o(s[k],h,_.length+(m===b-1?0:1));C!==void 0&&p.push(_+C)}}if(p.length>0)return[y,n+p.join(`,
${h}`),v].join(`
${a}`)}return u}(e,"",0)}function jr(e,t,n){return e.fields=t||[],e.fname=n,e}function Ht(e){return e==null?null:e.fname}function Kn(e){return e==null?null:e.fields}function a7(e){return e.length===1?yK(e[0]):vK(e)}const yK=e=>function(t){return t[e]},vK=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function re(e){throw Error(e)}function rs(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||re("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&re("Access path missing closing bracket: "+e),r&&re("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Ci(e,t,n){const r=rs(e);return e=r.length===1?r[0]:e,jr((n&&n.get||a7)(r),[e],t||e)}const dg=Ci("id"),er=jr(e=>e,[],"identity"),Ia=jr(()=>0,[],"zero"),rd=jr(()=>1,[],"one"),$i=jr(()=>!0,[],"true"),Ra=jr(()=>!1,[],"false");function xK(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const l7=0,aC=1,lC=2,u7=3,c7=4;function uC(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xK,r=e||l7;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=aC&&n(t||"error","ERROR",arguments),this},warn(){return r>=lC&&n(t||"warn","WARN",arguments),this},info(){return r>=u7&&n(t||"log","INFO",arguments),this},debug(){return r>=c7&&n(t||"log","DEBUG",arguments),this}}}var ie=Array.isArray;function Ee(e){return e===Object(e)}const e6=e=>e!=="__proto__";function id(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=wK(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;od(r,o,i[o],s)}return r},{})}function od(e,t,n,r){if(!e6(t))return;let i,o;if(Ee(n)&&!ie(n)){o=Ee(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?od(o,i,n[i]):e6(i)&&(o[i]=n[i])}else e[t]=n}function wK(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function tt(e){return e[e.length-1]}function Yn(e){return e==null||e===""?null:+e}const f7=e=>t=>e*Math.exp(t),d7=e=>t=>Math.log(e*t),h7=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),p7=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,P1=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Ev(e,t,n,r){const i=n(e[0]),o=n(tt(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function g7(e,t){return Ev(e,t,Yn,er)}function m7(e,t){var n=Math.sign(e[0]);return Ev(e,t,d7(n),f7(n))}function y7(e,t,n){return Ev(e,t,P1(n),P1(1/n))}function v7(e,t,n){return Ev(e,t,h7(n),p7(n))}function kv(e,t,n,r,i){const o=r(e[0]),s=r(tt(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function cC(e,t,n){return kv(e,t,n,Yn,er)}function fC(e,t,n){const r=Math.sign(e[0]);return kv(e,t,n,d7(r),f7(r))}function L1(e,t,n,r){return kv(e,t,n,P1(r),P1(1/r))}function dC(e,t,n,r){return kv(e,t,n,h7(r),p7(r))}function x7(e){return 1+~~(new Date(e).getMonth()/3)}function w7(e){return 1+~~(new Date(e).getUTCMonth()/3)}function xe(e){return e!=null?ie(e)?e:[e]:[]}function b7(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ge(e){return typeof e=="function"}const bK="descending";function hC(e,t,n){n=n||{},t=xe(t)||[];const r=[],i=[],o={},s=n.comparator||EK;return xe(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===bK?-1:1),i.push(a=Ge(a)?a:Ci(a,null,n)),(Kn(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:jr(s(i,r),Object.keys(o))}const hg=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),EK=(e,t)=>e.length===1?kK(e[0],t[0]):SK(e,t,e.length),kK=(e,t)=>function(n,r){return hg(e(n),e(r))*t},SK=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=hg(o(r),o(i));return s*t[a]});function tr(e){return Ge(e)?e:()=>e}function pC(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Ve(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Go(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function E7(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}function ke(e,t){return Object.hasOwn(e,t)}const vm={};function sd(e){let t={},n;function r(o){return ke(t,o)&&t[o]!==vm}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===vm&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=vm),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==vm&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function k7(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=tt(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const f=Math.abs(l-t);return u<f&&u<=s?r:f<=s?i:o}function me(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ve(r,n)}function Jc(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function gl(e){return typeof e=="boolean"}function Ya(e){return Object.prototype.toString.call(e)==="[object Date]"}function S7(e){return e&&Ge(e[Symbol.iterator])}function lt(e){return typeof e=="number"}function gC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function we(e){return typeof e=="string"}function mC(e,t,n){e&&(e=t?xe(e).map(a=>a.replace(/\\(.)/g,"$1")):xe(e));const r=e&&e.length,i=n&&n.get||a7,o=a=>i(t?[a]:rs(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),f=0;for(;++f<r;)u+="|"+a[f](l);return u}}return jr(s,e,"key")}function _7(e,t){const n=e[0],r=tt(e),i=+t;return i?i===1?r:n+i*(r-n):n}const _K=1e4;function C7(e){e=+e||_K;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>ke(t,s)||ke(n,s),get:s=>ke(t,s)?t[s]:ke(n,s)?o(s,n[s]):void 0,set:(s,a)=>ke(t,s)?t[s]=a:o(s,a)}}function $7(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function Gh(e,t){let n="";for(;--t>=0;)n+=e;return n}function A7(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?Gh(i,s)+o:r==="center"?Gh(i,~~(s/2))+o+Gh(i,Math.ceil(s/2)):o+Gh(i,s)}function pg(e){return e&&tt(e)-e[0]||0}function pe(e){return ie(e)?"["+e.map(pe)+"]":Ee(e)||we(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function yC(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const CK=e=>lt(e)||Ya(e)?e:Date.parse(e);function vC(e,t){return t=t||CK,e==null||e===""?null:t(e)}function xC(e){return e==null||e===""?null:e+""}function so(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function T7(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function Ma(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var t6={},Ob={},Pb=34,xh=10,Lb=13;function R7(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function $K(e,t){var n=R7(e);return function(r,i){return t(n(r),i,e)}}function n6(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Ar(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function AK(e){return e<0?"-"+Ar(-e,6):e>9999?"+"+Ar(e,6):Ar(e,4)}function TK(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":AK(e.getUTCFullYear())+"-"+Ar(e.getUTCMonth()+1,2)+"-"+Ar(e.getUTCDate(),2)+(i?"T"+Ar(t,2)+":"+Ar(n,2)+":"+Ar(r,2)+"."+Ar(i,3)+"Z":r?"T"+Ar(t,2)+":"+Ar(n,2)+":"+Ar(r,2)+"Z":n||t?"T"+Ar(t,2)+":"+Ar(n,2)+"Z":"")}function RK(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(h,p){var m,y,v=i(h,function(w,b){if(m)return m(w,b-1);y=w,m=p?$K(w,p):R7(w)});return v.columns=y||[],v}function i(h,p){var m=[],y=h.length,v=0,w=0,b,k=y<=0,_=!1;h.charCodeAt(y-1)===xh&&--y,h.charCodeAt(y-1)===Lb&&--y;function C(){if(k)return Ob;if(_)return _=!1,t6;var R,A=v,N;if(h.charCodeAt(A)===Pb){for(;v++<y&&h.charCodeAt(v)!==Pb||h.charCodeAt(++v)===Pb;);return(R=v)>=y?k=!0:(N=h.charCodeAt(v++))===xh?_=!0:N===Lb&&(_=!0,h.charCodeAt(v)===xh&&++v),h.slice(A+1,R-1).replace(/""/g,'"')}for(;v<y;){if((N=h.charCodeAt(R=v++))===xh)_=!0;else if(N===Lb)_=!0,h.charCodeAt(v)===xh&&++v;else if(N!==n)continue;return h.slice(A,R)}return k=!0,h.slice(A,y)}for(;(b=C())!==Ob;){for(var $=[];b!==t6&&b!==Ob;)$.push(b),b=C();p&&($=p($,w++))==null||m.push($)}return m}function o(h,p){return h.map(function(m){return p.map(function(y){return f(m[y])}).join(e)})}function s(h,p){return p==null&&(p=n6(h)),[p.map(f).join(e)].concat(o(h,p)).join(`
`)}function a(h,p){return p==null&&(p=n6(h)),o(h,p).join(`
`)}function l(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?TK(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:f}}function NK(e){return e}function FK(e){if(e==null)return NK;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,f=a.length,h=new Array(f);for(h[0]=(t+=a[0])*r+o,h[1]=(n+=a[1])*i+s;u<f;)h[u]=a[u],++u;return h}}function MK(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function DK(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return r6(e,n)})}:r6(e,t)}function r6(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=N7(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function N7(e,t){var n=FK(e.transform),r=e.arcs;function i(f,h){h.length&&h.pop();for(var p=r[f<0?~f:f],m=0,y=p.length;m<y;++m)h.push(n(p[m],m));f<0&&MK(h,y)}function o(f){return n(f)}function s(f){for(var h=[],p=0,m=f.length;p<m;++p)i(f[p],h);return h.length<2&&h.push(h[0]),h}function a(f){for(var h=s(f);h.length<4;)h.push(h[0]);return h}function l(f){return f.map(a)}function u(f){var h=f.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:f.geometries.map(u)};case"Point":p=o(f.coordinates);break;case"MultiPoint":p=f.coordinates.map(o);break;case"LineString":p=s(f.arcs);break;case"MultiLineString":p=f.arcs.map(s);break;case"Polygon":p=l(f.arcs);break;case"MultiPolygon":p=f.arcs.map(l);break;default:return null}return{type:h,coordinates:p}}return u(t)}function OK(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,f){var h=e.arcs[u<0?~u:u],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=u,t[f]=p)}),t.forEach(function(u){var f=a(u),h=f[0],p=f[1],m,y;if(m=i[h])if(delete i[m.end],m.push(u),m.end=p,y=r[p]){delete r[y.start];var v=y===m?m:m.concat(y);r[v.start=m.start]=i[v.end=y.end]=v}else r[m.start]=i[m.end]=m;else if(m=r[p])if(delete r[m.start],m.unshift(u),m.start=h,y=i[h]){delete i[y.end];var w=y===m?m:y.concat(m);r[w.start=y.start]=i[w.end=m.end]=w}else r[m.start]=i[m.end]=m;else m=[u],r[m.start=h]=i[m.end=p]=m});function a(u){var f=e.arcs[u<0?~u:u],h=f[0],p;return e.transform?(p=[0,0],f.forEach(function(m){p[0]+=m[0],p[1]+=m[1]})):p=f[f.length-1],u<0?[p,h]:[h,p]}function l(u,f){for(var h in u){var p=u[h];delete f[p.start],delete p.start,delete p.end,p.forEach(function(m){n[m<0?~m:m]=1}),o.push(p)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function PK(e){return N7(e,LK.apply(this,arguments))}function LK(e,t,n){var r,i,o;if(arguments.length>1)r=IK(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:OK(e,r)}}function IK(e,t,n){var r=[],i=[],o;function s(h){var p=h<0?~h:h;(i[p]||(i[p]=[])).push({i:h,g:o})}function a(h){h.forEach(s)}function l(h){h.forEach(a)}function u(h){h.forEach(l)}function f(h){switch(o=h,h.type){case"GeometryCollection":h.geometries.forEach(f);break;case"LineString":a(h.arcs);break;case"MultiLineString":case"Polygon":l(h.arcs);break;case"MultiPolygon":u(h.arcs);break}}return f(t),i.forEach(n==null?function(h){r.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&r.push(h[0].i)}),r}function js(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zK(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ad(e){let t,n,r;e.length!==2?(t=js,n=(a,l)=>js(e(a),l),r=(a,l)=>e(a)-l):(t=e===js||e===zK?e:jK,n=e,r=e);function i(a,l,u=0,f=a.length){if(u<f){if(t(l,l)!==0)return f;do{const h=u+f>>>1;n(a[h],l)<0?u=h+1:f=h}while(u<f)}return u}function o(a,l,u=0,f=a.length){if(u<f){if(t(l,l)!==0)return f;do{const h=u+f>>>1;n(a[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function s(a,l,u=0,f=a.length){const h=i(a,l,u,f-1);return h>u&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:s,right:o}}function jK(){return 0}function F7(e){return e===null?NaN:+e}function*BK(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const M7=ad(js),el=M7.right,UK=M7.left;ad(F7).center;function qK(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function WK(e,t){const n=qK(e,t);return n&&Math.sqrt(n)}class gr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class i6 extends Map{constructor(t,n=P7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Nk(this,t))}has(t){return super.has(Nk(this,t))}set(t,n){return super.set(D7(this,t),n)}delete(t){return super.delete(O7(this,t))}}class I1 extends Set{constructor(t,n=P7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Nk(this,t))}add(t){return super.add(D7(this,t))}delete(t){return super.delete(O7(this,t))}}function Nk({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function D7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function O7({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function P7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function HK(e,t){return Array.from(t,n=>e[n])}function VK(e=js){if(e===js)return L7;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function L7(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const GK=Math.sqrt(50),YK=Math.sqrt(10),XK=Math.sqrt(2);function z1(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=GK?10:o>=YK?5:o>=XK?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?z1(e,t,n*2):[a,l,u]}function Fk(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?z1(t,e,n):z1(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function Mk(e,t,n){return t=+t,e=+e,n=+n,z1(e,t,n)[2]}function tl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Mk(t,e,n):Mk(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function gu(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Dk(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function I7(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?L7:VK(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,f=Math.log(l),h=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*h*(l-h)/l)*(u-l/2<0?-1:1),m=Math.max(n,Math.floor(t-u*h/l+p)),y=Math.min(r,Math.floor(t+(l-u)*h/l+p));I7(e,t,m,y,i)}const o=e[t];let s=n,a=r;for(wh(e,n,t),i(e[r],o)>0&&wh(e,n,r);s<a;){for(wh(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?wh(e,n,a):(++a,wh(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function wh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ok(e,t,n){if(e=Float64Array.from(BK(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Dk(e);if(t>=1)return gu(e);var r,i=(r-1)*t,o=Math.floor(i),s=gu(I7(e,o).subarray(0,o+1)),a=Dk(e.subarray(o+1));return s+(a-s)*(i-o)}}function z7(e,t,n=F7){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function KK(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function j7(e,t){return Ok(e,.5,t)}function*QK(e){for(const t of e)yield*t}function B7(e){return Array.from(QK(e))}function Qr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function U7(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function ZK(e,...t){e=new I1(e),t=t.map(JK);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function JK(e){return e instanceof I1?e:new I1(e)}function eQ(...e){const t=new I1;for(const n of e)for(const r of n)t.add(r);return t}function tQ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function j1(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xf(e){return e=j1(Math.abs(e)),e?e[1]:NaN}function nQ(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function rQ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var iQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _u(e){if(!(t=iQ.exec(e)))throw new Error("invalid format: "+e);var t;return new wC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_u.prototype=wC.prototype;function wC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}wC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oQ(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var q7;function sQ(e,t){var n=j1(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(q7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+j1(e,Math.max(0,t+o-1))[0]}function o6(e,t){var n=j1(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const s6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:tQ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>o6(e*100,t),r:o6,s:sQ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function a6(e){return e}var l6=Array.prototype.map,u6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function W7(e){var t=e.grouping===void 0||e.thousands===void 0?a6:nQ(l6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?a6:rQ(l6.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(h){h=_u(h);var p=h.fill,m=h.align,y=h.sign,v=h.symbol,w=h.zero,b=h.width,k=h.comma,_=h.precision,C=h.trim,$=h.type;$==="n"?(k=!0,$="g"):s6[$]||(_===void 0&&(_=12),C=!0,$="g"),(w||p==="0"&&m==="=")&&(w=!0,p="0",m="=");var R=v==="$"?n:v==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",A=v==="$"?r:/[%p]/.test($)?s:"",N=s6[$],F=/[defgprs%]/.test($);_=_===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function L(O){var K=R,W=A,j,M,U;if($==="c")W=N(O)+W,O="";else{O=+O;var X=O<0||1/O<0;if(O=isNaN(O)?l:N(Math.abs(O),_),C&&(O=oQ(O)),X&&+O==0&&y!=="+"&&(X=!1),K=(X?y==="("?y:a:y==="-"||y==="("?"":y)+K,W=($==="s"?u6[8+q7/3]:"")+W+(X&&y==="("?")":""),F){for(j=-1,M=O.length;++j<M;)if(U=O.charCodeAt(j),48>U||U>57){W=(U===46?i+O.slice(j+1):O.slice(j))+W,O=O.slice(0,j);break}}}k&&!w&&(O=t(O,1/0));var q=K.length+O.length+W.length,H=q<b?new Array(b-q+1).join(p):"";switch(k&&w&&(O=t(H+O,H.length?b-W.length:1/0),H=""),m){case"<":O=K+O+W+H;break;case"=":O=K+H+O+W;break;case"^":O=H.slice(0,q=H.length>>1)+K+O+W+H.slice(q);break;default:O=H+K+O+W;break}return o(O)}return L.toString=function(){return h+""},L}function f(h,p){var m=u((h=_u(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(xf(p)/3)))*3,v=Math.pow(10,-y),w=u6[8+y/3];return function(b){return m(v*b)+w}}return{format:u,formatPrefix:f}}var xm,Sv,bC;aQ({thousands:",",grouping:[3],currency:["$",""]});function aQ(e){return xm=W7(e),Sv=xm.format,bC=xm.formatPrefix,xm}function H7(e){return Math.max(0,-xf(Math.abs(e)))}function V7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xf(t)/3)))*3-xf(Math.abs(e)))}function G7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xf(t)-xf(e))+1}const Ib=new Date,zb=new Date;function fn(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>fn(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(Ib.setTime(+o),zb.setTime(+s),e(Ib),e(zb),Math.floor(n(Ib,zb))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const wf=fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):wf);wf.range;const Ms=1e3,vi=Ms*60,Ds=vi*60,Xs=Ds*24,EC=Xs*7,c6=Xs*30,jb=Xs*365,Os=fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ms)},(e,t)=>(t-e)/Ms,e=>e.getUTCSeconds());Os.range;const _v=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ms)},(e,t)=>{e.setTime(+e+t*vi)},(e,t)=>(t-e)/vi,e=>e.getMinutes());_v.range;const Cv=fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*vi)},(e,t)=>(t-e)/vi,e=>e.getUTCMinutes());Cv.range;const $v=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ms-e.getMinutes()*vi)},(e,t)=>{e.setTime(+e+t*Ds)},(e,t)=>(t-e)/Ds,e=>e.getHours());$v.range;const Av=fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ds)},(e,t)=>(t-e)/Ds,e=>e.getUTCHours());Av.range;const Bs=fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vi)/Xs,e=>e.getDate()-1);Bs.range;const Xa=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xs,e=>e.getUTCDate()-1);Xa.range;const Y7=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xs,e=>Math.floor(e/Xs));Y7.range;function Yu(e){return fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*vi)/EC)}const ld=Yu(0),B1=Yu(1),lQ=Yu(2),uQ=Yu(3),bf=Yu(4),cQ=Yu(5),fQ=Yu(6);ld.range;B1.range;lQ.range;uQ.range;bf.range;cQ.range;fQ.range;function Xu(e){return fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/EC)}const ud=Xu(0),U1=Xu(1),dQ=Xu(2),hQ=Xu(3),Ef=Xu(4),pQ=Xu(5),gQ=Xu(6);ud.range;U1.range;dQ.range;hQ.range;Ef.range;pQ.range;gQ.range;const Mp=fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Mp.range;const Dp=fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Dp.range;const Yo=fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Yo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Yo.range;const Xo=fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Xo.range;function X7(e,t,n,r,i,o){const s=[[Os,1,Ms],[Os,5,5*Ms],[Os,15,15*Ms],[Os,30,30*Ms],[o,1,vi],[o,5,5*vi],[o,15,15*vi],[o,30,30*vi],[i,1,Ds],[i,3,3*Ds],[i,6,6*Ds],[i,12,12*Ds],[r,1,Xs],[r,2,2*Xs],[n,1,EC],[t,1,c6],[t,3,3*c6],[e,1,jb]];function a(u,f,h){const p=f<u;p&&([u,f]=[f,u]);const m=h&&typeof h.range=="function"?h:l(u,f,h),y=m?m.range(u,+f+1):[];return p?y.reverse():y}function l(u,f,h){const p=Math.abs(f-u)/h,m=ad(([,,w])=>w).right(s,p);if(m===s.length)return e.every(tl(u/jb,f/jb,h));if(m===0)return wf.every(Math.max(tl(u,f,h),1));const[y,v]=s[p/s[m-1][2]<s[m][2]/p?m-1:m];return y.every(v)}return[a,l]}const[mQ,yQ]=X7(Xo,Dp,ud,Y7,Av,Cv),[vQ,xQ]=X7(Yo,Mp,ld,Bs,$v,_v),Dn="year",Dr="quarter",Qn="month",ln="week",Or="date",Gn="day",Ko="dayofyear",ii="hours",oi="minutes",Ai="seconds",ao="milliseconds",kC=[Dn,Dr,Qn,ln,Or,Gn,Ko,ii,oi,Ai,ao],Bb=kC.reduce((e,t,n)=>(e[t]=1+n,e),{});function SC(e){const t=xe(e).slice(),n={};return t.length||re("Missing time unit."),t.forEach(i=>{ke(Bb,i)?n[i]=1:re(`Invalid time unit: ${i}.`)}),(n[ln]||n[Gn]?1:0)+(n[Dr]||n[Qn]||n[Or]?1:0)+(n[Ko]?1:0)>1&&re(`Incompatible time units: ${e}`),t.sort((i,o)=>Bb[i]-Bb[o]),t}const wQ={[Dn]:"%Y ",[Dr]:"Q%q ",[Qn]:"%b ",[Or]:"%d ",[ln]:"W%U ",[Gn]:"%a ",[Ko]:"%j ",[ii]:"%H:00",[oi]:"00:%M",[Ai]:":%S",[ao]:".%L",[`${Dn}-${Qn}`]:"%Y-%m ",[`${Dn}-${Qn}-${Or}`]:"%Y-%m-%d ",[`${ii}-${oi}`]:"%H:%M"};function K7(e,t){const n=Ve({},wQ,t),r=SC(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const ou=new Date;function _C(e){return ou.setFullYear(e),ou.setMonth(0),ou.setDate(1),ou.setHours(0,0,0,0),ou}function Q7(e){return J7(new Date(e))}function Z7(e){return Pk(new Date(e))}function J7(e){return Bs.count(_C(e.getFullYear())-1,e)}function Pk(e){return ld.count(_C(e.getFullYear())-1,e)}function Lk(e){return _C(e).getDay()}function bQ(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function eP(e){return nP(new Date(e))}function tP(e){return Ik(new Date(e))}function nP(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Xa.count(t-1,e)}function Ik(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ud.count(t-1,e)}function zk(e){return ou.setTime(Date.UTC(e,0,1)),ou.getUTCDay()}function EQ(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function rP(e,t,n,r,i){const o=t||1,s=tt(e),a=(b,k,_)=>(_=_||b,kQ(n[_],r[_],b===s&&o,k)),l=new Date,u=so(e),f=u[Dn]?a(Dn):tr(2012),h=u[Qn]?a(Qn):u[Dr]?a(Dr):Ia,p=u[ln]&&u[Gn]?a(Gn,1,ln+Gn):u[ln]?a(ln,1):u[Gn]?a(Gn,1):u[Or]?a(Or,1):u[Ko]?a(Ko,1):rd,m=u[ii]?a(ii):Ia,y=u[oi]?a(oi):Ia,v=u[Ai]?a(Ai):Ia,w=u[ao]?a(ao):Ia;return function(b){l.setTime(+b);const k=f(l);return i(k,h(l),p(l,k),m(l),y(l),v(l),w(l))}}function kQ(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function kf(e,t,n){return t+e*7-(n+6)%7}const SQ={[Dn]:e=>e.getFullYear(),[Dr]:e=>Math.floor(e.getMonth()/3),[Qn]:e=>e.getMonth(),[Or]:e=>e.getDate(),[ii]:e=>e.getHours(),[oi]:e=>e.getMinutes(),[Ai]:e=>e.getSeconds(),[ao]:e=>e.getMilliseconds(),[Ko]:e=>J7(e),[ln]:e=>Pk(e),[ln+Gn]:(e,t)=>kf(Pk(e),e.getDay(),Lk(t)),[Gn]:(e,t)=>kf(1,e.getDay(),Lk(t))},_Q={[Dr]:e=>3*e,[ln]:(e,t)=>kf(e,0,Lk(t))};function iP(e,t){return rP(e,t||1,SQ,_Q,bQ)}const CQ={[Dn]:e=>e.getUTCFullYear(),[Dr]:e=>Math.floor(e.getUTCMonth()/3),[Qn]:e=>e.getUTCMonth(),[Or]:e=>e.getUTCDate(),[ii]:e=>e.getUTCHours(),[oi]:e=>e.getUTCMinutes(),[Ai]:e=>e.getUTCSeconds(),[ao]:e=>e.getUTCMilliseconds(),[Ko]:e=>nP(e),[ln]:e=>Ik(e),[Gn]:(e,t)=>kf(1,e.getUTCDay(),zk(t)),[ln+Gn]:(e,t)=>kf(Ik(e),e.getUTCDay(),zk(t))},$Q={[Dr]:e=>3*e,[ln]:(e,t)=>kf(e,0,zk(t))};function oP(e,t){return rP(e,t||1,CQ,$Q,EQ)}const AQ={[Dn]:Yo,[Dr]:Mp.every(3),[Qn]:Mp,[ln]:ld,[Or]:Bs,[Gn]:Bs,[Ko]:Bs,[ii]:$v,[oi]:_v,[Ai]:Os,[ao]:wf},TQ={[Dn]:Xo,[Dr]:Dp.every(3),[Qn]:Dp,[ln]:ud,[Or]:Xa,[Gn]:Xa,[Ko]:Xa,[ii]:Av,[oi]:Cv,[Ai]:Os,[ao]:wf};function cd(e){return AQ[e]}function fd(e){return TQ[e]}function sP(e,t,n){return e?e.offset(t,n):void 0}function aP(e,t,n){return sP(cd(e),t,n)}function lP(e,t,n){return sP(fd(e),t,n)}function uP(e,t,n,r){return e?e.range(t,n,r):void 0}function cP(e,t,n,r){return uP(cd(e),t,n,r)}function fP(e,t,n,r){return uP(fd(e),t,n,r)}const Yh=1e3,Xh=Yh*60,Kh=Xh*60,Tv=Kh*24,RQ=Tv*7,f6=Tv*30,jk=Tv*365,dP=[Dn,Qn,Or,ii,oi,Ai,ao],Qh=dP.slice(0,-1),Zh=Qh.slice(0,-1),Jh=Zh.slice(0,-1),NQ=Jh.slice(0,-1),FQ=[Dn,ln],d6=[Dn,Qn],hP=[Dn],bh=[[Qh,1,Yh],[Qh,5,5*Yh],[Qh,15,15*Yh],[Qh,30,30*Yh],[Zh,1,Xh],[Zh,5,5*Xh],[Zh,15,15*Xh],[Zh,30,30*Xh],[Jh,1,Kh],[Jh,3,3*Kh],[Jh,6,6*Kh],[Jh,12,12*Kh],[NQ,1,Tv],[FQ,1,RQ],[d6,1,f6],[d6,3,3*f6],[hP,1,jk]];function pP(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(pg(t))/n;let i=ad(a=>a[2]).right(bh,r),o,s;return i===bh.length?(o=hP,s=tl(t[0]/jk,t[1]/jk,n)):i?(i=bh[r/bh[i-1][2]<bh[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=dP,s=Math.max(tl(t[0],t[1],n),1)),{units:o,step:s}}function Ub(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function qb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Eh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function gP(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=kh(i),f=Sh(i),h=kh(o),p=Sh(o),m=kh(s),y=Sh(s),v=kh(a),w=Sh(a),b=kh(l),k=Sh(l),_={a:X,A:q,b:H,B:J,c:null,d:v6,e:v6,f:tZ,g:fZ,G:hZ,H:ZQ,I:JQ,j:eZ,L:mP,m:nZ,M:rZ,p:I,q:G,Q:b6,s:E6,S:iZ,u:oZ,U:sZ,V:aZ,w:lZ,W:uZ,x:null,X:null,y:cZ,Y:dZ,Z:pZ,"%":w6},C={a:ve,A:Ce,b:be,B:Be,c:null,d:x6,e:x6,f:vZ,g:AZ,G:RZ,H:gZ,I:mZ,j:yZ,L:vP,m:xZ,M:wZ,p:nt,q:Xe,Q:b6,s:E6,S:bZ,u:EZ,U:kZ,V:SZ,w:_Z,W:CZ,x:null,X:null,y:$Z,Y:TZ,Z:NZ,"%":w6},$={a:L,A:O,b:K,B:W,c:j,d:m6,e:m6,f:YQ,g:g6,G:p6,H:y6,I:y6,j:WQ,L:GQ,m:qQ,M:HQ,p:F,q:UQ,Q:KQ,s:QQ,S:VQ,u:LQ,U:IQ,V:zQ,w:PQ,W:jQ,x:M,X:U,y:g6,Y:p6,Z:BQ,"%":XQ};_.x=R(n,_),_.X=R(r,_),_.c=R(t,_),C.x=R(n,C),C.X=R(r,C),C.c=R(t,C);function R(he,Oe){return function(He){var ue=[],jt=-1,it=0,Vt=he.length,nn,Ur,Rd;for(He instanceof Date||(He=new Date(+He));++jt<Vt;)he.charCodeAt(jt)===37&&(ue.push(he.slice(it,jt)),(Ur=h6[nn=he.charAt(++jt)])!=null?nn=he.charAt(++jt):Ur=nn==="e"?" ":"0",(Rd=Oe[nn])&&(nn=Rd(He,Ur)),ue.push(nn),it=jt+1);return ue.push(he.slice(it,jt)),ue.join("")}}function A(he,Oe){return function(He){var ue=Eh(1900,void 0,1),jt=N(ue,he,He+="",0),it,Vt;if(jt!=He.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Oe&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(it=qb(Eh(ue.y,0,1)),Vt=it.getUTCDay(),it=Vt>4||Vt===0?U1.ceil(it):U1(it),it=Xa.offset(it,(ue.V-1)*7),ue.y=it.getUTCFullYear(),ue.m=it.getUTCMonth(),ue.d=it.getUTCDate()+(ue.w+6)%7):(it=Ub(Eh(ue.y,0,1)),Vt=it.getDay(),it=Vt>4||Vt===0?B1.ceil(it):B1(it),it=Bs.offset(it,(ue.V-1)*7),ue.y=it.getFullYear(),ue.m=it.getMonth(),ue.d=it.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Vt="Z"in ue?qb(Eh(ue.y,0,1)).getUTCDay():Ub(Eh(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Vt+5)%7:ue.w+ue.U*7-(Vt+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,qb(ue)):Ub(ue)}}function N(he,Oe,He,ue){for(var jt=0,it=Oe.length,Vt=He.length,nn,Ur;jt<it;){if(ue>=Vt)return-1;if(nn=Oe.charCodeAt(jt++),nn===37){if(nn=Oe.charAt(jt++),Ur=$[nn in h6?Oe.charAt(jt++):nn],!Ur||(ue=Ur(he,He,ue))<0)return-1}else if(nn!=He.charCodeAt(ue++))return-1}return ue}function F(he,Oe,He){var ue=u.exec(Oe.slice(He));return ue?(he.p=f.get(ue[0].toLowerCase()),He+ue[0].length):-1}function L(he,Oe,He){var ue=m.exec(Oe.slice(He));return ue?(he.w=y.get(ue[0].toLowerCase()),He+ue[0].length):-1}function O(he,Oe,He){var ue=h.exec(Oe.slice(He));return ue?(he.w=p.get(ue[0].toLowerCase()),He+ue[0].length):-1}function K(he,Oe,He){var ue=b.exec(Oe.slice(He));return ue?(he.m=k.get(ue[0].toLowerCase()),He+ue[0].length):-1}function W(he,Oe,He){var ue=v.exec(Oe.slice(He));return ue?(he.m=w.get(ue[0].toLowerCase()),He+ue[0].length):-1}function j(he,Oe,He){return N(he,t,Oe,He)}function M(he,Oe,He){return N(he,n,Oe,He)}function U(he,Oe,He){return N(he,r,Oe,He)}function X(he){return s[he.getDay()]}function q(he){return o[he.getDay()]}function H(he){return l[he.getMonth()]}function J(he){return a[he.getMonth()]}function I(he){return i[+(he.getHours()>=12)]}function G(he){return 1+~~(he.getMonth()/3)}function ve(he){return s[he.getUTCDay()]}function Ce(he){return o[he.getUTCDay()]}function be(he){return l[he.getUTCMonth()]}function Be(he){return a[he.getUTCMonth()]}function nt(he){return i[+(he.getUTCHours()>=12)]}function Xe(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var Oe=R(he+="",_);return Oe.toString=function(){return he},Oe},parse:function(he){var Oe=A(he+="",!1);return Oe.toString=function(){return he},Oe},utcFormat:function(he){var Oe=R(he+="",C);return Oe.toString=function(){return he},Oe},utcParse:function(he){var Oe=A(he+="",!0);return Oe.toString=function(){return he},Oe}}}var h6={"-":"",_:" ",0:"0"},Sn=/^\s*\d+/,MQ=/^%/,DQ=/[\\^$*+?|[\]().{}]/g;function ut(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function OQ(e){return e.replace(DQ,"\\$&")}function kh(e){return new RegExp("^(?:"+e.map(OQ).join("|")+")","i")}function Sh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function PQ(e,t,n){var r=Sn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function LQ(e,t,n){var r=Sn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function IQ(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function zQ(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function jQ(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function p6(e,t,n){var r=Sn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function g6(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function BQ(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function UQ(e,t,n){var r=Sn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function qQ(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function m6(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function WQ(e,t,n){var r=Sn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function y6(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function HQ(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function VQ(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function GQ(e,t,n){var r=Sn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function YQ(e,t,n){var r=Sn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function XQ(e,t,n){var r=MQ.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function KQ(e,t,n){var r=Sn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function QQ(e,t,n){var r=Sn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function v6(e,t){return ut(e.getDate(),t,2)}function ZQ(e,t){return ut(e.getHours(),t,2)}function JQ(e,t){return ut(e.getHours()%12||12,t,2)}function eZ(e,t){return ut(1+Bs.count(Yo(e),e),t,3)}function mP(e,t){return ut(e.getMilliseconds(),t,3)}function tZ(e,t){return mP(e,t)+"000"}function nZ(e,t){return ut(e.getMonth()+1,t,2)}function rZ(e,t){return ut(e.getMinutes(),t,2)}function iZ(e,t){return ut(e.getSeconds(),t,2)}function oZ(e){var t=e.getDay();return t===0?7:t}function sZ(e,t){return ut(ld.count(Yo(e)-1,e),t,2)}function yP(e){var t=e.getDay();return t>=4||t===0?bf(e):bf.ceil(e)}function aZ(e,t){return e=yP(e),ut(bf.count(Yo(e),e)+(Yo(e).getDay()===4),t,2)}function lZ(e){return e.getDay()}function uZ(e,t){return ut(B1.count(Yo(e)-1,e),t,2)}function cZ(e,t){return ut(e.getFullYear()%100,t,2)}function fZ(e,t){return e=yP(e),ut(e.getFullYear()%100,t,2)}function dZ(e,t){return ut(e.getFullYear()%1e4,t,4)}function hZ(e,t){var n=e.getDay();return e=n>=4||n===0?bf(e):bf.ceil(e),ut(e.getFullYear()%1e4,t,4)}function pZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ut(t/60|0,"0",2)+ut(t%60,"0",2)}function x6(e,t){return ut(e.getUTCDate(),t,2)}function gZ(e,t){return ut(e.getUTCHours(),t,2)}function mZ(e,t){return ut(e.getUTCHours()%12||12,t,2)}function yZ(e,t){return ut(1+Xa.count(Xo(e),e),t,3)}function vP(e,t){return ut(e.getUTCMilliseconds(),t,3)}function vZ(e,t){return vP(e,t)+"000"}function xZ(e,t){return ut(e.getUTCMonth()+1,t,2)}function wZ(e,t){return ut(e.getUTCMinutes(),t,2)}function bZ(e,t){return ut(e.getUTCSeconds(),t,2)}function EZ(e){var t=e.getUTCDay();return t===0?7:t}function kZ(e,t){return ut(ud.count(Xo(e)-1,e),t,2)}function xP(e){var t=e.getUTCDay();return t>=4||t===0?Ef(e):Ef.ceil(e)}function SZ(e,t){return e=xP(e),ut(Ef.count(Xo(e),e)+(Xo(e).getUTCDay()===4),t,2)}function _Z(e){return e.getUTCDay()}function CZ(e,t){return ut(U1.count(Xo(e)-1,e),t,2)}function $Z(e,t){return ut(e.getUTCFullYear()%100,t,2)}function AZ(e,t){return e=xP(e),ut(e.getUTCFullYear()%100,t,2)}function TZ(e,t){return ut(e.getUTCFullYear()%1e4,t,4)}function RZ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ef(e):Ef.ceil(e),ut(e.getUTCFullYear()%1e4,t,4)}function NZ(){return"+0000"}function w6(){return"%"}function b6(e){return+e}function E6(e){return Math.floor(+e/1e3)}var Ic,CC,wP,$C,bP;FZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function FZ(e){return Ic=gP(e),CC=Ic.format,wP=Ic.parse,$C=Ic.utcFormat,bP=Ic.utcParse,Ic}function ep(e){const t={};return n=>t[n]||(t[n]=e(n))}function MZ(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=DZ(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function DZ(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function EP(e){const t=ep(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=_u(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return MZ(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=_u(s??",f");const a=tl(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=V7(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=G7(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=H7(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let Bk;kP();function kP(){return Bk=EP({format:Sv,formatPrefix:bC})}function SP(e){return EP(W7(e))}function q1(e){return arguments.length?Bk=SP(e):Bk}function k6(e,t,n){n=n||{},Ee(n)||re(`Invalid time multi-format specifier: ${n}`);const r=t(Ai),i=t(oi),o=t(ii),s=t(Or),a=t(ln),l=t(Qn),u=t(Dr),f=t(Dn),h=e(n[ao]||".%L"),p=e(n[Ai]||":%S"),m=e(n[oi]||"%I:%M"),y=e(n[ii]||"%I %p"),v=e(n[Or]||n[Gn]||"%a %d"),w=e(n[ln]||"%b %d"),b=e(n[Qn]||"%B"),k=e(n[Dr]||"%B"),_=e(n[Dn]||"%Y");return C=>(r(C)<C?h:i(C)<C?p:o(C)<C?m:s(C)<C?y:l(C)<C?a(C)<C?v:w:f(C)<C?u(C)<C?b:k:_)(C)}function _P(e){const t=ep(e.format),n=ep(e.utcFormat);return{timeFormat:r=>we(r)?t(r):k6(t,cd,r),utcFormat:r=>we(r)?n(r):k6(n,fd,r),timeParse:ep(e.parse),utcParse:ep(e.utcParse)}}let Uk;CP();function CP(){return Uk=_P({format:CC,parse:wP,utcFormat:$C,utcParse:bP})}function $P(e){return _P(gP(e))}function Op(e){return arguments.length?Uk=$P(e):Uk}const qk=(e,t)=>Ve({},e,t);function AP(e,t){const n=e?SP(e):q1(),r=t?$P(t):Op();return qk(n,r)}function AC(e,t){const n=arguments.length;return n&&n!==2&&re("defaultLocale expects either zero or two arguments."),n?qk(q1(e),Op(t)):qk(q1(),Op())}function OZ(){return kP(),CP(),AC()}const PZ=/^(data:|([A-Za-z]+:)?\/\/)/,LZ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,IZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,S6="file://";function zZ(e,t){return n=>({options:n||{},sanitize:BZ,load:jZ,fileAccess:!1,file:UZ(),http:WZ(e)})}async function jZ(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function BZ(e,t){t=Ve({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=LZ.test(e.replace(IZ,""));(e==null||typeof e!="string"||!a)&&re("Sanitize failure, invalid URI: "+pe(e));const l=PZ.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(S6))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(S6.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function UZ(e){return qZ}async function qZ(){re("No file system access.")}function WZ(e){return e?async function(t,n){const r=Ve({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Ge(o[i])?o[i]():o.text():re(o.status+""+o.statusText)}:HZ}async function HZ(){re("No HTTP fetch method available.")}const VZ=e=>e!=null&&e===e,GZ=e=>e==="true"||e==="false"||e===!0||e===!1,YZ=e=>!Number.isNaN(Date.parse(e)),TP=e=>!Number.isNaN(+e)&&!(e instanceof Date),XZ=e=>TP(e)&&Number.isInteger(+e),Wk={boolean:yC,integer:Yn,number:Yn,date:vC,string:xC,unknown:er},wm=[GZ,XZ,TP,YZ],KZ=["boolean","integer","number","date"];function RP(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=wm.length,i=wm.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&VZ(l)&&!wm[a](l)&&(i[a]=0,++s,s===wm.length))return"string";return KZ[i.reduce((o,s)=>o===0?s:o,0)-1]}function NP(e,t){return t.reduce((n,r)=>(n[r]=RP(e,r),n),{})}function _6(e){const t=function(n,r){const i={delimiter:e};return TC(n,r?Ve(r,i):i)};return t.responseType="text",t}function TC(e,t){return t.header&&(e=t.header.map(pe).join(t.delimiter)+`
`+e),RK(t.delimiter).parse(e+"")}TC.responseType="text";function QZ(e){return typeof Buffer=="function"&&Ge(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function RC(e,t){const n=t&&t.property?Ci(t.property):er;return Ee(e)&&!QZ(e)?ZZ(n(e),t):n(JSON.parse(e))}RC.responseType="json";function ZZ(e,t){return!ie(e)&&S7(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const JZ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function FP(e,t){let n,r,i,o;return e=RC(e,t),t&&t.feature?(n=DK,i=t.feature):t&&t.mesh?(n=PK,i=t.mesh,o=JZ[t.filter]):re("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):re("Invalid TopoJSON object: "+i),r&&r.features||[r]}FP.responseType="json";const u1={dsv:TC,csv:_6(","),tsv:_6("	"),json:RC,topojson:FP};function NC(e,t){return arguments.length>1?(u1[e]=t,this):ke(u1,e)?u1[e]:null}function MP(e){const t=NC(e);return t&&t.responseType||"text"}function DP(e,t,n,r){t=t||{};const i=NC(t.type||"json");return i||re("Unknown data format type: "+t.type),e=i(e,t),t.parse&&eJ(e,t.parse,n,r),ke(e,"columns")&&delete e.columns,e}function eJ(e,t,n,r){if(!e.length)return;const i=Op();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,f,h;t==="auto"&&(t=NP(e,o)),o=Object.keys(t);const p=o.map(m=>{const y=t[m];let v,w;if(y&&(y.startsWith("date:")||y.startsWith("utc:")))return v=y.split(/:(.+)?/,2),w=v[1],(w[0]==="'"&&w[w.length-1]==="'"||w[0]==='"'&&w[w.length-1]==='"')&&(w=w.slice(1,-1)),(v[0]==="utc"?r:n)(w);if(!Wk[y])throw Error("Illegal format pattern: "+m+":"+y);return Wk[y]});for(l=0,f=e.length,h=o.length;l<f;++l)for(s=e[l],u=0;u<h;++u)a=o[u],s[a]=p[u](s[a])}const Rv=zZ(typeof fetch<"u"&&fetch);function Nv(e){const t=e||er,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function c1(e,t){try{await t(e)}catch(n){e.error(n)}}const OP=Symbol("vega_id");let tJ=1;function Fv(e){return!!(e&&Me(e))}function Me(e){return e[OP]}function PP(e,t){return e[OP]=t,e}function ft(e){const t=e===Object(e)?e:{data:e};return Me(t)?t:PP(t,tJ++)}function FC(e){return Mv(e,ft({}))}function Mv(e,t){for(const n in e)t[n]=e[n];return t}function LP(e,t){return PP(t,Me(e))}function Ku(e,t){return e?t?(n,r)=>e(n,r)||Me(t(n))-Me(t(r)):(n,r)=>e(n,r)||Me(n)-Me(r):null}function IP(e){return e&&e.constructor===Qu}function Qu(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:Qu,insert(a){const l=xe(a),u=l.length;for(let f=0;f<u;++f)e.push(l[f]);return this},remove(a){const l=Ge(a)?r:t,u=xe(a),f=u.length;for(let h=0;h<f;++h)l.push(u[h]);return this},modify(a,l,u){const f={field:l,value:tr(u)};return Ge(a)?(f.filter=a,i.push(f)):(f.tuple=a,n.push(f)),this},encode(a,l){return Ge(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},f={};let h,p,m,y,v,w;for(h=0,p=l.length;h<p;++h)u[Me(l[h])]=1;for(h=0,p=t.length;h<p;++h)v=t[h],u[Me(v)]=-1;for(h=0,p=r.length;h<p;++h)y=r[h],l.forEach(k=>{y(k)&&(u[Me(k)]=-1)});for(h=0,p=e.length;h<p;++h)v=e[h],w=Me(v),u[w]?u[w]=1:a.add.push(ft(e[h]));for(h=0,p=l.length;h<p;++h)v=l[h],u[Me(v)]<0&&a.rem.push(v);function b(k,_,C){C?k[_]=C(k):a.encode=_,s||(f[Me(k)]=k)}for(h=0,p=n.length;h<p;++h)m=n[h],v=m.tuple,y=m.field,w=u[Me(v)],w>0&&(b(v,y,m.value),a.modifies(y));for(h=0,p=i.length;h<p;++h)m=i[h],y=m.filter,l.forEach(k=>{y(k)&&u[Me(k)]>0&&b(k,m.field,m.value)}),a.modifies(m.field);if(s)a.mod=t.length||r.length?l.filter(k=>u[Me(k)]>0):l.slice();else for(w in f)a.mod.push(f[w]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const f1="_:mod:_";function Dv(){Object.defineProperty(this,f1,{writable:!0,value:{}})}Dv.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[f1];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=ie(n)?1+n.length:-1),i},modified(e,t){const n=this[f1];if(arguments.length){if(ie(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[f1]={},this}};let nJ=0;const rJ="pulse",iJ=new Dv,oJ=1,sJ=2;function Et(e,t,n,r){this.id=++nJ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function C6(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Et.prototype={targets(){return this._targets||(this._targets=Nv(dg))},set(e){return this.value!==e?(this.value=e,1):0},skip:C6(oJ),modified:C6(sJ),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new Dv,i=this._argops=this._argops||[],o=[];let s,a,l,u;const f=(h,p,m)=>{m instanceof Et?(m!==this&&(t&&m.targets().add(this),o.push(m)),i.push({op:m,name:h,index:p})):r.set(h,p,m)};for(s in e)if(a=e[s],s===rJ)xe(a).forEach(h=>{h instanceof Et?h!==this&&(h.targets().add(this),o.push(h)):re("Pulse parameters must be operator instances.")}),this.source=a;else if(ie(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)f(s,u,a[u]);else f(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||iJ,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function aJ(e,t,n,r){let i=1,o;return e instanceof Et?o=e:e&&e.prototype instanceof Et?o=new e:Ge(e)?o=new Et(null,e):(i=0,o=new Et(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function lJ(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let uJ=0;function Ov(e,t,n){this.id=++uJ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Na(e,t,n){return new Ov(e,t,n)}Ov.prototype={_filter:$i,_apply:er,targets(){return this._targets||(this._targets=Nv(dg))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Na(e);return this.targets().add(t),t},apply(e){const t=Na(null,e);return this.targets().add(t),t},merge(){const e=Na();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Na();return this.targets().add(Na(null,null,pC(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Na(null,null,()=>n=!0)),t.targets().add(Na(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=$i,this._targets=null}};function cJ(e,t,n,r){const i=this,o=Na(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(f){i.error(f)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=xe(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function fJ(e,t){const n=this.locale();return DP(e,t,n.timeParse,n.utcParse)}function dJ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function hJ(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:MP(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function pJ(e,t,n){const r=this,i=r._pending||gJ(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove($i).insert(o.data||[])),i.done(),o}function gJ(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const mJ={skip:!0};function yJ(e,t,n,r,i){return(e instanceof Et?xJ:vJ)(this,e,t,n,r,i),this}function vJ(e,t,n,r,i,o){const s=Ve({},o,mJ);let a,l;Ge(n)||(n=tr(n)),r===void 0?a=u=>e.touch(n(u)):Ge(r)?(l=new Et(null,r,i,!1),a=u=>{l.evaluate(u);const f=n(u),h=l.value;IP(h)?e.pulse(f,h,o):e.update(f,h,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function xJ(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new Et(null,wJ(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function wJ(e,t){return t=Ge(t)?t:tr(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function bJ(e){e.rank=++this._rank}function EJ(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&re("Cycle detected in dataflow graph.")}const W1={},Mo=1,Da=2,As=4,kJ=Mo|Da,$6=Mo|As,zc=Mo|Da|As,A6=8,_h=16,T6=32,R6=64;function Ka(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Wb(e,t){const n=[];return Ma(e,t,r=>n.push(r)),n}function N6(e,t){const n={};return e.visit(t,r=>{n[Me(r)]=1}),r=>n[Me(r)]?null:r}function bm(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Ka.prototype={StopPropagation:W1,ADD:Mo,REM:Da,MOD:As,ADD_REM:kJ,ADD_MOD:$6,ALL:zc,REFLOW:A6,SOURCE:_h,NO_SOURCE:T6,NO_FIELDS:R6,fork(e){return new Ka(this.dataflow).init(this,e)},clone(){const e=this.fork(zc);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(zc|_h)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Ka(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&R6)&&(n.fields=e.fields),t&Mo?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Da?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&As?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&T6?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||zc;return t&Mo&&this.add.length||t&Da&&this.rem.length||t&As&&this.mod.length},reflow(e){if(e)return this.fork(zc).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(As,N6(this,Mo))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ie(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ie(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Mo&&(n.addF=bm(n.addF,t)),e&Da&&(n.remF=bm(n.remF,t)),e&As&&(n.modF=bm(n.modF,t)),e&_h&&(n.srcF=bm(n.srcF,t)),n},materialize(e){e=e||zc;const t=this;return e&Mo&&t.addF&&(t.add=Wb(t.add,t.addF),t.addF=null),e&Da&&t.remF&&(t.rem=Wb(t.rem,t.remF),t.remF=null),e&As&&t.modF&&(t.mod=Wb(t.mod,t.modF),t.modF=null),e&_h&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&_h)return Ma(n.source,n.srcF,r),n;e&Mo&&Ma(n.add,n.addF,r),e&Da&&Ma(n.rem,n.remF,r),e&As&&Ma(n.mod,n.modF,r);const i=n.source;if(e&A6&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Ma(i,N6(n,$6),r):Ma(i,n.srcF,r))}return n}};function MC(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}me(MC,Ka,{fork(e){const t=new Ka(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ie(e)?e.some(r=>n[r]):n[e]:0},filter(){re("MultiPulse does not support filtering.")},materialize(){re("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function SJ(e,t,n){const r=this,i=[];if(r._pulse)return zP(r);if(r._pending&&await r._pending,t&&await c1(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Ka(r,o,e),r._touched.forEach(f=>r._enqueue(f,!0)),r._touched=Nv(dg);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=W1),l!==W1&&a._targets&&a._targets.forEach(f=>r._enqueue(f)),++s}}catch(f){r._heap.clear(),u=f}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const f=r._postrun.sort((h,p)=>p.priority-h.priority);r._postrun=[];for(let h=0;h<f.length;++h)await c1(r,f[h].callback)}return n&&await c1(r,n),i.length&&Promise.all(i).then(f=>r.runAsync(null,()=>{f.forEach(h=>{try{h(r)}catch(p){r.error(p)}})})),r}async function _J(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function CJ(e,t,n){return this._pulse?zP(this):(this.evaluate(e,t,n),this)}function $J(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function zP(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function AJ(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function TJ(e,t){const n=e.source,r=this._clock;return n&&ie(n)?new MC(this,r,n.map(i=>i.pulse),t):this._input[e.id]||RJ(this._pulse,n&&n.pulse)}function RJ(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==W1&&(e.source=t.source),e)}const DC={skip:!1,force:!1};function NJ(e,t){const n=t||DC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function FJ(e,t,n){const r=n||DC;return(e.set(t)||r.force)&&this.touch(e,r),this}function MJ(e,t,n){this.touch(e,n||DC);const r=new Ka(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function DJ(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),jP(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,OJ(t,0,e)):r=n,r}}}function jP(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function OJ(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,jP(e,r,t,n)}function lf(){this.logger(uC()),this.logLevel(aC),this._clock=0,this._rank=0,this._locale=AC();try{this._loader=Rv()}catch{}this._touched=Nv(dg),this._input={},this._pulse=null,this._heap=DJ((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Ch(e){return function(){return this._log[e].apply(this,arguments)}}lf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Ch("error"),warn:Ch("warn"),info:Ch("info"),debug:Ch("debug"),logLevel:Ch("level"),cleanThreshold:1e4,add:aJ,connect:lJ,rank:bJ,rerank:EJ,pulse:MJ,touch:NJ,update:FJ,changeset:Qu,ingest:dJ,parse:fJ,preload:pJ,request:hJ,events:cJ,on:yJ,evaluate:SJ,run:CJ,runAsync:_J,runAfter:$J,_enqueue:AJ,_getPulse:TJ};function te(e,t){Et.call(this,e,null,t)}me(te,Et,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Sf={};function BP(e){const t=UP(e);return t&&t.Definition||null}function UP(e){return e=e&&e.toLowerCase(),ke(Sf,e)?Sf[e]:null}function*qP(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function OC(e,t,n){const r=Float64Array.from(qP(e,n));return r.sort(js),t.map(i=>z7(r,i))}function PC(e,t){return OC(e,[.25,.5,.75],t)}function LC(e,t){const n=e.length,r=WK(e,t),i=PC(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function WP(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,f,h,p;const m=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(f=m/t,h=0,p=e.steps.length;h<p&&e.steps[h]<f;++h);a=e.steps[Math.max(0,h-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(m)/r)-l));Math.ceil(m/a)>t;)a*=n;for(h=0,p=i.length;h<p;++h)f=a/i[h],f>=u&&m/f<=t&&(a=f)}f=Math.log(a);const y=f>=0?0:~~(-f/r)+1,v=Math.pow(n,-y-1);return(e.nice||e.nice===void 0)&&(f=Math.floor(o/a+v)*a,o=o<f?f-a:f,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Ti=Math.random;function PJ(e){Ti=e}function HP(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(qP(e,r)),o=i.length,s=t;let a,l,u,f;for(u=0,f=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Ti()*o)];f[u]=a/o}return f.sort(js),[Ok(f,n/2),Ok(f,1-n/2)]}function VP(e,t,n,r){r=r||(p=>p);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,f=l+t,h;for(;a<i;++a){if(h=r(e[a]),h>=f){for(u=(l+u)/2;s<a;++s)o[s]=u;f=h+t,l=h}u=h}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?LJ(o,t+t/4):o}function LJ(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function IJ(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function zJ(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*Ti())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const GP=Math.sqrt(2*Math.PI),jJ=Math.SQRT2;let $h=NaN;function Pv(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if($h===$h)n=$h,$h=NaN;else{do n=Ti()*2-1,r=Ti()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,$h=r*o}return e+n*t}function IC(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*GP)}function Lv(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function Iv(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*jJ*BJ(2*e-1)}function BJ(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function zC(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Pv(n,r),pdf:o=>IC(o,n,r),cdf:o=>Lv(o,n,r),icdf:o=>Iv(o,n,r)};return i.mean(e).stdev(t)}function jC(e,t){const n=zC();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=LC(e)),i):t},sample(){return e[~~(Ti()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function BC(e,t){return e=e||0,t=t??1,Math.exp(e+Pv()*t)}function UC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*GP*e)}function qC(e,t,n){return Lv(Math.log(e),t,n)}function WC(e,t,n){return Math.exp(Iv(e,t,n))}function YP(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>BC(n,r),pdf:o=>UC(o,n,r),cdf:o=>qC(o,n,r),icdf:o=>WC(o,n,r)};return i.mean(e).stdev(t)}function XP(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Ti();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function HC(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ti()}function VC(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function GC(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function YC(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function KP(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>HC(n,r),pdf:o=>VC(o,n,r),cdf:o=>GC(o,n,r),icdf:o=>YC(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function XC(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function gg(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function zv(e,t,n,r){e=e.filter(m=>{let y=t(m),v=n(m);return y!=null&&(y=+y)>=y&&v!=null&&(v=+v)>=v}),r&&e.sort((m,y)=>t(m)-t(y));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,f,h,p;for(p of e)o[a]=f=+t(p),s[a]=h=+n(p),++a,l+=(f-l)/a,u+=(h-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function mg(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function dd(e,t,n,r,i){let o=0,s=0;return mg(e,t,n,(a,l)=>{const u=l-i(a),f=l-r;o+=u*u,s+=f*f}),1-o/s}function KC(e,t,n){let r=0,i=0,o=0,s=0,a=0;mg(e,t,n,(f,h)=>{++a,r+=(f-r)/a,i+=(h-i)/a,o+=(f*h-o)/a,s+=(f*f-s)/a});const l=gg(r,i,o,s),u=f=>l[0]+l[1]*f;return{coef:l,predict:u,rSquared:dd(e,t,n,i,u)}}function QP(e,t,n){let r=0,i=0,o=0,s=0,a=0;mg(e,t,n,(f,h)=>{++a,f=Math.log(f),r+=(f-r)/a,i+=(h-i)/a,o+=(f*h-o)/a,s+=(f*f-s)/a});const l=gg(r,i,o,s),u=f=>l[0]+l[1]*Math.log(f);return{coef:l,predict:u,rSquared:dd(e,t,n,i,u)}}function ZP(e,t,n){const[r,i,o,s]=zv(e,t,n);let a=0,l=0,u=0,f=0,h=0,p,m,y;mg(e,t,n,(k,_)=>{p=r[h++],m=Math.log(_),y=p*_,a+=(_*m-a)/h,l+=(y-l)/h,u+=(y*m-u)/h,f+=(p*y-f)/h});const[v,w]=gg(l/s,a/s,u/s,f/s),b=k=>Math.exp(v+w*(k-o));return{coef:[Math.exp(v-w*o),w],predict:b,rSquared:dd(e,t,n,s,b)}}function JP(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;mg(e,t,n,(h,p)=>{const m=Math.log(h),y=Math.log(p);++l,r+=(m-r)/l,i+=(y-i)/l,o+=(m*y-o)/l,s+=(m*m-s)/l,a+=(p-a)/l});const u=gg(r,i,o,s),f=h=>u[0]*Math.pow(h,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:f,rSquared:dd(e,t,n,a,f)}}function QC(e,t,n){const[r,i,o,s]=zv(e,t,n),a=r.length;let l=0,u=0,f=0,h=0,p=0,m,y,v,w;for(m=0;m<a;)y=r[m],v=i[m++],w=y*y,l+=(w-l)/m,u+=(w*y-u)/m,f+=(w*w-f)/m,h+=(y*v-h)/m,p+=(w*v-p)/m;const b=f-l*l,k=l*b-u*u,_=(p*l-h*u)/k,C=(h*b-p*u)/k,$=-_*l,R=A=>(A=A-o,_*A*A+C*A+$+s);return{coef:[$-C*o+_*o*o+s,C-2*_*o,_],predict:R,rSquared:dd(e,t,n,s,R)}}function e9(e,t,n,r){if(r===0)return XC(e,t,n);if(r===1)return KC(e,t,n);if(r===2)return QC(e,t,n);const[i,o,s,a]=zv(e,t,n),l=i.length,u=[],f=[],h=r+1;let p,m,y,v,w;for(p=0;p<h;++p){for(y=0,v=0;y<l;++y)v+=Math.pow(i[y],p)*o[y];for(u.push(v),w=new Float64Array(h),m=0;m<h;++m){for(y=0,v=0;y<l;++y)v+=Math.pow(i[y],p+m);w[m]=v}f.push(w)}f.push(u);const b=qJ(f),k=_=>{_-=s;let C=a+b[0]+b[1]*_+b[2]*_*_;for(p=3;p<h;++p)C+=b[p]*Math.pow(_,p);return C};return{coef:UJ(h,b,-s,a),predict:k,rSquared:dd(e,t,n,a,k)}}function UJ(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function qJ(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const F6=2,M6=1e-12;function t9(e,t,n,r){const[i,o,s,a]=zv(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),f=new Float64Array(l),h=new Float64Array(l),p=new Float64Array(l).fill(1);for(let m=-1;++m<=F6;){const y=[0,u-1];for(let w=0;w<l;++w){const b=i[w],k=y[0],_=y[1],C=b-i[k]>i[_]-b?k:_;let $=0,R=0,A=0,N=0,F=0;const L=1/Math.abs(i[C]-b||1);for(let W=k;W<=_;++W){const j=i[W],M=o[W],U=WJ(Math.abs(b-j)*L)*p[W],X=j*U;$+=U,R+=X,A+=M*U,N+=M*X,F+=j*X}const[O,K]=gg(R/$,A/$,N/$,F/$);f[w]=O+K*b,h[w]=Math.abs(o[w]-f[w]),HJ(i,w+1,y)}if(m===F6)break;const v=j7(h);if(Math.abs(v)<M6)break;for(let w=0,b,k;w<l;++w)b=h[w]/(6*v),p[w]=b>=1?M6:(k=1-b*b)*k}return VJ(i,f,s,a)}function WJ(e){return(e=1-e*e*e)*e*e}function HJ(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function VJ(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const GJ=.5*Math.PI/180;function jv(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=v=>[v,e(v)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],f=[];if(n===r){for(let v=1;v<r;++v)u.push(i(o+v/n*a));return u.push(i(s)),u}else{f.push(i(s));for(let v=n;--v>0;)f.push(i(o+v/n*a))}let h=u[0],p=f[f.length-1];const m=1/a,y=YJ(h[1],f);for(;p;){const v=i((h[0]+p[0])/2);v[0]-h[0]>=l&&XJ(h,v,p,m,y)>GJ?f.push(v):(h=p,u.push(p),f.pop()),p=f[f.length-1]}return u}function YJ(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function XJ(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function KJ(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Hk(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:KJ(e)}function n9(e,t,n){return n||e+(t?"_"+t:"")}const Hb=()=>{},QJ={init:Hb,add:Hb,rem:Hb,idx:0},Pp={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},yg=Object.keys(Pp).filter(e=>e!=="__count__");function ZJ(e,t){return(n,r)=>Ve({name:e,aggregate_param:r,out:n||e},QJ,t)}[...yg,"__count__"].forEach(e=>{Pp[e]=ZJ(e,Pp[e])});function r9(e,t,n){return Pp[e](n,t)}function i9(e,t){return e.idx-t.idx}function JJ(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Pp[i]())})};return e.forEach(n),Object.values(t).sort(i9)}function eee(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function tee(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function nee(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function ree(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function o9(e,t){const n=t||er,r=JJ(e),i=e.slice().sort(i9);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=eee,o.prototype.add=tee,o.prototype.rem=nee,o.prototype.set=ree,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function ZC(e){this._key=e?Ci(e):Me,this.reset()}const Pn=ZC.prototype;Pn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Pn.add=function(e){this._add.push(e)};Pn.rem=function(e){this._rem.push(e)};Pn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Pn.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",ke(n,o)||(n[o]=1,++i);return i};Pn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=E7(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Pn.argmin=function(e){return this.extent(e)[0]||{}};Pn.argmax=function(e){return this.extent(e)[1]||{}};Pn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Pn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Pn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=PC(this.values(),e),this._get=e),this._q};Pn.q1=function(e){return this.quartile(e)[0]};Pn.q2=function(e){return this.quartile(e)[1]};Pn.q3=function(e){return this.quartile(e)[2]};Pn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=HP(this.values(),1e3,.05,e),this._get=e),this._ci};Pn.ci0=function(e){return this.ci(e)[0]};Pn.ci1=function(e){return this.ci(e)[1]};function nl(e){te.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}nl.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:yg},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};me(nl,te,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,f,h;for(l in a)for(f=a[l].tuple,u=0;u<i;++u)r[u][h=f[n[u]]]=h}o(e._prev),o(t);function s(a,l,u){const f=n[u],h=r[u++];for(const p in h){const m=a?a+"|"+p:p;l[f]=h[p],u<i?s(m,l,u):t[m]||e.cell(m,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(k){const _=xe(Kn(k)),C=_.length;let $=0,R;for(;$<C;++$)r[R=_[$]]||(r[R]=1,t.push(R))}this._dims=xe(e.groupby),this._dnames=this._dims.map(k=>{const _=Ht(k);return i(k),n.push(_),_}),this.cellkey=e.key?e.key:Hk(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,f={};let h,p,m,y,v,w,b;for(u!==s.length&&re("Unmatched number of fields and aggregate ops."),b=0;b<u;++b){if(h=o[b],p=s[b],m=a[b]||null,h==null&&p!=="count"&&re("Null aggregate field specified."),v=Ht(h),w=n9(p,v,l[b]),n.push(w),p==="count"){this._counts.push(w);continue}y=f[v],y||(i(h),y=f[v]=[],y.field=h,this._measures.push(y)),p!=="count"&&(this._countOnly=!1),y.push(r9(p,m,w))}return this._measures=this._measures.map(k=>o9(k,k.field)),Object.create(null)},cellkey:Hk(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new ZC),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?LP(t.tuple,o):ft(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,f,h;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(f=0,h=this._alen;f<h;++f)o.push(this.celltuple(t[f])),t[f]=null;for(f=0,h=this._mlen;f<h;++f)l=n[f],(l.num===0&&i?s:a).push(this.celltuple(l)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,e}});const iee=1e-14;function JC(e){te.call(this,null,e)}JC.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};me(JC,te,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Kn(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?f=>{const h=r(f);f[a]=h,f[l]=h==null?null:i+o*(1+(h-i)/o)}:f=>f[a]=r(f)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=WP(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let f=Yn(t(u));return f==null?null:f<i?-1/0:f>o?1/0:(f=Math.max(i,Math.min(f,o-r)),i+r*Math.floor(iee+(f-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=jr(l,Kn(t),e.name||"bin_"+Ht(t))}});function s9(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(f=>!s[r(f)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?$7(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function e3(e){te.call(this,[],e)}e3.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};me(e3,te,{transform(e,t){const n=t.fork(t.ALL),r=s9(Me,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Ku(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function a9(e){Et.call(this,null,oee,e)}me(a9,Et);function oee(e){return this.value&&!e.modified()?this.value:hC(e.fields,e.orders)}function t3(e){te.call(this,null,e)}t3.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function see(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}me(t3,te,{transform(e,t){const n=h=>p=>{for(var m=see(a(p),e.case,o)||[],y,v=0,w=m.length;v<w;++v)s.test(y=m[v])||h(y)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(h=>i[h]=1+(i[h]||0)),f=n(h=>i[h]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,f)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=ft({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function n3(e){te.call(this,null,e)}n3.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};me(n3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=aee(a,i,o,e.filter||$i)):n.mod=a,n.source=this.value,n.modifies(r)}});function aee(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(ft(o)),o={},o[t]=u);return i}const D6={kde:jC,mixture:XP,normal:zC,lognormal:YP,uniform:KP},lee="distributions",O6="function",uee="field";function l9(e,t){const n=e[O6];ke(D6,n)||re("Unknown distribution function: "+n);const r=D6[n]();for(const i in e)i===uee?r.data((e.from||t()).map(e[i])):i===lee?r[i](e[i].map(o=>l9(o,t))):typeof r[i]===O6&&r[i](e[i]);return r}function r3(e){te.call(this,null,e)}const u9=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],cee={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:u9},{name:"weights",type:"number",array:!0}]};r3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:u9.concat(cee)},{name:"as",type:"string",array:!0,default:["value","density"]}]};me(r3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=l9(e.distribution,fee(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&re("Invalid density method: "+s),!e.extent&&!r.data&&re("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||Go(r.data()),u=jv(s,l,i,o).map(f=>{const h={};return h[a[0]]=f[0],h[a[1]]=f[1],ft(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function fee(e){return()=>e.materialize(e.SOURCE).source}function c9(e,t){return e?e.map((n,r)=>t[r]||Ht(n)):null}function i3(e,t,n){const r=[],i=h=>h(l);let o,s,a,l,u,f;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),f=o[u],f||(o[u]=f=[],f.dims=u,r.push(f)),f.push(n(l));return r}const f9="bin";function o3(e){te.call(this,null,e)}o3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:f9}]};const dee=(e,t)=>pg(Go(e,t))/30;me(o3,te,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=i3(t.source,e.groupby,er),i=e.smooth||!1,o=e.field,s=e.step||dee(n,o),a=Ku((y,v)=>o(y)-o(v)),l=e.as||f9,u=r.length;let f=1/0,h=-1/0,p=0,m;for(;p<u;++p){const y=r[p].sort(a);m=-1;for(const v of VP(y,s,i,o))v<f&&(f=v),v>h&&(h=v),y[++m][l]=v}return this.value={start:f,stop:h,step:s},t.reflow(!0).modifies(l)}});function d9(e){Et.call(this,null,hee,e),this.modified(!0)}me(d9,Et);function hee(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:jr(n=>t(n,e),Kn(t),Ht(t))}function s3(e){te.call(this,[void 0,void 0],e)}s3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};me(s3,te,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Yn(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Ht(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function a3(e,t){Et.call(this,e),this.parent=t,this.count=0}me(a3,Et,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Bv(e){te.call(this,{},e),this._keys=sd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}me(Bv,te,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=ke(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new a3(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Me(l),f=o.get(u);f!==void 0&&(o.delete(u),a(f).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(Me(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=Me(l),f=o.get(u),h=r(l);f===h?a(h).mod(l):(o.set(u,h),a(f).rem(l),a(h).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(Me(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=Me(l),f=o.get(u),h=r(l);f!==h&&(o.set(u,h),a(f).rem(l),a(h).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function h9(e){Et.call(this,null,pee,e)}me(h9,Et);function pee(e){return this.value&&!e.modified()?this.value:ie(e.name)?xe(e.name).map(t=>Ci(t)):Ci(e.name,e.as)}function l3(e){te.call(this,sd(),e)}l3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};me(l3,te,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,h=>{const p=Me(h);r.has(p)?r.delete(p):s.push(h)}),t.visit(t.ADD,h=>{l(h,e)?o.push(h):r.set(Me(h),1)});function f(h){const p=Me(h),m=l(h,e),y=r.get(p);m&&y?(r.delete(p),o.push(h)):!m&&!y?(r.set(p,1),s.push(h)):u&&m&&!y&&a.push(h)}return t.visit(t.MOD,f),e.modified()&&(u=!1,t.visit(t.REFLOW,f)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function u3(e){te.call(this,[],e)}u3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};me(u3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=c9(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(y=>y(a)),u=l.reduce((y,v)=>Math.max(y,v.length),0);let f=0,h,p,m;for(;f<u;++f){for(p=FC(a),h=0;h<s;++h)p[i[h]]=(m=l[h][f])==null?null:m;o&&(p[o]=f),n.add.push(p)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function c3(e){te.call(this,[],e)}c3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};me(c3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ht),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let f=0,h;f<l;++f)h=FC(u),h[s]=i[f],h[a]=r[f](u),n.add.push(h)}),this.value=n.source=n.add,n.modifies(o)}});function f3(e){te.call(this,null,e)}f3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};me(f3,te,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function p9(e){te.call(this,[],e)}me(p9,te,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=ft(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const Em={value:"value",median:j7,mean:KK,min:Dk,max:gu},gee=[];function d3(e){te.call(this,[],e)}d3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function mee(e){var t=e.method||Em.value,n;if(Em[t]==null)re("Unrecognized imputation method: "+t);else return t===Em.value?(n=e.value!==void 0?e.value:0,()=>n):Em[t]}function yee(e){const t=e.field;return n=>n?t(n):NaN}me(d3,te,{transform(e,t){var n=t.fork(t.ALL),r=mee(e),i=yee(e),o=Ht(e.field),s=Ht(e.key),a=(e.groupby||[]).map(Ht),l=vee(t.source,e.groupby,e.key,e.keyvals),u=[],f=this.value,h=l.domain.length,p,m,y,v,w,b,k,_,C,$;for(w=0,_=l.length;w<_;++w)for(p=l[w],y=p.values,m=NaN,k=0;k<h;++k)if(p[k]==null){for(v=l.domain[k],$={_impute:!0},b=0,C=y.length;b<C;++b)$[a[b]]=y[b];$[s]=v,$[o]=Number.isNaN(m)?m=r(p,i):m,u.push(ft($))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=u,n}});function vee(e,t,n,r){var i=b=>b(w),o=[],s=r?r.slice():[],a={},l={},u,f,h,p,m,y,v,w;for(s.forEach((b,k)=>a[b]=k+1),p=0,v=e.length;p<v;++p)w=e[p],y=n(w),m=a[y]||(a[y]=s.push(y)),f=(u=t?t.map(i):gee)+"",(h=l[f])||(h=l[f]=[],o.push(h),h.values=u),h[m-1]=w;return o.domain=s,o}function h3(e){nl.call(this,e)}h3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:yg},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};me(h3,nl,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Ve(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function p3(e){te.call(this,null,e)}p3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};me(p3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=i3(r,e.groupby,e.field),o=(e.groupby||[]).map(Ht),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let f=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&re("Invalid density method: "+a),e.resolve==="shared"&&(f||(f=Go(r,e.field)),h=p=e.steps||p),i.forEach(m=>{const y=jC(m,s)[a],v=e.counts?m.length:1,w=f||Go(m);jv(y,w,h,p).forEach(b=>{const k={};for(let _=0;_<o.length;++_)k[o[_]]=m.dims[_];k[l[0]]=b[0],k[l[1]]=b[1]*v,u.push(ft(k))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function g9(e){Et.call(this,null,xee,e)}me(g9,Et);function xee(e){return this.value&&!e.modified()?this.value:mC(e.fields,e.flat)}function m9(e){te.call(this,[],e),this._pending=null}me(m9,te,{transform(e,t){const n=t.dataflow;return this._pending?Vb(this,t,this._pending):wee(e)?t.StopPropagation:e.values?Vb(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=xe(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>Vb(this,t,xe(r.data)))}});function wee(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Vb(e,t,n){n.forEach(ft);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function g3(e){te.call(this,{},e)}g3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};me(g3,te,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,f=e.as,h,p,m;return i?(p=i.length,a>1&&!f&&re('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==a*p&&re('The "as" parameter has too few output field names.'),f=f||i.map(Ht),h=function(y){for(var v=0,w=0,b,k;v<a;++v)if(k=r.get(n[v](y)),k==null)for(b=0;b<p;++b,++w)y[f[w]]=o;else for(b=0;b<p;++b,++w)y[f[w]]=i[b](k)}):(f||re("Missing output field names."),h=function(y){for(var v=0,w;v<a;++v)w=r.get(n[v](y)),y[f[v]]=w??o}),s?u=t.reflow(!0):(m=n.some(y=>t.modified(y.fields)),l|=m?t.MOD:0),t.visit(l,h),u.modifies(f)}});function y9(e){Et.call(this,null,bee,e)}me(y9,Et);function bee(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function v9(e){Et.call(this,null,Eee,e)}me(v9,Et);function Eee(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function x9(e){te.call(this,null,e)}me(x9,te,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function m3(e){nl.call(this,e)}m3.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:yg,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};me(m3,nl,{_transform:nl.prototype.transform,transform(e,t){return this._transform(kee(e,t),t)}});function kee(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=Kn(n).concat(Kn(r)),s=_ee(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>See(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function See(e,t,n,r){return jr(i=>t(i)===e?n(i):NaN,r,e+"")}function _ee(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(hg),t?i.slice(0,t):i}function w9(e){Bv.call(this,e)}me(w9,Bv,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(Me(o),n,t,o);return(e.modified("field")||r&&t.modified(Kn(r)))&&re("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(ft(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function y3(e){te.call(this,null,e)}y3.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};me(y3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=c9(e.fields,e.as||[]),o=r?(a,l)=>Cee(a,l,r,i):Mv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=Me(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,ft({}));s[Me(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[Me(a)]))}),n}});function Cee(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function b9(e){te.call(this,null,e)}me(b9,te,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function v3(e){te.call(this,null,e)}v3.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const $ee=1e-14;me(v3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=i3(i,e.groupby,e.field),s=(e.groupby||[]).map(Ht),a=[],l=e.step||.01,u=e.probs||Qr(l/2,1-$ee,l),f=u.length;return o.forEach(h=>{const p=OC(h,u);for(let m=0;m<f;++m){const y={};for(let v=0;v<s.length;++v)y[s[v]]=h.dims[v];y[r[0]]=u[m],y[r[1]]=p[m],a.push(ft(y))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function E9(e){te.call(this,null,e)}me(E9,te,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=Me(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=FC(i);r[Me(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[Me(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function x3(e){te.call(this,[],e),this.count=0}x3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};me(x3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((f,h)=>(f[Me(h)]=1,f),{});let s=this.value,a=this.count,l=0;function u(f){let h,p;s.length<i?s.push(f):(p=~~((a+1)*Ti()),p<s.length&&p>=l&&(h=s[p],o[Me(h)]&&n.rem.push(h),s[p]=f)),++a}if(t.rem.length&&(t.visit(t.REM,f=>{const h=Me(f);o[h]&&(o[h]=-1,n.rem.push(f)),--a}),s=s.filter(f=>o[Me(f)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,f=>{o[Me(f)]||u(f)}),l=-1),r&&s.length>i){const f=s.length-i;for(let h=0;h<f;++h)o[Me(s[h])]=-1,n.rem.push(s[h]);s=s.slice(f)}return t.mod.length&&t.visit(t.MOD,f=>{o[Me(f)]&&n.mod.push(f)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(f=>!o[Me(f)])),this.count=a,this.value=n.source=s,n}});function w3(e){te.call(this,null,e)}w3.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};me(w3,te,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Qr(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,ft(o)}),n.add=t.add.concat(this.value),n}});function k9(e){te.call(this,null,e),this.modified(!0)}me(k9,te,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function b3(e){te.call(this,null,e)}const S9=["unit0","unit1"];b3.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:kC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:S9}]};me(b3,te,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?fd:cd)(o.unit).offset,a=e.as||S9,l=a[0],u=a[1],f=o.step;let h=o.start||1/0,p=o.stop||-1/0,m=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Kn(n)))&&(t=t.reflow(!0),m=t.SOURCE,h=1/0,p=-1/0),t.visit(m,y=>{const v=n(y);let w,b;v==null?(y[l]=null,r&&(y[u]=null)):(y[l]=w=b=o(v),r&&(y[u]=b=s(w,f)),w<h&&(h=w),b>p&&(p=b))}),o.start=h,o.stop=p,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:pP({extent:e.extent||Go(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=SC(r),s=this.value||{},a=(n?oP:iP)(o,i);return a.unit=tt(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function _9(e){te.call(this,sd(),e)}me(_9,te,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function C9(e){te.call(this,null,e)}me(C9,te,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ku(e.sort)):t.source).map(e.field))}});function Aee(e,t,n,r){const i=Lp[e](t,n);return{init:i.init||Ia,update:function(o,s){s[r]=i.next(o)}}}const Lp={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Lp.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||re("ntile num must be greater than zero.");const n=Lp.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||re("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Tee(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Tee(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Ree=Object.keys(Lp);function $9(e){const t=xe(e.ops),n=xe(e.fields),r=xe(e.params),i=xe(e.aggregate_params),o=xe(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},f=[],h=[];let p=!0;function m(y){xe(Kn(y)).forEach(v=>l[v]=1)}m(e.sort),t.forEach((y,v)=>{const w=n[v],b=r[v],k=i[v]||null,_=Ht(w),C=n9(y,_,o[v]);if(m(w),s.push(C),ke(Lp,y))a.push(Aee(y,w,b,C));else{if(w==null&&y!=="count"&&re("Null aggregate field specified."),y==="count"){f.push(C);return}p=!1;let $=u[_];$||($=u[_]=[],$.field=w,h.push($)),$.push(r9(y,k,C))}}),(f.length||h.length)&&(this.cell=Nee(h,f,p)),this.inputs=Object.keys(l)}const A9=$9.prototype;A9.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};A9.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function Nee(e,t,n){e=e.map(l=>o9(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new ZC;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,f;for(a&&a.values(),u=0,f=t.length;u<f;++u)l[t[u]]=r.num;if(!n)for(u=0,f=o.length;u<f;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function E3(e){te.call(this,{},e),this._mlen=0,this._mods=[]}E3.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ree.concat(yg)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};me(E3,te,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Ku(e.sort),i=Hk(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new $9(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)Fee(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=s9(Me),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Fee(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?ad(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||tr(-1)};t.init();for(let h=0;h<l;++h)Mee(f,s,h,l),o&&Dee(f,u),t.update(f,a[h])}function Mee(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Dee(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const Oee=Object.freeze(Object.defineProperty({__proto__:null,aggregate:nl,bin:JC,collect:e3,compare:a9,countpattern:t3,cross:n3,density:r3,dotbin:o3,expression:d9,extent:s3,facet:Bv,field:h9,filter:l3,flatten:u3,fold:c3,formula:f3,generate:p9,impute:d3,joinaggregate:h3,kde:p3,key:g9,load:m9,lookup:g3,multiextent:y9,multivalues:v9,params:x9,pivot:m3,prefacet:w9,project:y3,proxy:b9,quantile:v3,relay:E9,sample:x3,sequence:w3,sieve:k9,subflow:a3,timeunit:b3,tupleindex:_9,values:C9,window:E3},Symbol.toStringTag,{value:"Module"}));function dt(e){return function(){return e}}const P6=Math.abs,Bn=Math.atan2,ql=Math.cos,Pee=Math.max,Gb=Math.min,To=Math.sin,cu=Math.sqrt,qn=1e-12,_f=Math.PI,H1=_f/2,T9=2*_f;function Lee(e){return e>1?0:e<-1?_f:Math.acos(e)}function L6(e){return e>=1?H1:e<=-1?-H1:Math.asin(e)}const Vk=Math.PI,Gk=2*Vk,nu=1e-6,Iee=Gk-nu;function R9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function zee(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return R9;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let k3=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?R9:zee(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,f=s-t,h=a-n,p=f*f+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>nu)if(!(Math.abs(h*l-u*f)>nu)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-s,y=i-a,v=l*l+u*u,w=m*m+y*y,b=Math.sqrt(v),k=Math.sqrt(p),_=o*Math.tan((Vk-Math.acos((v+p-w)/(2*b*k)))/2),C=_/k,$=_/b;Math.abs(C-1)>nu&&this._append`L${t+C*f},${n+C*h}`,this._append`A${o},${o},0,0,${+(h*m>f*y)},${this._x1=t+$*l},${this._y1=n+$*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,f=n+l,h=1^s,p=s?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>nu||Math.abs(this._y1-f)>nu)&&this._append`L${u},${f}`,r&&(p<0&&(p=p%Gk+Gk),p>Iee?this._append`A${r},${r},0,1,${h},${t-a},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:p>nu&&this._append`A${r},${r},0,${+(p>=Vk)},${h},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Uv(){return new k3}Uv.prototype=k3.prototype;function qv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new k3(t)}function jee(e){return e.innerRadius}function Bee(e){return e.outerRadius}function Uee(e){return e.startAngle}function qee(e){return e.endAngle}function Wee(e){return e&&e.padAngle}function Hee(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,f=s-i,h=a-o,p=h*l-f*u;if(!(p*p<qn))return p=(f*(t-o)-h*(e-i))/p,[e+p*l,t+p*u]}function km(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/cu(a*a+l*l),f=u*l,h=-u*a,p=e+f,m=t+h,y=n+f,v=r+h,w=(p+y)/2,b=(m+v)/2,k=y-p,_=v-m,C=k*k+_*_,$=i-o,R=p*v-y*m,A=(_<0?-1:1)*cu(Pee(0,$*$*C-R*R)),N=(R*_-k*A)/C,F=(-R*k-_*A)/C,L=(R*_+k*A)/C,O=(-R*k+_*A)/C,K=N-w,W=F-b,j=L-w,M=O-b;return K*K+W*W>j*j+M*M&&(N=L,F=O),{cx:N,cy:F,x01:-f,y01:-h,x11:N*(i/$-1),y11:F*(i/$-1)}}function Vee(){var e=jee,t=Bee,n=dt(0),r=null,i=Uee,o=qee,s=Wee,a=null,l=qv(u);function u(){var f,h,p=+e.apply(this,arguments),m=+t.apply(this,arguments),y=i.apply(this,arguments)-H1,v=o.apply(this,arguments)-H1,w=P6(v-y),b=v>y;if(a||(a=f=l()),m<p&&(h=m,m=p,p=h),!(m>qn))a.moveTo(0,0);else if(w>T9-qn)a.moveTo(m*ql(y),m*To(y)),a.arc(0,0,m,y,v,!b),p>qn&&(a.moveTo(p*ql(v),p*To(v)),a.arc(0,0,p,v,y,b));else{var k=y,_=v,C=y,$=v,R=w,A=w,N=s.apply(this,arguments)/2,F=N>qn&&(r?+r.apply(this,arguments):cu(p*p+m*m)),L=Gb(P6(m-p)/2,+n.apply(this,arguments)),O=L,K=L,W,j;if(F>qn){var M=L6(F/p*To(N)),U=L6(F/m*To(N));(R-=M*2)>qn?(M*=b?1:-1,C+=M,$-=M):(R=0,C=$=(y+v)/2),(A-=U*2)>qn?(U*=b?1:-1,k+=U,_-=U):(A=0,k=_=(y+v)/2)}var X=m*ql(k),q=m*To(k),H=p*ql($),J=p*To($);if(L>qn){var I=m*ql(_),G=m*To(_),ve=p*ql(C),Ce=p*To(C),be;if(w<_f)if(be=Hee(X,q,ve,Ce,I,G,H,J)){var Be=X-be[0],nt=q-be[1],Xe=I-be[0],he=G-be[1],Oe=1/To(Lee((Be*Xe+nt*he)/(cu(Be*Be+nt*nt)*cu(Xe*Xe+he*he)))/2),He=cu(be[0]*be[0]+be[1]*be[1]);O=Gb(L,(p-He)/(Oe-1)),K=Gb(L,(m-He)/(Oe+1))}else O=K=0}A>qn?K>qn?(W=km(ve,Ce,X,q,m,K,b),j=km(I,G,H,J,m,K,b),a.moveTo(W.cx+W.x01,W.cy+W.y01),K<L?a.arc(W.cx,W.cy,K,Bn(W.y01,W.x01),Bn(j.y01,j.x01),!b):(a.arc(W.cx,W.cy,K,Bn(W.y01,W.x01),Bn(W.y11,W.x11),!b),a.arc(0,0,m,Bn(W.cy+W.y11,W.cx+W.x11),Bn(j.cy+j.y11,j.cx+j.x11),!b),a.arc(j.cx,j.cy,K,Bn(j.y11,j.x11),Bn(j.y01,j.x01),!b))):(a.moveTo(X,q),a.arc(0,0,m,k,_,!b)):a.moveTo(X,q),!(p>qn)||!(R>qn)?a.lineTo(H,J):O>qn?(W=km(H,J,I,G,p,-O,b),j=km(X,q,ve,Ce,p,-O,b),a.lineTo(W.cx+W.x01,W.cy+W.y01),O<L?a.arc(W.cx,W.cy,O,Bn(W.y01,W.x01),Bn(j.y01,j.x01),!b):(a.arc(W.cx,W.cy,O,Bn(W.y01,W.x01),Bn(W.y11,W.x11),!b),a.arc(0,0,p,Bn(W.cy+W.y11,W.cx+W.x11),Bn(j.cy+j.y11,j.cx+j.x11),b),a.arc(j.cx,j.cy,O,Bn(j.y11,j.x11),Bn(j.y01,j.x01),!b))):a.arc(0,0,p,$,C,b)}if(a.closePath(),f)return a=null,f+""||null}return u.centroid=function(){var f=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-_f/2;return[ql(h)*f,To(h)*f]},u.innerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:dt(+f),u):e},u.outerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:dt(+f),u):t},u.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:dt(+f),u):n},u.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:dt(+f),u):r},u.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:dt(+f),u):i},u.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:dt(+f),u):o},u.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:dt(+f),u):s},u.context=function(f){return arguments.length?(a=f??null,u):a},u}function N9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function F9(e){this._context=e}F9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function S3(e){return new F9(e)}function M9(e){return e[0]}function D9(e){return e[1]}function O9(e,t){var n=dt(!0),r=null,i=S3,o=null,s=qv(a);e=typeof e=="function"?e:e===void 0?M9:dt(e),t=typeof t=="function"?t:t===void 0?D9:dt(t);function a(l){var u,f=(l=N9(l)).length,h,p=!1,m;for(r==null&&(o=i(m=s())),u=0;u<=f;++u)!(u<f&&n(h=l[u],u,l))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(h,u,l),+t(h,u,l));if(m)return o=null,m+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:dt(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:dt(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:dt(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function P9(e,t,n){var r=null,i=dt(!0),o=null,s=S3,a=null,l=qv(u);e=typeof e=="function"?e:e===void 0?M9:dt(+e),t=typeof t=="function"?t:dt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?D9:dt(+n);function u(h){var p,m,y,v=(h=N9(h)).length,w,b=!1,k,_=new Array(v),C=new Array(v);for(o==null&&(a=s(k=l())),p=0;p<=v;++p){if(!(p<v&&i(w=h[p],p,h))===b)if(b=!b)m=p,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=p-1;y>=m;--y)a.point(_[y],C[y]);a.lineEnd(),a.areaEnd()}b&&(_[p]=+e(w,p,h),C[p]=+t(w,p,h),a.point(r?+r(w,p,h):_[p],n?+n(w,p,h):C[p]))}if(k)return a=null,k+""||null}function f(){return O9().defined(i).curve(s).context(o)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:dt(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:dt(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:dt(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:dt(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:dt(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:dt(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:dt(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,o!=null&&(a=s(o)),u):s},u.context=function(h){return arguments.length?(h==null?o=a=null:a=s(o=h),u):o},u}const Gee={draw(e,t){const n=cu(t/_f);e.moveTo(n,0),e.arc(0,0,n,0,T9)}};function Yee(e,t){let n=null,r=qv(i);e=typeof e=="function"?e:dt(e||Gee),t=typeof t=="function"?t:dt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:dt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:dt(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function rl(){}function V1(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Wv(e){this._context=e}Wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:V1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:V1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Xee(e){return new Wv(e)}function L9(e){this._context=e}L9.prototype={areaStart:rl,areaEnd:rl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:V1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kee(e){return new L9(e)}function I9(e){this._context=e}I9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:V1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Qee(e){return new I9(e)}function z9(e,t){this._basis=new Wv(e),this._beta=t}z9.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Zee=function e(t){function n(r){return t===1?new Wv(r):new z9(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function G1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function _3(e,t){this._context=e,this._k=(1-t)/6}_3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:G1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:G1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jee=function e(t){function n(r){return new _3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function C3(e,t){this._context=e,this._k=(1-t)/6}C3.prototype={areaStart:rl,areaEnd:rl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:G1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ete=function e(t){function n(r){return new C3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function $3(e,t){this._context=e,this._k=(1-t)/6}$3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:G1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tte=function e(t){function n(r){return new $3(r,t)}return n.tension=function(r){return e(+r)},n}(0);function A3(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>qn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>qn){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/f,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function j9(e,t){this._context=e,this._alpha=t}j9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:A3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nte=function e(t){function n(r){return t?new j9(r,t):new _3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function B9(e,t){this._context=e,this._alpha=t}B9.prototype={areaStart:rl,areaEnd:rl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:A3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rte=function e(t){function n(r){return t?new B9(r,t):new C3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function U9(e,t){this._context=e,this._alpha=t}U9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:A3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ite=function e(t){function n(r){return t?new U9(r,t):new $3(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function q9(e){this._context=e}q9.prototype={areaStart:rl,areaEnd:rl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ote(e){return new q9(e)}function I6(e){return e<0?-1:1}function z6(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(I6(o)+I6(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function j6(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Yb(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function Y1(e){this._context=e}Y1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yb(this,this._t0,j6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Yb(this,j6(this,n=z6(this,e,t)),n);break;default:Yb(this,this._t0,n=z6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function W9(e){this._context=new H9(e)}(W9.prototype=Object.create(Y1.prototype)).point=function(e,t){Y1.prototype.point.call(this,t,e)};function H9(e){this._context=e}H9.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function ste(e){return new Y1(e)}function ate(e){return new W9(e)}function V9(e){this._context=e}V9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=B6(e),i=B6(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function B6(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function lte(e){return new V9(e)}function Hv(e,t){this._context=e,this._t=t}Hv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ute(e){return new Hv(e,.5)}function cte(e){return new Hv(e,0)}function fte(e){return new Hv(e,1)}function Qa(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const dte=()=>typeof Image<"u"?Image:null;function is(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ml(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Yk=Symbol("implicit");function T3(){var e=new i6,t=[],n=[],r=Yk;function i(o){let s=e.get(o);if(s===void 0){if(r!==Yk)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new i6;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return T3(t,n).unknown(r)},is.apply(i,arguments),i}function hd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yl(){}var Cu=.7,Cf=1/Cu,uf="\\s*([+-]?\\d+)\\s*",Ip="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hte=/^#([0-9a-f]{3,8})$/,pte=new RegExp(`^rgb\\(${uf},${uf},${uf}\\)$`),gte=new RegExp(`^rgb\\(${Bo},${Bo},${Bo}\\)$`),mte=new RegExp(`^rgba\\(${uf},${uf},${uf},${Ip}\\)$`),yte=new RegExp(`^rgba\\(${Bo},${Bo},${Bo},${Ip}\\)$`),vte=new RegExp(`^hsl\\(${Ip},${Bo},${Bo}\\)$`),xte=new RegExp(`^hsla\\(${Ip},${Bo},${Bo},${Ip}\\)$`),U6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hd(yl,zp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:q6,formatHex:q6,formatHex8:wte,formatHsl:bte,formatRgb:W6,toString:W6});function q6(){return this.rgb().formatHex()}function wte(){return this.rgb().formatHex8()}function bte(){return G9(this).formatHsl()}function W6(){return this.rgb().formatRgb()}function zp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hte.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?H6(t):n===3?new yn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Sm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Sm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pte.exec(e))?new yn(t[1],t[2],t[3],1):(t=gte.exec(e))?new yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mte.exec(e))?Sm(t[1],t[2],t[3],t[4]):(t=yte.exec(e))?Sm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vte.exec(e))?Y6(t[1],t[2]/100,t[3]/100,1):(t=xte.exec(e))?Y6(t[1],t[2]/100,t[3]/100,t[4]):U6.hasOwnProperty(e)?H6(U6[e]):e==="transparent"?new yn(NaN,NaN,NaN,0):null}function H6(e){return new yn(e>>16&255,e>>8&255,e&255,1)}function Sm(e,t,n,r){return r<=0&&(e=t=n=NaN),new yn(e,t,n,r)}function R3(e){return e instanceof yl||(e=zp(e)),e?(e=e.rgb(),new yn(e.r,e.g,e.b,e.opacity)):new yn}function il(e,t,n,r){return arguments.length===1?R3(e):new yn(e,t,n,r??1)}function yn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}hd(yn,il,vg(yl,{brighter(e){return e=e==null?Cf:Math.pow(Cf,e),new yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cu:Math.pow(Cu,e),new yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yn(mu(this.r),mu(this.g),mu(this.b),X1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:V6,formatHex:V6,formatHex8:Ete,formatRgb:G6,toString:G6}));function V6(){return`#${fu(this.r)}${fu(this.g)}${fu(this.b)}`}function Ete(){return`#${fu(this.r)}${fu(this.g)}${fu(this.b)}${fu((isNaN(this.opacity)?1:this.opacity)*255)}`}function G6(){const e=X1(this.opacity);return`${e===1?"rgb(":"rgba("}${mu(this.r)}, ${mu(this.g)}, ${mu(this.b)}${e===1?")":`, ${e})`}`}function X1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fu(e){return e=mu(e),(e<16?"0":"")+e.toString(16)}function Y6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qi(e,t,n,r)}function G9(e){if(e instanceof Qi)return new Qi(e.h,e.s,e.l,e.opacity);if(e instanceof yl||(e=zp(e)),!e)return new Qi;if(e instanceof Qi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Qi(s,a,l,e.opacity)}function K1(e,t,n,r){return arguments.length===1?G9(e):new Qi(e,t,n,r??1)}function Qi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}hd(Qi,K1,vg(yl,{brighter(e){return e=e==null?Cf:Math.pow(Cf,e),new Qi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cu:Math.pow(Cu,e),new Qi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yn(Xb(e>=240?e-240:e+120,i,r),Xb(e,i,r),Xb(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Qi(X6(this.h),_m(this.s),_m(this.l),X1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=X1(this.opacity);return`${e===1?"hsl(":"hsla("}${X6(this.h)}, ${_m(this.s)*100}%, ${_m(this.l)*100}%${e===1?")":`, ${e})`}`}}));function X6(e){return e=(e||0)%360,e<0?e+360:e}function _m(e){return Math.max(0,Math.min(1,e||0))}function Xb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Y9=Math.PI/180,X9=180/Math.PI,Q1=18,K9=.96422,Q9=1,Z9=.82521,J9=4/29,cf=6/29,eL=3*cf*cf,kte=cf*cf*cf;function tL(e){if(e instanceof Uo)return new Uo(e.l,e.a,e.b,e.opacity);if(e instanceof Ps)return nL(e);e instanceof yn||(e=R3(e));var t=Jb(e.r),n=Jb(e.g),r=Jb(e.b),i=Kb((.2225045*t+.7168786*n+.0606169*r)/Q9),o,s;return t===n&&n===r?o=s=i:(o=Kb((.4360747*t+.3850649*n+.1430804*r)/K9),s=Kb((.0139322*t+.0971045*n+.7141733*r)/Z9)),new Uo(116*i-16,500*(o-i),200*(i-s),e.opacity)}function Z1(e,t,n,r){return arguments.length===1?tL(e):new Uo(e,t,n,r??1)}function Uo(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}hd(Uo,Z1,vg(yl,{brighter(e){return new Uo(this.l+Q1*(e??1),this.a,this.b,this.opacity)},darker(e){return new Uo(this.l-Q1*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=K9*Qb(t),e=Q9*Qb(e),n=Z9*Qb(n),new yn(Zb(3.1338561*t-1.6168667*e-.4906146*n),Zb(-.9787684*t+1.9161415*e+.033454*n),Zb(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Kb(e){return e>kte?Math.pow(e,1/3):e/eL+J9}function Qb(e){return e>cf?e*e*e:eL*(e-J9)}function Zb(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Jb(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ste(e){if(e instanceof Ps)return new Ps(e.h,e.c,e.l,e.opacity);if(e instanceof Uo||(e=tL(e)),e.a===0&&e.b===0)return new Ps(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*X9;return new Ps(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function J1(e,t,n,r){return arguments.length===1?Ste(e):new Ps(e,t,n,r??1)}function Ps(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function nL(e){if(isNaN(e.h))return new Uo(e.l,0,0,e.opacity);var t=e.h*Y9;return new Uo(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}hd(Ps,J1,vg(yl,{brighter(e){return new Ps(this.h,this.c,this.l+Q1*(e??1),this.opacity)},darker(e){return new Ps(this.h,this.c,this.l-Q1*(e??1),this.opacity)},rgb(){return nL(this).rgb()}}));var rL=-.14861,N3=1.78277,F3=-.29227,Vv=-.90649,jp=1.97294,K6=jp*Vv,Q6=jp*N3,Z6=N3*F3-Vv*rL;function _te(e){if(e instanceof yu)return new yu(e.h,e.s,e.l,e.opacity);e instanceof yn||(e=R3(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Z6*r+K6*t-Q6*n)/(Z6+K6-Q6),o=r-i,s=(jp*(n-i)-F3*o)/Vv,a=Math.sqrt(s*s+o*o)/(jp*i*(1-i)),l=a?Math.atan2(s,o)*X9-120:NaN;return new yu(l<0?l+360:l,a,i,e.opacity)}function Xk(e,t,n,r){return arguments.length===1?_te(e):new yu(e,t,n,r??1)}function yu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}hd(yu,Xk,vg(yl,{brighter(e){return e=e==null?Cf:Math.pow(Cf,e),new yu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cu:Math.pow(Cu,e),new yu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Y9,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new yn(255*(t+n*(rL*r+N3*i)),255*(t+n*(F3*r+Vv*i)),255*(t+n*(jp*r)),this.opacity)}}));function iL(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function oL(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return iL((n-r/t)*t,s,i,o,a)}}function sL(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return iL((n-r/t)*t,i,o,s,a)}}const Gv=e=>()=>e;function aL(e,t){return function(n){return e+n*t}}function Cte(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Yv(e,t){var n=t-e;return n?aL(e,n>180||n<-180?n-360*Math.round(n/360):n):Gv(isNaN(e)?t:e)}function $te(e){return(e=+e)==1?vn:function(t,n){return n-t?Cte(t,n,e):Gv(isNaN(t)?n:t)}}function vn(e,t){var n=t-e;return n?aL(e,n):Gv(isNaN(e)?t:e)}const Kk=function e(t){var n=$te(t);function r(i,o){var s=n((i=il(i)).r,(o=il(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=vn(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function lL(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=il(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var Ate=lL(oL),Tte=lL(sL);function M3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function uL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rte(e,t){return(uL(t)?M3:cL)(e,t)}function cL(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=vl(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function fL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Xi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function dL(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=vl(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Qk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eE=new RegExp(Qk.source,"g");function Nte(e){return function(){return e}}function Fte(e){return function(t){return e(t)+""}}function hL(e,t){var n=Qk.lastIndex=eE.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Qk.exec(e))&&(i=eE.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Xi(r,i)})),n=eE.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Fte(l[0].x):Nte(t):(t=l.length,function(u){for(var f=0,h;f<t;++f)a[(h=l[f]).i]=h.x(u);return a.join("")})}function vl(e,t){var n=typeof t,r;return t==null||n==="boolean"?Gv(t):(n==="number"?Xi:n==="string"?(r=zp(t))?(t=r,Kk):hL:t instanceof zp?Kk:t instanceof Date?fL:uL(t)?M3:Array.isArray(t)?cL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dL:Xi)(e,t)}function Mte(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Dte(e,t){var n=Yv(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function xg(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var J6=180/Math.PI,Zk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pL(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*J6,skewX:Math.atan(l)*J6,scaleX:s,scaleY:a}}var Cm;function Ote(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Zk:pL(t.a,t.b,t.c,t.d,t.e,t.f)}function Pte(e){return e==null||(Cm||(Cm=document.createElementNS("http://www.w3.org/2000/svg","g")),Cm.setAttribute("transform",e),!(e=Cm.transform.baseVal.consolidate()))?Zk:(e=e.matrix,pL(e.a,e.b,e.c,e.d,e.e,e.f))}function gL(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,h,p,m,y){if(u!==h||f!==p){var v=m.push("translate(",null,t,null,n);y.push({i:v-4,x:Xi(u,h)},{i:v-2,x:Xi(f,p)})}else(h||p)&&m.push("translate("+h+t+p+n)}function s(u,f,h,p){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),p.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Xi(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function a(u,f,h,p){u!==f?p.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Xi(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function l(u,f,h,p,m,y){if(u!==h||f!==p){var v=m.push(i(m)+"scale(",null,",",null,")");y.push({i:v-4,x:Xi(u,h)},{i:v-2,x:Xi(f,p)})}else(h!==1||p!==1)&&m.push(i(m)+"scale("+h+","+p+")")}return function(u,f){var h=[],p=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,p),s(u.rotate,f.rotate,h,p),a(u.skewX,f.skewX,h,p),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,p),u=f=null,function(m){for(var y=-1,v=p.length,w;++y<v;)h[(w=p[y]).i]=w.x(m);return h.join("")}}}var Lte=gL(Ote,"px, ","px)","deg)"),Ite=gL(Pte,", ",")",")"),zte=1e-12;function eF(e){return((e=Math.exp(e))+1/e)/2}function jte(e){return((e=Math.exp(e))-1/e)/2}function Bte(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ute=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],f=s[0],h=s[1],p=s[2],m=f-a,y=h-l,v=m*m+y*y,w,b;if(v<zte)b=Math.log(p/u)/t,w=function(A){return[a+A*m,l+A*y,u*Math.exp(t*A*b)]};else{var k=Math.sqrt(v),_=(p*p-u*u+r*v)/(2*u*n*k),C=(p*p-u*u-r*v)/(2*p*n*k),$=Math.log(Math.sqrt(_*_+1)-_),R=Math.log(Math.sqrt(C*C+1)-C);b=(R-$)/t,w=function(A){var N=A*b,F=eF($),L=u/(n*k)*(F*Bte(t*N+$)-jte($));return[a+L*m,l+L*y,u*F/eF(t*N+$)]}}return w.duration=b*1e3*t/Math.SQRT2,w}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function mL(e){return function(t,n){var r=e((t=K1(t)).h,(n=K1(n)).h),i=vn(t.s,n.s),o=vn(t.l,n.l),s=vn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const qte=mL(Yv);var Wte=mL(vn);function Hte(e,t){var n=vn((e=Z1(e)).l,(t=Z1(t)).l),r=vn(e.a,t.a),i=vn(e.b,t.b),o=vn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function yL(e){return function(t,n){var r=e((t=J1(t)).h,(n=J1(n)).h),i=vn(t.c,n.c),o=vn(t.l,n.l),s=vn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const Vte=yL(Yv);var Gte=yL(vn);function vL(e){return function t(n){n=+n;function r(i,o){var s=e((i=Xk(i)).h,(o=Xk(o)).h),a=vn(i.s,o.s),l=vn(i.l,o.l),u=vn(i.opacity,o.opacity);return function(f){return i.h=s(f),i.s=a(f),i.l=l(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r}(1)}const Yte=vL(Yv);var Xte=vL(vn);function D3(e,t){t===void 0&&(t=e,e=vl);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Kte(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Qte=Object.freeze(Object.defineProperty({__proto__:null,interpolate:vl,interpolateArray:Rte,interpolateBasis:oL,interpolateBasisClosed:sL,interpolateCubehelix:Yte,interpolateCubehelixLong:Xte,interpolateDate:fL,interpolateDiscrete:Mte,interpolateHcl:Vte,interpolateHclLong:Gte,interpolateHsl:qte,interpolateHslLong:Wte,interpolateHue:Dte,interpolateLab:Hte,interpolateNumber:Xi,interpolateNumberArray:M3,interpolateObject:dL,interpolateRgb:Kk,interpolateRgbBasis:Ate,interpolateRgbBasisClosed:Tte,interpolateRound:xg,interpolateString:hL,interpolateTransformCss:Lte,interpolateTransformSvg:Ite,interpolateZoom:Ute,piecewise:D3,quantize:Kte},Symbol.toStringTag,{value:"Module"}));function Zte(e){return function(){return e}}function Jk(e){return+e}var tF=[0,1];function Fr(e){return e}function eS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Zte(isNaN(t)?NaN:.5)}function Jte(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ene(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=eS(i,r),o=n(s,o)):(r=eS(r,i),o=n(o,s)),function(a){return o(r(a))}}function tne(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=eS(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=el(e,a,1,r)-1;return o[l](i[l](a))}}function wg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xv(){var e=tF,t=tF,n=vl,r,i,o,s=Fr,a,l,u;function f(){var p=Math.min(e.length,t.length);return s!==Fr&&(s=Jte(e[0],e[p-1])),a=p>2?tne:ene,l=u=null,h}function h(p){return p==null||isNaN(p=+p)?o:(l||(l=a(e.map(r),t,n)))(r(s(p)))}return h.invert=function(p){return s(i((u||(u=a(t,e.map(r),Xi)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,Jk),f()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=xg,f()},h.clamp=function(p){return arguments.length?(s=p?!0:Fr,f()):s!==Fr},h.interpolate=function(p){return arguments.length?(n=p,f()):n},h.unknown=function(p){return arguments.length?(o=p,h):o},function(p,m){return r=p,i=m,f()}}function xL(){return Xv()(Fr,Fr)}function wL(e,t,n,r){var i=tl(e,t,n),o;switch(r=_u(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=V7(i,s))&&(r.precision=o),bC(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=G7(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=H7(i))&&(r.precision=o-(r.type==="%")*2);break}}return Sv(r)}function Zu(e){var t=e.domain;return e.ticks=function(n){var r=t();return Fk(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return wL(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,f=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);f-- >0;){if(u=Mk(s,a,n),u===l)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function bL(){var e=xL();return e.copy=function(){return wg(e,bL())},is.apply(e,arguments),Zu(e)}function EL(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Jk),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return EL(e).unknown(t)},e=arguments.length?Array.from(e,Jk):[0,1],Zu(n)}function kL(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function nF(e){return Math.log(e)}function rF(e){return Math.exp(e)}function nne(e){return-Math.log(-e)}function rne(e){return-Math.exp(-e)}function ine(e){return isFinite(e)?+("1e"+e):e<0?0:e}function one(e){return e===10?ine:e===Math.E?Math.exp:t=>Math.pow(e,t)}function sne(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function iF(e){return(t,n)=>-e(-t,n)}function O3(e){const t=e(nF,rF),n=t.domain;let r=10,i,o;function s(){return i=sne(r),o=one(r),n()[0]<0?(i=iF(i),o=iF(o),e(nne,rne)):e(nF,rF),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],f=l[l.length-1];const h=f<u;h&&([u,f]=[f,u]);let p=i(u),m=i(f),y,v;const w=a==null?10:+a;let b=[];if(!(r%1)&&m-p<w){if(p=Math.floor(p),m=Math.ceil(m),u>0){for(;p<=m;++p)for(y=1;y<r;++y)if(v=p<0?y/o(-p):y*o(p),!(v<u)){if(v>f)break;b.push(v)}}else for(;p<=m;++p)for(y=r-1;y>=1;--y)if(v=p>0?y/o(-p):y*o(p),!(v<u)){if(v>f)break;b.push(v)}b.length*2<w&&(b=Fk(u,f,w))}else b=Fk(p,m,Math.min(m-p,w)).map(o);return h?b.reverse():b},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=_u(l)).precision==null&&(l.trim=!0),l=Sv(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return f=>{let h=f/o(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?l(f):""}},t.nice=()=>n(kL(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function SL(){const e=O3(Xv()).domain([1,10]);return e.copy=()=>wg(e,SL()).base(e.base()),is.apply(e,arguments),e}function oF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function P3(e){var t=1,n=e(oF(t),sF(t));return n.constant=function(r){return arguments.length?e(oF(t=+r),sF(t)):t},Zu(n)}function _L(){var e=P3(Xv());return e.copy=function(){return wg(e,_L()).constant(e.constant())},is.apply(e,arguments)}function aF(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ane(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function lne(e){return e<0?-e*e:e*e}function L3(e){var t=e(Fr,Fr),n=1;function r(){return n===1?e(Fr,Fr):n===.5?e(ane,lne):e(aF(n),aF(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Zu(t)}function I3(){var e=L3(Xv());return e.copy=function(){return wg(e,I3()).exponent(e.exponent())},is.apply(e,arguments),e}function une(){return I3.apply(null,arguments).exponent(.5)}function CL(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=z7(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[el(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(js),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return CL().domain(e).range(t).unknown(r)},is.apply(o,arguments)}function $L(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[el(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return $L().domain([e,t]).range(i).unknown(o)},is.apply(Zu(s),arguments)}function AL(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[el(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return AL().domain(e).range(t).unknown(n)},is.apply(i,arguments)}function cne(e){return new Date(e)}function fne(e){return e instanceof Date?+e:+new Date(+e)}function z3(e,t,n,r,i,o,s,a,l,u){var f=xL(),h=f.invert,p=f.domain,m=u(".%L"),y=u(":%S"),v=u("%I:%M"),w=u("%I %p"),b=u("%a %d"),k=u("%b %d"),_=u("%B"),C=u("%Y");function $(R){return(l(R)<R?m:a(R)<R?y:s(R)<R?v:o(R)<R?w:r(R)<R?i(R)<R?b:k:n(R)<R?_:C)(R)}return f.invert=function(R){return new Date(h(R))},f.domain=function(R){return arguments.length?p(Array.from(R,fne)):p().map(cne)},f.ticks=function(R){var A=p();return e(A[0],A[A.length-1],R??10)},f.tickFormat=function(R,A){return A==null?$:u(A)},f.nice=function(R){var A=p();return(!R||typeof R.range!="function")&&(R=t(A[0],A[A.length-1],R??10)),R?p(kL(A,R)):f},f.copy=function(){return wg(f,z3(e,t,n,r,i,o,s,a,l,u))},f}function dne(){return is.apply(z3(vQ,xQ,Yo,Mp,ld,Bs,$v,_v,Os,CC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hne(){return is.apply(z3(mQ,yQ,Xo,Dp,ud,Xa,Av,Cv,Os,$C).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Kv(){var e=0,t=1,n,r,i,o,s=Fr,a=!1,l;function u(h){return h==null||isNaN(h=+h)?l:s(i===0?.5:(h=(o(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(h){return arguments.length?(a=!!h,u):a},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(p){var m,y;return arguments.length?([m,y]=p,s=h(m,y),u):[s(0),s(1)]}}return u.range=f(vl),u.rangeRound=f(xg),u.unknown=function(h){return arguments.length?(l=h,u):l},function(h){return o=h,n=h(e),r=h(t),i=n===r?0:1/(r-n),u}}function xl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function j3(){var e=Zu(Kv()(Fr));return e.copy=function(){return xl(e,j3())},ml.apply(e,arguments)}function TL(){var e=O3(Kv()).domain([1,10]);return e.copy=function(){return xl(e,TL()).base(e.base())},ml.apply(e,arguments)}function RL(){var e=P3(Kv());return e.copy=function(){return xl(e,RL()).constant(e.constant())},ml.apply(e,arguments)}function B3(){var e=L3(Kv());return e.copy=function(){return xl(e,B3()).exponent(e.exponent())},ml.apply(e,arguments)}function pne(){return B3.apply(null,arguments).exponent(.5)}function Qv(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=Fr,f,h=!1,p;function m(v){return isNaN(v=+v)?p:(v=.5+((v=+f(v))-o)*(r*v<r*o?a:l),u(h?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,n]=v,i=f(e=+e),o=f(t=+t),s=f(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,m):[e,t,n]},m.clamp=function(v){return arguments.length?(h=!!v,m):h},m.interpolator=function(v){return arguments.length?(u=v,m):u};function y(v){return function(w){var b,k,_;return arguments.length?([b,k,_]=w,u=D3(v,[b,k,_]),m):[u(0),u(.5),u(1)]}}return m.range=y(vl),m.rangeRound=y(xg),m.unknown=function(v){return arguments.length?(p=v,m):p},function(v){return f=v,i=v(e),o=v(t),s=v(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,m}}function NL(){var e=Zu(Qv()(Fr));return e.copy=function(){return xl(e,NL())},ml.apply(e,arguments)}function FL(){var e=O3(Qv()).domain([.1,1,10]);return e.copy=function(){return xl(e,FL()).base(e.base())},ml.apply(e,arguments)}function ML(){var e=P3(Qv());return e.copy=function(){return xl(e,ML()).constant(e.constant())},ml.apply(e,arguments)}function U3(){var e=L3(Qv());return e.copy=function(){return xl(e,U3()).exponent(e.exponent())},ml.apply(e,arguments)}function gne(){return U3.apply(null,arguments).exponent(.5)}function os(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const mne=os("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),yne=os("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),vne=os("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),xne=os("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),wne=os("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),bne=os("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ene=os("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),kne=os("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Sne=os("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),_ne=os("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function q3(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Cne="identity",$f="linear",Ks="log",bg="pow",Eg="sqrt",Zv="symlog",$u="time",Au="utc",qo="sequential",pd="diverging",Af="quantile",Jv="quantize",e2="threshold",W3="ordinal",tS="point",DL="band",H3="bin-ordinal",dn="continuous",kg="discrete",Sg="discretizing",Mi="interpolating",V3="temporal";function $ne(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Ane(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function G3(){const e=T3().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function f(){const h=t().length,p=r[1]<r[0],m=r[1-p],y=q3(h,a,l);let v=r[p-0];i=(m-v)/(y||1),s&&(i=Math.floor(i)),v+=(m-v-i*(h-a))*u,o=i*(1-a),s&&(v=Math.round(v),o=Math.round(o));const w=Qr(h).map(b=>v+i*b);return n(p?w.reverse():w)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?(r=[+h[0],+h[1]],f()):r.slice()},e.rangeRound=function(h){return r=[+h[0],+h[1]],s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(s=!!h,f()):s},e.padding=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),a=l,f()):a},e.paddingInner=function(h){return arguments.length?(a=Math.max(0,Math.min(1,h)),f()):a},e.paddingOuter=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),f()):l},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=r[1]<r[0],m=p?n().reverse():n(),y=m.length-1;let v=+h[0],w=+h[1],b,k,_;if(!(v!==v||w!==w)&&(w<v&&(_=v,v=w,w=_),!(w<m[0]||v>r[1-p])))return b=Math.max(0,el(m,v)-1),k=v===w?b:el(m,w)-1,v-m[b]>o+1e-10&&++b,p&&(_=b,b=y-k,k=y-_),b>k?void 0:t().slice(b,k+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return G3().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},f()}function OL(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return OL(t())},e}function Tne(){return OL(G3().paddingInner(1))}var Rne=Array.prototype.map;function Nne(e){return Rne.call(e,Yn)}const Fne=Array.prototype.slice;function PL(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(el(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Nne(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Fne.call(r),n):t.slice()},n.tickFormat=function(r,i){return wL(e[0],tt(e),r??10,i)},n.copy=function(){return PL().domain(n.domain()).range(n.range())},n}const ey=new Map,LL=Symbol("vega_scale");function IL(e){return e[LL]=!0,e}function lF(e){return e&&e[LL]===!0}function Mne(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?$ne(o):o.invertExtent?Ane(o):void 0),o.type=e,IL(o)};return r.metadata=so(xe(n)),r}function ct(e,t,n){return arguments.length>1?(ey.set(e,Mne(e,t,n)),this):zL(e)?ey.get(e):void 0}ct(Cne,EL);ct($f,bL,dn);ct(Ks,SL,[dn,Ks]);ct(bg,I3,dn);ct(Eg,une,dn);ct(Zv,_L,dn);ct($u,dne,[dn,V3]);ct(Au,hne,[dn,V3]);ct(qo,j3,[dn,Mi]);ct(`${qo}-${$f}`,j3,[dn,Mi]);ct(`${qo}-${Ks}`,TL,[dn,Mi,Ks]);ct(`${qo}-${bg}`,B3,[dn,Mi]);ct(`${qo}-${Eg}`,pne,[dn,Mi]);ct(`${qo}-${Zv}`,RL,[dn,Mi]);ct(`${pd}-${$f}`,NL,[dn,Mi]);ct(`${pd}-${Ks}`,FL,[dn,Mi,Ks]);ct(`${pd}-${bg}`,U3,[dn,Mi]);ct(`${pd}-${Eg}`,gne,[dn,Mi]);ct(`${pd}-${Zv}`,ML,[dn,Mi]);ct(Af,CL,[Sg,Af]);ct(Jv,$L,Sg);ct(e2,AL,Sg);ct(H3,PL,[kg,Sg]);ct(W3,T3,kg);ct(DL,G3,kg);ct(tS,Tne,kg);function zL(e){return ey.has(e)}function Ju(e,t){const n=ey.get(e);return n&&n.metadata[t]}function Y3(e){return Ju(e,dn)}function Tf(e){return Ju(e,kg)}function nS(e){return Ju(e,Sg)}function jL(e){return Ju(e,Ks)}function Dne(e){return Ju(e,V3)}function BL(e){return Ju(e,Mi)}function UL(e){return Ju(e,Af)}const One=["clamp","base","constant","exponent"];function qL(e,t){const n=t[0],r=tt(t)-n;return function(i){return e(n+i*r)}}function t2(e,t,n){return D3(X3(t||"rgb",n),e)}function WL(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function HL(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?tr(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=ct(o)().domain([t,n]).range([0,1]),One.forEach(a=>e[a]?s[a](e[a]()):0),s)}function X3(e,t){const n=Qte[Pne(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Pne(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Lne={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ine={accent:yne,category10:mne,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:vne,observable10:xne,paired:wne,pastel1:bne,pastel2:Ene,set1:kne,set2:Sne,set3:_ne,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function VL(e){if(ie(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function GL(e,t){for(const n in e)K3(n,t(e[n]))}const uF={};GL(Ine,VL);GL(Lne,e=>t2(VL(e)));function K3(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(uF[e]=t,this):uF[e]}const d1="symbol",zne="discrete",jne="gradient",Bne=e=>ie(e)?e.map(t=>String(t)):String(e),Une=(e,t)=>e[1]-t[1],qne=(e,t)=>t[1]-e[1];function Q3(e,t,n){let r;return lt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(pg(e.domain())/n||1)+1))),Ee(t)&&(r=t.step,t=t.interval),we(t)&&(t=e.type===$u?cd(t):e.type==Au?fd(t):re("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function YL(e,t,n){let r=e.range(),i=r[0],o=tt(r),s=Une;if(i>o&&(r=o,o=i,i=r,s=qne),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],tt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function Z3(e,t){return e.bins?YL(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function XL(e,t,n,r,i,o){const s=t.type;let a=Bne;if(s===$u||i===$u)a=e.timeFormat(r);else if(s===Au||i===Au)a=e.utcFormat(r);else if(jL(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=KL(t,n,!1);a=f=>u(f)?l(f):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function KL(e,t,n){const r=Z3(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const rS={[Af]:"quantiles",[Jv]:"thresholds",[e2]:"domain"},QL={[Af]:"quantiles",[Jv]:"domain"};function ZL(e,t){return e.bins?Vne(e.bins):e.type===Ks?KL(e,t,!0):rS[e.type]?Hne(e[rS[e.type]]()):Z3(e,t)}function Wne(e,t,n){const r=t[QL[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function Hne(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Vne(e){const t=e.slice(0,-1);return t.max=tt(e),t}const Gne=e=>rS[e.type]||e.bins;function JL(e,t,n,r,i,o,s){const a=QL[t.type]&&o!==$u&&o!==Au?Wne(e,t,i):XL(e,t,n,i,o,s);return r===d1&&Gne(t)?Yne(a):r===zne?Xne(a):Kne(a)}const Yne=e=>(t,n,r)=>{const i=cF(r[n+1],cF(r.max,1/0)),o=fF(t,e),s=fF(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},cF=(e,t)=>e??t,Xne=e=>(t,n)=>n?e(t):null,Kne=e=>t=>e(t),fF=(e,t)=>Number.isFinite(e)?t(e):null;function Qne(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+tt(t),o=i-r;if(e.type===e2){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function Zne(e,t,n,r){const i=r||t.type;return we(n)&&Dne(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===$u?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Au?e.utcFormat("%A, %d %B %Y, %X UTC"):JL(e,t,5,null,n,r,!0)}function eI(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Zne(e,t,n.format,n.formatType);if(nS(t.type)){const o=ZL(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(Tf(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(tt(o))}`}}let tI=0;function Jne(){tI=0}const ty="p_";function J3(e){return e&&e.gradient}function nI(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?ty:"";return i||(i=e.id="gradient_"+tI++,r==="radial"?(e.x1=Ro(e.x1,.5),e.y1=Ro(e.y1,.5),e.r1=Ro(e.r1,0),e.x2=Ro(e.x2,.5),e.y2=Ro(e.y2,.5),e.r2=Ro(e.r2,.5),o=ty):(e.x1=Ro(e.x1,0),e.y1=Ro(e.y1,0),e.x2=Ro(e.x2,1),e.y2=Ro(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Ro(e,t){return e??t}function rI(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const dF={basis:{curve:Xee},"basis-closed":{curve:Kee},"basis-open":{curve:Qee},bundle:{curve:Zee,tension:"beta",value:.85},cardinal:{curve:Jee,tension:"tension",value:0},"cardinal-open":{curve:tte,tension:"tension",value:0},"cardinal-closed":{curve:ete,tension:"tension",value:0},"catmull-rom":{curve:nte,tension:"alpha",value:.5},"catmull-rom-closed":{curve:rte,tension:"alpha",value:.5},"catmull-rom-open":{curve:ite,tension:"alpha",value:.5},linear:{curve:S3},"linear-closed":{curve:ote},monotone:{horizontal:ate,vertical:ste},natural:{curve:lte},step:{curve:ute},"step-after":{curve:fte},"step-before":{curve:cte}};function e$(e,t,n){var r=ke(dF,e)&&dF[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const ere={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},tre=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,nre=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,rre=/^((\s+,?\s*)|(,\s*))/,ire=/^[01]/;function Rf(e){const t=[];return(e.match(tre)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=ere[o],a=ore(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function ore(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?ire:nre,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(rre);l!==null&&(i+=l[0].length)}return r}const ol=Math.PI/180,sre=1e-14,su=Math.PI/2,Po=Math.PI*2,jc=Math.sqrt(3)/2;var tE={},nE={},iI=[].join;function are(e,t,n,r,i,o,s,a,l){const u=iI.call(arguments);if(tE[u])return tE[u];const f=s*ol,h=Math.sin(f),p=Math.cos(f);n=Math.abs(n),r=Math.abs(r);const m=p*(a-e)*.5+h*(l-t)*.5,y=p*(l-t)*.5-h*(a-e)*.5;let v=m*m/(n*n)+y*y/(r*r);v>1&&(v=Math.sqrt(v),n*=v,r*=v);const w=p/n,b=h/n,k=-h/r,_=p/r,C=w*a+b*l,$=k*a+_*l,R=w*e+b*t,A=k*e+_*t;let F=1/((R-C)*(R-C)+(A-$)*(A-$))-.25;F<0&&(F=0);let L=Math.sqrt(F);o==i&&(L=-L);const O=.5*(C+R)-L*(A-$),K=.5*($+A)+L*(R-C),W=Math.atan2($-K,C-O);let M=Math.atan2(A-K,R-O)-W;M<0&&o===1?M+=Po:M>0&&o===0&&(M-=Po);const U=Math.ceil(Math.abs(M/(su+.001))),X=[];for(let q=0;q<U;++q){const H=W+q*M/U,J=W+(q+1)*M/U;X[q]=[O,K,H,J,n,r,h,p]}return tE[u]=X}function lre(e){const t=iI.call(e);if(nE[t])return nE[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const f=u*s,h=-l*a,p=l*s,m=u*a,y=Math.cos(i),v=Math.sin(i),w=Math.cos(o),b=Math.sin(o),k=.5*(o-i),_=Math.sin(k*.5),C=8/3*_*_/Math.sin(k),$=n+y-C*v,R=r+v+C*y,A=n+w,N=r+b,F=A+C*b,L=N-C*w;return nE[t]=[f*$+h*R,p*$+m*R,f*F+h*L,p*F+m*L,f*A+h*N,p*A+m*N]}const pi=["l",0,0,0,0,0,0,0];function ure(e,t,n){const r=pi[0]=e[0];if(r==="a"||r==="A")pi[1]=t*e[1],pi[2]=n*e[2],pi[3]=e[3],pi[4]=e[4],pi[5]=e[5],pi[6]=t*e[6],pi[7]=n*e[7];else if(r==="h"||r==="H")pi[1]=t*e[1];else if(r==="v"||r==="V")pi[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)pi[i]=(i%2==1?t:n)*e[i];return pi}function Bp(e,t,n,r,i,o){var s,a=null,l=0,u=0,f=0,h=0,p,m,y,v,w=0,b=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var k=0,_=t.length;k<_;++k){switch(s=t[k],(i!==1||o!==1)&&(s=ure(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],w=l,b=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],w=l,b=u,e.moveTo(l+n,u+r);break;case"c":p=l+s[5],m=u+s[6],f=l+s[3],h=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,f+n,h+r,p+n,m+r),l=p,u=m;break;case"C":l=s[5],u=s[6],f=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,f+n,h+r,l+n,u+r);break;case"s":p=l+s[3],m=u+s[4],f=2*l-f,h=2*u-h,e.bezierCurveTo(f+n,h+r,l+s[1]+n,u+s[2]+r,p+n,m+r),f=l+s[1],h=u+s[2],l=p,u=m;break;case"S":p=s[3],m=s[4],f=2*l-f,h=2*u-h,e.bezierCurveTo(f+n,h+r,s[1]+n,s[2]+r,p+n,m+r),l=p,u=m,f=s[1],h=s[2];break;case"q":p=l+s[3],m=u+s[4],f=l+s[1],h=u+s[2],e.quadraticCurveTo(f+n,h+r,p+n,m+r),l=p,u=m;break;case"Q":p=s[3],m=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,p+n,m+r),l=p,u=m,f=s[1],h=s[2];break;case"t":p=l+s[1],m=u+s[2],a[0].match(/[QqTt]/)===null?(f=l,h=u):a[0]==="t"?(f=2*l-y,h=2*u-v):a[0]==="q"&&(f=2*l-f,h=2*u-h),y=f,v=h,e.quadraticCurveTo(f+n,h+r,p+n,m+r),l=p,u=m,f=l+s[1],h=u+s[2];break;case"T":p=s[1],m=s[2],f=2*l-f,h=2*u-h,e.quadraticCurveTo(f+n,h+r,p+n,m+r),l=p,u=m;break;case"a":hF(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":hF(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=w,u=b,e.closePath();break}a=s}}function hF(e,t,n,r){const i=are(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=lre(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const pF=.5773502691896257,gF={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Po)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=jc*n,i=r-n*pF,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=jc*n,i=r-n*pF;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jc*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jc*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jc*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jc*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function oI(e){return ke(gF,e)?gF[e]:cre(e)}var rE={};function cre(e){if(!ke(rE,e)){const t=Rf(e);rE[e]={draw:function(n,r){Bp(n,t,0,0,Math.sqrt(r)/2)}}}return rE[e]}const Ta=.448084975506;function fre(e){return e.x}function dre(e){return e.y}function hre(e){return e.width}function pre(e){return e.height}function Ss(e){return typeof e=="function"?e:()=>+e}function $m(e,t,n){return Math.max(t,Math.min(e,n))}function sI(){var e=fre,t=dre,n=hre,r=pre,i=Ss(0),o=i,s=i,a=i,l=null;function u(f,h,p){var m,y=h??+e.call(this,f),v=p??+t.call(this,f),w=+n.call(this,f),b=+r.call(this,f),k=Math.min(w,b)/2,_=$m(+i.call(this,f),0,k),C=$m(+o.call(this,f),0,k),$=$m(+s.call(this,f),0,k),R=$m(+a.call(this,f),0,k);if(l||(l=m=Uv()),_<=0&&C<=0&&$<=0&&R<=0)l.rect(y,v,w,b);else{var A=y+w,N=v+b;l.moveTo(y+_,v),l.lineTo(A-C,v),l.bezierCurveTo(A-Ta*C,v,A,v+Ta*C,A,v+C),l.lineTo(A,N-R),l.bezierCurveTo(A,N-Ta*R,A-Ta*R,N,A-R,N),l.lineTo(y+$,N),l.bezierCurveTo(y+Ta*$,N,y,N-Ta*$,y,N-$),l.lineTo(y,v+_),l.bezierCurveTo(y,v+Ta*_,y+Ta*_,v,y+_,v),l.closePath()}if(m)return l=null,m+""||null}return u.x=function(f){return arguments.length?(e=Ss(f),u):e},u.y=function(f){return arguments.length?(t=Ss(f),u):t},u.width=function(f){return arguments.length?(n=Ss(f),u):n},u.height=function(f){return arguments.length?(r=Ss(f),u):r},u.cornerRadius=function(f,h,p,m){return arguments.length?(i=Ss(f),o=h!=null?Ss(h):i,a=p!=null?Ss(p):i,s=m!=null?Ss(m):o,u):i},u.context=function(f){return arguments.length?(l=f??null,u):l},u}function aI(){var e,t,n,r,i=null,o,s,a,l;function u(h,p,m){const y=m/2;if(o){var v=a-p,w=h-s;if(v||w){var b=Math.hypot(v,w),k=(v/=b)*l,_=(w/=b)*l,C=Math.atan2(w,v);i.moveTo(s-k,a-_),i.lineTo(h-v*y,p-w*y),i.arc(h,p,y,C-Math.PI,C),i.lineTo(s+k,a+_),i.arc(s,a,l,C,C+Math.PI)}else i.arc(h,p,y,0,Po);i.closePath()}else o=1;s=h,a=p,l=y}function f(h){var p,m=h.length,y,v=!1,w;for(i==null&&(i=w=Uv()),p=0;p<=m;++p)!(p<m&&r(y=h[p],p,h))===v&&(v=!v)&&(o=0),v&&u(+e(y,p,h),+t(y,p,h),+n(y,p,h));if(w)return i=null,w+""||null}return f.x=function(h){return arguments.length?(e=h,f):e},f.y=function(h){return arguments.length?(t=h,f):t},f.size=function(h){return arguments.length?(n=h,f):n},f.defined=function(h){return arguments.length?(r=h,f):r},f.context=function(h){return arguments.length?(h==null?i=null:i=h,f):i},f}function _g(e,t){return e??t}const Cg=e=>e.x||0,$g=e=>e.y||0,gre=e=>e.width||0,mre=e=>e.height||0,yre=e=>(e.x||0)+(e.width||0),vre=e=>(e.y||0)+(e.height||0),xre=e=>e.startAngle||0,wre=e=>e.endAngle||0,bre=e=>e.padAngle||0,Ere=e=>e.innerRadius||0,kre=e=>e.outerRadius||0,Sre=e=>e.cornerRadius||0,_re=e=>_g(e.cornerRadiusTopLeft,e.cornerRadius)||0,Cre=e=>_g(e.cornerRadiusTopRight,e.cornerRadius)||0,$re=e=>_g(e.cornerRadiusBottomRight,e.cornerRadius)||0,Are=e=>_g(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Tre=e=>_g(e.size,64),Rre=e=>e.size||1,n2=e=>e.defined!==!1,Nre=e=>oI(e.shape||"circle"),Fre=Vee().startAngle(xre).endAngle(wre).padAngle(bre).innerRadius(Ere).outerRadius(kre).cornerRadius(Sre),Mre=P9().x(Cg).y1($g).y0(vre).defined(n2),Dre=P9().y($g).x1(Cg).x0(yre).defined(n2),Ore=O9().x(Cg).y($g).defined(n2),Pre=sI().x(Cg).y($g).width(gre).height(mre).cornerRadius(_re,Cre,$re,Are),Lre=Yee().type(Nre).size(Tre),Ire=aI().x(Cg).y($g).defined(n2).size(Rre);function t$(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function zre(e,t){return Fre.context(e)(t)}function jre(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Dre:Mre).curve(e$(r,n.orient,n.tension)).context(e)(t)}function Bre(e,t){const n=t[0],r=n.interpolate||"linear";return Ore.curve(e$(r,n.orient,n.tension)).context(e)(t)}function gd(e,t,n,r){return Pre.context(e)(t,n,r)}function Ure(e,t){return(t.mark.shape||t.shape).context(e)(t)}function qre(e,t){return Lre.context(e)(t)}function Wre(e,t){return Ire.context(e)(t)}var lI=1;function Hre(){lI=1}function n$(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+lI++),s=i.clipping[o]||(i.clipping[o]={id:o});return Ge(r)?s.path=r(null):t$(n)?s.path=gd(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function tn(e){this.clear(),e&&this.union(e)}tn.prototype={clone(){return new tn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,f=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+f,a*r-l*s+u,l*r+a*s+f,a*o-l*i+u,l*o+a*i+f,a*o-l*s+u,l*o+a*s+f]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function r2(e){this.mark=e,this.bounds=this.bounds||new tn}function i2(e){r2.call(this,e),this.items=this.items||[]}me(i2,r2);class uI{constructor(t){this._pending=0,this._loader=t||Rv()}pending(){return this._pending}sanitizeURL(t){const n=this;return mF(n),n._loader.sanitize(t,{context:"href"}).then(r=>(Ah(n),r)).catch(()=>(Ah(n),null))}loadImage(t){const n=this,r=dte();return mF(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=ke(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>Ah(n),s.onerror=()=>Ah(n),s.src=o,s}).catch(i=>(Ah(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function mF(e){e._pending+=1}function Ah(e){e._pending-=1}function ta(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Vre(t,r):0))}return e}function Vre(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Gre=Po-1e-8;let o2,h1,p1,du,iS,g1,oS,sS;const za=(e,t)=>o2.add(e,t),m1=(e,t)=>za(h1=e,p1=t),yF=e=>za(e,o2.y1),vF=e=>za(o2.x1,e),au=(e,t)=>iS*e+oS*t,lu=(e,t)=>g1*e+sS*t,iE=(e,t)=>za(au(e,t),lu(e,t)),oE=(e,t)=>m1(au(e,t),lu(e,t));function Ag(e,t){return o2=e,t?(du=t*ol,iS=sS=Math.cos(du),g1=Math.sin(du),oS=-g1):(iS=sS=1,du=g1=oS=0),Yre}const Yre={beginPath(){},closePath(){},moveTo:oE,lineTo:oE,rect(e,t,n,r){du?(iE(e+n,t),iE(e+n,t+r),iE(e,t+r),oE(e,t)):(za(e+n,t+r),m1(e,t))},quadraticCurveTo(e,t,n,r){const i=au(e,t),o=lu(e,t),s=au(n,r),a=lu(n,r);xF(h1,i,s,yF),xF(p1,o,a,vF),m1(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=au(e,t),a=lu(e,t),l=au(n,r),u=lu(n,r),f=au(i,o),h=lu(i,o);wF(h1,s,l,f,yF),wF(p1,a,u,h,vF),m1(f,h)},arc(e,t,n,r,i,o){if(r+=du,i+=du,h1=n*Math.cos(i)+e,p1=n*Math.sin(i)+t,Math.abs(i-r)>Gre)za(e-n,t-n),za(e+n,t+n);else{const s=u=>za(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%Po,r<0&&(r+=Po),i=i%Po,i<0&&(i+=Po),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Po,a=r-r%su,l=0;l<4&&a>i;++l,a-=su)s(a);else for(a=r-r%su+su,l=0;l<4&&a<i;++l,a=a+su)s(a)}}};function xF(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function wF(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,f;Math.abs(o)>sre?(f=s*s+a*o,f>=0&&(f=Math.sqrt(f),l=(-s+f)/o,u=(-s-f)/o)):l=.5*a/s,0<l&&l<1&&i(bF(l,e,t,n,r)),0<u&&u<1&&i(bF(u,e,t,n,r))}function bF(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var Za=(Za=Qa(1,1))?Za.getContext("2d"):null;const aS=new tn;function r$(e){return function(t,n){if(!Za)return!0;e(Za,t),aS.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=aS;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(Za.isPointInPath(l,a))return!0;return!1}}function i$(e,t){return t.contains(e.x||0,e.y||0)}function cI(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(aS.set(n,r,n+i,r+o))}function fI(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return ef(t,n,r,i,o)}function ef(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,f=i-n;let h=0,p=1,m,y,v,w;for(w=0;w<4;++w){if(w===0&&(m=-u,y=-(o-t)),w===1&&(m=u,y=a-t),w===2&&(m=-f,y=-(s-n)),w===3&&(m=f,y=l-n),Math.abs(m)<1e-10&&y<0)return!1;if(v=y/m,m<0){if(v>p)return!1;v>h&&(h=v)}else if(m>0){if(v<h)return!1;v<p&&(p=v)}}return!0}function Nf(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Wi(e,t){return e??t}function EF(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Xre(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Wi(t.x1,.5)*r,n.y1+Wi(t.y1,.5)*i,Math.max(r,i)*Wi(t.r1,0),n.x1+Wi(t.x2,.5)*r,n.y1+Wi(t.y2,.5)*i,Math.max(r,i)*Wi(t.r2,.5));else{const s=Wi(t.x1,0),a=Wi(t.y1,0),l=Wi(t.x2,1),u=Wi(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const f=Qa(Math.ceil(r),Math.ceil(i)),h=f.getContext("2d");return h.scale(r,i),h.fillStyle=EF(h.createLinearGradient(s,a,l,u),t.stops),h.fillRect(0,0,r,i),e.createPattern(f,"no-repeat")}}return EF(o,t.stops)}function dI(e,t,n){return J3(n)?Xre(e,n,t.bounds):n}function ny(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=dI(e,t,t.fill),!0):!1}var Kre=[];function Ff(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=dI(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Kre),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Qre(e,t){return e.zindex-t.zindex||e.index-t.index}function o$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Qre)}function lo(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=o$(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function ry(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=o$(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function s$(e){return function(t,n,r){lo(n,i=>{(!r||r.intersects(i.bounds))&&hI(e,t,i,i)})}}function Zre(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&hI(e,t,n.items[0],n.items)}}function hI(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Nf(t,n),n.fill&&ny(t,n,i)&&t.fill(),n.stroke&&Ff(t,n,i)&&t.stroke()))}function s2(e){return e=e||$i,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,ry(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function Tg(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,f;return l&&(u=s.strokeWidth,f=s.strokeCap,n.lineWidth=u??1,n.lineCap=f??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function a$(e){return s2(Tg(e))}function vu(e,t){return"translate("+e+","+t+")"}function l$(e){return"rotate("+e+")"}function Jre(e,t){return"scale("+e+","+t+")"}function pI(e){return vu(e.x||0,e.y||0)}function eie(e){return vu(e.x||0,e.y||0)+(e.angle?" "+l$(e.angle):"")}function tie(e){return vu(e.x||0,e.y||0)+(e.angle?" "+l$(e.angle):"")+(e.scaleX||e.scaleY?" "+Jre(e.scaleX||1,e.scaleY||1):"")}function u$(e,t,n){function r(s,a){s("transform",eie(a)),s("d",t(null,a))}function i(s,a){return t(Ag(s,a.angle),a),ta(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,f=a.angle||0;s.translate(l,u),f&&s.rotate(f*=ol),s.beginPath(),t(s,a),f&&s.rotate(-f),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:s$(o),pick:a$(o),isect:n||r$(o)}}var nie=u$("arc",zre);function rie(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function iie(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function oie(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function c$(e,t,n){function r(l,u){var f=u.mark.items;f.length&&l("d",t(null,f))}function i(l,u){var f=u.items;return f.length===0?l:(t(Ag(l),f),ta(l,f[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=Tg(o);function a(l,u,f,h,p,m){var y=u.items,v=u.bounds;return!y||!y.length||v&&!v.contains(p,m)?null:(f*=l.pixelRatio,h*=l.pixelRatio,s(l,y,f,h)?y[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Zre(o),pick:a,isect:i$,tip:n}}var sie=c$("area",jre,rie);function aie(e,t){var n=t.clip;e.save(),Ge(n)?(e.beginPath(),n(e),e.clip()):gI(e,t.group)}function gI(e,t){e.beginPath(),t$(t)?gd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function mI(e){const t=Wi(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function lie(e,t){e("transform",pI(t))}function yI(e,t){const n=mI(t);e("d",gd(null,t,n,n))}function uie(e,t){e("class","background"),e("aria-hidden",!0),yI(e,t)}function cie(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?yI(e,t):e("d","")}function fie(e,t,n){const r=t.clip?n$(n,t,t):null;e("clip-path",r)}function die(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ta(e,t),e.translate(t.x||0,t.y||0)}function Up(e,t,n,r){const i=mI(t);e.beginPath(),gd(e,t,(n||0)+i,(r||0)+i)}const hie=Tg(Up),pie=Tg(Up,!1),gie=Tg(Up,!0);function mie(e,t,n,r){lo(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(Up(e,i,o,s),Nf(e,i),i.fill&&ny(e,i,l)&&e.fill(),i.stroke&&!a&&Ff(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&gI(e,i),n&&n.translate(-o,-s),lo(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(Up(e,i,o,s),Nf(e,i),Ff(e,i,l)&&e.stroke())})}function yie(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return ry(t,l=>{let u,f,h;const p=l.bounds;if(p&&!p.contains(i,o))return;f=l.x||0,h=l.y||0;const m=f+(l.width||0),y=h+(l.height||0),v=l.clip;if(v&&(i<f||i>m||o<h||o>y))return;if(e.save(),e.translate(f,h),f=i-f,h=o-h,v&&t$(l)&&!gie(e,l,s,a))return e.restore(),null;const w=l.strokeForeground,b=t.interactive!==!1;return b&&w&&l.stroke&&pie(e,l,s,a)?(e.restore(),l):(u=ry(l,k=>vie(k,f,h)?this.pick(k,n,r,f,h):null),!u&&b&&(l.fill||!w&&l.stroke)&&hie(e,l,s,a)&&(u=l),e.restore(),u||null)})}function vie(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var xie={type:"group",tag:"g",nested:!1,attr:lie,bound:die,draw:mie,pick:yie,isect:cI,content:fie,background:uie,foreground:cie},qp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function f$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function d$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function h$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function a2(e,t){return e==="center"?t/2:e==="right"?t:0}function l2(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function wie(e,t,n){const r=f$(t,n),i=d$(t,r),o=h$(t,r),s=(t.x||0)-a2(t.align,i),a=(t.y||0)-l2(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,qp["xmlns:xlink"],"xlink:href"),e("transform",vu(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function bie(e,t){const n=t.image,r=d$(t,n),i=h$(t,n),o=(t.x||0)-a2(t.align,r),s=(t.y||0)-l2(t.baseline,i);return e.set(o,s,o+r,s+i)}function Eie(e,t,n){lo(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=f$(r,this);let o=d$(r,i),s=h$(r,i);if(o===0||s===0)return;let a=(r.x||0)-a2(r.align,o),l=(r.y||0)-l2(r.baseline,s),u,f,h,p;r.aspect!==!1&&(f=i.width/i.height,h=r.width/r.height,f===f&&h===h&&f!==h&&(h<f?(p=o/f,l+=(s-p)/2,s=p):(p=s*f,a+=(o-p)/2,o=p))),(i.complete||i.toDataURL)&&(Nf(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var kie={type:"image",tag:"image",nested:!1,attr:wie,bound:bie,draw:Eie,pick:s2(),isect:$i,get:f$,xOffset:a2,yOffset:l2},Sie=c$("line",Bre,iie);function _ie(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",tie(t)),e("d",t.path)}function y1(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*ol,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Rf(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),Bp(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):Bp(e,l,r,i,o,s)}function Cie(e,t){return y1(Ag(e,t.angle),t)?e.set(0,0,0,0):ta(e,t,!0)}var $ie={type:"path",tag:"path",nested:!1,attr:_ie,bound:Cie,draw:s$(y1),pick:a$(y1),isect:r$(y1)};function Aie(e,t){e("d",gd(null,t))}function Tie(e,t){var n,r;return ta(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function kF(e,t){e.beginPath(),gd(e,t)}var Rie={type:"rect",tag:"path",nested:!1,attr:Aie,bound:Tie,draw:s$(kF),pick:a$(kF),isect:cI};function Nie(e,t){e("transform",pI(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Fie(e,t){var n,r;return ta(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function vI(e,t,n){var r,i,o,s;return t.stroke&&Ff(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function Mie(e,t,n){lo(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&vI(e,r,i)&&(Nf(e,r),e.stroke())}})}function Die(e,t,n,r){return e.isPointInStroke?vI(e,t,1)&&e.isPointInStroke(n,r):!1}var Oie={type:"rule",tag:"line",nested:!1,attr:Nie,bound:Fie,draw:Mie,pick:s2(Die),isect:fI},Pie=u$("shape",Ure),Lie=u$("symbol",qre,i$);const SF=C7();var ei={height:ss,measureWidth:p$,estimateWidth:iy,width:iy,canvas:xI};xI(!0);function xI(e){ei.width=e&&Za?p$:iy}function iy(e,t){return wI(al(e,t),ss(e))}function wI(e,t){return~~(.8*e.length*t)}function p$(e,t){return ss(e)<=0||!(t=al(e,t))?0:bI(t,u2(e))}function bI(e,t){const n=`(${t}) ${e}`;let r=SF.get(n);return r===void 0&&(Za.font=t,r=Za.measureText(e).width,SF.set(n,r)),r}function ss(e){return e.fontSize!=null?+e.fontSize||0:11}function sl(e){return e.lineHeight!=null?e.lineHeight:ss(e)+2}function Iie(e){return ie(e)?e.length>1?e:e[0]:e}function Rg(e){return Iie(e.lineBreak&&e.text&&!ie(e.text)?e.text.split(e.lineBreak):e.text)}function g$(e){const t=Rg(e);return(ie(t)?t.length-1:0)*sl(e)}function al(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?jie(e,n):n}function zie(e){if(ei.width===p$){const t=u2(e);return n=>bI(n,t)}else if(ei.width===iy){const t=ss(e);return n=>wI(n,t)}else return t=>ei.width(e,t)}function jie(e,t){var n=+e.limit,r=zie(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function Ng(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function u2(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ss(e)+"px "+Ng(e,t)}function m$(e){var t=e.baseline,n=ss(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*sl(e):t==="line-bottom"?.29*n-.5*sl(e):0)}const Bie={left:"start",center:"middle",right:"end"},mp=new tn;function c2(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-su,t+=r*Math.cos(i),n+=r*Math.sin(i)),mp.x1=t,mp.y1=n,mp}function Uie(e,t){var n=t.dx||0,r=(t.dy||0)+m$(t),i=c2(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",Bie[t.align]||"start"),a?(l=vu(o,s)+" "+l$(a),(n||r)&&(l+=" "+vu(n,r))):l=vu(o+n,s+r),e("transform",l)}function y$(e,t,n){var r=ei.height(t),i=t.align,o=c2(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+m$(t)-Math.round(.8*r),f=Rg(t),h;if(ie(f)?(r+=sl(t)*(f.length-1),h=f.reduce((p,m)=>Math.max(p,ei.width(t,m)),0)):h=ei.width(t,f),i==="center"?l-=h/2:i==="right"&&(l-=h),e.set(l+=s,u+=a,l+h,u+r),t.angle&&!n)e.rotate(t.angle*ol,s,a);else if(n===2)return e.rotatedPoints(t.angle*ol,s,a);return e}function qie(e,t,n){lo(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,f,h;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=u2(r),e.textAlign=r.align||"left",o=c2(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*ol),s=a=0),s+=r.dx||0,a+=(r.dy||0)+m$(r),f=Rg(r),Nf(e,r),ie(f))for(u=sl(r),l=0;l<f.length;++l)h=al(r,f[l]),r.fill&&ny(e,r,i)&&e.fillText(h,s,a),r.stroke&&Ff(e,r,i)&&e.strokeText(h,s,a),a+=u;else h=al(r,f),r.fill&&ny(e,r,i)&&e.fillText(h,s,a),r.stroke&&Ff(e,r,i)&&e.strokeText(h,s,a);r.angle&&e.restore()}})}function Wie(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=c2(t),a=s.x1,l=s.y1,u=y$(mp,t,1),f=-t.angle*ol,h=Math.cos(f),p=Math.sin(f),m=h*i-p*o+(a-h*a+p*l),y=p*i+h*o+(l-p*a-h*l);return u.contains(m,y)}function Hie(e,t){const n=y$(mp,e,2);return ef(t,n[0],n[1],n[2],n[3])||ef(t,n[0],n[1],n[4],n[5])||ef(t,n[4],n[5],n[6],n[7])||ef(t,n[2],n[3],n[6],n[7])}var Vie={type:"text",tag:"text",nested:!1,attr:Uie,bound:y$,draw:qie,pick:s2(Wie),isect:Hie},Gie=c$("trail",Wre,oie),si={arc:nie,area:sie,group:xie,image:kie,line:Sie,path:$ie,rect:Rie,rule:Oie,shape:Pie,symbol:Lie,text:Vie,trail:Gie};function lS(e,t,n){var r=si[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new tn),e,n)}var _F={mark:null};function EI(e,t,n){var r=si[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,f;if(r.nested)return s?u=o[0]:(_F.mark=e,u=_F),f=lS(u,i,n),t=t&&t.union(f)||f,t;if(t=t||e.bounds&&e.bounds.clear()||new tn,s)for(a=0,l=o.length;a<l;++a)t.union(lS(o[a],i,n));return e.bounds=t}const Yie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function kI(e,t){return JSON.stringify(e,Yie,t)}function SI(e){const t=typeof e=="string"?JSON.parse(e):e;return _I(t)}function _I(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&_I(n[i]);return t&&EI(e),e}class CI{constructor(t){arguments.length?this.root=SI(t):(this.root=CF({marktype:"group",name:"root",role:"frame"}),this.root.items=[new i2(this.root)])}toJSON(t){return kI(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=CF(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function CF(e,t){const n={bounds:new tn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function ja(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function v$(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function an(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=ja(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function mi(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function $I(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function f2(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Xie(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=si[i.marktype]).tip){for(s=f2(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let x$=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Rv(),this._tooltip=n||Kie}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=ja(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Xie(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function Kie(e,t,n,r){e.element().setAttribute("title",r||"")}class Fg{constructor(t){this._el=null,this._bgcolor=null,this._loader=new uI(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Qie="keydown",Zie="keypress",Jie="keyup",AI="dragenter",v1="dragleave",TI="dragover",uS="pointerdown",eoe="pointerup",oy="pointermove",x1="pointerout",RI="pointerover",cS="mousedown",toe="mouseup",NI="mousemove",sy="mouseout",FI="mouseover",ay="click",noe="dblclick",roe="wheel",MI="mousewheel",ly="touchstart",uy="touchmove",cy="touchend",ioe=[Qie,Zie,Jie,AI,v1,TI,uS,eoe,oy,x1,RI,cS,toe,NI,sy,FI,ay,noe,roe,MI,ly,uy,cy],fS=oy,yp=sy,dS=ay;class Mg extends x${constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=ioe,this.pointermove=AF([oy,NI],[RI,FI],[x1,sy]),this.dragover=AF([TI],[AI],[v1]),this.pointerout=TF([x1,sy]),this.dragleave=TF([v1])}initialize(t,n,r){return this._canvas=t&&v$(t,"canvas"),[ay,cS,uS,oy,x1,v1].forEach(i=>$F(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(MI,t)}pointerdown(t){this._down=this._active,this.fire(uS,t)}mousedown(t){this._down=this._active,this.fire(cS,t)}click(t){this._down===this._active&&(this.fire(ay,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(ly,t,!0)}touchmove(t){this.fire(uy,t,!0)}touchend(t){this.fire(cy,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===dS&&i&&i.href?this.handleHref(n,i,i.href):(t===fS||t===yp)&&this.handleTooltip(n,i,t!==yp),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&($F(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=f2(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return si[t.marktype].pick.call(this,s,t,n,r,i,o)}}const ooe=e=>e===ly||e===uy||e===cy?[ly,uy,cy]:[e];function $F(e,t){ooe(t).forEach(n=>soe(e,n))}function soe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function tp(e,t,n){t.forEach(r=>e.fire(r,n))}function AF(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?tp(this,e,r):((!i||!i.exit)&&tp(this,n,r),this._active=o,tp(this,t,r),tp(this,e,r))}}function TF(e){return function(t){tp(this,e,t),this._active=null}}function aoe(){return typeof window<"u"&&window.devicePixelRatio||1}function loe(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?aoe():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class fy extends Fg{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new tn,this._tempb=new tn}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Qa(1,1,this._options.type),t&&this._canvas&&(mi(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)loe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||re("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=uoe(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):coe(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=si[n.marktype];n.clip&&aie(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const uoe=(e,t,n)=>new tn().set(0,0,t,n).translate(-e[0],-e[1]);function coe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class DI extends x${constructor(t,n){super(t,n);const r=this;r._hrefHandler=sE(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=sE(r,(i,o)=>{r.handleTooltip(i,o,i.type!==yp)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(dS,this._hrefHandler),i.removeEventListener(fS,this._tooltipHandler),i.removeEventListener(yp,this._tooltipHandler)),this._svg=i=t&&v$(t,"svg"),i&&(i.addEventListener(dS,this._hrefHandler),i.addEventListener(fS,this._tooltipHandler),i.addEventListener(yp,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:sE(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const sE=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},OI="aria-hidden",w$="aria-label",b$="role",E$="aria-roledescription",PI="graphics-object",k$="graphics-symbol",LI=(e,t,n)=>({[b$]:e,[E$]:t,[w$]:n||void 0}),foe=so(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),RF={axis:{desc:"axis",caption:poe},legend:{desc:"legend",caption:goe},"title-text":{desc:"title",caption:e=>`Title text '${FF(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${FF(e)}'`}},NF={ariaRole:b$,ariaRoleDescription:E$,description:w$};function II(e,t){const n=t.aria===!1;if(e(OI,n||void 0),n||t.description==null)for(const r in NF)e(NF[r],void 0);else{const r=t.mark.marktype;e(w$,t.description),e(b$,t.ariaRole||(r==="group"?PI:k$)),e(E$,t.ariaRoleDescription||`${r} mark`)}}function zI(e){return e.aria===!1?{[OI]:!0}:foe[e.role]?null:RF[e.role]?hoe(e,RF[e.role]):doe(e)}function doe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return LI(n?PI:k$,`${t} mark container`,e.description)}function hoe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return LI(t.role||k$,t.desc,n.description||r(n))}catch{return null}}function FF(e){return xe(e.text).join(" ")}function poe(e){const t=e.datum,n=e.orient,r=t.title?jI(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Tf(a)?"discrete":a} scale with ${eI(s,o,e)}`}function goe(e){const t=e.datum,n=t.title?jI(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return yoe(r)+(n?` titled '${n}'`:"")+` for ${moe(o)} with ${eI(l,a,e)}`}function jI(e){try{return xe(tt(e.items).items[0].text).join(" ")}catch{return null}}function moe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+tt(e)}function yoe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const BI=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),voe=e=>BI(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function S$(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${voe(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,f=new Array(u>1?u-1:0),h=1;h<u;h++)f[h-1]=arguments[h];for(const p of f)for(const m in p)s(m,p[m]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=BI(l),a),toString:()=>e};return a}const UI=e=>qI(S$(),e)+"";function qI(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):qI(e,r)}return e.close()}const dy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},hy={blend:"mix-blend-mode"},WI={fill:"none","stroke-miterlimit":10},Th=0,MF="http://www.w3.org/2000/xmlns/",sn=qp.xmlns;class _$ extends Fg{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=an(t,0,"svg",sn),this._svg.setAttributeNS(MF,"xmlns",sn),this._svg.setAttributeNS(MF,"xmlns:xlink",qp["xmlns:xlink"]),this._svg.setAttribute("version",qp.version),this._svg.setAttribute("class","marks"),mi(t,1),this._root=an(this._svg,Th,"g",sn),Ba(this._root,WI),mi(this._svg,Th+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Ba(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=an(t,Th,"rect",sn),Ba(r,{width:this._width,height:this._height,fill:n}));const i=UI(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),mi(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=si[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,DF(r,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,DF(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=si[s],l=n.interactive===!1?"none":null,u=a.tag==="g",f=OF(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return mi(f,0),n._svg;f.setAttribute("class",$I(n));const h=zI(n);for(const v in h)sr(f,v,h[v]);u||sr(f,"pointer-events",l),sr(f,"clip-path",n.clip?n$(this,n,n.group):null);let p=null,m=0;const y=v=>{const w=this.isDirty(v),b=OF(v,f,p,a.tag,o);w&&(this._update(a,b,v),u&&boe(this,b,v,i)),p=b,++m};return a.nested?n.items.length&&y(n.items[0]):lo(n,y),mi(f,m),f}_update(t,n,r){Ls=n,Vn=n.__values__,II(vp,r),t.attr(vp,r,this);const i=koe[t.type];i&&i.call(this,t,n,r),Ls&&this.style(Ls,r)}style(t,n){if(n!=null){for(const r in dy){let i=r==="font"?Ng(n):n[r];if(i===Vn[r])continue;const o=dy[r];i==null?t.removeAttribute(o):(J3(i)&&(i=nI(i,this._defs.gradient,HI())),t.setAttribute(o,i+"")),Vn[r]=i}for(const r in hy)w1(t,hy[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=an(t,Th+1,"defs",sn)),i=xoe(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=an(t,Th+1,"defs",sn)),i=woe(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):mi(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function DF(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function xoe(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=an(e,n++,"pattern",sn);Ba(s,{id:ty+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=an(s,0,"rect",sn),Ba(s,{width:1,height:1,fill:`url(${HI()}#${t.id})`}),e=an(e,n++,"radialGradient",sn),Ba(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=an(e,n++,"linearGradient",sn),Ba(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=an(e,r,"stop",sn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return mi(e,r),n}function woe(e,t,n){let r;return e=an(e,n,"clipPath",sn),e.setAttribute("id",t.id),t.path?(r=an(e,0,"path",sn),r.setAttribute("d",t.path)):(r=an(e,0,"rect",sn),Ba(r,{x:0,y:0,width:t.width,height:t.height})),mi(e,1),n+1}function boe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;lo(n,s=>{i=e.mark(t,s,i,r),++o}),mi(t,1+o)}function OF(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=ja(s,r,sn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=ja(s,"path",sn);o.appendChild(a),a.__data__=e;const l=ja(s,"g",sn);o.appendChild(l),l.__data__=e;const u=ja(s,"path",sn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||Eoe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Eoe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Ls=null,Vn=null;const koe={group(e,t,n){const r=Ls=t.childNodes[2];Vn=r.__values__,e.foreground(vp,n,this),Vn=t.__values__,Ls=t.childNodes[1],e.content(vp,n,this);const i=Ls=t.childNodes[0];e.background(vp,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Vn.events&&(sr(r,"pointer-events",o),sr(i,"pointer-events",o),Vn.events=o),n.strokeForeground&&n.stroke){const s=n.fill;sr(r,"display",null),this.style(i,n),sr(i,"stroke",null),s&&(n.fill=null),Vn=r.__values__,this.style(r,n),s&&(n.fill=s),Ls=null}else sr(r,"display","none")},image(e,t,n){n.smooth===!1?(w1(t,"image-rendering","optimizeSpeed"),w1(t,"image-rendering","pixelated")):w1(t,"image-rendering",null)},text(e,t,n){const r=Rg(n);let i,o,s,a;ie(r)?(o=r.map(l=>al(n,l)),i=o.join(`
`),i!==Vn.text&&(mi(t,0),s=t.ownerDocument,a=sl(n),o.forEach((l,u)=>{const f=ja(s,"tspan",sn);f.__data__=n,f.textContent=l,u&&(f.setAttribute("x",0),f.setAttribute("dy",a)),t.appendChild(f)}),Vn.text=i)):(o=al(n,r),o!==Vn.text&&(t.textContent=o,Vn.text=o)),sr(t,"font-family",Ng(n)),sr(t,"font-size",ss(n)+"px"),sr(t,"font-style",n.fontStyle),sr(t,"font-variant",n.fontVariant),sr(t,"font-weight",n.fontWeight)}};function vp(e,t,n){t!==Vn[e]&&(n?Soe(Ls,e,t,n):sr(Ls,e,t),Vn[e]=t)}function w1(e,t,n){n!==Vn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Vn[t]=n)}function Ba(e,t){for(const n in t)sr(e,n,t[n])}function sr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Soe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function HI(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class VI extends Fg{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=S$();n.open("svg",Ve({},qp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",WI,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=si[n.marktype],i=r.tag,o=[II,r.attr];t.open("g",{class:$I(n),"clip-path":n.clip?n$(this,n,n.group):null},zI(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=Rg(a);if(ie(u)){const f={x:0,dy:sl(a)};for(let h=0;h<u.length;++h)t.open("tspan",h?f:null).text(al(a,u[h])).close()}else t.text(al(a,u))}else if(i==="g"){const u=a.strokeForeground,f=a.fill,h=a.stroke;u&&h&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),lo(a,p=>this.mark(t,p)),t.close(),u&&h?(f&&(a.fill=null),a.stroke=h,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),f&&(a.fill=f)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):lo(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,f)=>{o[f||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&_oe(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:ty+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function _oe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Ng(t),e["font-size"]=ss(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in dy){let a=t[s];const l=dy[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(J3(a)&&(a=nI(a,i.gradient,"")),e[l]=a)}for(const s in hy){const a=t[s];a!=null&&(o=o||[],o.push(`${hy[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const Gi={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Coe(e){Gi.svgMarkTypes=e.svgMarkTypes??["text"],Gi.svgOnTop=e.svgOnTop??!0,Gi.debug=e.debug??!1}class hS extends Fg{constructor(t){super(t),this._svgRenderer=new _$(t),this._canvasRenderer=new fy(t)}initialize(t,n,r,i,o){this._root_el=an(t,0,"div");const s=an(this._root_el,0,"div"),a=an(this._root_el,1,"div");return this._root_el.style.position="relative",Gi.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Gi.svgOnTop?a:s,this._canvasEl=Gi.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return Gi.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!Gi.svgMarkTypes.includes(o));this._svgRenderer.render(t,Gi.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Gi.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class GI extends Mg{constructor(t,n){super(t,n)}initialize(t,n,r){const i=an(an(t,0,"div"),Gi.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const YI="canvas",XI="hybrid",KI="png",QI="svg",ZI="none",Ua={Canvas:YI,PNG:KI,SVG:QI,Hybrid:XI,None:ZI},Tu={};Tu[YI]=Tu[KI]={renderer:fy,headless:fy,handler:Mg};Tu[QI]={renderer:_$,headless:VI,handler:DI};Tu[XI]={renderer:hS,headless:hS,handler:GI};Tu[ZI]={};function d2(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Tu[e]=t,this):Tu[e]}function JI(e,t,n){const r=[],i=new tn().union(t),o=e.marktype;return o?ez(e,i,n,r):o==="group"?tz(e,i,n,r):re("Intersect scene must be mark node or group item.")}function ez(e,t,n,r){if($oe(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)tz(i[a],t,n,r);else for(const l=si[o].isect;a<s;++a){const u=i[a];nz(u,t,l)&&r.push(u)}}return r}function $oe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function tz(e,t,n,r){n&&n(e.mark)&&nz(e,t,si.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)ez(i[l],t,n,r);t.translate(s,a)}return r}function nz(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const aE=new tn;function rz(e){const t=e.clip;if(Ge(t))t(Ag(aE.clear()));else if(t)aE.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(aE)}const Aoe=1e-9;function C$(e,t,n){return e===t?!0:n==="path"?iz(e,t):e instanceof Date&&t instanceof Date?+e==+t:lt(e)&&lt(t)?Math.abs(e-t)<=Aoe:!e||!t||!Ee(e)&&!Ee(t)?e==t:Toe(e,t)}function iz(e,t){return C$(Rf(e),Rf(t))}function Toe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!C$(e[i],t[i],i))return!1;return typeof e==typeof t}function Roe(){Hre(),Jne()}const Mf="top",Zi="left",Ji="right",ll="bottom",Noe="top-left",Foe="top-right",Moe="bottom-left",Doe="bottom-right",$$="start",pS="middle",ar="end",Ooe="x",Poe="y",h2="group",A$="axis",T$="title",Loe="frame",Ioe="scope",R$="legend",oz="row-header",sz="row-footer",az="row-title",lz="column-header",uz="column-footer",cz="column-title",zoe="padding",joe="symbol",fz="fit",dz="fit-x",hz="fit-y",Boe="pad",N$="none",Am="all",gS="each",F$="flush",qa="column",Wa="row";function pz(e){te.call(this,null,e)}me(pz,te,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=si[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=Tm(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===h2||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(Tm(u,s))),r.role){case A$:case R$:case T$:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(Tm(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(Tm(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return rz(r),t.modifies("bounds")}});function Tm(e,t,n){return t(e.bounds.clear(),e,n)}const PF=":vega_identifier:";function M$(e){te.call(this,0,e)}M$.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};me(M$,te,{transform(e,t){const n=Uoe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Uoe(e){return e._signals[PF]||(e._signals[PF]=e.add(0))}function gz(e){te.call(this,null,e)}me(gz,te,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,qoe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===h2?i2:r2;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function qoe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function mz(e){te.call(this,null,e)}const LF={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!yz(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},yz=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),IF=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(yz(i,o=e[n].bounds,t))return!0},Woe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Hoe=(e,t,n)=>{var r=e.range(),i=new tn;return t===Mf||t===ll?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},zF=e=>(e.forEach(t=>t.opacity=1),e),jF=(e,t)=>e.reflow(t.modified()).modifies("opacity");me(mz,te,{transform(e,t){const n=LF[e.method]||LF.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(zF(i),t=jF(t,e)),t;if(i=i.filter(Woe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=zF(i),t=jF(t,e),o.length>=3&&IF(o,r)){do o=n(o,r);while(o.length>=3&&IF(o,r));o.length<3&&!tt(i).opacity&&(o.length>1&&(tt(o).opacity=0),tt(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Hoe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function vz(e){te.call(this,null,e)}me(vz,te,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Wn=new tn;function tf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Voe(e){var t=e.items[0].orient;return t===Zi||t===Ji}function Goe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Yoe(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=Goe(o),u=i.range,f=i.offset,h=i.position,p=i.minExtent,m=i.maxExtent,y=o.title&&i.items[l[2]].items[0],v=i.titlePadding,w=i.bounds,b=y&&g$(y),k=0,_=0,C,$;switch(Wn.clear().union(w),w.clear(),(C=l[0])>-1&&w.union(i.items[C].bounds),(C=l[1])>-1&&w.union(i.items[C].bounds),a){case Mf:k=h||0,_=-f,$=Math.max(p,Math.min(m,-w.y1)),w.add(0,-$).add(u,0),y&&Rm(e,y,$,v,b,0,-1,w);break;case Zi:k=-f,_=h||0,$=Math.max(p,Math.min(m,-w.x1)),w.add(-$,0).add(0,u),y&&Rm(e,y,$,v,b,1,-1,w);break;case Ji:k=n+f,_=h||0,$=Math.max(p,Math.min(m,w.x2)),w.add(0,0).add($,u),y&&Rm(e,y,$,v,b,1,1,w);break;case ll:k=h||0,_=r+f,$=Math.max(p,Math.min(m,w.y2)),w.add(0,0).add(u,$),y&&Rm(e,y,$,v,0,0,1,w);break;default:k=i.x,_=i.y}return ta(w.translate(k,_),i),tf(i,"x",k+s)|tf(i,"y",_+s)&&(i.bounds=Wn,e.dirty(i),i.bounds=w,e.dirty(i)),i.mark.bounds.clear().union(w)}function Rm(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let f=0,h=0;e.dirty(t),o?f=(t.x||0)-(t.x=u):h=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-f,-h)),e.dirty(t)}a.union(l)}const BF=(e,t)=>Math.floor(Math.min(e,t)),UF=(e,t)=>Math.ceil(Math.max(e,t));function Xoe(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===h2)switch(i.role){case A$:case R$:case T$:break;case oz:s.rowheaders.push(...o);break;case sz:s.rowfooters.push(...o);break;case lz:s.colheaders.push(...o);break;case uz:s.colfooters.push(...o);break;case az:s.rowtitle=o[0];break;case cz:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function Koe(e){return new tn().set(0,0,e.width||0,e.height||0)}function Qoe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Nt(e,t,n){const r=Ee(e)?e[t]:e;return r??(n!==void 0?n:0)}function qF(e){return e<0?Math.ceil(-e):0}function xz(e,t,n){var r=!n.nodirty,i=n.bounds===F$?Koe:Qoe,o=Wn.set(0,0,0,0),s=Nt(n.align,qa),a=Nt(n.align,Wa),l=Nt(n.padding,qa),u=Nt(n.padding,Wa),f=n.columns||t.length,h=f<=0?1:Math.ceil(t.length/f),p=t.length,m=Array(p),y=Array(f),v=0,w=Array(p),b=Array(h),k=0,_=Array(p),C=Array(p),$=Array(p),R,A,N,F,L,O,K,W,j,M,U;for(A=0;A<f;++A)y[A]=0;for(A=0;A<h;++A)b[A]=0;for(A=0;A<p;++A)O=t[A],L=$[A]=i(O),O.x=O.x||0,_[A]=0,O.y=O.y||0,C[A]=0,N=A%f,F=~~(A/f),v=Math.max(v,K=Math.ceil(L.x2)),k=Math.max(k,W=Math.ceil(L.y2)),y[N]=Math.max(y[N],K),b[F]=Math.max(b[F],W),m[A]=l+qF(L.x1),w[A]=u+qF(L.y1),r&&e.dirty(t[A]);for(A=0;A<p;++A)A%f===0&&(m[A]=0),A<f&&(w[A]=0);if(s===gS)for(N=1;N<f;++N){for(U=0,A=N;A<p;A+=f)U<m[A]&&(U=m[A]);for(A=N;A<p;A+=f)m[A]=U+y[N-1]}else if(s===Am){for(U=0,A=0;A<p;++A)A%f&&U<m[A]&&(U=m[A]);for(A=0;A<p;++A)A%f&&(m[A]=U+v)}else for(s=!1,N=1;N<f;++N)for(A=N;A<p;A+=f)m[A]+=y[N-1];if(a===gS)for(F=1;F<h;++F){for(U=0,A=F*f,R=A+f;A<R;++A)U<w[A]&&(U=w[A]);for(A=F*f;A<R;++A)w[A]=U+b[F-1]}else if(a===Am){for(U=0,A=f;A<p;++A)U<w[A]&&(U=w[A]);for(A=f;A<p;++A)w[A]=U+k}else for(a=!1,F=1;F<h;++F)for(A=F*f,R=A+f;A<R;++A)w[A]+=b[F-1];for(j=0,A=0;A<p;++A)j=m[A]+(A%f?j:0),_[A]+=j-t[A].x;for(N=0;N<f;++N)for(M=0,A=N;A<p;A+=f)M+=w[A],C[A]+=M-t[A].y;if(s&&Nt(n.center,qa)&&h>1)for(A=0;A<p;++A)L=s===Am?v:y[A%f],j=L-$[A].x2-t[A].x-_[A],j>0&&(_[A]+=j/2);if(a&&Nt(n.center,Wa)&&f!==1)for(A=0;A<p;++A)L=a===Am?k:b[~~(A/f)],M=L-$[A].y2-t[A].y-C[A],M>0&&(C[A]+=M/2);for(A=0;A<p;++A)o.union($[A].translate(_[A],C[A]));switch(j=Nt(n.anchor,Ooe),M=Nt(n.anchor,Poe),Nt(n.anchor,qa)){case ar:j-=o.width();break;case pS:j-=o.width()/2}switch(Nt(n.anchor,Wa)){case ar:M-=o.height();break;case pS:M-=o.height()/2}for(j=Math.round(j),M=Math.round(M),o.clear(),A=0;A<p;++A)t[A].mark.bounds.clear();for(A=0;A<p;++A)O=t[A],O.x+=_[A]+=j,O.y+=C[A]+=M,o.union(O.mark.bounds.union(O.bounds.translate(_[A],C[A]))),r&&e.dirty(O);return o}function Zoe(e,t,n){var r=Xoe(t),i=r.marks,o=n.bounds===F$?Joe:ese,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,f,h,p,m,y,v,w;const b=xz(e,i,n);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(v=Nt(n.headerBand,Wa,null),f=Nm(e,r.rowheaders,i,a,l,-Nt(s,"rowHeader"),BF,0,o,"x1",0,a,1,v)),r.colheaders&&(v=Nt(n.headerBand,qa,null),h=Nm(e,r.colheaders,i,a,a,-Nt(s,"columnHeader"),BF,1,o,"y1",0,1,a,v)),r.rowfooters&&(v=Nt(n.footerBand,Wa,null),p=Nm(e,r.rowfooters,i,a,l,Nt(s,"rowFooter"),UF,0,o,"x2",a-1,a,1,v)),r.colfooters&&(v=Nt(n.footerBand,qa,null),m=Nm(e,r.colfooters,i,a,a,Nt(s,"columnFooter"),UF,1,o,"y2",u-a,1,a,v)),r.rowtitle&&(y=Nt(n.titleAnchor,Wa),w=Nt(s,"rowTitle"),w=y===ar?p+w:f-w,v=Nt(n.titleBand,Wa,.5),WF(e,r.rowtitle,w,0,b,v)),r.coltitle&&(y=Nt(n.titleAnchor,qa),w=Nt(s,"columnTitle"),w=y===ar?m+w:h-w,v=Nt(n.titleBand,qa,.5),WF(e,r.coltitle,w,1,b,v))}function Joe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function ese(e,t){return e.bounds[t]}function Nm(e,t,n,r,i,o,s,a,l,u,f,h,p,m){var y=n.length,v=0,w=0,b,k,_,C,$,R,A,N,F;if(!y)return v;for(b=f;b<y;b+=h)n[b]&&(v=s(v,l(n[b],u)));if(!t.length)return v;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),v+=o,k=0,C=t.length;k<C;++k)e.dirty(t[k]),t[k].mark.bounds.clear();for(b=f,k=0,C=t.length;k<C;++k,b+=h){for(R=t[k],$=R.mark.bounds,_=b;_>=0&&(A=n[_])==null;_-=p);a?(N=m==null?A.x:Math.round(A.bounds.x1+m*A.bounds.width()),F=v):(N=v,F=m==null?A.y:Math.round(A.bounds.y1+m*A.bounds.height())),$.union(R.bounds.translate(N-(R.x||0),F-(R.y||0))),R.x=N,R.y=F,e.dirty(R),w=s(w,$[u])}return w}function WF(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function tse(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function nse(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function rse(e,t,n,r,i,o,s){const a=tse(n,t),l=nse(e,a("offset",0)),u=a("anchor",$$),f=u===ar?1:u===pS?.5:0,h={align:gS,bounds:a("bounds",F$),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Zi:h.anchor={x:Math.floor(r.x1)-l,column:ar,y:f*(s||r.height()+2*r.y1),row:u};break;case Ji:h.anchor={x:Math.ceil(r.x2)+l,y:f*(s||r.height()+2*r.y1),row:u};break;case Mf:h.anchor={y:Math.floor(i.y1)-l,row:ar,x:f*(o||i.width()+2*i.x1),column:u};break;case ll:h.anchor={y:Math.ceil(i.y2)+l,x:f*(o||i.width()+2*i.x1),column:u};break;case Noe:h.anchor={x:l,y:l};break;case Foe:h.anchor={x:o-l,y:l,column:ar};break;case Moe:h.anchor={x:l,y:s-l,row:ar};break;case Doe:h.anchor={x:o-l,y:s-l,column:ar,row:ar};break}return h}function ise(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),sse(e,n,n.items[0].items[0]),o=ose(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===joe&&ase(n.items[0].items[0].items[0].items),i!==N$&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,ta(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function ose(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function sse(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&Rh(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,f=r-s.y;switch(s.orient){case Zi:i+=Math.ceil(s.bounds.width())+l;break;case Ji:case ll:break;default:o+=s.bounds.height()+l}switch((i||o)&&Rh(e,n,i,o),s.orient){case Zi:f+=Bc(t,n,s,a,1,1);break;case Ji:u+=Bc(t,n,s,ar,0,0)+l,f+=Bc(t,n,s,a,1,1);break;case ll:u+=Bc(t,n,s,a,0,0),f+=Bc(t,n,s,ar,-1,0,1)+l;break;default:u+=Bc(t,n,s,a,0,0)}(u||f)&&Rh(e,s,u,f),(u=Math.round(s.bounds.x1-r))<0&&(Rh(e,n,-u,0),Rh(e,s,-u,0))}}function Bc(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,f=u.bounds[i?"y2":"x2"]-e.padding,h=l&&o?f:0,p=l&&o?0:f,m=i<=0?0:g$(n);return Math.round(r===$$?h:r===ar?p-m:.5*(f-m))}function Rh(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function ase(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function lse(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,f=o.padding,h=o.items[0].items[0],p=o.items[1]&&o.items[1].items[0],m=a===Zi||a===Ji?r:n,y=0,v=0,w=0,b=0,k=0,_;if(s!==h2?a===Zi?(y=i.y2,m=i.y1):a===Ji?(y=i.y1,m=i.y2):(y=i.x1,m=i.x2):a===Zi&&(y=r,m=0),_=l===$$?y:l===ar?m:(y+m)/2,p&&p.text){switch(a){case Mf:case ll:k=h.bounds.height()+f;break;case Zi:b=h.bounds.width()+f;break;case Ji:b=-h.bounds.width()-f;break}Wn.clear().union(p.bounds),Wn.translate(b-(p.x||0),k-(p.y||0)),tf(p,"x",b)|tf(p,"y",k)&&(e.dirty(p),p.bounds.clear().union(Wn),p.mark.bounds.clear().union(Wn),e.dirty(p)),Wn.clear().union(p.bounds)}else Wn.clear();switch(Wn.union(h.bounds),a){case Mf:v=_,w=i.y1-Wn.height()-u;break;case Zi:v=i.x1-Wn.width()-u,w=_;break;case Ji:v=i.x2+Wn.width()+u,w=_;break;case ll:v=_,w=i.y2+u;break;default:v=o.x,w=o.y}return tf(o,"x",v)|tf(o,"y",w)&&(Wn.translate(v,w),e.dirty(o),o.bounds.clear().union(Wn),t.bounds.clear().union(Wn),e.dirty(o)),o.bounds}function wz(e){te.call(this,null,e)}me(wz,te,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Zoe(n,r,e.layout),cse(n,r,e)}),use(e.mark.group)?t.reflow():t}});function use(e){return e&&e.mark.role!=="legend-entry"}function cse(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new tn().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],f,h,p,m,y,v;for(y=0,v=r.length;y<v;++y)switch(h=r[y],h.role){case A$:m=Voe(h)?a:l,m.union(Yoe(e,h,i,o));break;case T$:f=h;break;case R$:u.push(ise(e,h));break;case Loe:case Ioe:case oz:case sz:case az:case lz:case uz:case cz:a.union(h.bounds),l.union(h.bounds);break;default:s.union(h.bounds)}if(u.length){const w={};u.forEach(b=>{p=b.orient||Ji,p!==N$&&(w[p]||(w[p]=[])).push(b)});for(const b in w){const k=w[b];xz(e,k,rse(k,b,n.legends,a,l,i,o))}u.forEach(b=>{const k=b.bounds;if(k.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=k,e.dirty(b)),n.autosize&&(n.autosize.type===fz||n.autosize.type===dz||n.autosize.type===hz))switch(b.orient){case Zi:case Ji:s.add(k.x1,0).add(k.x2,0);break;case Mf:case ll:s.add(0,k.y1).add(0,k.y2)}else s.union(k)})}s.union(a).union(l),f&&s.union(lse(e,f,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),fse(e,t,s,n)}function fse(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),m=Math.max(0,Math.ceil(n.y2-f));if(i.contains===zoe){const y=e.padding();s-=y.left+y.right,a-=y.top+y.bottom}o===N$?(u=0,h=0,l=s,f=a):o===fz?(l=Math.max(0,s-u-p),f=Math.max(0,a-h-m)):o===dz?(l=Math.max(0,s-u-p),a=f+h+m):o===hz?(s=l+u+p,f=Math.max(0,a-h-m)):o===Boe&&(s=l+u+p,a=f+h+m),e._resizeView(s,a,l,f,[u,h],i.resize)}const dse=Object.freeze(Object.defineProperty({__proto__:null,bound:pz,identifier:M$,mark:gz,overlap:mz,render:vz,viewlayout:wz},Symbol.toStringTag,{value:"Module"}));function bz(e){te.call(this,null,e)}me(bz,te,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=Q3(o,s,e.minstep),l=e.format||XL(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?YL(o,e.values,a):Z3(o,a);return i&&(r.rem=i),i=u.map((f,h)=>ft({index:h/(u.length-1||1),value:f,label:l(f)})),e.extra&&i.length&&i.push(ft({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Ez(e){te.call(this,null,e)}function hse(){return ft({})}function pse(e){const t=sd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}me(Ez,te,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||hse,o=e.key||Me,s=this.value;return ie(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&re("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=pse(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function kz(e){te.call(this,null,e)}me(kz,te,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(ie(o))if(n.changed()||o.every(h=>i[h]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||Ra,l=i.enter||Ra,u=i.exit||Ra,f=(o&&!s?i[o]:a)||Ra;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{l(h,e),a(h,e)}),n.modifies(l.output),n.modifies(a.output),f!==Ra&&f!==a&&(t.visit(t.ADD,h=>{f(h,e)}),n.modifies(f.output))),t.changed(t.REM)&&u!==Ra&&(t.visit(t.REM,h=>{u(h,e)}),n.modifies(u.output)),s||f!==Ra){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const m=l(p,e)||r;(f(p,e)||m)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(h,p=>{(f(p,e)||r)&&n.mod.push(p)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation}});function Sz(e){te.call(this,[],e)}me(Sz,te,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||d1,s=e.scale,a=+e.limit,l=Q3(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===d1,f=e.format||JL(n,s,l,o,e.formatSpecifier,e.formatType,u),h=e.values||ZL(s,l),p,m,y,v,w;return i&&(r.rem=i),o===d1?(a&&h.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=h.slice(0,a-1),w=!0):i=h,Ge(y=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),v=i.reduce((b,k)=>Math.max(b,y(k,e)),0)):y=tr(v=y||8),i=i.map((b,k)=>ft({index:k,label:f(b,k,i),value:b,offset:v,size:y(b,e)})),w&&(w=h[i.length],i.push(ft({index:i.length,label:`${h.length-i.length} entries`,value:w,offset:v,size:y(w,e)})))):o===jne?(p=s.domain(),m=HL(s,p[0],tt(p)),h.length<3&&!e.values&&p[0]!==tt(p)&&(h=[p[0],tt(p)]),i=h.map((b,k)=>ft({index:k,label:f(b,k,h),value:b,perc:m(b)}))):(y=h.length-1,m=Qne(s),i=h.map((b,k)=>ft({index:k,label:f(b,k,h),value:b,perc:k?m(b):0,perc2:k===y?1:m(h[k+1])}))),r.source=i,r.add=i,this.value=i,r}});const gse=e=>e.source.x,mse=e=>e.source.y,yse=e=>e.target.x,vse=e=>e.target.y;function D$(e){te.call(this,{},e)}D$.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};me(D$,te,{transform(e,t){var n=e.sourceX||gse,r=e.sourceY||mse,i=e.targetX||yse,o=e.targetY||vse,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=HF.get(l+"-"+a)||HF.get(l);return u||re("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[s]=u(n(f),r(f),i(f),o(f))}),t.reflow(e.modified()).modifies(s)}});const _z=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,xse=(e,t,n,r)=>_z(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Cz=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},wse=(e,t,n,r)=>Cz(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),$z=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},bse=(e,t,n,r)=>$z(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Ese=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,kse=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Sse=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},_se=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Cse=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},$se=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},HF=sd({line:_z,"line-radial":xse,arc:Cz,"arc-radial":wse,curve:$z,"curve-radial":bse,"orthogonal-horizontal":Ese,"orthogonal-vertical":kse,"orthogonal-radial":Sse,"diagonal-horizontal":_se,"diagonal-vertical":Cse,"diagonal-radial":$se});function O$(e){te.call(this,null,e)}O$.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};me(O$,te,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||rd,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),f=u.length,h=s,p=(a-s)/U7(u),m=Qr(f),y,v,w;for(e.sort&&m.sort((b,k)=>u[b]-u[k]),y=0;y<f;++y)w=u[m[y]],v=l[m[y]],v[r]=h,v[i]=h+=w*p;return this.value=u,t.reflow(e.modified()).modifies(n)}});const Ase=5;function Tse(e){const t=e.type;return!e.bins&&(t===$f||t===bg||t===Eg)}function Az(e){return Y3(e)&&e!==qo}const Rse=so(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Tz(e){te.call(this,null,e),this.modified(!0)}me(Tz,te,{transform(e,t){var n=t.dataflow,r=this.value,i=Nse(e);(!r||i!==r.type)&&(this.value=r=ct(i)());for(i in e)if(!Rse[i]){if(i==="padding"&&Az(r.type))continue;Ge(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Lse(r,e,Pse(r,e,Mse(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Nse(e){var t=e.type,n="",r;return t===qo?qo+"-"+$f:(Fse(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?qo+"-":r===3?pd+"-":""),(n+t||$f).toLowerCase())}function Fse(e){const t=e.type;return Y3(t)&&t!==$u&&t!==Au&&(e.scheme||e.range&&e.range.length&&e.range.every(we))}function Mse(e,t,n){const r=Dse(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&Tse(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return Az(o)&&t.padding&&i[0]!==tt(i)&&(i=Ose(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Rz(o,i,n)),o===W3&&e.unknown(t.domainImplicit?Yk:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Q3(e,t.nice)||null),i.length}function Dse(e,t,n){return t?(e.domain(Rz(e.type,t,n)),t.length):-1}function Ose(e,t,n,r,i,o){var s=Math.abs(tt(n)-n[0]),a=s/(s-2*r),l=e===Ks?fC(t,null,a):e===Eg?L1(t,null,a,.5):e===bg?L1(t,null,a,i||1):e===Zv?dC(t,null,a,o||1):cC(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function Rz(e,t,n){if(jL(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+pe(t))}return t}function Pse(e,t,n){let r=t.bins;if(r&&!ie(r)){const i=e.domain(),o=i[0],s=tt(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||re("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=Qr(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===H3&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Lse(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Ise(r,t,n);else if(t.scheme&&(o=zse(r,t,n),Ge(o))){if(e.interpolator)return e.interpolator(o);re(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&BL(r))return e.interpolator(t2(mS(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(X3(t.interpolate,t.interpolateGamma)):Ge(e.round)?e.round(i):Ge(e.rangeRound)&&e.interpolate(i?xg:vl),o&&e.range(mS(o,t.reverse))}function Ise(e,t,n){e!==DL&&e!==tS&&re("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===tS?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*q3(n,i,r)]}function zse(e,t,n){var r=t.schemeExtent,i,o;return ie(t.scheme)?o=t2(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=K3(i),o||re(`Unrecognized scheme name: ${t.scheme}`)),n=e===e2?n+1:e===H3?n-1:e===Af||e===Jv?+t.schemeCount||Ase:n,BL(e)?VF(o,r,t.reverse):Ge(o)?WL(VF(o,r),n):e===W3?o:o.slice(0,n)}function VF(e,t,n){return Ge(e)&&(t||n)?qL(e,mS(t||[0,1],n)):e}function mS(e,t){return t?e.slice().reverse():e}function Nz(e){te.call(this,null,e)}me(Nz,te,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ku(e.sort)),this.modified(n),t}});const GF="zero",Fz="center",Mz="normalize",Dz=["y0","y1"];function P$(e){te.call(this,null,e)}P$.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:GF,values:[GF,Fz,Mz]},{name:"as",type:"string",array:!0,length:2,default:Dz}]};me(P$,te,{transform(e,t){var n=e.as||Dz,r=n[0],i=n[1],o=Ku(e.sort),s=e.field||rd,a=e.offset===Fz?jse:e.offset===Mz?Bse:Use,l,u,f,h;for(l=qse(t.source,e.groupby,o,s),u=0,f=l.length,h=l.max;u<f;++u)a(l[u],h,s,r,i);return t.reflow(e.modified()).modifies(n)}});function jse(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function Bse(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,f;l<a;++l)f=e[l],f[r]=s,f[i]=s=o*(u+=Math.abs(n(f)))}function Use(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,f;l<a;++l)f=e[l],u=+n(f),u<0?(f[r]=s,f[i]=s+=u):(f[r]=o,f[i]=o+=u)}function qse(e,t,n,r){var i=[],o=v=>v(f),s,a,l,u,f,h,p,m,y;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)f=e[a],h=t.map(o),p=s[h],p||(s[h]=p=[],i.push(p)),p.push(f);for(h=0,y=0,u=i.length;h<u;++h){for(p=i[h],a=0,m=0,l=p.length;a<l;++a)m+=Math.abs(r(p[a]));p.sum=m,m>y&&(y=m),n&&p.sort(n)}return i.max=y,i}const Wse=Object.freeze(Object.defineProperty({__proto__:null,axisticks:bz,datajoin:Ez,encode:kz,legendentries:Sz,linkpath:D$,pie:O$,scale:Tz,sortitems:Nz,stack:P$},Symbol.toStringTag,{value:"Module"}));var je=1e-6,yS=1e-12,Qe=Math.PI,Wt=Qe/2,py=Qe/4,yr=Qe*2,Xt=180/Qe,Ye=Qe/180,et=Math.abs,md=Math.atan,Ri=Math.atan2,Le=Math.cos,Fm=Math.ceil,Oz=Math.exp,vS=Math.hypot,gy=Math.log,lE=Math.pow,De=Math.sin,xi=Math.sign||function(e){return e>0?1:e<0?-1:0},vr=Math.sqrt,L$=Math.tan;function Pz(e){return e>1?0:e<-1?Qe:Math.acos(e)}function Pr(e){return e>1?Wt:e<-1?-Wt:Math.asin(e)}function Fn(){}function my(e,t){e&&XF.hasOwnProperty(e.type)&&XF[e.type](e,t)}var YF={Feature:function(e,t){my(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)my(n[r].geometry,t)}},XF={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){xS(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)xS(n[r],t,0)},Polygon:function(e,t){KF(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)KF(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)my(n[r],t)}};function xS(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function KF(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)xS(e[n],t,1);t.polygonEnd()}function Ns(e,t){e&&YF.hasOwnProperty(e.type)?YF[e.type](e,t):my(e,t)}var yy=new gr,vy=new gr,Lz,Iz,wS,bS,ES,Qo={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){yy=new gr,Qo.lineStart=Hse,Qo.lineEnd=Vse},polygonEnd:function(){var e=+yy;vy.add(e<0?yr+e:e),this.lineStart=this.lineEnd=this.point=Fn},sphere:function(){vy.add(yr)}};function Hse(){Qo.point=Gse}function Vse(){zz(Lz,Iz)}function Gse(e,t){Qo.point=zz,Lz=e,Iz=t,e*=Ye,t*=Ye,wS=e,bS=Le(t=t/2+py),ES=De(t)}function zz(e,t){e*=Ye,t*=Ye,t=t/2+py;var n=e-wS,r=n>=0?1:-1,i=r*n,o=Le(t),s=De(t),a=ES*s,l=bS*o+a*Le(i),u=a*r*De(i);yy.add(Ri(u,l)),wS=e,bS=o,ES=s}function Yse(e){return vy=new gr,Ns(e,Qo),vy*2}function xy(e){return[Ri(e[1],e[0]),Pr(e[2])]}function Ru(e){var t=e[0],n=e[1],r=Le(n);return[r*Le(t),r*De(t),De(n)]}function Mm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Df(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function uE(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Dm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function wy(e){var t=vr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Lt,Rr,Ut,Xr,ru,jz,Bz,ff,xp,Oa,Qs,Ts={point:kS,lineStart:QF,lineEnd:ZF,polygonStart:function(){Ts.point=qz,Ts.lineStart=Xse,Ts.lineEnd=Kse,xp=new gr,Qo.polygonStart()},polygonEnd:function(){Qo.polygonEnd(),Ts.point=kS,Ts.lineStart=QF,Ts.lineEnd=ZF,yy<0?(Lt=-(Ut=180),Rr=-(Xr=90)):xp>je?Xr=90:xp<-1e-6&&(Rr=-90),Qs[0]=Lt,Qs[1]=Ut},sphere:function(){Lt=-(Ut=180),Rr=-(Xr=90)}};function kS(e,t){Oa.push(Qs=[Lt=e,Ut=e]),t<Rr&&(Rr=t),t>Xr&&(Xr=t)}function Uz(e,t){var n=Ru([e*Ye,t*Ye]);if(ff){var r=Df(ff,n),i=[r[1],-r[0],0],o=Df(i,r);wy(o),o=xy(o);var s=e-ru,a=s>0?1:-1,l=o[0]*Xt*a,u,f=et(s)>180;f^(a*ru<l&&l<a*e)?(u=o[1]*Xt,u>Xr&&(Xr=u)):(l=(l+360)%360-180,f^(a*ru<l&&l<a*e)?(u=-o[1]*Xt,u<Rr&&(Rr=u)):(t<Rr&&(Rr=t),t>Xr&&(Xr=t))),f?e<ru?Yr(Lt,e)>Yr(Lt,Ut)&&(Ut=e):Yr(e,Ut)>Yr(Lt,Ut)&&(Lt=e):Ut>=Lt?(e<Lt&&(Lt=e),e>Ut&&(Ut=e)):e>ru?Yr(Lt,e)>Yr(Lt,Ut)&&(Ut=e):Yr(e,Ut)>Yr(Lt,Ut)&&(Lt=e)}else Oa.push(Qs=[Lt=e,Ut=e]);t<Rr&&(Rr=t),t>Xr&&(Xr=t),ff=n,ru=e}function QF(){Ts.point=Uz}function ZF(){Qs[0]=Lt,Qs[1]=Ut,Ts.point=kS,ff=null}function qz(e,t){if(ff){var n=e-ru;xp.add(et(n)>180?n+(n>0?360:-360):n)}else jz=e,Bz=t;Qo.point(e,t),Uz(e,t)}function Xse(){Qo.lineStart()}function Kse(){qz(jz,Bz),Qo.lineEnd(),et(xp)>je&&(Lt=-(Ut=180)),Qs[0]=Lt,Qs[1]=Ut,ff=null}function Yr(e,t){return(t-=e)<0?t+360:t}function Qse(e,t){return e[0]-t[0]}function JF(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Zse(e){var t,n,r,i,o,s,a;if(Xr=Ut=-(Lt=Rr=1/0),Oa=[],Ns(e,Ts),n=Oa.length){for(Oa.sort(Qse),t=1,r=Oa[0],o=[r];t<n;++t)i=Oa[t],JF(r,i[0])||JF(r,i[1])?(Yr(r[0],i[1])>Yr(r[0],r[1])&&(r[1]=i[1]),Yr(i[0],r[1])>Yr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Yr(r[1],i[0]))>s&&(s=a,Lt=i[0],Ut=r[1])}return Oa=Qs=null,Lt===1/0||Rr===1/0?[[NaN,NaN],[NaN,NaN]]:[[Lt,Rr],[Ut,Xr]]}var np,by,Ey,ky,Sy,_y,Cy,$y,SS,_S,CS,Wz,Hz,lr,ur,cr,eo={sphere:Fn,point:I$,lineStart:eM,lineEnd:tM,polygonStart:function(){eo.lineStart=tae,eo.lineEnd=nae},polygonEnd:function(){eo.lineStart=eM,eo.lineEnd=tM}};function I$(e,t){e*=Ye,t*=Ye;var n=Le(t);Dg(n*Le(e),n*De(e),De(t))}function Dg(e,t,n){++np,Ey+=(e-Ey)/np,ky+=(t-ky)/np,Sy+=(n-Sy)/np}function eM(){eo.point=Jse}function Jse(e,t){e*=Ye,t*=Ye;var n=Le(t);lr=n*Le(e),ur=n*De(e),cr=De(t),eo.point=eae,Dg(lr,ur,cr)}function eae(e,t){e*=Ye,t*=Ye;var n=Le(t),r=n*Le(e),i=n*De(e),o=De(t),s=Ri(vr((s=ur*o-cr*i)*s+(s=cr*r-lr*o)*s+(s=lr*i-ur*r)*s),lr*r+ur*i+cr*o);by+=s,_y+=s*(lr+(lr=r)),Cy+=s*(ur+(ur=i)),$y+=s*(cr+(cr=o)),Dg(lr,ur,cr)}function tM(){eo.point=I$}function tae(){eo.point=rae}function nae(){Vz(Wz,Hz),eo.point=I$}function rae(e,t){Wz=e,Hz=t,e*=Ye,t*=Ye,eo.point=Vz;var n=Le(t);lr=n*Le(e),ur=n*De(e),cr=De(t),Dg(lr,ur,cr)}function Vz(e,t){e*=Ye,t*=Ye;var n=Le(t),r=n*Le(e),i=n*De(e),o=De(t),s=ur*o-cr*i,a=cr*r-lr*o,l=lr*i-ur*r,u=vS(s,a,l),f=Pr(u),h=u&&-f/u;SS.add(h*s),_S.add(h*a),CS.add(h*l),by+=f,_y+=f*(lr+(lr=r)),Cy+=f*(ur+(ur=i)),$y+=f*(cr+(cr=o)),Dg(lr,ur,cr)}function iae(e){np=by=Ey=ky=Sy=_y=Cy=$y=0,SS=new gr,_S=new gr,CS=new gr,Ns(e,eo);var t=+SS,n=+_S,r=+CS,i=vS(t,n,r);return i<yS&&(t=_y,n=Cy,r=$y,by<je&&(t=Ey,n=ky,r=Sy),i=vS(t,n,r),i<yS)?[NaN,NaN]:[Ri(n,t)*Xt,Pr(r/i)*Xt]}function $S(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function AS(e,t){return et(e)>Qe&&(e-=Math.round(e/yr)*yr),[e,t]}AS.invert=AS;function Gz(e,t,n){return(e%=yr)?t||n?$S(rM(e),iM(t,n)):rM(e):t||n?iM(t,n):AS}function nM(e){return function(t,n){return t+=e,et(t)>Qe&&(t-=Math.round(t/yr)*yr),[t,n]}}function rM(e){var t=nM(e);return t.invert=nM(-e),t}function iM(e,t){var n=Le(e),r=De(e),i=Le(t),o=De(t);function s(a,l){var u=Le(l),f=Le(a)*u,h=De(a)*u,p=De(l),m=p*n+f*r;return[Ri(h*i-m*o,f*n-p*r),Pr(m*i+h*o)]}return s.invert=function(a,l){var u=Le(l),f=Le(a)*u,h=De(a)*u,p=De(l),m=p*i-h*o;return[Ri(h*i+p*o,f*n+m*r),Pr(m*n-f*r)]},s}function oae(e){e=Gz(e[0]*Ye,e[1]*Ye,e.length>2?e[2]*Ye:0);function t(n){return n=e(n[0]*Ye,n[1]*Ye),n[0]*=Xt,n[1]*=Xt,n}return t.invert=function(n){return n=e.invert(n[0]*Ye,n[1]*Ye),n[0]*=Xt,n[1]*=Xt,n},t}function sae(e,t,n,r,i,o){if(n){var s=Le(t),a=De(t),l=r*n;i==null?(i=t+r*yr,o=t-l/2):(i=oM(s,i),o=oM(s,o),(r>0?i<o:i>o)&&(i+=r*yr));for(var u,f=i;r>0?f>o:f<o;f-=l)u=xy([s,-a*Le(f),-a*De(f)]),e.point(u[0],u[1])}}function oM(e,t){t=Ru(t),t[0]-=e,wy(t);var n=Pz(-t[1]);return((-t[2]<0?-n:n)+yr-je)%yr}function Yz(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Fn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function b1(e,t){return et(e[0]-t[0])<je&&et(e[1]-t[1])<je}function Om(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Xz(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(y){if(!((v=y.length-1)<=0)){var v,w=y[0],b=y[v],k;if(b1(w,b)){if(!w[2]&&!b[2]){for(i.lineStart(),a=0;a<v;++a)i.point((w=y[a])[0],w[1]);i.lineEnd();return}b[0]+=2*je}o.push(k=new Om(w,y,null,!0)),s.push(k.o=new Om(w,null,k,!1)),o.push(k=new Om(b,y,null,!1)),s.push(k.o=new Om(b,null,k,!0))}}),!!o.length){for(s.sort(t),sM(o),sM(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],f,h;;){for(var p=u,m=!0;p.v;)if((p=p.n)===u)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(a=0,l=f.length;a<l;++a)i.point((h=f[a])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(m)for(f=p.p.z,a=f.length-1;a>=0;--a)i.point((h=f[a])[0],h[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,m=!m}while(!p.v);i.lineEnd()}}}function sM(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function cE(e){return et(e[0])<=Qe?e[0]:xi(e[0])*((et(e[0])+Qe)%yr-Qe)}function aae(e,t){var n=cE(t),r=t[1],i=De(r),o=[De(n),-Le(n),0],s=0,a=0,l=new gr;i===1?r=Wt+je:i===-1&&(r=-Wt-je);for(var u=0,f=e.length;u<f;++u)if(p=(h=e[u]).length)for(var h,p,m=h[p-1],y=cE(m),v=m[1]/2+py,w=De(v),b=Le(v),k=0;k<p;++k,y=C,w=R,b=A,m=_){var _=h[k],C=cE(_),$=_[1]/2+py,R=De($),A=Le($),N=C-y,F=N>=0?1:-1,L=F*N,O=L>Qe,K=w*R;if(l.add(Ri(K*F*De(L),b*A+K*Le(L))),s+=O?N+F*yr:N,O^y>=n^C>=n){var W=Df(Ru(m),Ru(_));wy(W);var j=Df(o,W);wy(j);var M=(O^N>=0?-1:1)*Pr(j[2]);(r>M||r===M&&(W[0]||W[1]))&&(a+=O^N>=0?1:-1)}}return(s<-1e-6||s<je&&l<-1e-12)^a&1}function Kz(e,t,n,r){return function(i){var o=t(i),s=Yz(),a=t(s),l=!1,u,f,h,p={point:m,lineStart:v,lineEnd:w,polygonStart:function(){p.point=b,p.lineStart=k,p.lineEnd=_,f=[],u=[]},polygonEnd:function(){p.point=m,p.lineStart=v,p.lineEnd=w,f=B7(f);var C=aae(u,r);f.length?(l||(i.polygonStart(),l=!0),Xz(f,uae,C,n,i)):C&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(C,$){e(C,$)&&i.point(C,$)}function y(C,$){o.point(C,$)}function v(){p.point=y,o.lineStart()}function w(){p.point=m,o.lineEnd()}function b(C,$){h.push([C,$]),a.point(C,$)}function k(){a.lineStart(),h=[]}function _(){b(h[0][0],h[0][1]),a.lineEnd();var C=a.clean(),$=s.result(),R,A=$.length,N,F,L;if(h.pop(),u.push(h),h=null,!!A){if(C&1){if(F=$[0],(N=F.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),R=0;R<N;++R)i.point((L=F[R])[0],L[1]);i.lineEnd()}return}A>1&&C&2&&$.push($.pop().concat($.shift())),f.push($.filter(lae))}}return p}}function lae(e){return e.length>1}function uae(e,t){return((e=e.x)[0]<0?e[1]-Wt-je:Wt-e[1])-((t=t.x)[0]<0?t[1]-Wt-je:Wt-t[1])}const aM=Kz(function(){return!0},cae,dae,[-Qe,-Wt]);function cae(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Qe:-Qe,l=et(o-t);et(l-Qe)<je?(e.point(t,n=(n+s)/2>0?Wt:-Wt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=Qe&&(et(t-r)<je&&(t-=r*je),et(o-a)<je&&(o-=a*je),n=fae(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function fae(e,t,n,r){var i,o,s=De(e-n);return et(s)>je?md((De(t)*(o=Le(r))*De(n)-De(r)*(i=Le(t))*De(e))/(i*o*s)):(t+r)/2}function dae(e,t,n,r){var i;if(e==null)i=n*Wt,r.point(-Qe,i),r.point(0,i),r.point(Qe,i),r.point(Qe,0),r.point(Qe,-i),r.point(0,-i),r.point(-Qe,-i),r.point(-Qe,0),r.point(-Qe,i);else if(et(e[0]-t[0])>je){var o=e[0]<t[0]?Qe:-Qe;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function hae(e){var t=Le(e),n=2*Ye,r=t>0,i=et(t)>je;function o(f,h,p,m){sae(m,e,n,p,f,h)}function s(f,h){return Le(f)*Le(h)>t}function a(f){var h,p,m,y,v;return{lineStart:function(){y=m=!1,v=1},point:function(w,b){var k=[w,b],_,C=s(w,b),$=r?C?0:u(w,b):C?u(w+(w<0?Qe:-Qe),b):0;if(!h&&(y=m=C)&&f.lineStart(),C!==m&&(_=l(h,k),(!_||b1(h,_)||b1(k,_))&&(k[2]=1)),C!==m)v=0,C?(f.lineStart(),_=l(k,h),f.point(_[0],_[1])):(_=l(h,k),f.point(_[0],_[1],2),f.lineEnd()),h=_;else if(i&&h&&r^C){var R;!($&p)&&(R=l(k,h,!0))&&(v=0,r?(f.lineStart(),f.point(R[0][0],R[0][1]),f.point(R[1][0],R[1][1]),f.lineEnd()):(f.point(R[1][0],R[1][1]),f.lineEnd(),f.lineStart(),f.point(R[0][0],R[0][1],3)))}C&&(!h||!b1(h,k))&&f.point(k[0],k[1]),h=k,m=C,p=$},lineEnd:function(){m&&f.lineEnd(),h=null},clean:function(){return v|(y&&m)<<1}}}function l(f,h,p){var m=Ru(f),y=Ru(h),v=[1,0,0],w=Df(m,y),b=Mm(w,w),k=w[0],_=b-k*k;if(!_)return!p&&f;var C=t*b/_,$=-t*k/_,R=Df(v,w),A=Dm(v,C),N=Dm(w,$);uE(A,N);var F=R,L=Mm(A,F),O=Mm(F,F),K=L*L-O*(Mm(A,A)-1);if(!(K<0)){var W=vr(K),j=Dm(F,(-L-W)/O);if(uE(j,A),j=xy(j),!p)return j;var M=f[0],U=h[0],X=f[1],q=h[1],H;U<M&&(H=M,M=U,U=H);var J=U-M,I=et(J-Qe)<je,G=I||J<je;if(!I&&q<X&&(H=X,X=q,q=H),G?I?X+q>0^j[1]<(et(j[0]-M)<je?X:q):X<=j[1]&&j[1]<=q:J>Qe^(M<=j[0]&&j[0]<=U)){var ve=Dm(F,(-L+W)/O);return uE(ve,A),[j,xy(ve)]}}}function u(f,h){var p=r?e:Qe-e,m=0;return f<-p?m|=1:f>p&&(m|=2),h<-p?m|=4:h>p&&(m|=8),m}return Kz(s,a,o,r?[0,-e]:[-Qe,e-Qe])}function pae(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],f=0,h=1,p=l-s,m=u-a,y;if(y=n-s,!(!p&&y>0)){if(y/=p,p<0){if(y<f)return;y<h&&(h=y)}else if(p>0){if(y>h)return;y>f&&(f=y)}if(y=i-s,!(!p&&y<0)){if(y/=p,p<0){if(y>h)return;y>f&&(f=y)}else if(p>0){if(y<f)return;y<h&&(h=y)}if(y=r-a,!(!m&&y>0)){if(y/=m,m<0){if(y<f)return;y<h&&(h=y)}else if(m>0){if(y>h)return;y>f&&(f=y)}if(y=o-a,!(!m&&y<0)){if(y/=m,m<0){if(y>h)return;y>f&&(f=y)}else if(m>0){if(y<f)return;y<h&&(h=y)}return f>0&&(e[0]=s+f*p,e[1]=a+f*m),h<1&&(t[0]=s+h*p,t[1]=a+h*m),!0}}}}}var Pm=1e9,Lm=-1e9;function Qz(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function o(u,f,h,p){var m=0,y=0;if(u==null||(m=s(u,h))!==(y=s(f,h))||l(u,f)<0^h>0)do p.point(m===0||m===3?e:n,m>1?r:t);while((m=(m+h+4)%4)!==y);else p.point(f[0],f[1])}function s(u,f){return et(u[0]-e)<je?f>0?0:3:et(u[0]-n)<je?f>0?2:1:et(u[1]-t)<je?f>0?1:0:f>0?3:2}function a(u,f){return l(u.x,f.x)}function l(u,f){var h=s(u,1),p=s(f,1);return h!==p?h-p:h===0?f[1]-u[1]:h===1?u[0]-f[0]:h===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,h=Yz(),p,m,y,v,w,b,k,_,C,$,R,A={point:N,lineStart:K,lineEnd:W,polygonStart:L,polygonEnd:O};function N(M,U){i(M,U)&&f.point(M,U)}function F(){for(var M=0,U=0,X=m.length;U<X;++U)for(var q=m[U],H=1,J=q.length,I=q[0],G,ve,Ce=I[0],be=I[1];H<J;++H)G=Ce,ve=be,I=q[H],Ce=I[0],be=I[1],ve<=r?be>r&&(Ce-G)*(r-ve)>(be-ve)*(e-G)&&++M:be<=r&&(Ce-G)*(r-ve)<(be-ve)*(e-G)&&--M;return M}function L(){f=h,p=[],m=[],R=!0}function O(){var M=F(),U=R&&M,X=(p=B7(p)).length;(U||X)&&(u.polygonStart(),U&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),X&&Xz(p,a,M,o,u),u.polygonEnd()),f=u,p=m=y=null}function K(){A.point=j,m&&m.push(y=[]),$=!0,C=!1,k=_=NaN}function W(){p&&(j(v,w),b&&C&&h.rejoin(),p.push(h.result())),A.point=N,C&&f.lineEnd()}function j(M,U){var X=i(M,U);if(m&&y.push([M,U]),$)v=M,w=U,b=X,$=!1,X&&(f.lineStart(),f.point(M,U));else if(X&&C)f.point(M,U);else{var q=[k=Math.max(Lm,Math.min(Pm,k)),_=Math.max(Lm,Math.min(Pm,_))],H=[M=Math.max(Lm,Math.min(Pm,M)),U=Math.max(Lm,Math.min(Pm,U))];pae(q,H,e,t,n,r)?(C||(f.lineStart(),f.point(q[0],q[1])),f.point(H[0],H[1]),X||f.lineEnd(),R=!1):X&&(f.lineStart(),f.point(M,U),R=!1)}k=M,_=U,C=X}return A}}function lM(e,t,n){var r=Qr(e,t-je,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function uM(e,t,n){var r=Qr(e,t-je,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function gae(){var e,t,n,r,i,o,s,a,l=10,u=l,f=90,h=360,p,m,y,v,w=2.5;function b(){return{type:"MultiLineString",coordinates:k()}}function k(){return Qr(Fm(r/f)*f,n,f).map(y).concat(Qr(Fm(a/h)*h,s,h).map(v)).concat(Qr(Fm(t/l)*l,e,l).filter(function(_){return et(_%f)>je}).map(p)).concat(Qr(Fm(o/u)*u,i,u).filter(function(_){return et(_%h)>je}).map(m))}return b.lines=function(){return k().map(function(_){return{type:"LineString",coordinates:_}})},b.outline=function(){return{type:"Polygon",coordinates:[y(r).concat(v(s).slice(1),y(n).reverse().slice(1),v(a).reverse().slice(1))]}},b.extent=function(_){return arguments.length?b.extentMajor(_).extentMinor(_):b.extentMinor()},b.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],s=+_[1][1],r>n&&(_=r,r=n,n=_),a>s&&(_=a,a=s,s=_),b.precision(w)):[[r,a],[n,s]]},b.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],o=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),o>i&&(_=o,o=i,i=_),b.precision(w)):[[t,o],[e,i]]},b.step=function(_){return arguments.length?b.stepMajor(_).stepMinor(_):b.stepMinor()},b.stepMajor=function(_){return arguments.length?(f=+_[0],h=+_[1],b):[f,h]},b.stepMinor=function(_){return arguments.length?(l=+_[0],u=+_[1],b):[l,u]},b.precision=function(_){return arguments.length?(w=+_,p=lM(o,i,90),m=uM(t,e,w),y=lM(a,s,90),v=uM(r,n,w),b):w},b.extentMajor([[-180,-90+je],[180,90-je]]).extentMinor([[-180,-80-je],[180,80+je]])}const Wp=e=>e;var fE=new gr,TS=new gr,Zz,Jz,RS,NS,Fs={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){Fs.lineStart=mae,Fs.lineEnd=vae},polygonEnd:function(){Fs.lineStart=Fs.lineEnd=Fs.point=Fn,fE.add(et(TS)),TS=new gr},result:function(){var e=fE/2;return fE=new gr,e}};function mae(){Fs.point=yae}function yae(e,t){Fs.point=ej,Zz=RS=e,Jz=NS=t}function ej(e,t){TS.add(NS*e-RS*t),RS=e,NS=t}function vae(){ej(Zz,Jz)}var Of=1/0,Ay=Of,Hp=-Of,Ty=Hp,Ry={point:xae,lineStart:Fn,lineEnd:Fn,polygonStart:Fn,polygonEnd:Fn,result:function(){var e=[[Of,Ay],[Hp,Ty]];return Hp=Ty=-(Ay=Of=1/0),e}};function xae(e,t){e<Of&&(Of=e),e>Hp&&(Hp=e),t<Ay&&(Ay=t),t>Ty&&(Ty=t)}var FS=0,MS=0,rp=0,Ny=0,Fy=0,nf=0,DS=0,OS=0,ip=0,tj,nj,Lo,Io,yi={point:Nu,lineStart:cM,lineEnd:fM,polygonStart:function(){yi.lineStart=Eae,yi.lineEnd=kae},polygonEnd:function(){yi.point=Nu,yi.lineStart=cM,yi.lineEnd=fM},result:function(){var e=ip?[DS/ip,OS/ip]:nf?[Ny/nf,Fy/nf]:rp?[FS/rp,MS/rp]:[NaN,NaN];return FS=MS=rp=Ny=Fy=nf=DS=OS=ip=0,e}};function Nu(e,t){FS+=e,MS+=t,++rp}function cM(){yi.point=wae}function wae(e,t){yi.point=bae,Nu(Lo=e,Io=t)}function bae(e,t){var n=e-Lo,r=t-Io,i=vr(n*n+r*r);Ny+=i*(Lo+e)/2,Fy+=i*(Io+t)/2,nf+=i,Nu(Lo=e,Io=t)}function fM(){yi.point=Nu}function Eae(){yi.point=Sae}function kae(){rj(tj,nj)}function Sae(e,t){yi.point=rj,Nu(tj=Lo=e,nj=Io=t)}function rj(e,t){var n=e-Lo,r=t-Io,i=vr(n*n+r*r);Ny+=i*(Lo+e)/2,Fy+=i*(Io+t)/2,nf+=i,i=Io*e-Lo*t,DS+=i*(Lo+e),OS+=i*(Io+t),ip+=i*3,Nu(Lo=e,Io=t)}function ij(e){this._context=e}ij.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,yr);break}}},result:Fn};var PS=new gr,dE,oj,sj,op,sp,Vp={point:Fn,lineStart:function(){Vp.point=_ae},lineEnd:function(){dE&&aj(oj,sj),Vp.point=Fn},polygonStart:function(){dE=!0},polygonEnd:function(){dE=null},result:function(){var e=+PS;return PS=new gr,e}};function _ae(e,t){Vp.point=aj,oj=op=e,sj=sp=t}function aj(e,t){op-=e,sp-=t,PS.add(vr(op*op+sp*sp)),op=e,sp=t}let dM,My,hM,pM;class gM{constructor(t){this._append=t==null?lj:Cae(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==hM||this._append!==My){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,hM=r,My=this._append,pM=this._,this._=i}this._+=pM;break}}}result(){const t=this._;return this._="",t.length?t:null}}function lj(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Cae(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return lj;if(t!==dM){const n=10**t;dM=t,My=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return My}function uj(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Ns(a,i(o))),o.result()}return s.area=function(a){return Ns(a,i(Fs)),Fs.result()},s.measure=function(a){return Ns(a,i(Vp)),Vp.result()},s.bounds=function(a){return Ns(a,i(Ry)),Ry.result()},s.centroid=function(a){return Ns(a,i(yi)),yi.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,Wp):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new gM(n)):new ij(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new gM(n)),s},s.projection(e).digits(n).context(t)}function p2(e){return function(t){var n=new LS;for(var r in e)n[r]=e[r];return n.stream=t,n}}function LS(){}LS.prototype={constructor:LS,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function z$(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ns(n,e.stream(Ry)),t(Ry.result()),r!=null&&e.clipExtent(r),e}function g2(e,t,n){return z$(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function j$(e,t,n){return g2(e,[[0,0],t],n)}function B$(e,t,n){return z$(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function U$(e,t,n){return z$(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var mM=16,$ae=Le(30*Ye);function yM(e,t){return+t?Tae(e,t):Aae(e)}function Aae(e){return p2({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Tae(e,t){function n(r,i,o,s,a,l,u,f,h,p,m,y,v,w){var b=u-r,k=f-i,_=b*b+k*k;if(_>4*t&&v--){var C=s+p,$=a+m,R=l+y,A=vr(C*C+$*$+R*R),N=Pr(R/=A),F=et(et(R)-1)<je||et(o-h)<je?(o+h)/2:Ri($,C),L=e(F,N),O=L[0],K=L[1],W=O-r,j=K-i,M=k*W-b*j;(M*M/_>t||et((b*W+k*j)/_-.5)>.3||s*p+a*m+l*y<$ae)&&(n(r,i,o,s,a,l,O,K,F,C/=A,$/=A,R,v,w),w.point(O,K),n(O,K,F,C,$,R,u,f,h,p,m,y,v,w))}}return function(r){var i,o,s,a,l,u,f,h,p,m,y,v,w={point:b,lineStart:k,lineEnd:C,polygonStart:function(){r.polygonStart(),w.lineStart=$},polygonEnd:function(){r.polygonEnd(),w.lineStart=k}};function b(N,F){N=e(N,F),r.point(N[0],N[1])}function k(){h=NaN,w.point=_,r.lineStart()}function _(N,F){var L=Ru([N,F]),O=e(N,F);n(h,p,f,m,y,v,h=O[0],p=O[1],f=N,m=L[0],y=L[1],v=L[2],mM,r),r.point(h,p)}function C(){w.point=b,r.lineEnd()}function $(){k(),w.point=R,w.lineEnd=A}function R(N,F){_(i=N,F),o=h,s=p,a=m,l=y,u=v,w.point=_}function A(){n(h,p,f,m,y,v,o,s,i,a,l,u,mM,r),w.lineEnd=C,C()}return w}}var Rae=p2({point:function(e,t){this.stream.point(e*Ye,t*Ye)}});function Nae(e){return p2({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Fae(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function vM(e,t,n,r,i,o){if(!o)return Fae(e,t,n,r,i);var s=Le(o),a=De(o),l=s*e,u=a*e,f=s/e,h=a/e,p=(a*n-s*t)/e,m=(a*t+s*n)/e;function y(v,w){return v*=r,w*=i,[l*v-u*w+t,n-u*v-l*w]}return y.invert=function(v,w){return[r*(f*v-h*w+p),i*(m-h*v-f*w)]},y}function as(e){return cj(function(){return e})()}function cj(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,f,h=0,p=1,m=1,y=null,v=aM,w=null,b,k,_,C=Wp,$=.5,R,A,N,F,L;function O(M){return N(M[0]*Ye,M[1]*Ye)}function K(M){return M=N.invert(M[0],M[1]),M&&[M[0]*Xt,M[1]*Xt]}O.stream=function(M){return F&&L===M?F:F=Rae(Nae(f)(v(R(C(L=M)))))},O.preclip=function(M){return arguments.length?(v=M,y=void 0,j()):v},O.postclip=function(M){return arguments.length?(C=M,w=b=k=_=null,j()):C},O.clipAngle=function(M){return arguments.length?(v=+M?hae(y=M*Ye):(y=null,aM),j()):y*Xt},O.clipExtent=function(M){return arguments.length?(C=M==null?(w=b=k=_=null,Wp):Qz(w=+M[0][0],b=+M[0][1],k=+M[1][0],_=+M[1][1]),j()):w==null?null:[[w,b],[k,_]]},O.scale=function(M){return arguments.length?(n=+M,W()):n},O.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],W()):[r,i]},O.center=function(M){return arguments.length?(o=M[0]%360*Ye,s=M[1]%360*Ye,W()):[o*Xt,s*Xt]},O.rotate=function(M){return arguments.length?(a=M[0]%360*Ye,l=M[1]%360*Ye,u=M.length>2?M[2]%360*Ye:0,W()):[a*Xt,l*Xt,u*Xt]},O.angle=function(M){return arguments.length?(h=M%360*Ye,W()):h*Xt},O.reflectX=function(M){return arguments.length?(p=M?-1:1,W()):p<0},O.reflectY=function(M){return arguments.length?(m=M?-1:1,W()):m<0},O.precision=function(M){return arguments.length?(R=yM(A,$=M*M),j()):vr($)},O.fitExtent=function(M,U){return g2(O,M,U)},O.fitSize=function(M,U){return j$(O,M,U)},O.fitWidth=function(M,U){return B$(O,M,U)},O.fitHeight=function(M,U){return U$(O,M,U)};function W(){var M=vM(n,0,0,p,m,h).apply(null,t(o,s)),U=vM(n,r-M[0],i-M[1],p,m,h);return f=Gz(a,l,u),A=$S(t,U),N=$S(f,A),R=yM(A,$),j()}function j(){return F=L=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&K,W()}}function q$(e){var t=0,n=Qe/3,r=cj(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ye,n=o[1]*Ye):[t*Xt,n*Xt]},i}function Mae(e){var t=Le(e);function n(r,i){return[r*t,De(i)/t]}return n.invert=function(r,i){return[r/t,Pr(i*t)]},n}function Dae(e,t){var n=De(e),r=(n+De(t))/2;if(et(r)<je)return Mae(e);var i=1+n*(2*r-n),o=vr(i)/r;function s(a,l){var u=vr(i-2*r*De(l))/r;return[u*De(a*=r),o-u*Le(a)]}return s.invert=function(a,l){var u=o-l,f=Ri(a,et(u))*xi(u);return u*r<0&&(f-=Qe*xi(a)*xi(u)),[f/r,Pr((i-(a*a+u*u)*r*r)/(2*r))]},s}function Dy(){return q$(Dae).scale(155.424).center([0,33.6442])}function fj(){return Dy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Oae(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Pae(){var e,t,n=fj(),r,i=Dy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=Dy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(p,m){l=[p,m]}};function f(p){var m=p[0],y=p[1];return l=null,r.point(m,y),l||(o.point(m,y),l)||(a.point(m,y),l)}f.invert=function(p){var m=n.scale(),y=n.translate(),v=(p[0]-y[0])/m,w=(p[1]-y[1])/m;return(w>=.12&&w<.234&&v>=-.425&&v<-.214?i:w>=.166&&w<.234&&v>=-.214&&v<-.115?s:n).invert(p)},f.stream=function(p){return e&&t===p?e:e=Oae([n.stream(t=p),i.stream(p),s.stream(p)])},f.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),s.precision(p),h()):n.precision()},f.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),s.scale(p),f.translate(n.translate())):n.scale()},f.translate=function(p){if(!arguments.length)return n.translate();var m=n.scale(),y=+p[0],v=+p[1];return r=n.translate(p).clipExtent([[y-.455*m,v-.238*m],[y+.455*m,v+.238*m]]).stream(u),o=i.translate([y-.307*m,v+.201*m]).clipExtent([[y-.425*m+je,v+.12*m+je],[y-.214*m-je,v+.234*m-je]]).stream(u),a=s.translate([y-.205*m,v+.212*m]).clipExtent([[y-.214*m+je,v+.166*m+je],[y-.115*m-je,v+.234*m-je]]).stream(u),h()},f.fitExtent=function(p,m){return g2(f,p,m)},f.fitSize=function(p,m){return j$(f,p,m)},f.fitWidth=function(p,m){return B$(f,p,m)},f.fitHeight=function(p,m){return U$(f,p,m)};function h(){return e=t=null,f}return f.scale(1070)}function dj(e){return function(t,n){var r=Le(t),i=Le(n),o=e(r*i);return o===1/0?[2,0]:[o*i*De(t),o*De(n)]}}function Og(e){return function(t,n){var r=vr(t*t+n*n),i=e(r),o=De(i),s=Le(i);return[Ri(t*o,r*s),Pr(r&&n*o/r)]}}var hj=dj(function(e){return vr(2/(1+e))});hj.invert=Og(function(e){return 2*Pr(e/2)});function Lae(){return as(hj).scale(124.75).clipAngle(180-.001)}var pj=dj(function(e){return(e=Pz(e))&&e/De(e)});pj.invert=Og(function(e){return e});function Iae(){return as(pj).scale(79.4188).clipAngle(180-.001)}function m2(e,t){return[e,gy(L$((Wt+t)/2))]}m2.invert=function(e,t){return[e,2*md(Oz(t))-Wt]};function zae(){return gj(m2).scale(961/yr)}function gj(e){var t=as(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(h){return arguments.length?(r(h),f()):r()},t.translate=function(h){return arguments.length?(i(h),f()):i()},t.center=function(h){return arguments.length?(n(h),f()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=a=l=u=null:(s=+h[0][0],a=+h[0][1],l=+h[1][0],u=+h[1][1]),f()):s==null?null:[[s,a],[l,u]]};function f(){var h=Qe*r(),p=t(oae(t.rotate()).invert([0,0]));return o(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===m2?[[Math.max(p[0]-h,s),a],[Math.min(p[0]+h,l),u]]:[[s,Math.max(p[1]-h,a)],[l,Math.min(p[1]+h,u)]])}return f()}function Im(e){return L$((Wt+e)/2)}function jae(e,t){var n=Le(e),r=e===t?De(e):gy(n/Le(t))/gy(Im(t)/Im(e)),i=n*lE(Im(e),r)/r;if(!r)return m2;function o(s,a){i>0?a<-Wt+je&&(a=-Wt+je):a>Wt-je&&(a=Wt-je);var l=i/lE(Im(a),r);return[l*De(r*s),i-l*Le(r*s)]}return o.invert=function(s,a){var l=i-a,u=xi(r)*vr(s*s+l*l),f=Ri(s,et(l))*xi(l);return l*r<0&&(f-=Qe*xi(s)*xi(l)),[f/r,2*md(lE(i/u,1/r))-Wt]},o}function Bae(){return q$(jae).scale(109.5).parallels([30,30])}function Oy(e,t){return[e,t]}Oy.invert=Oy;function Uae(){return as(Oy).scale(152.63)}function qae(e,t){var n=Le(e),r=e===t?De(e):(n-Le(t))/(t-e),i=n/r+e;if(et(r)<je)return Oy;function o(s,a){var l=i-a,u=r*s;return[l*De(u),i-l*Le(u)]}return o.invert=function(s,a){var l=i-a,u=Ri(s,et(l))*xi(l);return l*r<0&&(u-=Qe*xi(s)*xi(l)),[u/r,i-xi(r)*vr(s*s+l*l)]},o}function Wae(){return q$(qae).scale(131.154).center([0,13.9389])}var wp=1.340264,bp=-.081106,Ep=893e-6,kp=.003796,Py=vr(3)/2,Hae=12;function mj(e,t){var n=Pr(Py*De(t)),r=n*n,i=r*r*r;return[e*Le(n)/(Py*(wp+3*bp*r+i*(7*Ep+9*kp*r))),n*(wp+bp*r+i*(Ep+kp*r))]}mj.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<Hae&&(a=n*(wp+bp*r+i*(Ep+kp*r))-t,l=wp+3*bp*r+i*(7*Ep+9*kp*r),n-=s=a/l,r=n*n,i=r*r*r,!(et(s)<yS));++o);return[Py*e*(wp+3*bp*r+i*(7*Ep+9*kp*r))/Le(n),Pr(De(n)/Py)]};function Vae(){return as(mj).scale(177.158)}function yj(e,t){var n=Le(t),r=Le(e)*n;return[n*De(e)/r,De(t)/r]}yj.invert=Og(md);function Gae(){return as(yj).scale(144.049).clipAngle(60)}function Yae(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,f,h,p=1,m=1,y=p2({point:function(C,$){var R=_([C,$]);this.stream.point(R[0],R[1])}}),v=Wp,w,b;function k(){return p=e*r,m=e*i,w=b=null,_}function _(C){var $=C[0]*p,R=C[1]*m;if(o){var A=R*s-$*a;$=$*s+R*a,R=A}return[$+t,R+n]}return _.invert=function(C){var $=C[0]-t,R=C[1]-n;if(o){var A=R*s+$*a;$=$*s-R*a,R=A}return[$/p,R/m]},_.stream=function(C){return w&&b===C?w:w=y(v(b=C))},_.postclip=function(C){return arguments.length?(v=C,l=u=f=h=null,k()):v},_.clipExtent=function(C){return arguments.length?(v=C==null?(l=u=f=h=null,Wp):Qz(l=+C[0][0],u=+C[0][1],f=+C[1][0],h=+C[1][1]),k()):l==null?null:[[l,u],[f,h]]},_.scale=function(C){return arguments.length?(e=+C,k()):e},_.translate=function(C){return arguments.length?(t=+C[0],n=+C[1],k()):[t,n]},_.angle=function(C){return arguments.length?(o=C%360*Ye,a=De(o),s=Le(o),k()):o*Xt},_.reflectX=function(C){return arguments.length?(r=C?-1:1,k()):r<0},_.reflectY=function(C){return arguments.length?(i=C?-1:1,k()):i<0},_.fitExtent=function(C,$){return g2(_,C,$)},_.fitSize=function(C,$){return j$(_,C,$)},_.fitWidth=function(C,$){return B$(_,C,$)},_.fitHeight=function(C,$){return U$(_,C,$)},_}function vj(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}vj.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(et(i)>je&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Xae(){return as(vj).scale(175.295)}function xj(e,t){return[Le(t)*De(e),De(t)]}xj.invert=Og(Pr);function Kae(){return as(xj).scale(249.5).clipAngle(90+je)}function wj(e,t){var n=Le(t),r=1+Le(e)*n;return[n*De(e)/r,De(t)/r]}wj.invert=Og(function(e){return 2*md(e)});function Qae(){return as(wj).scale(250).clipAngle(142)}function bj(e,t){return[gy(L$((Wt+t)/2)),-e]}bj.invert=function(e,t){return[-t,2*md(Oz(e))-Wt]};function Zae(){var e=gj(bj),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Jae=Math.abs,IS=Math.cos,Ly=Math.sin,ele=1e-6,Ej=Math.PI,zS=Ej/2,xM=tle(2);function wM(e){return e>1?zS:e<-1?-zS:Math.asin(e)}function tle(e){return e>0?Math.sqrt(e):0}function nle(e,t){var n=e*Ly(t),r=30,i;do t-=i=(t+Ly(t)-n)/(1+IS(t));while(Jae(i)>ele&&--r>0);return t/2}function rle(e,t,n){function r(i,o){return[e*i*IS(o=nle(n,o)),t*Ly(o)]}return r.invert=function(i,o){return o=wM(o/t),[i/(e*IS(o)),wM((2*o+Ly(2*o))/n)]},r}var ile=rle(xM/zS,xM,Ej);function ole(){return as(ile).scale(169.529)}const sle=uj(),jS=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function ale(e,t){return function n(){const r=t();return r.type=e,r.path=uj().projection(r),r.copy=r.copy||function(){const i=n();return jS.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},IL(r)}}function W$(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Iy[e]=ale(e,t),this):Iy[e]||null}function kj(e){return e&&e.path||sle}const Iy={albers:fj,albersusa:Pae,azimuthalequalarea:Lae,azimuthalequidistant:Iae,conicconformal:Bae,conicequalarea:Dy,conicequidistant:Wae,equalEarth:Vae,equirectangular:Uae,gnomonic:Gae,identity:Yae,mercator:zae,mollweide:ole,naturalEarth1:Xae,orthographic:Kae,stereographic:Qae,transversemercator:Zae};for(const e in Iy)W$(e,Iy[e]);function lle(){}const _s=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Sj(){var e=1,t=1,n=a;function r(l,u){return u.map(f=>i(l,f))}function i(l,u){var f=[],h=[];return o(l,u,p=>{n(p,l,u),ule(p)>0?f.push([p]):h.push(p)}),h.forEach(p=>{for(var m=0,y=f.length,v;m<y;++m)if(cle((v=f[m])[0],p)!==-1){v.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function o(l,u,f){var h=[],p=[],m,y,v,w,b,k;for(m=y=-1,w=l[0]>=u,_s[w<<1].forEach(_);++m<e-1;)v=w,w=l[m+1]>=u,_s[v|w<<1].forEach(_);for(_s[w<<0].forEach(_);++y<t-1;){for(m=-1,w=l[y*e+e]>=u,b=l[y*e]>=u,_s[w<<1|b<<2].forEach(_);++m<e-1;)v=w,w=l[y*e+e+m+1]>=u,k=b,b=l[y*e+m+1]>=u,_s[v|w<<1|b<<2|k<<3].forEach(_);_s[w|b<<3].forEach(_)}for(m=-1,b=l[y*e]>=u,_s[b<<2].forEach(_);++m<e-1;)k=b,b=l[y*e+m+1]>=u,_s[b<<2|k<<3].forEach(_);_s[b<<3].forEach(_);function _(C){var $=[C[0][0]+m,C[0][1]+y],R=[C[1][0]+m,C[1][1]+y],A=s($),N=s(R),F,L;(F=p[A])?(L=h[N])?(delete p[F.end],delete h[L.start],F===L?(F.ring.push(R),f(F.ring)):h[F.start]=p[L.end]={start:F.start,end:L.end,ring:F.ring.concat(L.ring)}):(delete p[F.end],F.ring.push(R),p[F.end=N]=F):(F=h[N])?(L=p[A])?(delete h[F.start],delete p[L.end],F===L?(F.ring.push(R),f(F.ring)):h[L.start]=p[F.end]={start:L.start,end:F.end,ring:L.ring.concat(F.ring)}):(delete h[F.start],F.ring.unshift($),h[F.start=A]=F):h[A]=p[N]={start:A,end:N,ring:[$,R]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,f){l.forEach(h=>{var p=h[0],m=h[1],y=p|0,v=m|0,w,b=u[v*e+y];p>0&&p<e&&y===p&&(w=u[v*e+y-1],h[0]=p+(f-w)/(b-w)-.5),m>0&&m<t&&v===m&&(w=u[(v-1)*e+y],h[1]=m+(f-w)/(b-w)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);return u>=0&&f>=0||re("invalid size"),e=u,t=f,r},r.smooth=function(l){return arguments.length?(n=l?a:lle,r):n===a},r}function ule(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function cle(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=fle(e,t[n]))return i;return 0}function fle(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],f=l[1],h=e[a],p=h[0],m=h[1];if(dle(l,h,t))return 0;f>r!=m>r&&n<(p-u)*(r-f)/(m-f)+u&&(i=-i)}return i}function dle(e,t,n){var r;return hle(e,t,n)&&ple(e[r=+(e[0]===t[0])],n[r],t[r])}function hle(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function ple(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function _j(e,t,n){return function(r){var i=Go(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?tl(o,s,e):a/(e+1);return Qr(o+l,s,l)}}function H$(e){te.call(this,null,e)}H$.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};me(H$,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||er,o=Sj().smooth(e.smooth!==!1),s=e.thresholds||gle(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const f=i(u),h=o.size([f.width,f.height])(f.values,ie(s)?s:s(f.values));mle(h,f,u,e),h.forEach(p=>{l.push(Mv(u,ft(a!=null?{[a]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function gle(e,t,n){const r=_j(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>gu(t(i).values)))}function mle(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ge(i)&&(i=i(n,r)),Ge(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(lt(i)?i:i[0])||1,a=(lt(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(Cj(t,s,a,l,u))}function Cj(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(h){h.forEach(u)}function u(h){a&&h.reverse(),h.forEach(f)}function f(h){h[0]=(h[0]-o)*t+r,h[1]=(h[1]-s)*n+i}return function(h){return h.coordinates.forEach(l),h}}function bM(e,t,n){const r=e>=0?e:LC(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function hE(e){return Ge(e)?e:tr(+e)}function $j(){var e=l=>l[0],t=l=>l[1],n=rd,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const f=bM(r[0],l,e)>>s,h=bM(r[1],l,t)>>s,p=f?f+2:0,m=h?h+2:0,y=2*p+(i>>s),v=2*m+(o>>s),w=new Float32Array(y*v),b=new Float32Array(y*v);let k=w;l.forEach(C=>{const $=p+(+e(C)>>s),R=m+(+t(C)>>s);$>=0&&$<y&&R>=0&&R<v&&(w[$+R*y]+=+n(C))}),f>0&&h>0?(Uc(y,v,w,b,f),qc(y,v,b,w,h),Uc(y,v,w,b,f),qc(y,v,b,w,h),Uc(y,v,w,b,f),qc(y,v,b,w,h)):f>0?(Uc(y,v,w,b,f),Uc(y,v,b,w,f),Uc(y,v,w,b,f),k=b):h>0&&(qc(y,v,w,b,h),qc(y,v,b,w,h),qc(y,v,w,b,h),k=b);const _=u?Math.pow(2,-2*s):1/U7(k);for(let C=0,$=y*v;C<$;++C)k[C]*=_;return{values:k,scale:1<<s,width:y,height:v,x1:p,y1:m,x2:p+(i>>s),y2:m+(o>>s)}}return a.x=function(l){return arguments.length?(e=hE(l),a):e},a.y=function(l){return arguments.length?(t=hE(l),a):t},a.weight=function(l){return arguments.length?(n=hE(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],f=+l[1];return u>=0&&f>=0||re("invalid size"),i=u,o=f,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||re("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=xe(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&re("invalid bandwidth"),r=l,a):r},a}function Uc(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function qc(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function V$(e){te.call(this,null,e)}V$.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const yle=["x","y","weight","size","cellSize","bandwidth"];function Aj(e,t){return yle.forEach(n=>t[n]!=null?e[n](t[n]):0),e}me(V$,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=vle(r,e.groupby),o=(e.groupby||[]).map(Ht),s=Aj($j(),e),a=e.as||"grid",l=[];function u(f,h){for(let p=0;p<o.length;++p)f[o[p]]=h[p];return f}return l=i.map(f=>ft(u({[a]:s(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function vle(e,t){var n=[],r=f=>f(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function G$(e){te.call(this,null,e)}G$.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};me(G$,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=Sj().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||_j(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=Aj($j(),e)(i,!0),l=Cj(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=ie(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(ft),n}});const BS="Feature",Y$="FeatureCollection",xle="MultiPoint";function X$(e){te.call(this,null,e)}X$.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};me(X$,te,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&er,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Kn(a))||o&&t.modified(Kn(o))||s&&t.modified(Kn(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,f=>n.push(a(f))),o&&s&&(t.visit(l,f=>{var h=o(f),p=s(f);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&r.push([h,p])}),n=n.concat({type:BS,geometry:{type:xle,coordinates:r}})),this.value={type:Y$,features:n}}});function K$(e){te.call(this,null,e)}K$.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};me(K$,te,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||er,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=kj(e.projection),n.materialize().reflow()):s=i===er||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=wle(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function wle(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Q$(e){te.call(this,null,e)}Q$.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};me(Q$,te,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(f){const h=n([r(f),i(f)]);h?(f[s]=h[0],f[a]=h[1]):(f[s]=void 0,f[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function Z$(e){te.call(this,null,e)}Z$.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};me(Z$,te,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=ble(kj(e.projection),e.field||Ci("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function ble(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function J$(e){te.call(this,[],e),this.generator=gae()}J$.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};me(J$,te,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Ge(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(LP(n[0],i)):t.add.push(ft(i)),n[0]=i,t}});function eA(e){te.call(this,null,e)}eA.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};me(eA,te,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||er,o=kle(e.opacity,e),s=Ele(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?gu(n.map(u=>gu(i(u).values))):0};return n.forEach(u=>{const f=i(u),h=Ve({},u,l);r||(h.$max=gu(f.values||[])),u[a]=Sle(f,h,s.dep?s:tr(s(h)),o.dep?o:tr(o(h)))}),t.reflow(!0).modifies(a)}});function Ele(e,t){let n;return Ge(e)?(n=r=>il(e(r,t)),n.dep=Tj(e)):n=tr(il(e||"#888")),n}function kle(e,t){let n;return Ge(e)?(n=r=>e(r,t),n.dep=Tj(e)):e?n=tr(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Tj(e){if(!Ge(e))return!1;const t=so(Kn(e));return t.$x||t.$y||t.$value||t.$max}function Sle(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,f=e.values,h=f?w=>f[w]:Ia,p=Qa(l-s,u-a),m=p.getContext("2d"),y=m.getImageData(0,0,l-s,u-a),v=y.data;for(let w=a,b=0;w<u;++w){t.$y=w-a;for(let k=s,_=w*i;k<l;++k,b+=4){t.$x=k-s,t.$value=h(k+_);const C=n(t);v[b+0]=C.r,v[b+1]=C.g,v[b+2]=C.b,v[b+3]=~~(255*r(t))}}return m.putImageData(y,0,0),p}function Rj(e){te.call(this,null,e),this.modified(!0)}me(Rj,te,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Cle(e.type),jS.forEach(r=>{e[r]!=null&&EM(n,r,e[r])})):jS.forEach(r=>{e.modified(r)&&EM(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&_le(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _le(e,t){const n=$le(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Cle(e){const t=W$((e||"mercator").toLowerCase());return t||re("Unrecognized projection type: "+e),t()}function EM(e,t,n){Ge(e[t])&&e[t](n)}function $le(e){return e=xe(e),e.length===1?e[0]:{type:Y$,features:e.reduce((t,n)=>t.concat(Ale(n)),[])}}function Ale(e){return e.type===Y$?e.features:xe(e).filter(t=>t!=null).map(t=>t.type===BS?t:{type:BS,geometry:t})}const Tle=Object.freeze(Object.defineProperty({__proto__:null,contour:G$,geojson:X$,geopath:K$,geopoint:Q$,geoshape:Z$,graticule:J$,heatmap:eA,isocontour:H$,kde2d:V$,projection:Rj},Symbol.toStringTag,{value:"Module"}));function Rle(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Nle(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Nj(this.cover(t,n),t,n,e)}function Nj(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,f=e._y1,h,p,m,y,v,w,b,k;if(!o)return e._root=s,e;for(;o.length;)if((v=t>=(h=(a+u)/2))?a=h:u=h,(w=n>=(p=(l+f)/2))?l=p:f=p,i=o,!(o=o[b=w<<1|v]))return i[b]=s,e;if(m=+e._x.call(null,o.data),y=+e._y.call(null,o.data),t===m&&n===y)return s.next=o,i?i[b]=s:e._root=s,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(v=t>=(h=(a+u)/2))?a=h:u=h,(w=n>=(p=(l+f)/2))?l=p:f=p;while((b=w<<1|v)===(k=(y>=p)<<1|m>=h));return i[k]=o,i[b]=s,e}function Fle(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,f=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>f&&(f=i),o<u&&(u=o),o>h&&(h=o));if(l>f||u>h)return this;for(this.cover(l,u).cover(f,h),n=0;n<r;++n)Nj(this,s[n],a[n],e[n]);return this}function Mle(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Dle(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ole(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function fr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Ple(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,f=this._x1,h=this._y1,p=[],m=this._root,y,v;for(m&&p.push(new fr(m,i,o,f,h)),n==null?n=1/0:(i=e-n,o=t-n,f=e+n,h=t+n,n*=n);y=p.pop();)if(!(!(m=y.node)||(s=y.x0)>f||(a=y.y0)>h||(l=y.x1)<i||(u=y.y1)<o))if(m.length){var w=(s+l)/2,b=(a+u)/2;p.push(new fr(m[3],w,b,l,u),new fr(m[2],s,b,w,u),new fr(m[1],w,a,l,b),new fr(m[0],s,a,w,b)),(v=(t>=b)<<1|e>=w)&&(y=p[p.length-1],p[p.length-1]=p[p.length-1-v],p[p.length-1-v]=y)}else{var k=e-+this._x.call(null,m.data),_=t-+this._y.call(null,m.data),C=k*k+_*_;if(C<n){var $=Math.sqrt(n=C);i=e-$,o=t-$,f=e+$,h=t+$,r=m.data}}return r}function Lle(e){if(isNaN(f=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,f,h,p,m,y,v,w,b;if(!n)return this;if(n.length)for(;;){if((y=f>=(p=(s+l)/2))?s=p:l=p,(v=h>=(m=(a+u)/2))?a=m:u=m,t=n,!(n=n[w=v<<1|y]))return this;if(!n.length)break;(t[w+1&3]||t[w+2&3]||t[w+3&3])&&(r=t,b=w)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[w]=o:delete t[w],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=o,this)}function Ile(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function zle(){return this._root}function jle(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Ble(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new fr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,f=(s+l)/2;(i=r[3])&&t.push(new fr(i,u,f,a,l)),(i=r[2])&&t.push(new fr(i,o,f,u,l)),(i=r[1])&&t.push(new fr(i,u,s,a,f)),(i=r[0])&&t.push(new fr(i,o,s,u,f))}return this}function Ule(e){var t=[],n=[],r;for(this._root&&t.push(new fr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,f=(s+l)/2,h=(a+u)/2;(o=i[0])&&t.push(new fr(o,s,a,f,h)),(o=i[1])&&t.push(new fr(o,f,a,l,h)),(o=i[2])&&t.push(new fr(o,s,h,f,u)),(o=i[3])&&t.push(new fr(o,f,h,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function qle(e){return e[0]}function Wle(e){return arguments.length?(this._x=e,this):this._x}function Hle(e){return e[1]}function Vle(e){return arguments.length?(this._y=e,this):this._y}function tA(e,t,n){var r=new nA(t??qle,n??Hle,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function nA(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function kM(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var wr=tA.prototype=nA.prototype;wr.copy=function(){var e=new nA(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=kM(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=kM(r));return e};wr.add=Nle;wr.addAll=Fle;wr.cover=Mle;wr.data=Dle;wr.extent=Ole;wr.find=Ple;wr.remove=Lle;wr.removeAll=Ile;wr.root=zle;wr.size=jle;wr.visit=Ble;wr.visitAfter=Ule;wr.x=Wle;wr.y=Vle;function dr(e){return function(){return e}}function Ha(e){return(e()-.5)*1e-6}function Gle(e){return e.x+e.vx}function Yle(e){return e.y+e.vy}function Xle(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=dr(e==null?1:+e));function s(){for(var u,f=t.length,h,p,m,y,v,w,b=0;b<o;++b)for(h=tA(t,Gle,Yle).visitAfter(a),u=0;u<f;++u)p=t[u],v=n[p.index],w=v*v,m=p.x+p.vx,y=p.y+p.vy,h.visit(k);function k(_,C,$,R,A){var N=_.data,F=_.r,L=v+F;if(N){if(N.index>p.index){var O=m-N.x-N.vx,K=y-N.y-N.vy,W=O*O+K*K;W<L*L&&(O===0&&(O=Ha(r),W+=O*O),K===0&&(K=Ha(r),W+=K*K),W=(L-(W=Math.sqrt(W)))/W*i,p.vx+=(O*=W)*(L=(F*=F)/(w+F)),p.vy+=(K*=W)*L,N.vx-=O*(L=1-L),N.vy-=K*L)}return}return C>m+L||R<m-L||$>y+L||A<y-L}}function a(u){if(u.data)return u.r=n[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(t){var u,f=t.length,h;for(n=new Array(f),u=0;u<f;++u)h=t[u],n[h.index]=+e(h,u,t)}}return s.initialize=function(u,f){t=u,r=f,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:dr(+u),l(),s):e},s}function Kle(e){return e.index}function SM(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Qle(e){var t=Kle,n=h,r,i=dr(30),o,s,a,l,u,f=1;e==null&&(e=[]);function h(w){return 1/Math.min(a[w.source.index],a[w.target.index])}function p(w){for(var b=0,k=e.length;b<f;++b)for(var _=0,C,$,R,A,N,F,L;_<k;++_)C=e[_],$=C.source,R=C.target,A=R.x+R.vx-$.x-$.vx||Ha(u),N=R.y+R.vy-$.y-$.vy||Ha(u),F=Math.sqrt(A*A+N*N),F=(F-o[_])/F*w*r[_],A*=F,N*=F,R.vx-=A*(L=l[_]),R.vy-=N*L,$.vx+=A*(L=1-L),$.vy+=N*L}function m(){if(s){var w,b=s.length,k=e.length,_=new Map(s.map(($,R)=>[t($,R,s),$])),C;for(w=0,a=new Array(b);w<k;++w)C=e[w],C.index=w,typeof C.source!="object"&&(C.source=SM(_,C.source)),typeof C.target!="object"&&(C.target=SM(_,C.target)),a[C.source.index]=(a[C.source.index]||0)+1,a[C.target.index]=(a[C.target.index]||0)+1;for(w=0,l=new Array(k);w<k;++w)C=e[w],l[w]=a[C.source.index]/(a[C.source.index]+a[C.target.index]);r=new Array(k),y(),o=new Array(k),v()}}function y(){if(s)for(var w=0,b=e.length;w<b;++w)r[w]=+n(e[w],w,e)}function v(){if(s)for(var w=0,b=e.length;w<b;++w)o[w]=+i(e[w],w,e)}return p.initialize=function(w,b){s=w,u=b,m()},p.links=function(w){return arguments.length?(e=w,m(),p):e},p.id=function(w){return arguments.length?(t=w,p):t},p.iterations=function(w){return arguments.length?(f=+w,p):f},p.strength=function(w){return arguments.length?(n=typeof w=="function"?w:dr(+w),y(),p):n},p.distance=function(w){return arguments.length?(i=typeof w=="function"?w:dr(+w),v(),p):i},p}var Zle={value:()=>{}};function Fj(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new E1(n)}function E1(e){this._=e}function Jle(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}E1.prototype=Fj.prototype={constructor:E1,on:function(e,t){var n=this._,r=Jle(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=eue(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=_M(n[i],e.name,t);else if(t==null)for(i in n)n[i]=_M(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new E1(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function eue(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function _M(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Zle,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Pf=0,ap=0,Nh=0,Mj=1e3,zy,lp,jy=0,Fu=0,y2=0,Gp=typeof performance=="object"&&performance.now?performance:Date,Dj=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function rA(){return Fu||(Dj(tue),Fu=Gp.now()+y2)}function tue(){Fu=0}function By(){this._call=this._time=this._next=null}By.prototype=Oj.prototype={constructor:By,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?rA():+n)+(t==null?0:+t),!this._next&&lp!==this&&(lp?lp._next=this:zy=this,lp=this),this._call=e,this._time=n,US()},stop:function(){this._call&&(this._call=null,this._time=1/0,US())}};function Oj(e,t,n){var r=new By;return r.restart(e,t,n),r}function nue(){rA(),++Pf;for(var e=zy,t;e;)(t=Fu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pf}function CM(){Fu=(jy=Gp.now())+y2,Pf=ap=0;try{nue()}finally{Pf=0,iue(),Fu=0}}function rue(){var e=Gp.now(),t=e-jy;t>Mj&&(y2-=t,jy=e)}function iue(){for(var e,t=zy,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zy=n);lp=e,US(r)}function US(e){if(!Pf){ap&&(ap=clearTimeout(ap));var t=e-Fu;t>24?(e<1/0&&(ap=setTimeout(CM,e-Gp.now()-y2)),Nh&&(Nh=clearInterval(Nh))):(Nh||(jy=Gp.now(),Nh=setInterval(rue,Mj)),Pf=1,Dj(CM))}}function oue(e,t,n){var r=new By,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?rA():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const sue=1664525,aue=1013904223,$M=4294967296;function lue(){let e=1;return()=>(e=(sue*e+aue)%$M)/$M}function uue(e){return e.x}function cue(e){return e.y}var fue=10,due=Math.PI*(3-Math.sqrt(5));function hue(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=Oj(h),u=Fj("tick","end"),f=lue();e==null&&(e=[]);function h(){p(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function p(v){var w,b=e.length,k;v===void 0&&(v=1);for(var _=0;_<v;++_)for(n+=(o-n)*i,a.forEach(function(C){C(n)}),w=0;w<b;++w)k=e[w],k.fx==null?k.x+=k.vx*=s:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=s:(k.y=k.fy,k.vy=0);return t}function m(){for(var v=0,w=e.length,b;v<w;++v){if(b=e[v],b.index=v,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var k=fue*Math.sqrt(.5+v),_=v*due;b.x=k*Math.cos(_),b.y=k*Math.sin(_)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function y(v){return v.initialize&&v.initialize(e,f),v}return m(),t={tick:p,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(v){return arguments.length?(e=v,m(),a.forEach(y),t):e},alpha:function(v){return arguments.length?(n=+v,t):n},alphaMin:function(v){return arguments.length?(r=+v,t):r},alphaDecay:function(v){return arguments.length?(i=+v,t):+i},alphaTarget:function(v){return arguments.length?(o=+v,t):o},velocityDecay:function(v){return arguments.length?(s=1-v,t):1-s},randomSource:function(v){return arguments.length?(f=v,a.forEach(y),t):f},force:function(v,w){return arguments.length>1?(w==null?a.delete(v):a.set(v,y(w)),t):a.get(v)},find:function(v,w,b){var k=0,_=e.length,C,$,R,A,N;for(b==null?b=1/0:b*=b,k=0;k<_;++k)A=e[k],C=v-A.x,$=w-A.y,R=C*C+$*$,R<b&&(N=A,b=R);return N},on:function(v,w){return arguments.length>1?(u.on(v,w),t):u.on(v)}}}function pue(){var e,t,n,r,i=dr(-30),o,s=1,a=1/0,l=.81;function u(m){var y,v=e.length,w=tA(e,uue,cue).visitAfter(h);for(r=m,y=0;y<v;++y)t=e[y],w.visit(p)}function f(){if(e){var m,y=e.length,v;for(o=new Array(y),m=0;m<y;++m)v=e[m],o[v.index]=+i(v,m,e)}}function h(m){var y=0,v,w,b=0,k,_,C;if(m.length){for(k=_=C=0;C<4;++C)(v=m[C])&&(w=Math.abs(v.value))&&(y+=v.value,b+=w,k+=w*v.x,_+=w*v.y);m.x=k/b,m.y=_/b}else{v=m,v.x=v.data.x,v.y=v.data.y;do y+=o[v.data.index];while(v=v.next)}m.value=y}function p(m,y,v,w){if(!m.value)return!0;var b=m.x-t.x,k=m.y-t.y,_=w-y,C=b*b+k*k;if(_*_/l<C)return C<a&&(b===0&&(b=Ha(n),C+=b*b),k===0&&(k=Ha(n),C+=k*k),C<s&&(C=Math.sqrt(s*C)),t.vx+=b*m.value*r/C,t.vy+=k*m.value*r/C),!0;if(m.length||C>=a)return;(m.data!==t||m.next)&&(b===0&&(b=Ha(n),C+=b*b),k===0&&(k=Ha(n),C+=k*k),C<s&&(C=Math.sqrt(s*C)));do m.data!==t&&(_=o[m.data.index]*r/C,t.vx+=b*_,t.vy+=k*_);while(m=m.next)}return u.initialize=function(m,y){e=m,n=y,f()},u.strength=function(m){return arguments.length?(i=typeof m=="function"?m:dr(+m),f(),u):i},u.distanceMin=function(m){return arguments.length?(s=m*m,u):Math.sqrt(s)},u.distanceMax=function(m){return arguments.length?(a=m*m,u):Math.sqrt(a)},u.theta=function(m){return arguments.length?(l=m*m,u):Math.sqrt(l)},u}function gue(e){var t=dr(.1),n,r,i;typeof e!="function"&&(e=dr(e==null?0:+e));function o(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vx+=(i[l]-f.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:dr(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:dr(+a),s(),o):e},o}function mue(e){var t=dr(.1),n,r,i;typeof e!="function"&&(e=dr(e==null?0:+e));function o(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vy+=(i[l]-f.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:dr(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:dr(+a),s(),o):e},o}const AM={center:Rle,collide:Xle,nbody:pue,link:Qle,x:gue,y:mue},up="forces",qS=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],yue=["static","iterations"],Pj=["x","y","vx","vy"];function iA(e){te.call(this,null,e)}iA.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Pj}]};me(iA,te,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(qS),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Lj(n,e,0,t)):(this.value=n=xue(t.source,e),n.on("tick",vue(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(yue)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,f;l<u;++l)if(f=a[l],!(f.name!==up||f.op._argval.force!=="link")){for(var r=f.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Pj)}});function vue(e,t){return()=>e.touch(t).run()}function xue(e,t){const n=hue(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),Lj(n,t,!0).on("end",()=>o=!0)}function Lj(e,t,n,r){var i=xe(t.forces),o,s,a,l;for(o=0,s=qS.length;o<s;++o)a=qS[o],a!==up&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=up+o,a=n||t.modified(up,o)?bue(i[o]):r&&wue(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(up+o,null);return e.numForces=i.length,e}function wue(e,t){var n,r;for(n in e)if(Ge(r=e[n])&&t.modified(Kn(r)))return 1;return 0}function bue(e){var t,n;ke(AM,e.force)||re("Unrecognized force: "+e.force),t=AM[e.force]();for(n in e)Ge(t[n])&&Eue(t[n],e[n],e);return t}function Eue(e,t,n){e(Ge(t)?r=>t(r,n):t)}const kue=Object.freeze(Object.defineProperty({__proto__:null,force:iA},Symbol.toStringTag,{value:"Module"}));function Sue(e,t){return e.parent===t.parent?1:2}function _ue(e){return e.reduce(Cue,0)/e.length}function Cue(e,t){return e+t.x}function $ue(e){return 1+e.reduce(Aue,0)}function Aue(e,t){return Math.max(e,t.y)}function Tue(e){for(var t;t=e.children;)e=t[0];return e}function Rue(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Nue(){var e=Sue,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(p){var m=p.children;m?(p.x=_ue(m),p.y=$ue(m)):(p.x=s?a+=e(p,s):0,p.y=0,s=p)});var l=Tue(o),u=Rue(o),f=l.x-e(l,u)/2,h=u.x+e(u,l)/2;return o.eachAfter(r?function(p){p.x=(p.x-o.x)*t,p.y=(o.y-p.y)*n}:function(p){p.x=(p.x-f)/(h-f)*t,p.y=(1-(o.y?p.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function Fue(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Mue(){return this.eachAfter(Fue)}function Due(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Oue(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Pue(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Lue(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Iue(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function zue(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function jue(e){for(var t=this,n=Bue(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Bue(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Uue(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function que(){return Array.from(this)}function Wue(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Hue(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Vue(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function oA(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Xue)):t===void 0&&(t=Yue);for(var n=new Lf(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new Lf(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Ij)}function Gue(){return oA(this).eachBefore(Kue)}function Yue(e){return e.children}function Xue(e){return Array.isArray(e)?e[1]:null}function Kue(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Ij(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Lf(e){this.data=e,this.depth=this.height=0,this.parent=null}Lf.prototype=oA.prototype={constructor:Lf,count:Mue,each:Due,eachAfter:Pue,eachBefore:Oue,find:Lue,sum:Iue,sort:zue,path:jue,ancestors:Uue,descendants:que,leaves:Wue,links:Hue,copy:Gue,[Symbol.iterator]:Vue};function k1(e){return e==null?null:zj(e)}function zj(e){if(typeof e!="function")throw new Error;return e}function uu(){return 0}function Kc(e){return function(){return e}}const Que=1664525,Zue=1013904223,TM=4294967296;function Jue(){let e=1;return()=>(e=(Que*e+Zue)%TM)/TM}function ece(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tce(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function nce(e,t){for(var n=0,r=(e=tce(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&jj(s,o)?++n:(s=ice(i=rce(i,o)),n=0);return s}function rce(e,t){var n,r;if(pE(t,e))return[t];for(n=0;n<e.length;++n)if(zm(t,e[n])&&pE(cp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(zm(cp(e[n],e[r]),t)&&zm(cp(e[n],t),e[r])&&zm(cp(e[r],t),e[n])&&pE(Bj(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function zm(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function jj(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function pE(e,t){for(var n=0;n<t.length;++n)if(!jj(e,t[n]))return!1;return!0}function ice(e){switch(e.length){case 1:return oce(e[0]);case 2:return cp(e[0],e[1]);case 3:return Bj(e[0],e[1],e[2])}}function oce(e){return{x:e.x,y:e.y,r:e.r}}function cp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,f=a-i,h=Math.sqrt(l*l+u*u);return{x:(n+o+l/h*f)/2,y:(r+s+u/h*f)/2,r:(h+i+a)/2}}function Bj(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,f=n.y,h=n.r,p=r-s,m=r-u,y=i-a,v=i-f,w=l-o,b=h-o,k=r*r+i*i-o*o,_=k-s*s-a*a+l*l,C=k-u*u-f*f+h*h,$=m*y-p*v,R=(y*C-v*_)/($*2)-r,A=(v*w-y*b)/$,N=(m*_-p*C)/($*2)-i,F=(p*b-m*w)/$,L=A*A+F*F-1,O=2*(o+R*A+N*F),K=R*R+N*N-o*o,W=-(Math.abs(L)>1e-6?(O+Math.sqrt(O*O-4*L*K))/(2*L):K/O);return{x:r+R+A*W,y:i+N+F*W,r:W}}function RM(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function NM(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function FM(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function jm(e){this._=e,this.next=null,this.previous=null}function sce(e,t){if(!(o=(e=ece(e)).length))return 0;var n,r,i,o,s,a,l,u,f,h,p;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;RM(r,n,i=e[2]),n=new jm(n),r=new jm(r),i=new jm(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){RM(n._,r._,i=e[l]),i=new jm(i),u=r.next,f=n.previous,h=r._.r,p=n._.r;do if(h<=p){if(NM(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}h+=u._.r,u=u.next}else{if(NM(f._,i._)){n=f,n.next=r,r.previous=n,--l;continue e}p+=f._.r,f=f.previous}while(u!==f.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=FM(n);(i=i.next)!==r;)(a=FM(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=nce(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function ace(e){return Math.sqrt(e.value)}function lce(){var e=null,t=1,n=1,r=uu;function i(o){const s=Jue();return o.x=t/2,o.y=n/2,e?o.eachBefore(MM(e)).eachAfter(gE(r,.5,s)).eachBefore(DM(1)):o.eachBefore(MM(ace)).eachAfter(gE(uu,1,s)).eachAfter(gE(r,o.r/Math.min(t,n),s)).eachBefore(DM(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=k1(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Kc(+o),i):r},i}function MM(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function gE(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=sce(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function DM(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Uj(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Pg(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function uce(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(Uj),s}function o(s,a){return function(l){l.children&&Pg(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,f=l.y0,h=l.x1-n,p=l.y1-n;h<u&&(u=h=(u+h)/2),p<f&&(f=p=(f+p)/2),l.x0=u,l.y0=f,l.x1=h,l.y1=p}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var cce={depth:-1},OM={},mE={};function fce(e){return e.id}function dce(e){return e.parentId}function PM(){var e=fce,t=dce,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,f,h,p,m,y,v,w=new Map;if(n!=null){const b=o.map((C,$)=>hce(n(C,$,i))),k=b.map(LM),_=new Set(b).add("");for(const C of k)_.has(C)||(_.add(C),b.push(C),k.push(LM(C)),o.push(mE));s=(C,$)=>b[$],a=(C,$)=>k[$]}for(f=0,l=o.length;f<l;++f)u=o[f],m=o[f]=new Lf(u),(y=s(u,f,i))!=null&&(y+="")&&(v=m.id=y,w.set(v,w.has(v)?OM:m)),(y=a(u,f,i))!=null&&(y+="")&&(m.parent=y);for(f=0;f<l;++f)if(m=o[f],y=m.parent){if(p=w.get(y),!p)throw new Error("missing: "+y);if(p===OM)throw new Error("ambiguous: "+y);p.children?p.children.push(m):p.children=[m],m.parent=p}else{if(h)throw new Error("multiple roots");h=m}if(!h)throw new Error("no root");if(n!=null){for(;h.data===mE&&h.children.length===1;)h=h.children[0],--l;for(let b=o.length-1;b>=0&&(m=o[b],m.data===mE);--b)m.data=null}if(h.parent=cce,h.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(Ij),h.parent=null,l>0)throw new Error("cycle");return h}return r.id=function(i){return arguments.length?(e=k1(i),r):e},r.parentId=function(i){return arguments.length?(t=k1(i),r):t},r.path=function(i){return arguments.length?(n=k1(i),r):n},r}function hce(e){e=`${e}`;let t=e.length;return WS(e,t-1)&&!WS(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function LM(e){let t=e.length;if(t<2)return"";for(;--t>1&&!WS(e,t););return e.slice(0,t)}function WS(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function pce(e,t){return e.parent===t.parent?1:2}function yE(e){var t=e.children;return t?t[0]:e.t}function vE(e){var t=e.children;return t?t[t.length-1]:e.t}function gce(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function mce(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function yce(e,t,n){return e.a.parent===t.parent?e.a:n}function S1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}S1.prototype=Object.create(Lf.prototype);function vce(e){for(var t=new S1(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new S1(o[s],s)),i.parent=n;return(t.parent=new S1(null,0)).children=[t],t}function xce(){var e=pce,t=1,n=1,r=null;function i(u){var f=vce(u);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(s),r)u.eachBefore(l);else{var h=u,p=u,m=u;u.eachBefore(function(k){k.x<h.x&&(h=k),k.x>p.x&&(p=k),k.depth>m.depth&&(m=k)});var y=h===p?1:e(h,p)/2,v=y-h.x,w=t/(p.x+y+v),b=n/(m.depth||1);u.eachBefore(function(k){k.x=(k.x+v)*w,k.y=k.depth*b})}return u}function o(u){var f=u.children,h=u.parent.children,p=u.i?h[u.i-1]:null;if(f){mce(u);var m=(f[0].z+f[f.length-1].z)/2;p?(u.z=p.z+e(u._,p._),u.m=u.z-m):u.z=m}else p&&(u.z=p.z+e(u._,p._));u.parent.A=a(u,p,u.parent.A||h[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,f,h){if(f){for(var p=u,m=u,y=f,v=p.parent.children[0],w=p.m,b=m.m,k=y.m,_=v.m,C;y=vE(y),p=yE(p),y&&p;)v=yE(v),m=vE(m),m.a=u,C=y.z+k-p.z-w+e(y._,p._),C>0&&(gce(yce(y,u,h),u,C),w+=C,b+=C),k+=y.m,w+=p.m,_+=v.m,b+=m.m;y&&!vE(m)&&(m.t=y,m.m+=k-b),p&&!yE(v)&&(v.t=p,v.m+=w-_,h=u)}return h}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function v2(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var qj=(1+Math.sqrt(5))/2;function Wj(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,f=0,h=0,p=a.length,m,y,v=t.value,w,b,k,_,C,$,R;f<p;){m=i-n,y=o-r;do w=a[h++].value;while(!w&&h<p);for(b=k=w,$=Math.max(y/m,m/y)/(v*e),R=w*w*$,C=Math.max(k/R,R/b);h<p;++h){if(w+=u=a[h].value,u<b&&(b=u),u>k&&(k=u),R=w*w*$,_=Math.max(k/R,R/b),_>C){w-=u;break}C=_}s.push(l={value:w,dice:m<y,children:a.slice(f,h)}),l.dice?Pg(l,n,r,i,v?r+=y*w/v:o):v2(l,n,r,v?n+=m*w/v:i,o),v-=w,f=h}return s}const Hj=function e(t){function n(r,i,o,s,a){Wj(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(qj);function wce(){var e=Hj,t=!1,n=1,r=1,i=[0],o=uu,s=uu,a=uu,l=uu,u=uu;function f(p){return p.x0=p.y0=0,p.x1=n,p.y1=r,p.eachBefore(h),i=[0],t&&p.eachBefore(Uj),p}function h(p){var m=i[p.depth],y=p.x0+m,v=p.y0+m,w=p.x1-m,b=p.y1-m;w<y&&(y=w=(y+w)/2),b<v&&(v=b=(v+b)/2),p.x0=y,p.y0=v,p.x1=w,p.y1=b,p.children&&(m=i[p.depth+1]=o(p)/2,y+=u(p)-m,v+=s(p)-m,w-=a(p)-m,b-=l(p)-m,w<y&&(y=w=(y+w)/2),b<v&&(v=b=(v+b)/2),e(p,y,v,w,b))}return f.round=function(p){return arguments.length?(t=!!p,f):t},f.size=function(p){return arguments.length?(n=+p[0],r=+p[1],f):[n,r]},f.tile=function(p){return arguments.length?(e=zj(p),f):e},f.padding=function(p){return arguments.length?f.paddingInner(p).paddingOuter(p):f.paddingInner()},f.paddingInner=function(p){return arguments.length?(o=typeof p=="function"?p:Kc(+p),f):o},f.paddingOuter=function(p){return arguments.length?f.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):f.paddingTop()},f.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Kc(+p),f):s},f.paddingRight=function(p){return arguments.length?(a=typeof p=="function"?p:Kc(+p),f):a},f.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:Kc(+p),f):l},f.paddingLeft=function(p){return arguments.length?(u=typeof p=="function"?p:Kc(+p),f):u},f}function bce(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;f(0,a,e.value,t,n,r,i);function f(h,p,m,y,v,w,b){if(h>=p-1){var k=o[h];k.x0=y,k.y0=v,k.x1=w,k.y1=b;return}for(var _=u[h],C=m/2+_,$=h+1,R=p-1;$<R;){var A=$+R>>>1;u[A]<C?$=A+1:R=A}C-u[$-1]<u[$]-C&&h+1<$&&--$;var N=u[$]-_,F=m-N;if(w-y>b-v){var L=m?(y*F+w*N)/m:w;f(h,$,N,y,v,L,b),f($,p,F,L,v,w,b)}else{var O=m?(v*F+b*N)/m:b;f(h,$,N,y,v,w,O),f($,p,F,y,O,w,b)}}}function Ece(e,t,n,r,i){(e.depth&1?v2:Pg)(e,t,n,r,i)}const kce=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,f,h,p=-1,m,y=l.length,v=r.value;++p<y;){for(u=l[p],f=u.children,h=u.value=0,m=f.length;h<m;++h)u.value+=f[h].value;u.dice?Pg(u,i,o,s,v?o+=(a-o)*u.value/v:a):v2(u,i,o,v?i+=(s-i)*u.value/v:s,a),v-=u.value}else r._squarify=l=Wj(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(qj);function HS(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function sA(e){te.call(this,null,e)}sA.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Sce=e=>e.values;me(sA,te,{transform(e,t){t.source||re("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&Fv(s.data)&&i.rem.push(s.data)}),this.value=o=oA({values:xe(e.keys).reduce((s,a)=>(s.key(a),s),_ce()).entries(i.source)},Sce),n&&o.each(s=>{s.children&&(s=ft(s.data),i.add.push(s),i.source.push(s))}),HS(o,Me,Me)),i.source.root=o,i}});function _ce(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let f=-1,h,p,m;for(;++f<s;)h=a(p=i[f])+"",(m=l[h])?m.push(p):l[h]=[p];for(h in l)u[h]=n(l[h],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function na(e){te.call(this,null,e)}const Cce=(e,t)=>e.parent===t.parent?1:2;me(na,te,{transform(e,t){(!t.source||!t.source.root)&&re(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ku(e.sort,s=>s.data)),$ce(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Cce:rd);try{this.value=n(i)}catch(s){re(s)}return i.each(s=>Ace(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function $ce(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function Ace(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const VS=["x","y","r","depth","children"];function aA(e){na.call(this,e)}aA.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:VS.length,default:VS}]};me(aA,na,{layout:lce,params:["radius","size","padding"],fields:VS});const GS=["x0","y0","x1","y1","depth","children"];function lA(e){na.call(this,e)}lA.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:GS.length,default:GS}]};me(lA,na,{layout:uce,params:["size","round","padding"],fields:GS});function uA(e){te.call(this,null,e)}uA.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};me(uA,te,{transform(e,t){t.source||re("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?HS(PM().id(e.key).parentId(e.parentKey)(i.source),e.key,$i):HS(PM()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const IM={tidy:xce,cluster:Nue},YS=["x","y","depth","children"];function cA(e){na.call(this,e)}cA.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:YS.length,default:YS}]};me(cA,na,{layout(e){const t=e||"tidy";if(ke(IM,t))return IM[t]();re("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:YS});function fA(e){te.call(this,[],e)}fA.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};me(fA,te,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||re("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[Me(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[Me(a)]&&o[Me(l)]&&i.add.push(ft({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[Me(s)]=1),n.forEach(s=>{(o[Me(s.source)]||o[Me(s.target)])&&i.mod.push(s)})),i}});const zM={binary:bce,dice:Pg,slice:v2,slicedice:Ece,squarify:Hj,resquarify:kce},XS=["x0","y0","x1","y1","depth","children"];function dA(e){na.call(this,e)}dA.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:XS.length,default:XS}]};me(dA,na,{layout(){const e=wce();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ke(zM,t)?e.tile(zM[t]):re("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:XS});const Tce=Object.freeze(Object.defineProperty({__proto__:null,nest:sA,pack:aA,partition:lA,stratify:uA,tree:cA,treelinks:fA,treemap:dA},Symbol.toStringTag,{value:"Module"})),xE=4278190080;function Rce(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Nce(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=Qa(o,s).getContext("2d"),u=Qa(o,s).getContext("2d"),f=a&&Qa(o,s).getContext("2d");n.forEach(N=>_1(l,N,!1)),_1(u,t,!1),a&&_1(f,t,!0);const h=wE(l,o,s),p=wE(u,o,s),m=a&&wE(f,o,s),y=e.bitmap(),v=a&&e.bitmap();let w,b,k,_,C,$,R,A;for(b=0;b<s;++b)for(w=0;w<o;++w)C=b*o+w,$=h[C]&xE,A=p[C]&xE,R=a&&m[C]&xE,($||R||A)&&(k=e(w),_=e(b),!i&&($||A)&&y.set(k,_),a&&($||R)&&v.set(k,_));return[y,v]}function wE(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function _1(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>_1(e,o.items,n))}):si[r].draw(e,{items:n?t.map(Fce):t})}function Fce(e){const t=Mv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Cs=5,ir=31,Yp=32,Pa=new Uint32Array(Yp+1),Ki=new Uint32Array(Yp+1);Ki[0]=0;Pa[0]=~Ki[0];for(let e=1;e<=Yp;++e)Ki[e]=Ki[e-1]<<1|1,Pa[e]=~Ki[e];function Mce(e,t){const n=new Uint32Array(~~((e*t+Yp)/Yp));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Cs]&1<<(a&ir)},set:(o,s)=>{const a=s*e+o;r(a>>>Cs,1<<(a&ir))},clear:(o,s)=>{const a=s*e+o;i(a>>>Cs,~(1<<(a&ir)))},getRange:(o,s,a,l)=>{let u=l,f,h,p,m;for(;u>=s;--u)if(f=u*e+o,h=u*e+a,p=f>>>Cs,m=h>>>Cs,p===m){if(n[p]&Pa[f&ir]&Ki[(h&ir)+1])return!0}else{if(n[p]&Pa[f&ir]||n[m]&Ki[(h&ir)+1])return!0;for(let y=p+1;y<m;++y)if(n[y])return!0}return!1},setRange:(o,s,a,l)=>{let u,f,h,p,m;for(;s<=l;++s)if(u=s*e+o,f=s*e+a,h=u>>>Cs,p=f>>>Cs,h===p)r(h,Pa[u&ir]&Ki[(f&ir)+1]);else for(r(h,Pa[u&ir]),r(p,Ki[(f&ir)+1]),m=h+1;m<p;++m)r(m,4294967295)},clearRange:(o,s,a,l)=>{let u,f,h,p,m;for(;s<=l;++s)if(u=s*e+o,f=s*e+a,h=u>>>Cs,p=f>>>Cs,h===p)i(h,Ki[u&ir]|Pa[(f&ir)+1]);else for(i(h,Ki[u&ir]),i(p,Pa[(f&ir)+1]),m=h+1;m<p;++m)i(m,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function Dce(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>Mce(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function Oce(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,f=ei.width(s.datum,s.datum.text);let h=0,p,m,y,v,w,b,k;for(let _=0;_<l;++_)p=a[_].x,y=a[_].y,m=a[_].x2===void 0?p:a[_].x2,v=a[_].y2===void 0?y:a[_].y2,w=(p+m)/2,b=(y+v)/2,k=Math.abs(m-p+v-y),k>=h&&(h=k,s.x=w,s.y=b);return w=f/2,b=u/2,p=s.x-w,m=s.x+w,y=s.y-b,v=s.y+b,s.align="center",p<0&&m<=i?s.align="left":0<=p&&i<m&&(s.align="right"),s.baseline="middle",y<0&&v<=o?s.baseline="top":0<=y&&o<v&&(s.baseline="bottom"),!0}}function Uy(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Va(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),f=e(t+l),h=e(n-(o=o/2)),p=e(n+o);return s.outOfBounds(u,h,f,p)||s.getRange(u,h,f,p)||a&&a.getRange(u,h,f,p)}function Pce(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,f,h,p,m){const y=e.invert(u),v=e.invert(f);let w=h,b=o,k;if(!Uy(y,v,p,m,i,o)&&!Va(e,y,v,m,p,w,s,a)&&!Va(e,y,v,m,p,m,s,null)){for(;b-w>=1;)k=(w+b)/2,Va(e,y,v,m,p,k,s,a)?b=k:w=k;if(w>h)return[y,v,w,!0]}}return function(u){const f=u.datum.datum.items[r].items,h=f.length,p=u.datum.fontSize,m=ei.width(u.datum,u.datum.text);let y=n?p:0,v=!1,w=!1,b=0,k,_,C,$,R,A,N,F,L,O,K,W,j,M,U,X,q;for(let H=0;H<h;++H){for(k=f[H].x,C=f[H].y,_=f[H].x2===void 0?k:f[H].x2,$=f[H].y2===void 0?C:f[H].y2,k>_&&(q=k,k=_,_=q),C>$&&(q=C,C=$,$=q),L=e(k),K=e(_),O=~~((L+K)/2),W=e(C),M=e($),j=~~((W+M)/2),N=O;N>=L;--N)for(F=j;F>=W;--F)X=l(N,F,y,m,p),X&&([u.x,u.y,y,v]=X);for(N=O;N<=K;++N)for(F=j;F<=M;++F)X=l(N,F,y,m,p),X&&([u.x,u.y,y,v]=X);!v&&!n&&(U=Math.abs(_-k+$-C),R=(k+_)/2,A=(C+$)/2,U>=b&&!Uy(R,A,m,p,i,o)&&!Va(e,R,A,p,m,p,s,null)&&(b=U,u.x=R,u.y=A,w=!0))}return v||w?(R=m/2,A=p/2,s.setRange(e(u.x-R),e(u.y-A),e(u.x+R),e(u.y+A)),u.align="center",u.baseline="middle",!0):!1}}const Lce=[-1,-1,1,1],Ice=[-1,1,-1,1];function zce(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const f=u.datum.datum.items[r].items,h=f.length,p=u.datum.fontSize,m=ei.width(u.datum,u.datum.text),y=[];let v=n?p:0,w=!1,b=!1,k=0,_,C,$,R,A,N,F,L,O,K,W,j;for(let M=0;M<h;++M){for(_=f[M].x,$=f[M].y,C=f[M].x2===void 0?_:f[M].x2,R=f[M].y2===void 0?$:f[M].y2,y.push([e((_+C)/2),e(($+R)/2)]);y.length;)if([F,L]=y.pop(),!(s.get(F,L)||a.get(F,L)||l.get(F,L))){l.set(F,L);for(let U=0;U<4;++U)A=F+Lce[U],N=L+Ice[U],l.outOfBounds(A,N,A,N)||y.push([A,N]);if(A=e.invert(F),N=e.invert(L),O=v,K=o,!Uy(A,N,m,p,i,o)&&!Va(e,A,N,p,m,O,s,a)&&!Va(e,A,N,p,m,p,s,null)){for(;K-O>=1;)W=(O+K)/2,Va(e,A,N,p,m,W,s,a)?K=W:O=W;O>v&&(u.x=A,u.y=N,v=O,w=!0)}}!w&&!n&&(j=Math.abs(C-_+R-$),A=(_+C)/2,N=($+R)/2,j>=k&&!Uy(A,N,m,p,i,o)&&!Va(e,A,N,p,m,p,s,null)&&(k=j,u.x=A,u.y=N,b=!0))}return w||b?(A=m/2,N=p/2,s.setRange(e(u.x-A),e(u.y-N),e(u.x+A),e(u.y+N)),u.align="center",u.baseline="middle",!0):!1}}const jce=["right","center","left"],Bce=["bottom","middle","top"];function Uce(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const f=u.boundary,h=u.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>o)return!1;let p=u.textWidth??0,m,y,v,w,b,k,_,C,$,R,A,N,F,L,O;for(let K=0;K<l;++K){if(m=(n[K]&3)-1,y=(n[K]>>>2&3)-1,v=m===0&&y===0||r[K]<0,w=m&&y?Math.SQRT1_2:1,b=r[K]<0?-1:1,k=f[1+m]+r[K]*m*w,A=f[4+y]+b*h*y/2+r[K]*y*w,C=A-h/2,$=A+h/2,N=e(k),L=e(C),O=e($),!p)if(jM(N,N,L,O,s,a,k,k,C,$,f,v))p=ei.width(u.datum,u.datum.text);else continue;if(R=k+b*p*m/2,k=R-p/2,_=R+p/2,N=e(k),F=e(_),jM(N,F,L,O,s,a,k,_,C,$,f,v))return u.x=m?m*b<0?_:k:R,u.y=y?y*b<0?$:C:A,u.align=jce[m*b+1],u.baseline=Bce[y*b+1],s.setRange(N,L,F,O),!0}return!1}}function jM(e,t,n,r,i,o,s,a,l,u,f,h){return!(i.outOfBounds(e,n,t,r)||(h&&o||i).getRange(e,n,t,r))}const bE=0,EE=4,kE=8,SE=0,_E=1,CE=2,qce={"top-left":bE+SE,top:bE+_E,"top-right":bE+CE,left:EE+SE,middle:EE+_E,right:EE+CE,"bottom-left":kE+SE,bottom:kE+_E,"bottom-right":kE+CE},Wce={naive:Oce,"reduced-search":Pce,floodfill:zce};function Hce(e,t,n,r,i,o,s,a,l,u,f){if(!e.length)return e;const h=Math.max(r.length,i.length),p=Vce(r,h),m=Gce(i,h),y=Yce(e[0].datum),v=y==="group"&&e[0].datum.items[l].marktype,w=v==="area",b=Xce(y,v,a,l),k=u===null||u===1/0,_=w&&f==="naive";let C=-1,$=-1;const R=e.map(L=>{const O=k?ei.width(L,L.text):void 0;return C=Math.max(C,O),$=Math.max($,L.fontSize),{datum:L,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(L),textWidth:O}});u=u===null||u===1/0?Math.max(C,$)+Math.max(...r):u;const A=Dce(t[0],t[1],u);let N;if(!_){n&&R.sort((K,W)=>n(K.datum,W.datum));let L=!1;for(let K=0;K<m.length&&!L;++K)L=m[K]===5||p[K]<0;const O=(y&&s||w)&&e.map(K=>K.datum);N=o.length||O?Nce(A,O||[],o,L,w):Rce(A,s&&R)}const F=w?Wce[f](A,N,s,l):Uce(A,N,m,p);return R.forEach(L=>L.opacity=+F(L)),R}function Vce(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Gce(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=qce[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Yce(e){return e&&e.mark&&e.mark.marktype}function Xce(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const KS=["x","y","opacity","align","baseline"],Vj=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function hA(e){te.call(this,null,e)}hA.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Vj},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:KS.length,default:KS}]};me(hA,te,{transform(e,t){function n(o){const s=e[o];return Ge(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&re("Size parameter should be specified as a [width, height] array.");const i=e.as||KS;return Hce(t.materialize(t.SOURCE).source||[],e.size,e.sort,xe(e.offset==null?1:e.offset),xe(e.anchor||Vj),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const Kce=Object.freeze(Object.defineProperty({__proto__:null,label:hA},Symbol.toStringTag,{value:"Module"}));function Gj(e,t){var n=[],r=function(f){return f(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function pA(e){te.call(this,null,e)}pA.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};me(pA,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Gj(r,e.groupby),o=(e.groupby||[]).map(Ht),s=o.length,a=e.as||[Ht(e.x),Ht(e.y)],l=[];i.forEach(u=>{t9(u,e.x,e.y,e.bandwidth||.3).forEach(f=>{const h={};for(let p=0;p<s;++p)h[o[p]]=u.dims[p];h[a[0]]=f[0],h[a[1]]=f[1],l.push(ft(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const QS={constant:XC,linear:KC,log:QP,exp:ZP,pow:JP,quad:QC,poly:e9},Qce=(e,t)=>e==="poly"?t:e==="quad"?2:1;function gA(e){te.call(this,null,e)}gA.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(QS)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};me(gA,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Gj(r,e.groupby),o=(e.groupby||[]).map(Ht),s=e.method||"linear",a=e.order==null?3:e.order,l=Qce(s,a),u=e.as||[Ht(e.x),Ht(e.y)],f=QS[s],h=[];let p=e.extent;ke(QS,s)||re("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),i.forEach(m=>{if(m.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const v=f(m,e.x,e.y,a);if(e.params){h.push(ft({keys:m.dims,coef:v.coef,rSquared:v.rSquared}));return}const w=p||Go(m,e.x),b=k=>{const _={};for(let C=0;C<o.length;++C)_[o[C]]=m.dims[C];_[u[0]]=k[0],_[u[1]]=k[1],h.push(ft(_))};s==="linear"||s==="constant"?w.forEach(k=>b([k,v.predict(k)])):jv(v.predict,w,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const Zce=Object.freeze(Object.defineProperty({__proto__:null,loess:pA,regression:gA},Symbol.toStringTag,{value:"Module"})),Us=11102230246251565e-32,Un=134217729,Jce=(3+8*Us)*Us;function $E(e,t,n,r,i){let o,s,a,l,u=t[0],f=r[0],h=0,p=0;f>u==f>-u?(o=u,u=t[++h]):(o=f,f=r[++p]);let m=0;if(h<e&&p<n)for(f>u==f>-u?(s=u+o,a=o-(s-u),u=t[++h]):(s=f+o,a=o-(s-f),f=r[++p]),o=s,a!==0&&(i[m++]=a);h<e&&p<n;)f>u==f>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++h]):(s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++p]),o=s,a!==0&&(i[m++]=a);for(;h<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++h],o=s,a!==0&&(i[m++]=a);for(;p<n;)s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++p],o=s,a!==0&&(i[m++]=a);return(o!==0||m===0)&&(i[m++]=o),m}function efe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Lg(e){return new Float64Array(e)}const tfe=(3+16*Us)*Us,nfe=(2+12*Us)*Us,rfe=(9+64*Us)*Us*Us,Wc=Lg(4),BM=Lg(8),UM=Lg(12),qM=Lg(16),or=Lg(4);function ife(e,t,n,r,i,o,s){let a,l,u,f,h,p,m,y,v,w,b,k,_,C,$,R,A,N;const F=e-i,L=n-i,O=t-o,K=r-o;C=F*K,p=Un*F,m=p-(p-F),y=F-m,p=Un*K,v=p-(p-K),w=K-v,$=y*w-(C-m*v-y*v-m*w),R=O*L,p=Un*O,m=p-(p-O),y=O-m,p=Un*L,v=p-(p-L),w=L-v,A=y*w-(R-m*v-y*v-m*w),b=$-A,h=$-b,Wc[0]=$-(b+h)+(h-A),k=C+b,h=k-C,_=C-(k-h)+(b-h),b=_-R,h=_-b,Wc[1]=_-(b+h)+(h-R),N=k+b,h=N-k,Wc[2]=k-(N-h)+(b-h),Wc[3]=N;let W=efe(4,Wc),j=nfe*s;if(W>=j||-W>=j||(h=e-F,a=e-(F+h)+(h-i),h=n-L,u=n-(L+h)+(h-i),h=t-O,l=t-(O+h)+(h-o),h=r-K,f=r-(K+h)+(h-o),a===0&&l===0&&u===0&&f===0)||(j=rfe*s+Jce*Math.abs(W),W+=F*f+K*a-(O*u+L*l),W>=j||-W>=j))return W;C=a*K,p=Un*a,m=p-(p-a),y=a-m,p=Un*K,v=p-(p-K),w=K-v,$=y*w-(C-m*v-y*v-m*w),R=l*L,p=Un*l,m=p-(p-l),y=l-m,p=Un*L,v=p-(p-L),w=L-v,A=y*w-(R-m*v-y*v-m*w),b=$-A,h=$-b,or[0]=$-(b+h)+(h-A),k=C+b,h=k-C,_=C-(k-h)+(b-h),b=_-R,h=_-b,or[1]=_-(b+h)+(h-R),N=k+b,h=N-k,or[2]=k-(N-h)+(b-h),or[3]=N;const M=$E(4,Wc,4,or,BM);C=F*f,p=Un*F,m=p-(p-F),y=F-m,p=Un*f,v=p-(p-f),w=f-v,$=y*w-(C-m*v-y*v-m*w),R=O*u,p=Un*O,m=p-(p-O),y=O-m,p=Un*u,v=p-(p-u),w=u-v,A=y*w-(R-m*v-y*v-m*w),b=$-A,h=$-b,or[0]=$-(b+h)+(h-A),k=C+b,h=k-C,_=C-(k-h)+(b-h),b=_-R,h=_-b,or[1]=_-(b+h)+(h-R),N=k+b,h=N-k,or[2]=k-(N-h)+(b-h),or[3]=N;const U=$E(M,BM,4,or,UM);C=a*f,p=Un*a,m=p-(p-a),y=a-m,p=Un*f,v=p-(p-f),w=f-v,$=y*w-(C-m*v-y*v-m*w),R=l*u,p=Un*l,m=p-(p-l),y=l-m,p=Un*u,v=p-(p-u),w=u-v,A=y*w-(R-m*v-y*v-m*w),b=$-A,h=$-b,or[0]=$-(b+h)+(h-A),k=C+b,h=k-C,_=C-(k-h)+(b-h),b=_-R,h=_-b,or[1]=_-(b+h)+(h-R),N=k+b,h=N-k,or[2]=k-(N-h)+(b-h),or[3]=N;const X=$E(U,UM,4,or,qM);return qM[X-1]}function Bm(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=tfe*u?l:-ife(e,t,n,r,i,o,u)}const WM=Math.pow(2,-52),Um=new Uint32Array(512);class qy{static from(t,n=ufe,r=cfe){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new qy(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,f=-1/0;for(let F=0;F<s;F++){const L=t[2*F],O=t[2*F+1];L<a&&(a=L),O<l&&(l=O),L>u&&(u=L),O>f&&(f=O),this._ids[F]=F}const h=(a+u)/2,p=(l+f)/2;let m,y,v;for(let F=0,L=1/0;F<s;F++){const O=AE(h,p,t[2*F],t[2*F+1]);O<L&&(m=F,L=O)}const w=t[2*m],b=t[2*m+1];for(let F=0,L=1/0;F<s;F++){if(F===m)continue;const O=AE(w,b,t[2*F],t[2*F+1]);O<L&&O>0&&(y=F,L=O)}let k=t[2*y],_=t[2*y+1],C=1/0;for(let F=0;F<s;F++){if(F===m||F===y)continue;const L=afe(w,b,k,_,t[2*F],t[2*F+1]);L<C&&(v=F,C=L)}let $=t[2*v],R=t[2*v+1];if(C===1/0){for(let O=0;O<s;O++)this._dists[O]=t[2*O]-t[0]||t[2*O+1]-t[1];rf(this._ids,this._dists,0,s-1);const F=new Uint32Array(s);let L=0;for(let O=0,K=-1/0;O<s;O++){const W=this._ids[O],j=this._dists[W];j>K&&(F[L++]=W,K=j)}this.hull=F.subarray(0,L),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Bm(w,b,k,_,$,R)<0){const F=y,L=k,O=_;y=v,k=$,_=R,v=F,$=L,R=O}const A=lfe(w,b,k,_,$,R);this._cx=A.x,this._cy=A.y;for(let F=0;F<s;F++)this._dists[F]=AE(t[2*F],t[2*F+1],A.x,A.y);rf(this._ids,this._dists,0,s-1),this._hullStart=m;let N=3;r[m]=n[v]=y,r[y]=n[m]=v,r[v]=n[y]=m,i[m]=0,i[y]=1,i[v]=2,o.fill(-1),o[this._hashKey(w,b)]=m,o[this._hashKey(k,_)]=y,o[this._hashKey($,R)]=v,this.trianglesLen=0,this._addTriangle(m,y,v,-1,-1,-1);for(let F=0,L,O;F<this._ids.length;F++){const K=this._ids[F],W=t[2*K],j=t[2*K+1];if(F>0&&Math.abs(W-L)<=WM&&Math.abs(j-O)<=WM||(L=W,O=j,K===m||K===y||K===v))continue;let M=0;for(let J=0,I=this._hashKey(W,j);J<this._hashSize&&(M=o[(I+J)%this._hashSize],!(M!==-1&&M!==r[M]));J++);M=n[M];let U=M,X;for(;X=r[U],Bm(W,j,t[2*U],t[2*U+1],t[2*X],t[2*X+1])>=0;)if(U=X,U===M){U=-1;break}if(U===-1)continue;let q=this._addTriangle(U,K,r[U],-1,-1,i[U]);i[K]=this._legalize(q+2),i[U]=q,N++;let H=r[U];for(;X=r[H],Bm(W,j,t[2*H],t[2*H+1],t[2*X],t[2*X+1])<0;)q=this._addTriangle(H,K,X,i[K],-1,i[H]),i[K]=this._legalize(q+2),r[H]=H,N--,H=X;if(U===M)for(;X=n[U],Bm(W,j,t[2*X],t[2*X+1],t[2*U],t[2*U+1])<0;)q=this._addTriangle(X,K,U,-1,i[U],i[X]),this._legalize(q+2),i[X]=q,r[U]=U,N--,U=X;this._hullStart=n[K]=U,r[U]=n[H]=K,r[K]=H,o[this._hashKey(W,j)]=K,o[this._hashKey(t[2*U],t[2*U+1])]=U}this.hull=new Uint32Array(N);for(let F=0,L=this._hullStart;F<N;F++)this.hull[F]=L,L=r[L];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(ofe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=Um[--o];continue}const u=a-a%3,f=l+(t+1)%3,h=u+(a+2)%3,p=n[s],m=n[t],y=n[f],v=n[h];if(sfe(i[2*p],i[2*p+1],i[2*m],i[2*m+1],i[2*y],i[2*y+1],i[2*v],i[2*v+1])){n[t]=v,n[a]=p;const b=r[h];if(b===-1){let _=this._hullStart;do{if(this._hullTri[_]===h){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,b),this._link(a,r[s]),this._link(s,h);const k=u+(a+1)%3;o<Um.length&&(Um[o++]=k)}else{if(o===0)break;t=Um[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function ofe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function AE(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function sfe(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,f=n-s,h=r-a,p=i-s,m=o-a,y=l*l+u*u,v=f*f+h*h,w=p*p+m*m;return l*(h*w-v*m)-u*(f*w-v*p)+y*(f*m-h*p)<0}function afe(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,f=s*s+a*a,h=l*l+u*u,p=.5/(s*u-a*l),m=(u*f-a*h)*p,y=(s*h-l*f)*p;return m*m+y*y}function lfe(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,f=s*s+a*a,h=l*l+u*u,p=.5/(s*u-a*l),m=e+(u*f-a*h)*p,y=t+(s*h-l*f)*p;return{x:m,y}}function rf(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;Fh(e,i,o),t[e[n]]>t[e[r]]&&Fh(e,n,r),t[e[o]]>t[e[r]]&&Fh(e,o,r),t[e[n]]>t[e[o]]&&Fh(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;Fh(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(rf(e,t,o,r),rf(e,t,n,s-1)):(rf(e,t,n,s-1),rf(e,t,o,r))}}function Fh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ufe(e){return e[0]}function cfe(e){return e[1]}const HM=1e-6;class hu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>HM||Math.abs(this._y1-o)>HM)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class ZS{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let ffe=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let v=0,w=0,b=r.length,k,_;v<b;v+=3,w+=2){const C=r[v]*2,$=r[v+1]*2,R=r[v+2]*2,A=t[C],N=t[C+1],F=t[$],L=t[$+1],O=t[R],K=t[R+1],W=F-A,j=L-N,M=O-A,U=K-N,X=(W*U-j*M)*2;if(Math.abs(X)<1e-9){if(o===void 0){o=s=0;for(const H of n)o+=t[H*2],s+=t[H*2+1];o/=n.length,s/=n.length}const q=1e9*Math.sign((o-A)*U-(s-N)*M);k=(A+O)/2-q*U,_=(N+K)/2+q*M}else{const q=1/X,H=W*W+j*j,J=M*M+U*U;k=A+(U*H-j*J)*q,_=N+(W*J-M*H)*q}a[w]=k,a[w+1]=_}let l=n[n.length-1],u,f=l*4,h,p=t[2*l],m,y=t[2*l+1];i.fill(0);for(let v=0;v<n.length;++v)l=n[v],u=f,h=p,m=y,f=l*4,p=t[2*l],y=t[2*l+1],i[u+2]=i[f]=m-y,i[u+3]=i[f+1]=p-h}render(t){const n=t==null?t=new hu:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let f=0,h=r.length;f<h;++f){const p=r[f];if(p<f)continue;const m=Math.floor(f/3)*2,y=Math.floor(p/3)*2,v=s[m],w=s[m+1],b=s[y],k=s[y+1];this._renderSegment(v,w,b,k,t)}let l,u=o[o.length-1];for(let f=0;f<o.length;++f){l=u,u=o[f];const h=Math.floor(i[u]/3)*2,p=s[h],m=s[h+1],y=l*4,v=this._project(p,m,a[y+2],a[y+3]);v&&this._renderSegment(p,m,v[0],v[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new hu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new hu:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new ZS;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,f=this._regioncode(a,l),h,p=0;for(let m=0;m<r;m+=2)if(o=a,s=l,a=n[m],l=n[m+1],u=f,f=this._regioncode(a,l),u===0&&f===0)h=p,p=0,i?i.push(a,l):i=[a,l];else{let y,v,w,b,k;if(u===0){if((y=this._clipSegment(o,s,a,l,u,f))===null)continue;[v,w,b,k]=y}else{if((y=this._clipSegment(a,l,o,s,f,u))===null)continue;[b,k,v,w]=y,h=p,p=this._edgecode(v,w),h&&p&&this._edge(t,h,p,i,i.length),i?i.push(v,w):i=[v,w]}h=p,p=this._edgecode(b,k),h&&p&&this._edge(t,h,p,i,i.length),i?i.push(b,k):i=[b,k]}if(i)h=p,p=this._edgecode(i[0],i[1]),h&&p&&this._edge(t,h,p,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,f=o||s;f&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):f&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):f&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,f=a.length,h,p=this._edgecode(a[f-2],a[f-1]);u<f;u+=2)h=p,p=this._edgecode(a[u],a[u+1]),h&&p&&(u=this._edge(t,h,p,a,u),f=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const dfe=2*Math.PI,Hc=Math.pow;function hfe(e){return e[0]}function pfe(e){return e[1]}function gfe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function mfe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class mA{static from(t,n=hfe,r=pfe,i){return new mA("length"in t?yfe(t,n,r,i):Float64Array.from(vfe(t,n,r,i)))}constructor(t){this._delaunator=new qy(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&gfe(t)){this.collinear=Int32Array.from({length:n.length/2},(p,m)=>m).sort((p,m)=>n[2*p]-n[2*m]||n[2*p+1]-n[2*m+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],f=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],h=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let p=0,m=n.length/2;p<m;++p){const y=mfe(n[2*p],n[2*p+1],h);n[2*p]=y[0],n[2*p+1]=y[1]}this._delaunator=new qy(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const f=o[l%3===2?l-2:l+1];(r[l]===-1||s[f]===-1)&&(s[f]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new ffe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const h=a.indexOf(t);h>0&&(yield a[h-1]),h<a.length-1&&(yield a[h+1]);return}const l=n[t];if(l===-1)return;let u=l,f=-1;do{if(yield f=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const h=r[(i[t]+1)%r.length];h!==f&&(yield h);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let f=t,h=Hc(n-u[t*2],2)+Hc(r-u[t*2+1],2);const p=i[t];let m=p;do{let y=l[m];const v=Hc(n-u[y*2],2)+Hc(r-u[y*2+1],2);if(v<h&&(h=v,f=y),m=m%3===2?m-2:m+1,l[m]!==t)break;if(m=a[m],m===-1){if(m=o[(s[t]+1)%o.length],m!==y&&Hc(n-u[m*2],2)+Hc(r-u[m*2+1],2)<h)return m;break}}while(m!==p);return f}render(t){const n=t==null?t=new hu:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,f=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[f],r[f+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new hu:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,dfe)}return r&&r.value()}renderHull(t){const n=t==null?t=new hu:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new ZS;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new hu:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new ZS;return this.renderTriangle(t,n),n.value()}}function yfe(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*vfe(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function yA(e){te.call(this,null,e)}yA.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const xfe=[-1e5,-1e5,1e5,1e5];me(yA,te,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:xfe;const o=this.value=mA.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!bfe(l)?wfe(l):null}return t.reflow(e.modified()).modifies(n)}});function wfe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function bfe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Efe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:yA},Symbol.toStringTag,{value:"Module"}));var TE=Math.PI/180,fp=64,C1=2048;function kfe(){var e=[256,256],t,n,r,i,o,s,a,l=Yj,u=[],f=Math.random,h={};h.layout=function(){for(var y=p(Qa()),v=Tfe((e[0]>>5)*e[1]),w=null,b=u.length,k=-1,_=[],C=u.map(R=>({text:t(R),font:n(R),style:i(R),weight:o(R),rotate:s(R),size:~~(r(R)+1e-14),padding:a(R),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:R})).sort((R,A)=>A.size-R.size);++k<b;){var $=C[k];$.x=e[0]*(f()+.5)>>1,$.y=e[1]*(f()+.5)>>1,Sfe(y,$,C,k),$.hasText&&m(v,$,w)&&(_.push($),w?Cfe(w,$):w=[{x:$.x+$.x0,y:$.y+$.y0},{x:$.x+$.x1,y:$.y+$.y1}],$.x-=e[0]>>1,$.y-=e[1]>>1)}return _};function p(y){y.width=y.height=1;var v=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=(fp<<5)/v,y.height=C1/v;var w=y.getContext("2d");return w.fillStyle=w.strokeStyle="red",w.textAlign="center",{context:w,ratio:v}}function m(y,v,w){for(var b=v.x,k=v.y,_=Math.hypot(e[0],e[1]),C=l(e),$=f()<.5?1:-1,R=-$,A,N,F;(A=C(R+=$))&&(N=~~A[0],F=~~A[1],!(Math.min(Math.abs(N),Math.abs(F))>=_));)if(v.x=b+N,v.y=k+F,!(v.x+v.x0<0||v.y+v.y0<0||v.x+v.x1>e[0]||v.y+v.y1>e[1])&&(!w||!_fe(v,y,e[0]))&&(!w||$fe(v,w))){for(var L=v.sprite,O=v.width>>5,K=e[0]>>5,W=v.x-(O<<4),j=W&127,M=32-j,U=v.y1-v.y0,X=(v.y+v.y0)*K+(W>>5),q,H=0;H<U;H++){q=0;for(var J=0;J<=O;J++)y[X+J]|=q<<M|(J<O?(q=L[H*O+J])>>>j:0);X+=K}return v.sprite=null,!0}return!1}return h.words=function(y){return arguments.length?(u=y,h):u},h.size=function(y){return arguments.length?(e=[+y[0],+y[1]],h):e},h.font=function(y){return arguments.length?(n=Wl(y),h):n},h.fontStyle=function(y){return arguments.length?(i=Wl(y),h):i},h.fontWeight=function(y){return arguments.length?(o=Wl(y),h):o},h.rotate=function(y){return arguments.length?(s=Wl(y),h):s},h.text=function(y){return arguments.length?(t=Wl(y),h):t},h.spiral=function(y){return arguments.length?(l=Rfe[y]||y,h):l},h.fontSize=function(y){return arguments.length?(r=Wl(y),h):r},h.padding=function(y){return arguments.length?(a=Wl(y),h):a},h.random=function(y){return arguments.length?(f=y,h):f},h}function Sfe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(fp<<5)/o,C1/o);var s=0,a=0,l=0,u=n.length,f,h,p,m,y;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,f=i.measureText(t.text+"m").width*o,p=t.size<<1,t.rotate){var v=Math.sin(t.rotate*TE),w=Math.cos(t.rotate*TE),b=f*w,k=f*v,_=p*w,C=p*v;f=Math.max(Math.abs(b+C),Math.abs(b-C))+31>>5<<5,p=~~Math.max(Math.abs(k+_),Math.abs(k-_))}else f=f+31>>5<<5;if(p>l&&(l=p),s+f>=fp<<5&&(s=0,a+=l,l=0),a+p>=C1)break;i.translate((s+(f>>1))/o,(a+(p>>1))/o),t.rotate&&i.rotate(t.rotate*TE),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=f,t.height=p,t.xoff=s,t.yoff=a,t.x1=f>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=f}for(var $=i.getImageData(0,0,(fp<<5)/o,C1/o).data,R=[];--r>=0;)if(t=n[r],!!t.hasText){for(f=t.width,h=f>>5,p=t.y1-t.y0,m=0;m<p*h;m++)R[m]=0;if(s=t.xoff,s==null)return;a=t.yoff;var A=0,N=-1;for(y=0;y<p;y++){for(m=0;m<f;m++){var F=h*y+(m>>5),L=$[(a+y)*(fp<<5)+(s+m)<<2]?1<<31-m%32:0;R[F]|=L,A|=L}A?N=y:(t.y0++,p--,y--,a++)}t.y1=t.y0+N,t.sprite=R.slice(0,(t.y1-t.y0)*h)}}}function _fe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),f,h=0;h<l;h++){f=0;for(var p=0;p<=i;p++)if((f<<a|(p<i?(f=r[h*i+p])>>>s:0))&t[u+p])return!0;u+=n}return!1}function Cfe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function $fe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Yj(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Afe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Tfe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Wl(e){return typeof e=="function"?e:function(){return e}}var Rfe={archimedean:Yj,rectangular:Afe};const Xj=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Nfe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function vA(e){te.call(this,kfe(),e)}vA.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Xj}]};me(vA,te,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&re("Wordcloud size dimensions must be non-zero.");function n(y){const v=e[y];return Ge(v)&&t.modified(v.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Nfe.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||Xj;let a=e.fontSize||14,l;if(Ge(a)?l=e.fontSizeRange:a=tr(a),l){const y=a,v=ct("sqrt")().domain(Go(i,y)).range(l);a=w=>v(y(w))}i.forEach(y=>{y[s[0]]=NaN,y[s[1]]=NaN,y[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ti).layout(),f=o.size(),h=f[0]>>1,p=f[1]>>1,m=u.length;for(let y=0,v,w;y<m;++y)v=u[y],w=v.datum,w[s[0]]=v.x+h,w[s[1]]=v.y+p,w[s[2]]=v.font,w[s[3]]=v.size,w[s[4]]=v.style,w[s[5]]=v.weight,w[s[6]]=v.rotate;return t.reflow(r).modifies(s)}});const Ffe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:vA},Symbol.toStringTag,{value:"Module"})),Mfe=e=>new Uint8Array(e),Dfe=e=>new Uint16Array(e),Sp=e=>new Uint32Array(e);function Ofe(){let e=8,t=[],n=Sp(0),r=qm(0,e),i=qm(0,e);return{data:()=>t,seen:()=>n=Pfe(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let f,h,p;for(h=0;!s[h]&&h<a;++h)l[h]=t[h],u[h]=h;for(p=h;h<a;++h)f=t[h],s[h]?u[h]=-1:(u[h]=p,r[p]=r[h],i[p]=i[h],l[p]=f,f._index=p++),r[h]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=qm(o,e,r),i=qm(o,e))}}}function Pfe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function qm(e,t,n){const r=(t<257?Mfe:t<65537?Dfe:Sp)(e);return n&&r.set(n),r}function VM(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],f=a[1],h=l.length;let p;for(p=0;p<u;++p)o[l[p]]|=r;for(p=f;p<h;++p)o[l[p]]|=r;return s}}}function GM(){let e=Sp(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const f=n,h=l.length,p=Sp(h);let m=Array(h),y,v,w;for(w=0;w<h;++w)m[w]=a(l[w]),p[w]=w;if(m=Lfe(m,p),f)y=t,v=e,t=Array(f+h),e=Sp(f+h),Ife(u,y,v,f,m,p,h,t,e);else{if(u>0)for(w=0;w<h;++w)p[w]+=u;t=m,e=p}return n=f+h,{index:p,value:m}}function i(a,l){const u=n;let f,h,p;for(h=0;!l[e[h]]&&h<u;++h);for(p=h;h<u;++h)l[f=e[h]]||(e[p]=f,t[p]=t[h],++p);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[UK(l,a[0],0,u),el(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function Lfe(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),HK(e,t)}function Ife(e,t,n,r,i,o,s,a,l){let u=0,f=0,h;for(h=0;u<r&&f<s;++h)t[u]<i[f]?(a[h]=t[u],l[h]=n[u++]):(a[h]=i[f],l[h]=o[f++]+e);for(;u<r;++u,++h)a[h]=t[u],l[h]=n[u];for(;f<s;++f,++h)a[h]=i[f],l[h]=o[f]+e}function xA(e){te.call(this,Ofe(),e),this._indices=null,this._dims=null}xA.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};me(xA,te,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=GM()),o.push(VM(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),f=a.all(),h=n.rem=n.add,p=n.mod,m=i.length,y={};let v,w,b,k,_,C,$,R,A;if(u.set(l),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(C={},k=t.mod,$=0,R=k.length;$<R;++$)C[k[$]._index]=1;for($=0;$<m;++$)A=r[$],(!s[$]||e.modified("fields",$)||t.modified(A.fields))&&(b=A.fname,(v=y[b])||(o[b]=w=GM(),y[b]=v=w.insert(A,t.source,0)),s[$]=VM(w,$,i[$]).onAdd(v,l));for($=0,R=a.data().length;$<R;++$)_[$]||(u[$]!==l[$]?h.push($):C[$]&&l[$]!==f&&p.push($));return a.mask=(1<<m)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,f=i.size()+r.length,h=o.length;let p=i.size(),m,y,v;i.resize(f,h),i.add(r);const w=i.curr(),b=i.prev(),k=i.all();for(m=0;m<h;++m)y=a[m].fname,v=l[y]||(l[y]=s[y].insert(a[m],r,p)),o[m].onAdd(v,w);for(;p<f;++p)b[p]=k,w[p]!==k&&u.push(p)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,f=t.rem;let h,p,m,y;for(h=0,p=f.length;h<p;++h)m=f[h]._index,l[m]=1,s[m]=y=o[m],o[m]=a,y!==a&&u.push(m);for(m in r)r[m].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),f=e.bisect(t),h=f[0],p=f[1],m=u[0],y=u[1],v=e.one;let w,b,k;if(h<m)for(w=h,b=Math.min(m,p);w<b;++w)k=l[w],o[k]!==n&&(a[k]=s[k],o[k]=n,r.push(k)),s[k]^=v;else if(h>m)for(w=m,b=Math.min(h,y);w<b;++w)k=l[w],o[k]!==n&&(a[k]=s[k],o[k]=n,r.push(k)),s[k]^=v;if(p>y)for(w=Math.max(h,y),b=p;w<b;++w)k=l[w],o[k]!==n&&(a[k]=s[k],o[k]=n,r.push(k)),s[k]^=v;else if(p<y)for(w=Math.max(m,p),b=y;w<b;++w)k=l[w],o[k]!==n&&(a[k]=s[k],o[k]=n,r.push(k)),s[k]^=v;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],f=l[1],h=a[0],p=a[1],m=e.one;let y,v,w;if(u<h)for(y=u,v=Math.min(h,f);y<v;++y)w=s[y],o[w]^=m,n.push(w);else if(u>h)for(y=h,v=Math.min(u,p);y<v;++y)w=s[y],o[w]^=m,r.push(w);if(f>p)for(y=Math.max(u,p),v=f;y<v;++y)w=s[y],o[w]^=m,n.push(w);else if(f<p)for(y=Math.max(h,f),v=p;y<v;++y)w=s[y],o[w]^=m,r.push(w);e.range=t.slice()}});function wA(e){te.call(this,null,e)}wA.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};me(wA,te,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=f=>a[f]&n?null:s[f];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,f=>{const h=a[f]&n;return!h&&h^l[f]&n?s[f]:null}),o.filter(o.REM,f=>{const h=a[f]&n;return h&&!(h^(h^l[f]&n))?s[f]:null})):(o.filter(o.ADD,u),o.filter(o.REM,f=>(a[f]&n)===i?s[f]:null)),o.filter(o.SOURCE,f=>u(f._index))}});const zfe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:xA,resolvefilter:wA},Symbol.toStringTag,{value:"Module"})),jfe="RawCode",Mu="Literal",Bfe="Property",Ufe="Identifier",qfe="ArrayExpression",Wfe="BinaryExpression",Kj="CallExpression",Hfe="ConditionalExpression",Vfe="LogicalExpression",Gfe="MemberExpression",Yfe="ObjectExpression",Xfe="UnaryExpression";function mo(e){this.type=e}mo.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Kfe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Kfe(e){switch(e.type){case qfe:return e.elements;case Wfe:case Vfe:return[e.left,e.right];case Kj:return[e.callee].concat(e.arguments);case Hfe:return[e.test,e.consequent,e.alternate];case Gfe:return[e.object,e.property];case Yfe:return e.properties;case Bfe:return[e.key,e.value];case Xfe:return[e.argument];case Ufe:case Mu:case jfe:default:return[]}}var ls,Te,ne,Zn,yt,x2=1,Ig=2,Du=3,wl=4,w2=5,ec=6,Tr=7,zg=8,Qfe=9;ls={};ls[x2]="Boolean";ls[Ig]="<end>";ls[Du]="Identifier";ls[wl]="Keyword";ls[w2]="Null";ls[ec]="Numeric";ls[Tr]="Punctuator";ls[zg]="String";ls[Qfe]="RegularExpression";var Zfe="ArrayExpression",Jfe="BinaryExpression",ede="CallExpression",tde="ConditionalExpression",Qj="Identifier",nde="Literal",rde="LogicalExpression",ide="MemberExpression",ode="ObjectExpression",sde="Property",ade="UnaryExpression",xn="Unexpected token %0",lde="Unexpected number",ude="Unexpected string",cde="Unexpected identifier",fde="Unexpected reserved word",dde="Unexpected end of input",JS="Invalid regular expression",RE="Invalid regular expression: missing /",Zj="Octal literals are not allowed in strict mode.",hde="Duplicate data property in object literal not allowed in strict mode",Mn="ILLEGAL",Xp="Disabled.",pde=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),gde=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function b2(e,t){if(!e)throw new Error("ASSERT: "+t)}function Rs(e){return e>=48&&e<=57}function bA(e){return"0123456789abcdefABCDEF".includes(e)}function _p(e){return"01234567".includes(e)}function mde(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Kp(e){return e===10||e===13||e===8232||e===8233}function jg(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&pde.test(String.fromCharCode(e))}function Wy(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&gde.test(String.fromCharCode(e))}const yde={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Jj(){for(;ne<Zn;){const e=Te.charCodeAt(ne);if(mde(e)||Kp(e))++ne;else break}}function e_(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ne<Zn&&bA(Te[ne])?(r=Te[ne++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):at({},xn,Mn);return String.fromCharCode(i)}function vde(){var e,t,n,r;for(e=Te[ne],t=0,e==="}"&&at({},xn,Mn);ne<Zn&&(e=Te[ne++],!!bA(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&at({},xn,Mn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function eB(){var e,t;for(e=Te.charCodeAt(ne++),t=String.fromCharCode(e),e===92&&(Te.charCodeAt(ne)!==117&&at({},xn,Mn),++ne,e=e_("u"),(!e||e==="\\"||!jg(e.charCodeAt(0)))&&at({},xn,Mn),t=e);ne<Zn&&(e=Te.charCodeAt(ne),!!Wy(e));)++ne,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Te.charCodeAt(ne)!==117&&at({},xn,Mn),++ne,e=e_("u"),(!e||e==="\\"||!Wy(e.charCodeAt(0)))&&at({},xn,Mn),t+=e);return t}function xde(){var e,t;for(e=ne++;ne<Zn;){if(t=Te.charCodeAt(ne),t===92)return ne=e,eB();if(Wy(t))++ne;else break}return Te.slice(e,ne)}function wde(){var e,t,n;return e=ne,t=Te.charCodeAt(ne)===92?eB():xde(),t.length===1?n=Du:yde.hasOwnProperty(t)?n=wl:t==="null"?n=w2:t==="true"||t==="false"?n=x2:n=Du,{type:n,value:t,start:e,end:ne}}function NE(){var e=ne,t=Te.charCodeAt(ne),n,r=Te[ne],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ne,{type:Tr,value:String.fromCharCode(t),start:e,end:ne};default:if(n=Te.charCodeAt(ne+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ne+=2,{type:Tr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ne};case 33:case 61:return ne+=2,Te.charCodeAt(ne)===61&&++ne,{type:Tr,value:Te.slice(e,ne),start:e,end:ne}}}if(s=Te.substr(ne,4),s===">>>=")return ne+=4,{type:Tr,value:s,start:e,end:ne};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return ne+=3,{type:Tr,value:o,start:e,end:ne};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ne+=2,{type:Tr,value:i,start:e,end:ne};if(i==="//"&&at({},xn,Mn),"<>=!+-*%&|^/".includes(r))return++ne,{type:Tr,value:r,start:e,end:ne};at({},xn,Mn)}function bde(e){let t="";for(;ne<Zn&&bA(Te[ne]);)t+=Te[ne++];return t.length===0&&at({},xn,Mn),jg(Te.charCodeAt(ne))&&at({},xn,Mn),{type:ec,value:parseInt("0x"+t,16),start:e,end:ne}}function Ede(e){let t="0"+Te[ne++];for(;ne<Zn&&_p(Te[ne]);)t+=Te[ne++];return(jg(Te.charCodeAt(ne))||Rs(Te.charCodeAt(ne)))&&at({},xn,Mn),{type:ec,value:parseInt(t,8),octal:!0,start:e,end:ne}}function YM(){var e,t,n;if(n=Te[ne],b2(Rs(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ne,e="",n!=="."){if(e=Te[ne++],n=Te[ne],e==="0"){if(n==="x"||n==="X")return++ne,bde(t);if(_p(n))return Ede(t);n&&Rs(n.charCodeAt(0))&&at({},xn,Mn)}for(;Rs(Te.charCodeAt(ne));)e+=Te[ne++];n=Te[ne]}if(n==="."){for(e+=Te[ne++];Rs(Te.charCodeAt(ne));)e+=Te[ne++];n=Te[ne]}if(n==="e"||n==="E")if(e+=Te[ne++],n=Te[ne],(n==="+"||n==="-")&&(e+=Te[ne++]),Rs(Te.charCodeAt(ne)))for(;Rs(Te.charCodeAt(ne));)e+=Te[ne++];else at({},xn,Mn);return jg(Te.charCodeAt(ne))&&at({},xn,Mn),{type:ec,value:parseFloat(e),start:t,end:ne}}function kde(){var e="",t,n,r,i,o=!1;for(t=Te[ne],b2(t==="'"||t==='"',"String literal must starts with a quote"),n=ne,++ne;ne<Zn;)if(r=Te[ne++],r===t){t="";break}else if(r==="\\")if(r=Te[ne++],!r||!Kp(r.charCodeAt(0)))switch(r){case"u":case"x":Te[ne]==="{"?(++ne,e+=vde()):e+=e_(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:_p(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),ne<Zn&&_p(Te[ne])&&(o=!0,i=i*8+"01234567".indexOf(Te[ne++]),"0123".includes(r)&&ne<Zn&&_p(Te[ne])&&(i=i*8+"01234567".indexOf(Te[ne++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Te[ne]===`
`&&++ne;else{if(Kp(r.charCodeAt(0)))break;e+=r}return t!==""&&at({},xn,Mn),{type:zg,value:e,octal:o,start:n,end:ne}}function Sde(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";at({},JS)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{at({},JS)}try{return new RegExp(e,t)}catch{return null}}function _de(){var e,t,n,r,i;for(e=Te[ne],b2(e==="/","Regular expression literal must start with a slash"),t=Te[ne++],n=!1,r=!1;ne<Zn;)if(e=Te[ne++],t+=e,e==="\\")e=Te[ne++],Kp(e.charCodeAt(0))&&at({},RE),t+=e;else if(Kp(e.charCodeAt(0)))at({},RE);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||at({},RE),i=t.substr(1,t.length-2),{value:i,literal:t}}function Cde(){var e,t,n;for(t="",n="";ne<Zn&&(e=Te[ne],!!Wy(e.charCodeAt(0)));)++ne,e==="\\"&&ne<Zn?at({},xn,Mn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&at({},JS,n),{value:n,literal:t}}function $de(){var e,t,n,r;return yt=null,Jj(),e=ne,t=_de(),n=Cde(),r=Sde(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ne}}function Ade(e){return e.type===Du||e.type===wl||e.type===x2||e.type===w2}function tB(){if(Jj(),ne>=Zn)return{type:Ig,start:ne,end:ne};const e=Te.charCodeAt(ne);return jg(e)?wde():e===40||e===41||e===59?NE():e===39||e===34?kde():e===46?Rs(Te.charCodeAt(ne+1))?YM():NE():Rs(e)?YM():NE()}function Nr(){const e=yt;return ne=e.end,yt=tB(),ne=e.end,e}function nB(){const e=ne;yt=tB(),ne=e}function Tde(e){const t=new mo(Zfe);return t.elements=e,t}function XM(e,t,n){const r=new mo(e==="||"||e==="&&"?rde:Jfe);return r.operator=e,r.left=t,r.right=n,r}function Rde(e,t){const n=new mo(ede);return n.callee=e,n.arguments=t,n}function Nde(e,t,n){const r=new mo(tde);return r.test=e,r.consequent=t,r.alternate=n,r}function EA(e){const t=new mo(Qj);return t.name=e,t}function dp(e){const t=new mo(nde);return t.value=e.value,t.raw=Te.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function KM(e,t,n){const r=new mo(ide);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Fde(e){const t=new mo(ode);return t.properties=e,t}function QM(e,t,n){const r=new mo(sde);return r.key=t,r.value=n,r.kind=e,r}function Mde(e,t){const n=new mo(ade);return n.operator=e,n.argument=t,n.prefix=!0,n}function at(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(b2(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=ne,n.description=i,n}function E2(e){e.type===Ig&&at(e,dde),e.type===ec&&at(e,lde),e.type===zg&&at(e,ude),e.type===Du&&at(e,cde),e.type===wl&&at(e,fde),at(e,xn,e.value)}function Jn(e){const t=Nr();(t.type!==Tr||t.value!==e)&&E2(t)}function At(e){return yt.type===Tr&&yt.value===e}function FE(e){return yt.type===wl&&yt.value===e}function Dde(){const e=[];for(ne=yt.start,Jn("[");!At("]");)At(",")?(Nr(),e.push(null)):(e.push(Ou()),At("]")||Jn(","));return Nr(),Tde(e)}function ZM(){ne=yt.start;const e=Nr();return e.type===zg||e.type===ec?(e.octal&&at(e,Zj),dp(e)):EA(e.value)}function Ode(){var e,t,n,r;if(ne=yt.start,e=yt,e.type===Du)return n=ZM(),Jn(":"),r=Ou(),QM("init",n,r);if(e.type===Ig||e.type===Tr)E2(e);else return t=ZM(),Jn(":"),r=Ou(),QM("init",t,r)}function Pde(){var e=[],t,n,r,i={},o=String;for(ne=yt.start,Jn("{");!At("}");)t=Ode(),t.key.type===Qj?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?at({},hde):i[r]=!0,e.push(t),At("}")||Jn(",");return Jn("}"),Fde(e)}function Lde(){Jn("(");const e=kA();return Jn(")"),e}const Ide={if:1};function zde(){var e,t,n;if(At("("))return Lde();if(At("["))return Dde();if(At("{"))return Pde();if(e=yt.type,ne=yt.start,e===Du||Ide[yt.value])n=EA(Nr().value);else if(e===zg||e===ec)yt.octal&&at(yt,Zj),n=dp(Nr());else{if(e===wl)throw new Error(Xp);e===x2?(t=Nr(),t.value=t.value==="true",n=dp(t)):e===w2?(t=Nr(),t.value=null,n=dp(t)):At("/")||At("/=")?(n=dp($de()),nB()):E2(Nr())}return n}function jde(){const e=[];if(Jn("("),!At(")"))for(;ne<Zn&&(e.push(Ou()),!At(")"));)Jn(",");return Jn(")"),e}function Bde(){ne=yt.start;const e=Nr();return Ade(e)||E2(e),EA(e.value)}function Ude(){return Jn("."),Bde()}function qde(){Jn("[");const e=kA();return Jn("]"),e}function Wde(){var e,t,n;for(e=zde();;)if(At("."))n=Ude(),e=KM(".",e,n);else if(At("("))t=jde(),e=Rde(e,t);else if(At("["))n=qde(),e=KM("[",e,n);else break;return e}function JM(){const e=Wde();if(yt.type===Tr&&(At("++")||At("--")))throw new Error(Xp);return e}function $1(){var e,t;if(yt.type!==Tr&&yt.type!==wl)t=JM();else{if(At("++")||At("--"))throw new Error(Xp);if(At("+")||At("-")||At("~")||At("!"))e=Nr(),t=$1(),t=Mde(e.value,t);else{if(FE("delete")||FE("void")||FE("typeof"))throw new Error(Xp);t=JM()}}return t}function eD(e){let t=0;if(e.type!==Tr&&e.type!==wl)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Hde(){var e,t,n,r,i,o,s,a,l,u;if(e=yt,l=$1(),r=yt,i=eD(r),i===0)return l;for(r.prec=i,Nr(),t=[e,yt],s=$1(),o=[l,r,s];(i=eD(yt))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=XM(a,l,s),o.push(n);r=Nr(),r.prec=i,o.push(r),t.push(yt),n=$1(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=XM(o[u-1].value,o[u-2],n),u-=2;return n}function Ou(){var e,t,n;return e=Hde(),At("?")&&(Nr(),t=Ou(),Jn(":"),n=Ou(),e=Nde(e,t,n)),e}function kA(){const e=Ou();if(At(","))throw new Error(Xp);return e}function SA(e){Te=e,ne=0,Zn=Te.length,yt=null,nB();const t=kA();if(yt.type!==Ig)throw new Error("Unexpect token after expression.");return t}var rB={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function iB(e){function t(s,a,l,u){let f=e(a[0]);return l&&(f=l+"("+f+")",l.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&re("Missing arguments to clamp function."),s.length>3&&re("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:o,test:n("test",o),if:function(s){s.length<3&&re("Missing arguments to if function."),s.length>3&&re("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Vde(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function oB(e){e=e||{};const t=e.allowed?so(e.allowed):{},n=e.forbidden?so(e.forbidden):{},r=e.constants||rB,i=(e.functions||iB)(h),o=e.globalvar,s=e.fieldvar,a=Ge(o)?o:y=>`${o}["${y}"]`;let l={},u={},f=0;function h(y){if(we(y))return y;const v=p[y.type];return v==null&&re("Unsupported type: "+y.type),v(y)}const p={Literal:y=>y.raw,Identifier:y=>{const v=y.name;return f>0?v:ke(n,v)?re("Illegal identifier: "+v):ke(r,v)?r[v]:ke(t,v)?v:(l[v]=1,a(v))},MemberExpression:y=>{const v=!y.computed,w=h(y.object);v&&(f+=1);const b=h(y.property);return w===s&&(u[Vde(b)]=1),v&&(f-=1),w+(v?"."+b:"["+b+"]")},CallExpression:y=>{y.callee.type!=="Identifier"&&re("Illegal callee type: "+y.callee.type);const v=y.callee.name,w=y.arguments,b=ke(i,v)&&i[v];return b||re("Unrecognized function: "+v),Ge(b)?b(w):b+"("+w.map(h).join(",")+")"},ArrayExpression:y=>"["+y.elements.map(h).join(",")+"]",BinaryExpression:y=>"("+h(y.left)+" "+y.operator+" "+h(y.right)+")",UnaryExpression:y=>"("+y.operator+h(y.argument)+")",ConditionalExpression:y=>"("+h(y.test)+"?"+h(y.consequent)+":"+h(y.alternate)+")",LogicalExpression:y=>"("+h(y.left)+y.operator+h(y.right)+")",ObjectExpression:y=>"{"+y.properties.map(h).join(",")+"}",Property:y=>{f+=1;const v=h(y.key);return f-=1,v+":"+h(y.value)}};function m(y){const v={code:h(y),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},v}return m.functions=i,m.constants=r,m}const tD=Symbol("vega_selection_getter");function sB(e){return(!e.getter||!e.getter[tD])&&(e.getter=Ci(e.field),e.getter[tD]=!0),e.getter}const _A="intersect",nD="union",Gde="vlMulti",Yde="vlPoint",rD="or",Xde="and",Oo="_vgsid_",Qp=Ci(Oo),Kde="E",Qde="R",Zde="R-E",Jde="R-LE",ehe="R-RE",the="E-LT",nhe="E-LTE",rhe="E-GT",ihe="E-GTE",ohe="E-VALID",she="E-ONE",Hy="index:unit";function iD(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=sB(a)(e),Ya(s)&&(s=Yn(s)),Ya(r[o])&&(r[o]=Yn(r[o])),ie(r[o])&&Ya(r[o][0])&&(r[o]=r[o].map(Yn)),a.type===Kde){if(ie(r[o])?!r[o].includes(s):s!==r[o])return!1}else if(a.type===Qde){if(!Jc(s,r[o]))return!1}else if(a.type===ehe){if(!Jc(s,r[o],!0,!1))return!1}else if(a.type===Zde){if(!Jc(s,r[o],!1,!1))return!1}else if(a.type===Jde){if(!Jc(s,r[o],!1,!0))return!1}else if(a.type===the){if(s>=r[o])return!1}else if(a.type===nhe){if(s>r[o])return!1}else if(a.type===rhe){if(s<=r[o])return!1}else if(a.type===ihe){if(s<r[o])return!1}else if(a.type===ohe){if(s===null||isNaN(s))return!1}else if(a.type===she&&r[o].indexOf(s)===-1)return!1;return!0}function ahe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[Hy]&&r[Hy].value:void 0,s=n===_A,a=i.length,l=0,u,f,h,p,m;l<a;++l)if(u=i[l],o&&s){if(f=f||{},h=f[p=u.unit]||0,h===-1)continue;if(m=iD(t,u),f[p]=m?-1:++h,m&&o.size===1)return!0;if(!m&&h===o.get(p).count)return!1}else if(m=iD(t,u),s^m)return m;return a&&s}const aB=ad(Qp),lhe=aB.left,uhe=aB.right;function che(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[Hy]&&r[Hy].value:void 0,s=n===_A,a=Qp(t),l=lhe(i,a);if(l===i.length||Qp(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(uhe(i,a)-l<o.size)return!1}return!0}function fhe(e,t){return e.map(n=>Ve(t.fields?{values:t.fields.map(r=>sB(r)(n.datum))}:{[Oo]:Qp(n.datum)},t))}function dhe(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,f,h,p,m,y,v,w,b,k,_=o.length,C=0,$,R;C<_;++C)if(u=o[C],p=u.unit,f=u.fields,h=u.values,f&&h){for($=0,R=f.length;$<R;++$)m=f[$],v=s[m.field]||(s[m.field]={}),w=v[p]||(v[p]=[]),l[m.field]=b=m.type.charAt(0),k=ME[`${b}_union`],v[p]=k(w,xe(h[$]));n&&(w=a[p]||(a[p]=[]),w.push(xe(h).reduce((A,N,F)=>(A[f[F].field]=N,A),{})))}else m=Oo,y=Qp(u),v=s[m]||(s[m]={}),w=v[p]||(v[p]=[]),w.push(y),n&&(w=a[p]||(a[p]=[]),w.push({[Oo]:y}));if(t=t||nD,s[Oo]?s[Oo]=ME[`${Oo}_${t}`](...Object.values(s[Oo])):Object.keys(s).forEach(A=>{s[A]=Object.keys(s[A]).map(N=>s[A][N]).reduce((N,F)=>N===void 0?F:ME[`${l[A]}_${t}`](N,F))}),o=Object.keys(a),n&&o.length){const A=r?Yde:Gde;s[A]=t===nD?{[rD]:o.reduce((N,F)=>(N.push(...a[F]),N),[])}:{[Xde]:o.map(N=>({[rD]:a[N]}))}}return s}var ME={[`${Oo}_union`]:eQ,[`${Oo}_intersect`]:ZK,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Yn(t[0]),r=Yn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Yn(t[0]),r=Yn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const hhe=":",phe="@";function CA(e,t,n,r){t[0].type!==Mu&&re("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&tt(t).value,s="unit",a=phe+s,l=hhe+i;o===_A&&!ke(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),ke(r,l)||(r[l]=n.getData(i).tuplesRef())}function lB(e){const t=this.context.data[e];return t?t.values.value:[]}function ghe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function mhe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove($i).insert(t)),1}function yhe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Bg=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},vhe=Bg("format"),uB=Bg("timeFormat"),xhe=Bg("utcFormat"),whe=Bg("timeParse"),bhe=Bg("utcParse"),Wm=new Date(2e3,0,1);function k2(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Wm.setYear(2e3),Wm.setMonth(e),Wm.setDate(t),uB.call(this,Wm,n))}function Ehe(e){return k2.call(this,e,1,"%B")}function khe(e){return k2.call(this,e,1,"%b")}function She(e){return k2.call(this,0,2+e,"%A")}function _he(e){return k2.call(this,0,2+e,"%a")}const Che=":",$he="@",t_="%",cB="$";function $A(e,t,n,r){t[0].type!==Mu&&re("First argument to data functions must be a string literal.");const i=t[0].value,o=Che+i;if(!ke(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function Ahe(e,t,n,r){t[0].type!==Mu&&re("First argument to indata must be a string literal."),t[1].type!==Mu&&re("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=$he+o;ke(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function mr(e,t,n,r){if(t[0].type===Mu)oD(n,r,t[0].value);else for(e in n.scales)oD(n,r,e)}function oD(e,t,n){const r=t_+n;if(!ke(t,r))try{t[r]=e.scaleRef(n)}catch{}}function us(e,t){if(we(e)){const n=t.scales[e];return n&&lF(n.value)?n.value:void 0}else if(Ge(e))return lF(e)?e:void 0}function The(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=mr,n._range=mr,n._scale=mr;const r=i=>"_["+(i.type===Mu?pe(t_+i.value):pe(t_)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function AA(e,t){return function(n,r,i){if(n){const o=us(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const Rhe=AA("area",Yse),Nhe=AA("bounds",Zse),Fhe=AA("centroid",iae);function Mhe(e,t){const n=us(e,(t||this).context);return n&&n.scale()}function Dhe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function TA(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Ohe(){return TA(this.context.dataflow,"warn",arguments)}function Phe(){return TA(this.context.dataflow,"info",arguments)}function Lhe(){return TA(this.context.dataflow,"debug",arguments)}function DE(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function n_(e){const t=il(e),n=DE(t.r),r=DE(t.g),i=DE(t.b);return .2126*n+.7152*r+.0722*i}function Ihe(e,t){const n=n_(e),r=n_(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function zhe(){const e=[].slice.call(arguments);return e.unshift({}),Ve(...e)}function fB(e,t){return e===t||e!==e&&t!==t?!0:ie(e)?ie(t)&&e.length===t.length?jhe(e,t):!1:Ee(e)&&Ee(t)?dB(e,t):!1}function jhe(e,t){for(let n=0,r=e.length;n<r;++n)if(!fB(e[n],t[n]))return!1;return!0}function dB(e,t){for(const n in e)if(!fB(e[n],t[n]))return!1;return!0}function sD(e){return t=>dB(e,t)}function Bhe(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let f=a.changes,h,p;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!f||f.stamp<u)&&(a.changes=f=s.changeset(),f.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,f).run()},!0,1)),n&&(h=n===!0?$i:ie(n)||Fv(n)?n:sD(n),f.remove(h)),t&&f.insert(t),r&&(h=sD(r),l.value.some(h)?f.remove(h):f.insert(r)),i)for(p in o)f.modify(i,p,o[p]);return 1}function Uhe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function qhe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const aD={};function Whe(e,t){const n=aD[t]||(aD[t]=Ci(t));return ie(e)?e.map(n):n(e)}function S2(e){return ie(e)||ArrayBuffer.isView(e)?e:null}function RA(e){return S2(e)||(we(e)?e:null)}function Hhe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return S2(e).join(...n)}function Vhe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return RA(e).indexOf(...n)}function Ghe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return RA(e).lastIndexOf(...n)}function Yhe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return RA(e).slice(...n)}function Xhe(e,t,n){return Ge(n)&&re("Function argument passed to replace."),!we(t)&&!gC(t)&&re("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Khe(e){return S2(e).slice().reverse()}function Qhe(e){return S2(e).slice().sort(hg)}function Zhe(e,t,n){return q3(e||0,t||0,n||0)}function Jhe(e,t){const n=us(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function epe(e,t){const n=us(e,(t||this).context);return n?n.copy():void 0}function tpe(e,t){const n=us(e,(t||this).context);return n?n.domain():[]}function npe(e,t,n){const r=us(e,(n||this).context);return r?ie(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function rpe(e,t){const n=us(e,(t||this).context);return n&&n.range?n.range():[]}function ipe(e,t,n){const r=us(e,(n||this).context);return r?r(t):void 0}function ope(e,t,n,r,i){e=us(e,(i||this).context);const o=rI(t,n);let s=e.domain(),a=s[0],l=tt(s),u=er;return l-a?u=HL(e,a,l):e=(e.interpolator?ct("sequential")().interpolator(e.interpolator()):ct("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==tt(s)&&s.push(l)),s.forEach(f=>o.stop(u(f),e(f))),o}function spe(e,t,n){const r=us(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function ape(e){let t=null;return function(n){return n?Bp(n,t=t||Rf(e)):e}}const hB=e=>e.data;function pB(e,t){const n=lB.call(t,e);return n.root&&n.root.lookup||{}}function lpe(e,t,n){const r=pB(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(hB):void 0}function upe(e,t){const n=pB(e,this)[t];return n?n.ancestors().map(hB):void 0}const gB=()=>typeof window<"u"&&window||null;function cpe(){const e=gB();return e?e.screen:{}}function fpe(){const e=gB();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function dpe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function mB(e,t,n){if(!e)return[];const[r,i]=e,o=new tn().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return JI(s,o,hpe(t))}function hpe(e){let t=null;if(e){const n=xe(e.marktype),r=xe(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function ppe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=xe(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function gpe(e){return xe(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function mpe(e,t,n){const{x:r,y:i,mark:o}=n,s=new tn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),mB([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>ype(l.x,l.y,t))}function ype(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const Zp={random(){return Ti()},cumulativeNormal:Lv,cumulativeLogNormal:qC,cumulativeUniform:GC,densityNormal:IC,densityLogNormal:UC,densityUniform:VC,quantileNormal:Iv,quantileLogNormal:WC,quantileUniform:YC,sampleNormal:Pv,sampleLogNormal:BC,sampleUniform:HC,isArray:ie,isBoolean:gl,isDate:Ya,isDefined(e){return e!==void 0},isNumber:lt,isObject:Ee,isRegExp:gC,isString:we,isTuple:Fv,isValid(e){return e!=null&&e===e},toBoolean:yC,toDate(e){return vC(e)},toNumber:Yn,toString:xC,indexof:Vhe,join:Hhe,lastindexof:Ghe,replace:Xhe,reverse:Khe,sort:Qhe,slice:Yhe,flush:k7,lerp:_7,merge:zhe,pad:A7,peek:tt,pluck:Whe,span:pg,inrange:Jc,truncate:T7,rgb:il,lab:Z1,hcl:J1,hsl:K1,luminance:n_,contrast:Ihe,sequence:Qr,format:vhe,utcFormat:xhe,utcParse:bhe,utcOffset:lP,utcSequence:fP,timeFormat:uB,timeParse:whe,timeOffset:aP,timeSequence:cP,timeUnitSpecifier:K7,monthFormat:Ehe,monthAbbrevFormat:khe,dayFormat:She,dayAbbrevFormat:_he,quarter:x7,utcquarter:w7,week:Z7,utcweek:tP,dayofyear:Q7,utcdayofyear:eP,warn:Ohe,info:Phe,debug:Lhe,extent(e){return Go(e)},inScope:Dhe,intersect:mB,clampRange:b7,pinchDistance:Uhe,pinchAngle:qhe,screen:cpe,containerSize:dpe,windowSize:fpe,bandspace:Zhe,setdata:mhe,pathShape:ape,panLinear:g7,panLog:m7,panPow:y7,panSymlog:v7,zoomLinear:cC,zoomLog:fC,zoomPow:L1,zoomSymlog:dC,encode:yhe,modify:Bhe,lassoAppend:ppe,lassoPath:gpe,intersectLasso:mpe},vpe=["view","item","group","xy","x","y"],xpe="event.vega.",yB="this.",NA={},vB={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${pe(cB+e)}]`,functions:wpe,constants:rB,visitors:NA},r_=oB(vB);function wpe(e){const t=iB(e);vpe.forEach(n=>t[n]=xpe+n);for(const n in Zp)t[n]=yB+n;return Ve(t,The(e,Zp,NA)),t}function Zt(e,t,n){return arguments.length===1?Zp[e]:(Zp[e]=t,n&&(NA[e]=n),r_&&(r_.functions[e]=yB+e),this)}Zt("bandwidth",Jhe,mr);Zt("copy",epe,mr);Zt("domain",tpe,mr);Zt("range",rpe,mr);Zt("invert",npe,mr);Zt("scale",ipe,mr);Zt("gradient",ope,mr);Zt("geoArea",Rhe,mr);Zt("geoBounds",Nhe,mr);Zt("geoCentroid",Fhe,mr);Zt("geoShape",spe,mr);Zt("geoScale",Mhe,mr);Zt("indata",ghe,Ahe);Zt("data",lB,$A);Zt("treePath",lpe,$A);Zt("treeAncestors",upe,$A);Zt("vlSelectionTest",ahe,CA);Zt("vlSelectionIdTest",che,CA);Zt("vlSelectionResolve",dhe,CA);Zt("vlSelectionTuples",fhe);function Zo(e,t){const n={};let r;try{e=we(e)?e:pe(e)+"",r=SA(e)}catch{re("Expression parse error: "+e)}r.visit(o=>{if(o.type!==Kj)return;const s=o.callee.name,a=vB.visitors[s];a&&a(s,o.arguments,t,n)});const i=r_(r);return i.globals.forEach(o=>{const s=cB+o;!ke(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:Ve({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function bpe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Epe=so(["rule"]),lD=so(["group","image","rect"]);function kpe(e,t){let n="";return Epe[t]||(e.x2&&(e.x?(lD[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(lD[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function FA(e){return(e+"").toLowerCase()}function Spe(e){return FA(e)==="operator"}function _pe(e){return FA(e)==="collect"}function Mh(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Cpe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var $pe={operator:(e,t)=>Mh(e,["_"],t.code),parameter:(e,t)=>Mh(e,["datum","_"],t.code),event:(e,t)=>Mh(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Mh(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+pe(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=kpe(r,n),i+="return m;",Mh(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(pe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),Cpe(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Ape(e){const t=this;Spe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Tpe(e){const t=this;if(e.params){const n=t.get(e.id);n||re("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Rpe(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ie(i)?i.map(o=>uD(o,n,t)):uD(i,n,t)}return t}function uD(e,t,n){if(!e||!Ee(e))return e;for(let r=0,i=cD.length,o;r<i;++r)if(o=cD[r],ke(e,o.key))return o.parse(e,t,n);return e}var cD=[{key:"$ref",parse:Npe},{key:"$key",parse:Mpe},{key:"$expr",parse:Fpe},{key:"$field",parse:Dpe},{key:"$encode",parse:Ppe},{key:"$compare",parse:Ope},{key:"$context",parse:Lpe},{key:"$subflow",parse:Ipe},{key:"$tupleid",parse:zpe}];function Npe(e,t){return t.get(e.$ref)||re("Operator not defined: "+e.$ref)}function Fpe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=jr(t.parameterExpression(e.$expr),e.$fields))}function Mpe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=mC(e.$key,e.$flat,t.expr.codegen))}function Dpe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Ci(e.$field,e.$name,t.expr.codegen))}function Ope(e,t){const n="c:"+e.$compare+"_"+e.$order,r=xe(e.$compare).map(i=>i&&i.$tupleid?Me:i);return t.fn[n]||(t.fn[n]=hC(r,e.$order,t.expr.codegen))}function Ppe(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=jr(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function Lpe(e,t){return t}function Ipe(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function zpe(){return Me}function jpe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&re("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Bpe(e){var t=this,n=Ee(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||re("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const Upe={skip:!0};function qpe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function Wpe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],Upe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove($i).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function xB(e,t,n,r){return new wB(e,t,n,r)}function wB(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||$pe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function fD(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}wB.prototype=fD.prototype={fork(){const e=new fD(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),_pe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[FA(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:bpe,parseOperator:Ape,parseOperatorParameters:Tpe,parseParameters:Rpe,parseStream:jpe,parseUpdate:Bpe,getState:qpe,setState:Wpe};function Hpe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),bB(t,e.description()))}function bB(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Vpe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const OE="default";function Gpe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:OE,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?we(i)?i:i.user:OE,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return we(r)||(i=r.item,r=r.user),i_(e,r&&r!==OE?r:i||r),i},{cursor:t})}function i_(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Vy(e,t){var n=e._runtime.data;return ke(n,t)||re("Unrecognized data set: "+t),n[t]}function Ype(e,t){return arguments.length<2?Vy(this,e).values.value:_2.call(this,e,Qu().remove($i).insert(t))}function _2(e,t){IP(t)||re("Second argument to changes must be a changeset.");const n=Vy(this,e);return n.modified=!0,this.pulse(n.input,t)}function Xpe(e,t){return _2.call(this,e,Qu().insert(t))}function Kpe(e,t){return _2.call(this,e,Qu().remove(t))}function EB(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function kB(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function C2(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Qpe(e){var t=C2(e),n=EB(e),r=kB(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function Zpe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=C2(e),s=t.changedTouches?t.changedTouches[0]:t,o=f2(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Jpe(e,n,o),t}function Jpe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;we(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:tr(e),item:tr(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const dD="view",ege="timer",tge="window",nge={trap:!1};function rge(e){const t=Ve({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{ie(r[o])&&(r[o]=so(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function SB(e,t,n,r){e._eventListeners.push({type:n,sources:xe(t),handler:r})}function ige(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function Hm(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ee(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function oge(e,t,n){var r=this,i=new Ov(n),o=function(u,f){r.runAsync(null,()=>{e===dD&&ige(r,t)&&u.preventDefault(),i.receive(Zpe(r,u,f))})},s;if(e===ege)Hm(r,"timer",t)&&r.timer(o,t);else if(e===dD)Hm(r,"view",t)&&r.addEventListener(t,o,nge);else if(e===tge?Hm(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&Hm(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);SB(r,s,t,o)}return i}function hD(e){return e.item}function pD(e){return e.item.mark.source}function gD(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function sge(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",hD),pD,gD(e)),this.on(this.events("view","pointerout",hD),pD,gD(t)),this}function age(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function ti(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const lge="vega-bind",uge="vega-bind-name",cge="vega-bind-radio";function fge(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=pC(r.debounce,i.update))),(r.input==null&&r.element?dge:pge)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function dge(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),SB(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(hge(i))}}function hge(e){return typeof Event<"u"?new Event(e):{type:e}}function pge(e,t,n,r){const i=r.signal(n.signal),o=ti("div",{class:lge}),s=n.input==="radio"?o:o.appendChild(ti("label"));s.appendChild(ti("span",{class:uge},n.name||n.signal)),t.appendChild(o);let a=gge;switch(n.input){case"checkbox":a=mge;break;case"select":a=yge;break;case"radio":a=vge;break;case"range":a=xge;break}a(e,s,n,i)}function gge(e,t,n,r){const i=ti("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function mge(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=ti("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function yge(e,t,n,r){const i=ti("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};Gy(s,r)&&(l.selected=!0),i.appendChild(ti("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(Gy(n.options[a],s)){i.selectedIndex=a;return}}}function vge(e,t,n,r){const i=ti("span",{class:cge}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};Gy(s,r)&&(l.checked=!0);const u=ti("input",l);u.addEventListener("change",()=>e.update(s));const f=ti("label",{},(o[a]||s)+"");return f.prepend(u),i.appendChild(f),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)Gy(a[u].value,s)&&(a[u].checked=!0)}}function xge(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||tl(o,i,100),a=ti("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=ti("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=f=>{a.value=f,l.textContent=f}}function Gy(e,t){return e===t||e+""==t+""}function _B(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,EB(e),kB(e),C2(e),i,o).background(e.background())}function MA(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function wge(e,t,n,r){const i=new r(e.loader(),MA(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,C2(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function bge(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=d2(r);e=n._el=e?PE(n,e,!0):null,Hpe(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||Mg,a=e?o.renderer:o.headless;return n._renderer=a?_B(n,n._renderer,e,a):null,n._handler=wge(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=PE(n,t,!0):e.appendChild(ti("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=PE(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{fge(n,l.element||t,l)})),n}function PE(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const Dh=e=>+e||0,Ege=e=>({top:e,bottom:e,left:e,right:e});function mD(e){return Ee(e)?{top:Dh(e.top),bottom:Dh(e.bottom),left:Dh(e.left),right:Dh(e.right)}:Ege(Dh(e))}async function DA(e,t,n,r){const i=d2(t),o=i&&i.headless;return o||re("Unrecognized renderer type: "+t),await e.runAsync(),_B(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function kge(e,t){e!==Ua.Canvas&&e!==Ua.SVG&&e!==Ua.PNG&&re("Unrecognized image type: "+e);const n=await DA(this,e,t);return e===Ua.SVG?Sge(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Sge(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function _ge(e,t){return(await DA(this,Ua.Canvas,e,t)).canvas()}async function Cge(e){return(await DA(this,Ua.SVG,e)).svg()}function $ge(e,t,n){return xB(e,Sf,Zp,n).parse(t)}function Age(e){var t=this._runtime.scales;return ke(t,e)||re("Unrecognized scale or projection: "+e),t[e].value}var CB="width",$B="height",OA="padding",yD={skip:!0};function AB(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===OA?r.left+r.right:0)}function TB(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===OA?r.top+r.bottom:0)}function Tge(e){var t=e._signals,n=t[CB],r=t[$B],i=t[OA];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=AB(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=TB(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function Rge(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(CB,n,yD),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal($B,r,yD),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function Nge(e){return this._runtime.getState(e||{data:Fge,signals:Mge,recurse:!0})}function Fge(e,t){return t.modified&&ie(t.input.value)&&!e.startsWith("_:vega:_")}function Mge(e,t){return!(e==="parent"||t instanceof Sf.proxy)}function Dge(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Oge(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(oue(n,t))}function Pge(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Lge(r))}function Lge(e){return e==null?"":ie(e)?RB(e):Ee(e)&&!Ya(e)?Ige(e):e+""}function Ige(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ie(n)?RB(n):NB(n))}).join(`
`)}function RB(e){return"["+e.map(NB).join(", ")+"]"}function NB(e){return ie(e)?"[]":Ee(e)&&!Ya(e)?"{}":e}function zge(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function FB(e,t){const n=this;if(t=t||{},lf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Ve({},e.locale,t.locale);n.locale(AP(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Ua.Canvas,n._scenegraph=new CI;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Pge,n._redraw=!0,n._handler=new Mg().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=rge(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=$ge(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Ve({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=AB(n,n._width),n._viewHeight=TB(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Tge(n),Vpe(n),Gpe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Vm(e,t){return ke(e._signals,t)?e._signals[t]:re("Unrecognized signal name: "+pe(t))}function MB(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function vD(e,t,n,r){let i=MB(n,r);return i||(i=MA(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function xD(e,t,n){const r=MB(t,n);return r&&t._targets.remove(r),e}me(FB,lf,{async evaluate(e,t,n){if(await lf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Qpe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&c1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&bB(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Vm(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",mD(e)):mD(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(d2(e)||re("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(lf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Vm(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Rge,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=MA(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return vD(this,e,Vm(this,e),t)},removeSignalListener(e,t){return xD(this,Vm(this,e),t)},addDataListener(e,t){return vD(this,e,Vy(this,e).values,t)},removeDataListener(e,t){return xD(this,Vy(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=i_(this,null);this._globalCursor=!!e,t&&i_(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Oge,events:oge,finalize:age,hover:sge,data:Ype,change:_2,insert:Xpe,remove:Kpe,scale:Age,initialize:bge,toImageURL:kge,toCanvas:_ge,toSVG:Cge,getState:Nge,setState:Dge,_watchPixelRatio:zge});const jge="view",Yy="[",Xy="]",DB="{",OB="}",Bge=":",PB=",",Uge="@",qge=">",Wge=/[[\]{}]/,Hge={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let LB,IB;function bl(e,t,n){return LB=t||jge,IB=n||Hge,zB(e.trim()).map(o_)}function Vge(e){return IB[e]}function Cp(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.includes(a)?--s:r&&r.includes(a)&&++s}return t}function zB(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Cp(e,i,PB,Yy+DB,Xy+OB),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function o_(e){return e[0]==="["?Gge(e):Yge(e)}function Gge(e){const t=e.length;let n=1,r;if(n=Cp(e,n,Xy,Yy,Xy),n===t)throw"Empty between selector: "+e;if(r=zB(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==qge)throw"Expected '>' after between selector: "+e;r=r.map(o_);const i=o_(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Yge(e){const t={source:LB},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===OB){if(a=e.lastIndexOf(DB),a>=0){try{r=Xge(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===Uge&&(i=++a),l=Cp(e,a,Bge),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=Cp(e,a,Yy),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Cp(e,a,Xy),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==Yy)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||Wge.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):Vge(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Xge(e){const t=e.split(PB);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Kge(e){return Ee(e)?e:{type:e||"pad"}}const Oh=e=>+e||0,Qge=e=>({top:e,bottom:e,left:e,right:e});function Zge(e){return Ee(e)?e.signal?e:{top:Oh(e.top),bottom:Oh(e.bottom),left:Oh(e.left),right:Oh(e.right)}:Qge(Oh(e))}const wn=e=>Ee(e)&&!ie(e)?Ve({},e):{value:e};function wD(e,t,n,r){return n!=null?(Ee(n)&&!ie(n)||ie(n)&&n.length&&Ee(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function On(e,t,n){for(const r in t)wD(e,r,t[r]);for(const r in n)wD(e,r,n[r],"update")}function yd(e,t,n){for(const r in t)n&&ke(n,r)||(e[r]=Ve(e[r]||{},t[r]));return e}function Qc(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const PA="mark",LA="frame",IA="scope",Jge="axis",e0e="axis-domain",t0e="axis-grid",n0e="axis-label",r0e="axis-tick",i0e="axis-title",o0e="legend",s0e="legend-band",a0e="legend-entry",l0e="legend-gradient",jB="legend-label",u0e="legend-symbol",c0e="legend-title",f0e="title",d0e="title-text",h0e="title-subtitle";function p0e(e,t,n,r,i){const o={},s={};let a,l,u,f;l="lineBreak",t==="text"&&i[l]!=null&&!Qc(l,e)&&LE(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===LA?i.group:n===PA?Ve({},i.mark,i[t]):null;for(l in f)u=Qc(l,e)||(l==="fill"||l==="stroke")&&(Qc("fill",e)||Qc("stroke",e)),u||LE(o,l,f[l]);xe(r).forEach(h=>{const p=i.style&&i.style[h];for(const m in p)Qc(m,e)||LE(o,m,p[m])}),e=Ve({},e);for(l in o)f=o[l],f.signal?(a=a||{})[l]=f:s[l]=f;return e.enter=Ve(s,e.enter),a&&(e.update=Ve(a,e.update)),e}function LE(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const BB=e=>we(e)?pe(e):e.signal?`(${e.signal})`:UB(e);function $2(e){if(e.gradient!=null)return m0e(e);let t=e.signal?`(${e.signal})`:e.color?g0e(e.color):e.field!=null?UB(e.field):e.value!==void 0?pe(e.value):void 0;return e.scale!=null&&(t=y0e(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${A1(e.exponent)})`),e.mult!=null&&(t+=`*${A1(e.mult)}`),e.offset!=null&&(t+=`+${A1(e.offset)}`),e.round&&(t=`round(${t})`),t}const Gm=(e,t,n,r)=>`(${e}(${[t,n,r].map($2).join(",")})+'')`;function g0e(e){return e.c?Gm("hcl",e.h,e.c,e.l):e.h||e.s?Gm("hsl",e.h,e.s,e.l):e.l||e.a?Gm("lab",e.l,e.a,e.b):e.r||e.g||e.b?Gm("rgb",e.r,e.g,e.b):null}function m0e(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:pe(n));for(;t.length&&tt(t)==null;)t.pop();return t.unshift(BB(e.gradient)),`gradient(${t.join(",")})`}function A1(e){return Ee(e)?"("+$2(e)+")":e}function UB(e){return qB(Ee(e)?e:{datum:e})}function qB(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):re("Invalid field reference: "+pe(e));return e.signal||(r=we(r)?rs(r).map(pe).join("]["):qB(r)),t+"["+r+"]"}function y0e(e,t){const n=BB(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+A1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function v0e(e){let t="";return e.forEach(n=>{const r=$2(n);t+=n.test?`(${n.test})?${r}:`:r}),tt(t)===":"&&(t+="null"),t}function WB(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=p0e(e,t,n,r,i.config);for(const a in e)s[a]=x0e(e[a],t,o,i);return o}function x0e(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=b0e(w0e(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function w0e(e){return ie(e)?v0e(e):$2(e)}function b0e(e,t,n,r){const i=Zo(e,t);return i.$fields.forEach(o=>r[o]=1),Ve(n,i.$params),i.$expr}const E0e="outer",k0e=["value","update","init","react","bind"];function bD(e,t){re(e+' for "outer" push: '+pe(t))}function HB(e,t){const n=e.name;if(e.push===E0e)t.signals[n]||bD("No prior signal definition",n),k0e.forEach(r=>{e[r]!==void 0&&bD("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function s_(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function A2(e,t,n,r){return new s_(e,t,n,r)}function Ky(e,t){return A2("operator",e,t)}function Fe(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Jp(e,t){return t?{$field:e,$name:t}:{$field:e}}const a_=Jp("key");function ED(e,t){return{$compare:e,$order:t}}function S0e(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const _0e="ascending",C0e="descending";function $0e(e){return Ee(e)?(e.order===C0e?"-":"+")+T2(e.op,e.field):""}function T2(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const zA="scope",l_="view";function cn(e){return e&&e.signal}function A0e(e){return e&&e.expr}function T1(e){if(cn(e))return!0;if(Ee(e)){for(const t in e)if(T1(e[t]))return!0}return!1}function Yi(e,t){return e??t}function xu(e){return e&&e.signal||e}const kD="timer";function eg(e,t){return(e.merge?R0e:e.stream?N0e:e.type?F0e:re("Invalid stream specification: "+pe(e)))(e,t)}function T0e(e){return e===zA?l_:e||l_}function R0e(e,t){const n=e.merge.map(i=>eg(i,t)),r=jA({merge:n},e,t);return t.addStream(r).id}function N0e(e,t){const n=eg(e.stream,t),r=jA({stream:n},e,t);return t.addStream(r).id}function F0e(e,t){let n;e.type===kD?(n=t.event(kD,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(T0e(e.source),e.type);const r=jA({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function jA(e,t,n){let r=t.between;return r&&(r.length!==2&&re('Stream "between" parameter must have 2 entries: '+pe(t)),e.between=[eg(r[0],n),eg(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(M0e(t.marktype,t.markname,t.markrole)),t.source===zA&&r.push("inScope(event.item)"),r.length&&(e.filter=Zo("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function M0e(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const D0e={code:"_.$value",ast:{type:"Identifier",value:"value"}};function O0e(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||re("Signal update missing events specification."),we(o)&&(o=bl(o,t.isSubscope()?zA:l_)),o=xe(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[L0e(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&re("Signal encode and update are mutually exclusive."),s="encode(item(),"+pe(r)+")"),i.update=we(s)?Zo(s,t):s.expr!=null?Zo(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:D0e,$params:{$value:t.signalRef(s.signal)}}:re("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(Ve(P0e(l,t),i)))}function P0e(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):eg(e,t)}}function L0e(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function I0e(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?re("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Zo(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>O0e(i,t,n.id))}const bt=e=>(t,n,r)=>A2(e,n,t||void 0,r),VB=bt("aggregate"),z0e=bt("axisticks"),GB=bt("bound"),yo=bt("collect"),SD=bt("compare"),j0e=bt("datajoin"),YB=bt("encode"),B0e=bt("expression"),U0e=bt("facet"),q0e=bt("field"),W0e=bt("key"),H0e=bt("legendentries"),V0e=bt("load"),G0e=bt("mark"),Y0e=bt("multiextent"),X0e=bt("multivalues"),K0e=bt("overlap"),Q0e=bt("params"),XB=bt("prefacet"),Z0e=bt("projection"),J0e=bt("proxy"),eme=bt("relay"),KB=bt("render"),tme=bt("scale"),tc=bt("sieve"),nme=bt("sortitems"),QB=bt("viewlayout"),rme=bt("values");let ime=0;const ZB={min:"min",max:"max",count:"sum"};function ome(e,t){const n=e.type||"linear";zL(n)||re("Unrecognized scale type: "+pe(n)),t.addScale(e.name,{type:n,domain:void 0})}function sme(e,t){const n=t.getScale(e.name).params;let r;n.domain=JB(e.domain,e,t),e.range!=null&&(n.range=tU(e,t,n)),e.interpolate!=null&&mme(e.interpolate,n),e.nice!=null&&(n.nice=gme(e.nice,t)),e.bins!=null&&(n.bins=pme(e.bins,t));for(r in e)ke(n,r)||r==="name"||(n[r]=wi(e[r],t))}function wi(e,t){return Ee(e)?e.signal?t.signalRef(e.signal):re("Unsupported object: "+pe(e)):e}function R1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>wi(n,t))}function R2(e){re("Can not find data set: "+pe(e))}function JB(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&re("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ie(e)?ame:e.fields?ume:lme)(e,t,n)}function ame(e,t,n){return e.map(r=>wi(r,n))}function lme(e,t,n){const r=n.getData(e.data);return r||R2(e.data),Tf(t.type)?r.valuesRef(n,e.field,eU(e.sort,!1)):UL(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ume(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=we(s)?{data:r,field:s}:ie(s)||s.signal?cme(s,n):s,o.push(s),o),[]);return(Tf(t.type)?fme:UL(t.type)?dme:hme)(e,n,i)}function cme(e,t){const n="_:vega:_"+ime++,r=yo({});if(ie(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+pe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,tc({})]),{data:n,field:"data"}}function fme(e,t,n){const r=eU(e.sort,!0);let i,o;const s=n.map(u=>{const f=t.getData(u.data);return f||R2(u.data),f.countsRef(t,u.field,r)}),a={groupby:a_,pulse:s};r&&(i=r.op||"count",o=r.field?T2(i,r.field):"count",a.ops=[ZB[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(VB(a));const l=t.add(yo({pulse:Fe(i)}));return o=t.add(rme({field:a_,sort:t.sortRef(r),pulse:Fe(l)})),Fe(o)}function eU(e,t){return e&&(!e.field&&!e.op?Ee(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?re("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!ZB[e.op]&&re("Multiple domain scales can not be sorted using "+e.op)),e}function dme(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||R2(i.data),o.domainRef(t,i.field)});return Fe(t.add(X0e({values:r})))}function hme(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||R2(i.data),o.extentRef(t,i.field)});return Fe(t.add(Y0e({extents:r})))}function pme(e,t){return e.signal||ie(e)?R1(e,t):t.objectProperty(e)}function gme(e,t){return e.signal?t.signalRef(e.signal):Ee(e)?{interval:wi(e.interval),step:wi(e.step)}:wi(e)}function mme(e,t){t.interpolate=wi(e.type||e),e.gamma!=null&&(t.interpolateGamma=wi(e.gamma))}function tU(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(we(i)){if(r&&ke(r,i))return e=Ve({},e,{range:r[i]}),tU(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Tf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:re("Unrecognized scale range value: "+pe(i))}else if(i.scheme){n.scheme=ie(i.scheme)?R1(i.scheme,t):wi(i.scheme,t),i.extent&&(n.schemeExtent=R1(i.extent,t)),i.count&&(n.schemeCount=wi(i.count,t));return}else if(i.step){n.rangeStep=wi(i.step,t);return}else{if(Tf(e.type)&&!ie(i))return JB(i,e,t);ie(i)||re("Unsupported range type: "+pe(i))}return i.map(o=>(ie(o)?R1:wi)(o,t))}function yme(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=u_(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=u_(n[i],i,t));t.addProjection(e.name,r)}function u_(e,t,n){return ie(e)?e.map(r=>u_(r,t,n)):Ee(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:re("Unsupported parameter object: "+pe(e)):e}const vo="top",vd="left",xd="right",ul="bottom",nU="center",vme="vertical",xme="start",wme="middle",bme="end",c_="index",BA="label",Eme="offset",If="perc",kme="perc2",Si="value",Ug="guide-label",UA="guide-title",Sme="group-title",_me="group-subtitle",_D="symbol",N1="gradient",f_="discrete",d_="size",Cme="shape",$me="fill",Ame="stroke",Tme="strokeWidth",Rme="strokeDash",Nme="opacity",qA=[d_,Cme,$me,Ame,Tme,Rme,Nme],qg={name:1,style:1,interactive:1},rt={value:0},_i={value:1},N2="group",rU="rect",WA="rule",Fme="symbol",nc="text";function tg(e){return e.type=N2,e.interactive=e.interactive||!1,e}function Br(e,t){const n=(r,i)=>Yi(e[r],Yi(t[r],i));return n.isVertical=r=>vme===Yi(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Yi(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Yi(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Yi(e.columns,Yi(t.columns,+n.isVertical(!0))),n}function iU(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Mme(e,t,n){const r=t.config.style[n];return r&&r[e]}function F2(e,t,n){return`item.anchor === '${xme}' ? ${e} : item.anchor === '${bme}' ? ${t} : ${n}`}const HA=F2(pe(vd),pe(xd),pe(nU));function Dme(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ee(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function oU(e,t){return t?e?Ee(e)?Object.assign({},e,{offset:oU(e.offset,t)}):{value:e,offset:t}:t:e}function ai(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=yd(e.encode,t,qg)):e.interactive=!1,e}function Ome(e,t,n,r){const i=Br(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,f,h,p;o?(u=[0,1],f=[0,0],h=s,p=a):(u=[0,0],f=[1,0],h=a,p=s);const m={enter:l={opacity:rt,x:rt,y:rt,width:wn(h),height:wn(p)},update:Ve({},l,{opacity:_i,fill:{gradient:t,start:u,stop:f}}),exit:{opacity:rt}};return On(m,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),ai({type:rU,role:l0e,encode:m},r)}function Pme(e,t,n,r,i){const o=Br(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,f,h,p,m="";s?(u="y",h="y2",f="x",p="width",m="1-"):(u="x",h="x2",f="y",p="height");const y={opacity:rt,fill:{scale:t,field:Si}};y[u]={signal:m+"datum."+If,mult:l},y[f]=rt,y[h]={signal:m+"datum."+kme,mult:l},y[p]=wn(a);const v={enter:y,update:Ve({},y,{opacity:_i}),exit:{opacity:rt}};return On(v,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),ai({type:rU,role:s0e,key:Si,from:i,encode:v},r)}const Lme=`datum.${If}<=0?"${vd}":datum.${If}>=1?"${xd}":"${nU}"`,Ime=`datum.${If}<=0?"${ul}":datum.${If}>=1?"${vo}":"${wme}"`;function CD(e,t,n,r){const i=Br(e,t),o=i.isVertical(),s=wn(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,f,h,p,m="";const y={enter:u={opacity:rt},update:f={opacity:_i,text:{field:BA}},exit:{opacity:rt}};return On(y,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Yi(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=f.baseline={signal:Ime},h="y",p="x",m="1-"):(u.align=f.align={signal:Lme},u.baseline={value:"top"},h="x",p="y"),u[h]=f[h]={signal:m+"datum."+If,mult:a},u[p]=f[p]=s,s.offset=Yi(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+c_}:void 0,ai({type:nc,role:jB,style:Ug,key:Si,from:r,encode:y,overlap:l},n)}function zme(e,t,n,r,i){const o=Br(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),f=o("symbolOffset"),h={data:"value"},p=`(${i}) ? datum.${Eme} : datum.${d_}`,m=u?wn(u):{field:d_},y=`datum.${c_}`,v=`max(1, ${i})`;let w,b,k,_,C;m.mult=.5,w={enter:b={opacity:rt,x:{signal:p,mult:.5,offset:f},y:m},update:k={opacity:_i,x:b.x,y:b.y},exit:{opacity:rt}};let $=null,R=null;e.fill||($=t.symbolBaseFillColor,R=t.symbolBaseStrokeColor),On(w,{fill:o("symbolFillColor",$),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",R),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),qA.forEach(L=>{e[L]&&(k[L]=b[L]={scale:e[L],field:Si})});const A=ai({type:Fme,role:u0e,key:Si,from:h,clip:u?!0:void 0,encode:w},n.symbols),N=wn(f);N.offset=o("labelOffset"),w={enter:b={opacity:rt,x:{signal:p,offset:N},y:m},update:k={opacity:_i,text:{field:BA},x:b.x,y:b.y},exit:{opacity:rt}},On(w,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const F=ai({type:nc,role:jB,style:Ug,key:Si,from:h,encode:w},n.labels);return w={enter:{noBound:{value:!u},width:rt,height:u?wn(u):rt,opacity:rt},exit:{opacity:rt},update:k={opacity:_i,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(_=`ceil(item.mark.items.length / ${v})`,k.row.signal=`${y}%${_}`,k.column.signal=`floor(${y} / ${_})`,C={field:["row",y]}):(k.row.signal=`floor(${y} / ${v})`,k.column.signal=`${y} % ${v}`,C={field:y}),k.column.signal=`(${i})?${k.column.signal}:${y}`,r={facet:{data:r,name:"value",groupby:c_}},tg({role:IA,from:r,encode:yd(w,s,qg),marks:[A,F],name:l,interactive:a,sort:C})}function jme(e,t){const n=Br(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const VA='item.orient === "left"',GA='item.orient === "right"',M2=`(${VA} || ${GA})`,Bme=`datum.vgrad && ${M2}`,Ume=F2('"top"','"bottom"','"middle"'),qme=F2('"right"','"left"','"center"'),Wme=`datum.vgrad && ${GA} ? (${qme}) : (${M2} && !(datum.vgrad && ${VA})) ? "left" : ${HA}`,Hme=`item._anchor || (${M2} ? "middle" : "start")`,Vme=`${Bme} ? (${VA} ? -90 : 90) : 0`,Gme=`${M2} ? (datum.vgrad ? (${GA} ? "bottom" : "top") : ${Ume}) : "top"`;function Yme(e,t,n,r){const i=Br(e,t),o={enter:{opacity:rt},update:{opacity:_i,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:rt}};return On(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Hme},angle:{signal:Vme},align:{signal:Wme},baseline:{signal:Gme},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),ai({type:nc,role:c0e,style:UA,from:r,encode:o},n)}function Xme(e,t){let n;return Ee(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+$D(e.path)+")":e.sphere&&(n="geoShape("+$D(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function $D(e){return Ee(e)&&e.signal?e.signal:pe(e)}function sU(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===N2?IA:t||PA}function Kme(e){return{marktype:e.type,name:e.name||void 0,role:e.role||sU(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Qme(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function YA(e,t){const n=BP(e.type);n||re("Unrecognized transform type: "+pe(e.type));const r=A2(n.type.toLowerCase(),null,aU(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function aU(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=Zme(s,t,n)}return r}function Zme(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Jme(e,t,n);if(i===void 0){e.required&&re("Missing required "+pe(t.type)+" parameter: "+pe(e.name));return}else{if(r==="param")return e1e(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!cn(i)?i.map(o=>AD(e,o,n)):AD(e,i,n)}function AD(e,t,n){const r=e.type;if(cn(t))return RD(r)?re("Expression references can not be signals."):IE(r)?n.fieldRef(t):ND(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||IE(r);return i&&t1e(t)?n.exprRef(t.expr,t.as):i&&n1e(t)?Jp(t.field,t.as):RD(r)?Zo(t,n):r1e(r)?Fe(n.getData(t).values):IE(r)?Jp(t):ND(r)?n.compareRef(t):t}}function Jme(e,t,n){return we(t.from)||re('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function e1e(e,t,n){const r=t[e.name];return e.array?(ie(r)||re("Expected an array of sub-parameters. Instead: "+pe(r)),r.map(i=>TD(e,i,n))):TD(e,r,n)}function TD(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||re("Unsupported parameter: "+pe(t));const o=Ve(aU(i,t,n),i.key);return Fe(n.add(Q0e(o)))}const t1e=e=>e&&e.expr,n1e=e=>e&&e.field,r1e=e=>e==="data",RD=e=>e==="expr",IE=e=>e==="field",ND=e=>e==="compare";function i1e(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||re("Only group marks can be faceted."),r.field!=null?s=a=F1(r,n):(e.data?a=Fe(n.getData(e.data).aggregate):(o=YA(Ve({type:"aggregate",groupby:xe(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=F1(r,n),s=a=Fe(n.add(o))),i=n.keyRef(r.groupby,!0))):s=Fe(n.add(yo(null,[{}]))),s||(s=F1(e,n)),{key:i,pulse:s,parent:a}}function F1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Fe(t.getData(e.data).output)}function Pu(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Pu.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Fe(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new Pu(e,o,i,r,s)};function lU(e){return we(e)?e:null}function FD(e,t,n){const r=T2(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Ph(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=$0e(o);let u=lU(i),f,h;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),f=a[u]),!f){const p=o?{field:a_,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Fe(t.output)};l&&(p.sort=e.sortRef(o)),h=e.add(A2(r,void 0,p)),s&&(t.index[i]=h),f=Fe(h),u!=null&&(a[u]=f)}return f}Pu.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=lU(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&FD(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Fe(r.output)},n&&n.field&&FD(e,l,n),a=e.add(VB(l)),s=e.add(yo({pulse:Fe(a)})),s={agg:a,ref:Fe(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return Fe(this.values)},extentRef(e,t){return Ph(e,this,"extent","extent",t,!1)},domainRef(e,t){return Ph(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Ph(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Ph(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Ph(e,this,"indata","tupleindex",t,!0,!0)}};function o1e(e,t,n){const r=e.from.facet,i=r.name,o=F1(r,t);let s;r.name||re("Facet must have a name: "+pe(r)),r.data||re("Facet must reference a data set: "+pe(r)),r.field?s=t.add(XB({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(U0e({key:t.keyRef(r.groupby),group:Fe(t.proxy(n.parent)),pulse:o})):re("Facet must specify groupby or field: "+pe(r));const a=t.fork(),l=a.add(yo()),u=a.add(tc({pulse:Fe(l)}));a.addData(i,new Pu(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function s1e(e,t,n){const r=t.add(XB({pulse:n.pulse})),i=t.fork();i.add(tc()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function uU(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(Ky()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(h=>h??"null").join(",")+"),0)",f=Zo(u,t);l.update=f.$expr,l.params=f.$params}function D2(e,t){const n=sU(e),r=e.type===N2,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===IA||n===LA,a,l,u,f,h,p,m;const y=n===PA||s||i,v=i1e(e.from,r,t);l=t.add(j0e({key:v.key||(e.key?Jp(e.key):void 0),pulse:v.pulse,clean:!r}));const w=Fe(l);l=u=t.add(yo({pulse:w})),l=t.add(G0e({markdef:Kme(e),interactive:Qme(e.interactive,t),clip:Xme(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Fe(l)}));const b=Fe(l);l=f=t.add(YB(WB(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(R=>{const A=YA(R,t),N=A.metadata;(N.generates||N.changes)&&re("Mark transforms should not generate new data."),N.nomod||(f.params.mod=!0),A.params.pulse=Fe(l),t.add(l=A)}),e.sort&&(l=t.add(nme({sort:t.compareRef(e.sort),pulse:Fe(l)})));const k=Fe(l);(i||s)&&(s=t.add(QB({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:k})),p=Fe(s));const _=t.add(GB({mark:b,pulse:p||k}));m=Fe(_),r&&(y&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(k,p||m,w),i?o1e(e,t,v):y?s1e(e,t,v):t.parse(e),t.popState(),y&&(s&&a.push(s),a.push(_))),o&&(m=a1e(o,m,t));const C=t.add(KB({pulse:m})),$=t.add(tc({pulse:Fe(C)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new Pu(t,u,C,$)),e.on&&e.on.forEach(R=>{(R.insert||R.remove||R.toggle)&&re("Marks only support modify triggers."),uU(R,t,h)}))}function a1e(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:cn(o)?n.signalRef(o.signal):o,method:cn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=cn(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return Fe(n.add(K0e(s)))}function l1e(e,t){const n=t.config.legend,r=e.encode||{},i=Br(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let f=0,h,p,m;qA.forEach(_=>e[_]?(u[_]=e[_],f=f||e[_]):0),f||re("Missing valid scale for legend.");const y=u1e(e,t.scaleType(f)),v={title:e.title!=null,scales:u,type:y,vgrad:y!=="symbol"&&i.isVertical()},w=Fe(t.add(yo(null,[v]))),b={enter:{x:{value:0},y:{value:0}}},k=Fe(t.add(H0e(p={type:y,scale:t.scaleRef(f),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return y===N1?(m=[Ome(e,f,n,r.gradient),CD(e,n,r.labels,k)],p.count=p.count||t.signalRef(`max(2,2*floor((${xu(i.gradientLength())})/100))`)):y===f_?m=[Pme(e,f,n,r.gradient,k),CD(e,n,r.labels,k)]:(h=jme(e,n),m=[zme(e,n,r,k,xu(h.columns))],p.size=d1e(e,t,m[0].marks)),m=[tg({role:a0e,from:w,encode:b,marks:m,layout:h,interactive:a})],v.title&&m.push(Yme(e,n,r.title,w)),D2(tg({role:o0e,from:w,encode:yd(f1e(i,e,n),o,qg),marks:m,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function u1e(e,t){let n=e.type||_D;return!e.type&&c1e(e)===1&&(e.fill||e.stroke)&&(n=Y3(t)?N1:nS(t)?f_:_D),n!==N1?n:nS(t)?f_:N1}function c1e(e){return qA.reduce((t,n)=>t+(e[n]?1:0),0)}function f1e(e,t,n){const r={enter:{},update:{}};return On(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function d1e(e,t,n){const r=xu(MD("size",e,n)),i=xu(MD("strokeWidth",e,n)),o=xu(h1e(n[1].encode,t,Ug));return Zo(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function MD(e,t,n){return t[e]?`scale("${t[e]}",datum)`:iU(e,n[0].encode)}function h1e(e,t,n){return iU("fontSize",e)||Mme("fontSize",t,n)}const p1e=`item.orient==="${vd}"?-90:item.orient==="${xd}"?90:0`;function g1e(e,t){e=we(e)?{text:e}:e;const n=Br(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},f=Fe(t.add(yo(null,[u])));return l.push(v1e(e,n,m1e(e),f)),e.subtitle&&l.push(x1e(e,n,r.subtitle,f)),D2(tg({role:f0e,from:f,encode:y1e(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function m1e(e){const t=e.encode;return t&&t.title||Ve({name:e.name,interactive:e.interactive,style:e.style},t)}function y1e(e,t){const n={enter:{},update:{}};return On(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:HA},angle:{signal:p1e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),yd(n,t,qg)}function v1e(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return On(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ai({type:nc,role:d0e,style:Sme,from:r,encode:s},n)}function x1e(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return On(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ai({type:nc,role:h0e,style:_me,from:r,encode:s},n)}function w1e(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(YA(r,t))}),e.on&&e.on.forEach(r=>{uU(r,t,e.name)}),t.addDataPipeline(e.name,b1e(e,t,n))}function b1e(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,f,h;for(e.values?cn(e.values)||T1(e.format)?(r.push(DD(t,e)),r.push(i=Hl())):r.push(i=Hl({$ingest:e.values,$format:e.format})):e.url?T1(e.url)||T1(e.format)?(r.push(DD(t,e)),r.push(i=Hl())):r.push(i=Hl({$request:e.url,$format:e.format})):e.source&&(i=a=xe(e.source).map(p=>Fe(t.getData(p).output)),r.push(null)),l=0,u=n.length;l<u;++l)f=n[l],h=f.metadata,!i&&!h.source&&r.push(i=Hl()),r.push(f),h.generates&&(s=!0),h.modifies&&!s&&(o=!0),h.source?i=f:h.changes&&(i=null);return a&&(u=a.length-1,r[0]=eme({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,Hl())),i||r.push(Hl()),r.push(tc({})),r}function Hl(e){const t=yo({},e);return t.metadata={source:!0},t}function DD(e,t){return V0e({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const cU=e=>e===ul||e===vo,O2=(e,t,n)=>cn(e)?_1e(e.signal,t,n):e===vd||e===vo?t:n,bn=(e,t,n)=>cn(e)?k1e(e.signal,t,n):cU(e)?t:n,ro=(e,t,n)=>cn(e)?S1e(e.signal,t,n):cU(e)?n:t,fU=(e,t,n)=>cn(e)?C1e(e.signal,t,n):e===vo?{value:t}:{value:n},E1e=(e,t,n)=>cn(e)?$1e(e.signal,t,n):e===xd?{value:t}:{value:n},k1e=(e,t,n)=>dU(`${e} === '${vo}' || ${e} === '${ul}'`,t,n),S1e=(e,t,n)=>dU(`${e} !== '${vo}' && ${e} !== '${ul}'`,t,n),_1e=(e,t,n)=>XA(`${e} === '${vd}' || ${e} === '${vo}'`,t,n),C1e=(e,t,n)=>XA(`${e} === '${vo}'`,t,n),$1e=(e,t,n)=>XA(`${e} === '${xd}'`,t,n),dU=(e,t,n)=>(t=t!=null?wn(t):t,n=n!=null?wn(n):n,OD(t)&&OD(n)?(t=t?t.signal||pe(t.value):null,n=n?n.signal||pe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ve({test:e},t)].concat(n||[])),OD=e=>e==null||Object.keys(e).length===1,XA=(e,t,n)=>({signal:`${e} ? (${of(t)}) : (${of(n)})`}),A1e=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${vd}' ? (${of(r)}) : `:"")+(n!=null?`${e} === '${ul}' ? (${of(n)}) : `:"")+(i!=null?`${e} === '${xd}' ? (${of(i)}) : `:"")+(t!=null?`${e} === '${vo}' ? (${of(t)}) : `:"")+"(null)"}),of=e=>cn(e)?e.signal:e==null?null:pe(e),T1e=(e,t)=>t===0?0:cn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},df=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Vc(e,t,n,r){let i;if(t&&ke(t,e))return t[e];if(ke(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[UA][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Ug][i]}return null}function PD(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function R1e(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(cn(s)){const h=PD([n.axisX,n.axisY]),p=PD([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of h)a[u]=bn(s,Vc(u,n.axisX,i,r),Vc(u,n.axisY,i,r));l={};for(u of p)l[u]=A1e(s.signal,Vc(u,n.axisTop,i,r),Vc(u,n.axisBottom,i,r),Vc(u,n.axisLeft,i,r),Vc(u,n.axisRight,i,r))}else a=s===vo||s===ul?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?Ve({},i,a,l,o):i}function N1e(e,t,n,r){const i=Br(e,t),o=e.orient;let s,a;const l={enter:s={opacity:rt},update:a={opacity:_i},exit:{opacity:rt}};On(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=LD(e,0),f=LD(e,1);return s.x=a.x=bn(o,u,rt),s.x2=a.x2=bn(o,f),s.y=a.y=ro(o,u,rt),s.y2=a.y2=ro(o,f),ai({type:WA,role:e0e,from:r,encode:l},n)}function LD(e,t){return{scale:e.scale,range:t}}function F1e(e,t,n,r,i){const o=Br(e,t),s=e.orient,a=e.gridScale,l=O2(s,1,-1),u=M1e(e.offset,l);let f,h,p;const m={enter:f={opacity:rt},update:p={opacity:_i},exit:h={opacity:rt}};On(m,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const y={scale:e.scale,field:Si,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},v=bn(s,{signal:"height"},{signal:"width"}),w=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},b=a?{scale:a,range:1,mult:l,offset:u}:Ve(v,{mult:l,offset:u});return f.x=p.x=bn(s,y,w),f.y=p.y=ro(s,y,w),f.x2=p.x2=ro(s,b),f.y2=p.y2=bn(s,b),h.x=bn(s,y),h.y=ro(s,y),ai({type:WA,role:t0e,key:Si,from:r,encode:m},n)}function M1e(e,t){if(t!==1)if(!Ee(e))e=cn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ve({},e);for(;n.mult!=null;)if(Ee(n.mult))n=n.mult=Ve({},n.mult);else return n.mult=cn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function D1e(e,t,n,r,i,o){const s=Br(e,t),a=e.orient,l=O2(a,-1,1);let u,f,h;const p={enter:u={opacity:rt},update:h={opacity:_i},exit:f={opacity:rt}};On(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const m=wn(i);m.mult=l;const y={scale:e.scale,field:Si,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return h.y=u.y=bn(a,rt,y),h.y2=u.y2=bn(a,m),f.x=bn(a,y),h.x=u.x=ro(a,rt,y),h.x2=u.x2=ro(a,m),f.y=ro(a,y),ai({type:WA,role:r0e,key:Si,from:r,encode:p},n)}function zE(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function O1e(e,t,n,r,i,o){const s=Br(e,t),a=e.orient,l=e.scale,u=O2(a,-1,1),f=xu(s("labelFlush")),h=xu(s("labelFlushOffset")),p=s("labelAlign"),m=s("labelBaseline");let y=f===0||!!f,v;const w=wn(i);w.mult=u,w.offset=wn(s("labelPadding")||0),w.offset.mult=u;const b={scale:l,field:Si,band:.5,offset:oU(o.offset,s("labelOffset"))},k=bn(a,y?zE(l,f,'"left"','"right"','"center"'):{value:"center"},E1e(a,"left","right")),_=bn(a,fU(a,"bottom","top"),y?zE(l,f,'"top"','"bottom"','"middle"'):{value:"middle"}),C=zE(l,f,`-(${h})`,h,0);y=y&&h;const $={opacity:rt,x:bn(a,b,w),y:ro(a,b,w)},R={enter:$,update:v={opacity:_i,text:{field:BA},x:$.x,y:$.y,align:k,baseline:_},exit:{opacity:rt,x:$.x,y:$.y}};On(R,{dx:!p&&y?bn(a,C):null,dy:!m&&y?ro(a,C):null}),On(R,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:m});const A=s("labelBound");let N=s("labelOverlap");return N=N||A?{separation:s("labelSeparation"),method:N,order:"datum.index",bound:A?{scale:l,orient:a,tolerance:A}:null}:void 0,v.align!==k&&(v.align=df(v.align,k)),v.baseline!==_&&(v.baseline=df(v.baseline,_)),ai({type:nc,role:n0e,style:Ug,key:Si,from:r,encode:R,overlap:N},n)}function P1e(e,t,n,r){const i=Br(e,t),o=e.orient,s=O2(o,-1,1);let a,l;const u={enter:a={opacity:rt,anchor:wn(i("titleAnchor",null)),align:{signal:HA}},update:l=Ve({},a,{opacity:_i,text:wn(e.title)}),exit:{opacity:rt}},f={signal:`lerp(range("${e.scale}"), ${F2(0,1,.5)})`};return l.x=bn(o,f),l.y=ro(o,f),a.angle=bn(o,rt,T1e(s,90)),a.baseline=bn(o,fU(o,ul,vo),{value:ul}),l.angle=a.angle,l.baseline=a.baseline,On(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),L1e(i,o,u,n),u.update.align=df(u.update.align,a.align),u.update.angle=df(u.update.angle,a.angle),u.update.baseline=df(u.update.baseline,a.baseline),ai({type:nc,role:i0e,style:UA,from:r,encode:u},n)}function L1e(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=df(wn(a),n.update[l]),!1):!Qc(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?wn(s):bn(t,wn(s),wn(o))}function I1e(e,t){const n=R1e(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=Br(e,n),u=Dme(l),f={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},h=Fe(t.add(yo({},[f]))),p=Fe(t.add(z0e({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),m=[];let y;return f.grid&&m.push(F1e(e,n,r.grid,p,u)),f.ticks&&(y=l("tickSize"),m.push(D1e(e,n,r.ticks,p,y,u))),f.labels&&(y=f.ticks?y:0,m.push(O1e(e,n,r.labels,p,y,u))),f.domain&&m.push(N1e(e,n,r.domain,h)),f.title&&m.push(P1e(e,n,r.title,h)),D2(tg({role:Jge,from:h,encode:yd(z1e(l,e),i,qg),marks:m,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function z1e(e,t){const n={enter:{},update:{}};return On(n,{orient:e("orient"),offset:e("offset")||0,position:Yi(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function hU(e,t,n){const r=xe(e.signals),i=xe(e.scales);return n||r.forEach(o=>HB(o,t)),xe(e.projections).forEach(o=>yme(o,t)),i.forEach(o=>ome(o,t)),xe(e.data).forEach(o=>w1e(o,t)),i.forEach(o=>sme(o,t)),(n||r).forEach(o=>I0e(o,t)),xe(e.axes).forEach(o=>I1e(o,t)),xe(e.marks).forEach(o=>D2(o,t)),xe(e.legends).forEach(o=>l1e(o,t)),e.title&&g1e(e.title,t),t.parseLambdas(),t}const j1e=e=>yd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function B1e(e,t){const n=t.config,r=Fe(t.root=t.add(Ky())),i=U1e(e,n);i.forEach(u=>HB(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(yo()),s=t.add(YB(WB(j1e(e.encode),N2,LA,e.style,t,{pulse:Fe(o)}))),a=t.add(QB({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Fe(s)}));t.operators.pop(),t.pushState(Fe(s),Fe(a),null),hU(e,t,i),t.operators.push(a);let l=t.add(GB({mark:r,pulse:Fe(a)}));return l=t.add(KB({pulse:Fe(l)})),l=t.add(tc({pulse:Fe(l)})),t.addData("root",new Pu(t,o,o,l)),t}function Lh(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function U1e(e,t){const n=s=>Yi(e[s],t[s]),r=[Lh("background",n("background")),Lh("autosize",Kge(n("autosize"))),Lh("padding",Zge(n("padding"))),Lh("width",n("width")||0),Lh("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return xe(e.signals).forEach(s=>{ke(i,s.name)?s=Ve(i[s.name],s):r.push(s),o[s.name]=s}),xe(t.signals).forEach(s=>{!ke(o,s.name)&&!ke(i,s.name)&&r.push(s)}),r}function pU(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function ID(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}pU.prototype=ID.prototype={parse(e){return hU(e,this)},fork(){return new ID(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof s_?Fe(e):e;return this.add(J0e({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Fe(this.add(tc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Fe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return tt(this._parent)},encode(){return tt(this._encode)},lookup(){return tt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(we(e))return Jp(e,t);e.signal||re("Unsupported field reference: "+pe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Fe(this.add(q0e(i)))}return r},compareRef(e){let t=!1;const n=o=>cn(o)?(t=!0,this.signalRef(o.signal)):A0e(o)?(t=!0,this.exprRef(o.expr)):o,r=xe(e.field).map(n),i=xe(e.order).map(n);return t?Fe(this.add(SD({fields:r,orders:i}))):ED(r,i)},keyRef(e,t){let n=!1;const r=o=>cn(o)?(n=!0,Fe(i[o.signal])):o,i=this.signals;return e=xe(e).map(r),n?Fe(this.add(W0e({fields:e,flat:t}))):S0e(e,t)},sortRef(e){if(!e)return e;const t=T2(e.op,e.field),n=e.order||_0e;return n.signal?Fe(this.add(SD({fields:t,orders:this.signalRef(n.signal)}))):ED(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return ke(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&re("Duplicate signal name: "+pe(e));const n=t instanceof s_?t:this.add(Ky(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||re("Unrecognized signal name: "+pe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Fe(this.signals[e]):(ke(this.lambdas,e)||(this.lambdas[e]=this.add(Ky(null))),Fe(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Zo(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ee(e)?e:this.signalRef(e.signal||KA(e))},exprRef(e,t){const n={expr:Zo(e,this)};return t&&(n.expr.$name=t),Fe(this.add(B0e(n)))},addBinding(e,t){this.bindings||re("Nested signals do not support binding: "+pe(e)),this.bindings.push(Ve({signal:e},t))},addScaleProj(e,t){ke(this.scales,e)&&re("Duplicate scale or projection name: "+pe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,tme(t))},addProjection(e,t){this.addScaleProj(e,Z0e(t))},getScale(e){return this.scales[e]||re("Unrecognized scale name: "+pe(e)),this.scales[e]},scaleRef(e){return Fe(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ke(this.data,e)&&re("Duplicate data set name: "+pe(e)),this.data[e]=t},getData(e){return this.data[e]||re("Undefined data set name: "+pe(e)),this.data[e]},addDataPipeline(e,t){return ke(this.data,e)&&re("Duplicate data set name: "+pe(e)),this.addData(e,Pu.fromEntries(this,t))}};function KA(e){return(ie(e)?q1e:W1e)(e)}function q1e(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ee(i)?i.signal||KA(i):pe(i))}return n+"]"}function W1e(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+pe(r)+":"+(Ee(i)?i.signal||KA(i):pe(i));return t+"}"}function H1e(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function V1e(e,t,n){return Ee(e)||re("Input Vega specification must be an object."),t=id(H1e(),t,e.config),B1e(e,new pU(t,n)).toRuntime()}var G1e="6.1.2";Ve(Sf,Oee,dse,Wse,Tle,kue,Kce,Tce,Zce,Efe,Ffe,zfe);const Y1e=G1e,X1e=Object.freeze(Object.defineProperty({__proto__:null,Bounds:tn,CanvasHandler:Mg,CanvasRenderer:fy,DATE:Or,DAY:Gn,DAYOFYEAR:Ko,Dataflow:lf,Debug:c7,Error:aC,EventStream:Ov,Gradient:rI,GroupItem:i2,HOURS:ii,Handler:x$,HybridHandler:GI,HybridRenderer:hS,Info:u7,Item:r2,MILLISECONDS:ao,MINUTES:oi,MONTH:Qn,Marks:si,MultiPulse:MC,None:l7,Operator:Et,Parameters:Dv,Pulse:Ka,QUARTER:Dr,RenderType:Ua,Renderer:Fg,ResourceLoader:uI,SECONDS:Ai,SVGHandler:DI,SVGRenderer:_$,SVGStringRenderer:VI,Scenegraph:CI,TIME_UNITS:kC,Transform:te,View:FB,WEEK:ln,Warn:lC,YEAR:Dn,accessor:jr,accessorFields:Kn,accessorName:Ht,array:xe,ascending:hg,bandwidthNRD:LC,bin:WP,bootstrapCI:HP,boundClip:rz,boundContext:Ag,boundItem:lS,boundMark:EI,boundStroke:ta,changeset:Qu,clampRange:b7,codegenExpression:oB,compare:hC,constant:tr,cumulativeLogNormal:qC,cumulativeNormal:Lv,cumulativeUniform:GC,dayofyear:Q7,debounce:pC,defaultLocale:AC,definition:BP,densityLogNormal:UC,densityNormal:IC,densityUniform:VC,domChild:an,domClear:mi,domCreate:ja,domFind:v$,dotbin:VP,error:re,expressionFunction:Zt,extend:Ve,extent:Go,extentIndex:E7,falsy:Ra,fastmap:sd,field:Ci,flush:k7,font:u2,fontFamily:Ng,fontSize:ss,format:u1,formatLocale:q1,formats:NC,hasOwnProperty:ke,id:dg,identity:er,inferType:RP,inferTypes:NP,ingest:ft,inherits:me,inrange:Jc,interpolate:X3,interpolateColors:t2,interpolateRange:qL,intersect:JI,intersectBoxLine:ef,intersectPath:r$,intersectPoint:i$,intersectRule:fI,isArray:ie,isBoolean:gl,isDate:Ya,isFunction:Ge,isIterable:S7,isNumber:lt,isObject:Ee,isRegExp:gC,isString:we,isTuple:Fv,key:mC,lerp:_7,lineHeight:sl,loader:Rv,locale:AP,logger:uC,lruCache:C7,markup:S$,merge:$7,mergeConfig:id,multiLineOffset:g$,one:rd,pad:A7,panLinear:g7,panLog:m7,panPow:y7,panSymlog:v7,parse:V1e,parseExpression:SA,parseSelector:bl,path:Uv,pathCurves:e$,pathEqual:iz,pathParse:Rf,pathRectangle:sI,pathRender:Bp,pathSymbols:oI,pathTrail:aI,peek:tt,point:f2,projection:W$,quantileLogNormal:WC,quantileNormal:Iv,quantileUniform:YC,quantiles:OC,quantizeInterpolator:WL,quarter:x7,quartiles:PC,get random(){return Ti},randomInteger:zJ,randomKDE:jC,randomLCG:IJ,randomLogNormal:YP,randomMixture:XP,randomNormal:zC,randomUniform:KP,read:DP,regressionConstant:XC,regressionExp:ZP,regressionLinear:KC,regressionLoess:t9,regressionLog:QP,regressionPoly:e9,regressionPow:JP,regressionQuad:QC,renderModule:d2,repeat:Gh,resetDefaultLocale:OZ,resetSVGDefIds:Roe,responseType:MP,runtimeContext:xB,sampleCurve:jv,sampleLogNormal:BC,sampleNormal:Pv,sampleUniform:HC,scale:ct,sceneEqual:C$,sceneFromJSON:SI,scenePickVisit:ry,sceneToJSON:kI,sceneVisit:lo,sceneZOrder:o$,scheme:K3,serializeXML:UI,setHybridRendererOptions:Coe,setRandom:PJ,span:pg,splitAccessPath:rs,stringValue:pe,textMetrics:ei,timeBin:pP,timeFloor:iP,timeFormatLocale:Op,timeInterval:cd,timeOffset:aP,timeSequence:cP,timeUnitSpecifier:K7,timeUnits:SC,toBoolean:yC,toDate:vC,toNumber:Yn,toSet:so,toString:xC,transform:UP,transforms:Sf,truncate:T7,truthy:$i,tupleid:Me,typeParsers:Wk,utcFloor:oP,utcInterval:fd,utcOffset:lP,utcSequence:fP,utcdayofyear:eP,utcquarter:w7,utcweek:tP,version:Y1e,visitArray:Ma,week:Z7,writeConfig:od,zero:Ia,zoomLinear:cC,zoomLog:fC,zoomPow:L1,zoomSymlog:dC},Symbol.toStringTag,{value:"Module"}));function wd(e,t,n){return e.fields=t||[],e.fname=n,e}function K1e(e){return e.length===1?Q1e(e[0]):Z1e(e)}const Q1e=e=>function(t){return t[e]},Z1e=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function jE(e){throw Error(e)}function J1e(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||jE("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&jE("Access path missing closing bracket: "+e),r&&jE("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function eye(e,t,n){const r=J1e(e);return e=r.length===1?r[0]:e,wd(K1e(r),[e],e)}eye("id");wd(e=>e,[],"identity");wd(()=>0,[],"zero");wd(()=>1,[],"one");wd(()=>!0,[],"true");wd(()=>!1,[],"false");var tye=Array.isArray;function zD(e){return e===Object(e)}const nye=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0);function rye(e){return typeof e=="string"}function iye(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var oye={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},sye={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},aye={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const lye=Array.prototype.slice,Vl=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,lye.call(t,1))},uye=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var cye={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:uye,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Vl("join",arguments)},indexof:function(){return Vl("indexOf",arguments)},lastindexof:function(){return Vl("lastIndexOf",arguments)},slice:function(){return Vl("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(nye),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Vl("substring",arguments,String)},split:function(){return Vl("split",arguments,String)},replace:function(){return Vl("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const fye=["view","item","group","xy","x","y"],h_=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&h_.add(setImmediate);const dye={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:oye[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),h_.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||cye[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>sye[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>aye[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,h_.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Ih(e,t,n,r,i,o){const s=a=>dye[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,fye.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var hye={operator(e,t){const n=t.ast,r=e.functions;return i=>Ih(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>Ih(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Ih(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return Ih(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,f;for(const h in r)f=Ih(r[h].ast,i,a,l,void 0,s),s[h]!==f&&(s[h]=f,u=1);return n!=="rule"&&iye(s,r,o),u}}},pye="6.1.0",gye={version:pye};function QA(e){return le(e,"or")}function ZA(e){return le(e,"and")}function JA(e){return le(e,"not")}function M1(e,t){if(JA(e))M1(e.not,t);else if(ZA(e))for(const n of e.and)M1(n,t);else if(QA(e))for(const n of e.or)M1(n,t);else t(e)}function hf(e,t){return JA(e)?{not:hf(e.not,t)}:ZA(e)?{and:e.and.map(n=>hf(n,t))}:QA(e)?{or:e.or.map(n=>hf(n,t))}:t(e)}const qe=structuredClone;function gU(e){throw new Error(e)}function zf(e,t){const n={};for(const r of t)ke(e,r)&&(n[r]=e[r]);return n}function ni(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ht(e)).join(",")})`};function Je(e){if(lt(e))return e;const t=we(e)?e:ht(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function p_(e){return e===!1||e===null}function Ze(e,t){return e.includes(t)}function jf(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function e5(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function mU(e,...t){for(const n of t)mye(e,n??{});return e}function mye(e,t){for(const n of ae(t))od(e,n,t[n],!0)}function zo(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function yye(e,t){const n=ae(e),r=ae(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function yU(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function t5(e,t){for(const n of e)if(t.has(n))return!0;return!1}function g_(e){const t=new Set;for(const n of e){const i=rs(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function n5(e,t){return e===void 0||t===void 0?!0:t5(g_(e),g_(t))}function kt(e){return ae(e).length===0}const ae=Object.keys,en=Object.values,cl=Object.entries;function ng(e){return e===!0||e===!1}function Ft(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function $p(e,t){return JA(e)?`!(${$p(e.not,t)})`:ZA(e)?`(${e.and.map(n=>$p(n,t)).join(") && (")})`:QA(e)?`(${e.or.map(n=>$p(n,t)).join(") || (")})`:t(e)}function Qy(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Qy(e[n],t)&&delete e[n],kt(e)}function Wg(e){return e.charAt(0).toUpperCase()+e.substr(1)}function r5(e,t="datum"){const n=rs(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(pe).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function vU(e,t="datum"){return`${t}[${pe(rs(e).join("."))}]`}function mt(e){return`datum['${e.replaceAll("'","\\'")}']`}function vye(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ni(e){return`${rs(e).map(vye).join("\\.")}`}function Lu(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function bd(e){return`${rs(e).join(".")}`}function Bf(e){return e?rs(e).length:0}function Kt(...e){return e.find(t=>t!==void 0)}let xU=42;function wU(e){const t=++xU;return e?String(e)+t:t}function xye(){xU=42}function bU(e){return EU(e)?e:`__${e}`}function EU(e){return e.startsWith("__")}function rg(e){if(e!==void 0)return(e%360+360)%360}function P2(e){return lt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const jD=Object.getPrototypeOf(structuredClone({}));function Zr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Zr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Zr(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==jD.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==jD.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!Zr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function ht(e){const t=[];return function n(r){if(r!=null&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?`${r}`:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return`${o}]`}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=`${JSON.stringify(l)}:${u}`)}return t.splice(s,1),`{${o}}`}(e)}function le(e,t){return Ee(e)&&ke(e,t)&&e[t]!==void 0}const qs="row",Ws="column",L2="facet",Dt="x",_n="y",xo="x2",cs="y2",El="xOffset",Ed="yOffset",wo="radius",ra="radius2",Di="theta",ia="theta2",bo="latitude",Eo="longitude",ko="latitude2",Fi="longitude2",kl="time",Lr="color",fs="fill",ds="stroke",Ir="shape",oa="size",rc="angle",sa="opacity",Sl="fillOpacity",_l="strokeOpacity",Cl="strokeWidth",$l="strokeDash",Hg="text",Uf="order",Vg="detail",I2="key",Iu="tooltip",z2="href",j2="url",B2="description",wye={x:1,y:1,x2:1,y2:1},kU={theta:1,theta2:1,radius:1,radius2:1};function SU(e){return ke(kU,e)}const i5={longitude:1,longitude2:1,latitude:1,latitude2:1};function _U(e){switch(e){case bo:return"y";case ko:return"y2";case Eo:return"x";case Fi:return"x2"}}function CU(e){return ke(i5,e)}const bye=ae(i5),o5={...wye,...kU,...i5,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function pf(e){return e===Lr||e===fs||e===ds}const $U={row:1,column:1,facet:1},bi=ae($U),s5={...o5,...$U},Eye=ae(s5),{order:X3e,detail:K3e,tooltip:Q3e,...kye}=s5,{row:Z3e,column:J3e,facet:e$e,...Sye}=kye;function _ye(e){return ke(Sye,e)}function AU(e){return ke(s5,e)}const Cye=[xo,cs,ko,Fi,ia,ra];function TU(e){return ic(e)!==e}function ic(e){switch(e){case xo:return Dt;case cs:return _n;case ko:return bo;case Fi:return Eo;case ia:return Di;case ra:return wo}return e}function fl(e){if(SU(e))switch(e){case Di:return"startAngle";case ia:return"endAngle";case wo:return"outerRadius";case ra:return"innerRadius"}return e}function hs(e){switch(e){case Dt:return xo;case _n:return cs;case bo:return ko;case Eo:return Fi;case Di:return ia;case wo:return ra}}function zr(e){switch(e){case Dt:case xo:return"width";case _n:case cs:return"height"}}function RU(e){switch(e){case Dt:return"xOffset";case _n:return"yOffset";case xo:return"x2Offset";case cs:return"y2Offset";case Di:return"thetaOffset";case wo:return"radiusOffset";case ia:return"theta2Offset";case ra:return"radius2Offset"}}function a5(e){switch(e){case Dt:return"xOffset";case _n:return"yOffset"}}function $ye(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Aye=ae(o5),{x:t$e,y:n$e,x2:r$e,y2:i$e,xOffset:o$e,yOffset:s$e,latitude:a$e,longitude:l$e,latitude2:u$e,longitude2:c$e,theta:f$e,theta2:d$e,radius:h$e,radius2:p$e,...l5}=o5,Tye=ae(l5),u5={x:1,y:1},aa=ae(u5);function Qt(e){return ke(u5,e)}const c5={theta:1,radius:1},Rye=ae(c5);function U2(e){return e==="width"?Dt:_n}const NU={xOffset:1,yOffset:1};function Gg(e){return ke(NU,e)}const Nye={time:1};function BE(e){return e in Nye}const{text:g$e,tooltip:m$e,href:y$e,url:v$e,description:x$e,detail:w$e,key:b$e,order:E$e,...FU}=l5,Fye=ae(FU);function Mye(e){return ke(l5,e)}function Dye(e){switch(e){case Lr:case fs:case ds:case oa:case Ir:case sa:case Cl:case $l:return!0;case Sl:case _l:case rc:case kl:return!1}}const MU={...u5,...c5,...NU,...FU},f5=ae(MU);function ps(e){return ke(MU,e)}function Oye(e,t){return Lye(e)[t]}const DU={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:k$e,...Pye}=DU;function Lye(e){switch(e){case Lr:case fs:case ds:case B2:case Vg:case I2:case Iu:case z2:case Uf:case sa:case Sl:case _l:case Cl:case L2:case qs:case Ws:return DU;case Dt:case _n:case El:case Ed:case bo:case Eo:case kl:return Pye;case xo:case cs:case ko:case Fi:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case oa:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case $l:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ir:return{point:"always",geoshape:"always"};case Hg:return{text:"always"};case rc:return{point:"always",square:"always",text:"always"};case j2:return{image:"always"};case Di:return{text:"always",arc:"always"};case wo:return{text:"always",arc:"always"};case ia:case ra:return{arc:"always"}}}function UE(e){switch(e){case Dt:case _n:case Di:case wo:case El:case Ed:case oa:case rc:case Cl:case sa:case Sl:case _l:case kl:case xo:case cs:case ia:case ra:return;case L2:case qs:case Ws:case Ir:case $l:case Hg:case Iu:case z2:case j2:case B2:return"discrete";case Lr:case fs:case ds:return"flexible";case bo:case Eo:case ko:case Fi:case Vg:case I2:case Uf:return}}const Iye={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},zye={count:1,min:1,max:1};function Zs(e){return le(e,"argmin")}function Al(e){return le(e,"argmax")}function d5(e){return we(e)&&ke(Iye,e)}const jye=new Set(["count","valid","missing","distinct"]);function q2(e){return we(e)&&jye.has(e)}function Bye(e){return we(e)&&Ze(["min","max"],e)}const Uye=new Set(["count","sum","distinct","valid","missing"]),qye=new Set(["mean","average","median","q1","q3","min","max"]);function OU(e){return gl(e)&&(e=tx(e,void 0)),`bin${ae(e).map(t=>W2(e[t])?Ft(`_${t}_${cl(e[t])}`):Ft(`_${t}_${e[t]}`)).join("")}`}function _t(e){return e===!0||oc(e)&&!e.binned}function An(e){return e==="binned"||oc(e)&&e.binned===!0}function oc(e){return Ee(e)}function W2(e){return le(e,"param")}function BD(e){switch(e){case qs:case Ws:case oa:case Lr:case fs:case ds:case Cl:case sa:case Sl:case _l:case Ir:return 6;case $l:return 4;default:return 10}}function Yg(e){return le(e,"expr")}function Tn(e,{level:t}={level:0}){const n=ae(e||{}),r={};for(const i of n)r[i]=t===0?Kr(e[i]):Tn(e[i],{level:t-1});return r}function PU(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:f,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:m,subtitlePadding:y,...v}=e,w={...v,...a?{fill:a}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},k={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...f?{subtitleFontSize:f}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...m?{subtitleLineHeight:m}:{},...y?{subtitlePadding:y}:{}},_=zf(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:w,subtitleMarkConfig:_,nonMarkTitleProperties:b,subtitle:k}}function La(e){return we(e)||ie(e)&&we(e[0])}function Re(e){return le(e,"signal")}function sc(e){return le(e,"step")}function Wye(e){return ie(e)?!1:le(e,"fields")&&!le(e,"data")}function Hye(e){return ie(e)?!1:le(e,"fields")&&le(e,"data")}function Is(e){return ie(e)?!1:le(e,"field")&&le(e,"data")}const Vye={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Gye=ae(Vye),Yye={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},m_=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function LU(e){const t=ie(e.condition)?e.condition.map(UD):UD(e.condition);return{...Kr(e),condition:t}}function Kr(e){if(Yg(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function UD(e){if(Yg(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Tt(e){if(Yg(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Re(e)?e:e!==void 0?{value:e}:void 0}function Xye(e){return Re(e)?e.signal:pe(e)}function qD(e){return Re(e)?e.signal:pe(e.value)}function to(e){return Re(e)?e.signal:e==null?null:pe(e)}function Kye(e,t,n){for(const r of n){const i=Jo(r,t.markDef,t.config);i!==void 0&&(e[r]=Tt(i))}return e}function IU(e){return[].concat(e.type,e.style??[])}function wt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&le(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Jo(e,t,n,r)}function Jo(e,t,n,{vgChannel:r}={}){const i=y_(e,t,n.style);return Kt(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function y_(e,t,n){return zU(e,IU(t),n)}function zU(e,t,n){t=xe(t);let r;for(const i of t){const o=n[i];le(o,e)&&(r=o[e])}return r}function jU(e,t){return xe(e).reduce((n,r)=>(n.field.push(ye(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function BU(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Zr(i,r))return;n.push(r)}),n}function UU(e,t){return Zr(e,t)||!t?e:e?[...xe(e),...xe(t)].join(", "):t}function qU(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((La(n)||Re(n))&&(La(r)||Re(r)))return{explicit:e.explicit,value:UU(n,r)};if(La(n)||Re(n))return{explicit:e.explicit,value:n};if(La(r)||Re(r))return{explicit:e.explicit,value:r};if(!La(n)&&!Re(n)&&!La(r)&&!Re(r))return{explicit:e.explicit,value:BU(n,r)};throw new Error("It should never reach here")}function h5(e){return`Invalid specification ${ht(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Qye='Autosize "fit" only works for single views and layered views.';function WD(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function HD(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function VD(e){return e?`Dropping "fit-${e}" because spec has discrete ${zr(e)}.`:'Dropping "fit" because spec has discrete size.'}function p5(e){return`Unknown field for ${e}. Cannot calculate view size.`}function GD(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Zye(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Jye(e){return`The "nearest" transform is not supported for ${e} marks.`}function WU(e){return`Selection not supported for ${e} yet.`}function eve(e){return`Cannot find a selection named "${e}".`}const tve="Scale bindings are currently only supported for scales with unbinned, continuous domains.",nve="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",rve="Legend bindings are only supported for selections over an individual field or encoding channel.";function ive(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function ove(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const sve="The same selection must be used to override scale domains in a layered view.",ave='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function lve(e){return`Unknown repeated value "${e}".`}function YD(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const uve="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",g5="Animation involving facet, layer, or concat is currently unsupported.";function cve(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${pe(e)}.`}function fve(e,t,n,r){return`${e.length?"Multiple ":"No "}matching ${pe(t)} encoding found for selection ${pe(n.param)}. Using "field": ${pe(r)}.`}const dve="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function hve(e){return`Unrecognized parse "${e}".`}function XD(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const pve="Attempt to add the same child twice.";function gve(e){return`Ignoring an invalid transform: ${ht(e)}.`}const mve='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function KD(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function yve(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ht(t)} is overridden by a child projection ${ht(n)}.`}const vve="Arc marks uses theta channel rather than angle, replacing angle with theta.";function xve(e){return`${e}Offset dropped because ${e} is continuous`}function wve(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ht(n)}}.`}function HU(e){return`Invalid field type "${e}".`}function bve(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Eve(e){return`Invalid aggregation operator "${e}".`}function VU(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function kve(e){return`Position range does not support relative band size for ${e}.`}function v_(e,t){return`Dropping ${ht(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Sve="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function H2(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function _ve(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Cve(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function $ve(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Ave(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function qE(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Tve(e){return`The ${e} for range marks cannot be an expression`}function Rve(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Nve(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Fve(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Mve(e){return`Cannot use the relative band size with ${e} scale.`}function Dve(e){return`Using unaggregated domain with raw field has no effect (${ht(e)}).`}function Ove(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Pve(e){return`Unaggregated domain is currently unsupported for log scale (${ht(e)}).`}function Lve(e){return`Cannot apply size to non-oriented mark "${e}".`}function Ive(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function zve(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function GU(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function YU(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function jve(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ht(n)} and ${ht(r)}). Using ${ht(n)}.`}function Bve(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ht(n)} and ${ht(r)}). Using the union of the two domains.`}function Uve(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function qve(e){return`Dropping sort property ${ht(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const QD="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Wve="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Hve="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Vve="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Gve(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Yve(e){return`Stack is applied to a non-linear scale (${e}).`}function Xve(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Zy(e,t){return`Invalid ${e}: ${ht(t)}.`}function Kve(e){return`Dropping day from datetime ${ht(e)} as day cannot be combined with other units.`}function Qve(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Zve(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Jve(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function ZD(e){return`1D error band does not support ${e}.`}function XU(e){return`Channel ${e} is required for "binned" bin.`}function e2e(e){return`Channel ${e} should not be used with "binned" bin.`}function t2e(e){return`Domain for ${e} is required for threshold scale.`}const KU=uC(lC);let zu=KU;function n2e(e){return zu=e,zu}function r2e(){return zu=KU,zu}function m5(...e){zu.error(...e)}function fe(...e){zu.warn(...e)}function i2e(...e){zu.debug(...e)}function ac(e){if(e&&Ee(e)){for(const t of v5)if(le(e,t))return!0}return!1}const QU=["january","february","march","april","may","june","july","august","september","october","november","december"],o2e=QU.map(e=>e.substr(0,3)),ZU=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],s2e=ZU.map(e=>e.substr(0,3));function a2e(e){if(P2(e)&&(e=+e),lt(e))return e>4&&fe(Zy("quarter",e)),e-1;throw new Error(Zy("quarter",e))}function l2e(e){if(P2(e)&&(e=+e),lt(e))return e-1;{const t=e.toLowerCase(),n=QU.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=o2e.indexOf(r);if(i!==-1)return i;throw new Error(Zy("month",e))}}function u2e(e){if(P2(e)&&(e=+e),lt(e))return e%7;{const t=e.toLowerCase(),n=ZU.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=s2e.indexOf(r);if(i!==-1)return i;throw new Error(Zy("day",e))}}function y5(e,t){const n=[];if(t&&e.day!==void 0&&ae(e).length>1&&(fe(Kve(e)),e=qe(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?l2e(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?a2e(e.quarter):e.quarter;n.push(lt(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?u2e(e.day):e.day;n.push(lt(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function ju(e){const n=y5(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function c2e(e){const n=y5(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function f2e(e){const t=y5(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const JU={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},v5=ae(JU);function d2e(e){return ke(JU,e)}function lc(e){return Ee(e)?e.binned:eq(e)}function eq(e){return e==null?void 0:e.startsWith("binned")}function x5(e){return e.startsWith("utc")}function h2e(e){return e.substring(3)}const p2e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function V2(e){return v5.filter(t=>nq(e,t))}function tq(e){const t=V2(e);return t[t.length-1]}function nq(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function g2e(e,t,{end:n}={end:!1}){const r=r5(t),i=x5(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of v5)nq(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),c2e(a)}function rq(e){if(!e)return;const t=V2(e);return`timeUnitSpecifier(${ht(t)}, ${ht(p2e)})`}function m2e(e,t,n){if(!e)return;const r=rq(e);return`${n||x5(e)?"utc":"time"}Format(${t}, ${r})`}function En(e){if(!e)return;let t;return we(e)?eq(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ee(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),x5(t.unit)&&(t.utc=!0,t.unit=h2e(t.unit)),t}function y2e(e){const{utc:t,...n}=En(e);return n.unit?(t?"utc":"")+ae(n).map(r=>Ft(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):`${t?"utc":""}timeunit${ae(n).map(r=>Ft(`_${r}_${n[r]}`)).join("")}`}function iq(e,t=n=>n){const n=En(e),r=tq(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=oq(r,n.step),a={...i,[s]:+i[s]+o};return`${t(ju(a))} - ${t(ju(i))}`}}const v2e={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function x2e(e){return ke(v2e,e)}function oq(e,t=1){if(x2e(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function w2e(e){return le(e,"param")}function w5(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function b5(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function E5(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function k5(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function S5(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function _5(e){if(e!=null&&e.field){if(ie(e.range)&&e.range.length===2)return!0;if(Re(e.range))return!0}return!1}function C5(e){return!!(e!=null&&e.field)&&(ie(e.oneOf)||ie(e.in))}function b2e(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function sq(e){return C5(e)||w5(e)||_5(e)||b5(e)||k5(e)||E5(e)||S5(e)}function No(e,t){return nx(e,{timeUnit:t,wrapTime:!0})}function E2e(e,t){return e.map(n=>No(n,t))}function aq(e,t=!0){const{field:n}=e,r=En(e.timeUnit),{unit:i,binned:o}=r||{},s=ye(e,{expr:"datum"}),a=i?`time(${o?s:g2e(i,n)})`:s;if(w5(e))return`${a}===${No(e.equal,i)}`;if(b5(e)){const l=e.lt;return`${a}<${No(l,i)}`}else if(k5(e)){const l=e.gt;return`${a}>${No(l,i)}`}else if(E5(e)){const l=e.lte;return`${a}<=${No(l,i)}`}else if(S5(e)){const l=e.gte;return`${a}>=${No(l,i)}`}else{if(C5(e))return`indexof([${E2e(e.oneOf,i).join(",")}], ${a}) !== -1`;if(b2e(e))return G2(a,e.valid);if(_5(e)){const{range:l}=Tn(e),u=Re(l)?{signal:`${l.signal}[0]`}:l[0],f=Re(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&f!==null&&t)return`inrange(${a}, [${No(u,i)}, ${No(f,i)}])`;const h=[];return u!==null&&h.push(`${a} >= ${No(u,i)}`),f!==null&&h.push(`${a} <= ${No(f,i)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ht(e)}`)}function G2(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function k2e(e){return sq(e)&&e.timeUnit?{...e,timeUnit:En(e.timeUnit)}:e}const Xg={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function S2e(e){return e==="quantitative"||e==="temporal"}function lq(e){return e==="ordinal"||e==="nominal"}const Bu=Xg.quantitative,$5=Xg.ordinal,qf=Xg.temporal,A5=Xg.nominal,kd=Xg.geojson;function _2e(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Bu:return"quantitative";case"t":case qf:return"temporal";case"o":case $5:return"ordinal";case"n":case A5:return"nominal";case kd:return"geojson"}}const Rn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},x_={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function C2e(e,t){const n=x_[e],r=x_[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const $2e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function JD(e){return $2e[e]}const uq=new Set(["linear","log","pow","sqrt","symlog"]),cq=new Set([...uq,"time","utc"]);function fq(e){return uq.has(e)}const dq=new Set(["quantile","quantize","threshold"]),A2e=new Set([...cq,...dq,"sequential","identity"]),T2e=new Set(["ordinal","bin-ordinal","point","band"]);function kn(e){return T2e.has(e)}function uo(e){return A2e.has(e)}function jo(e){return cq.has(e)}function Wf(e){return dq.has(e)}const R2e={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function N2e(e){return!we(e)&&le(e,"name")}function hq(e){return le(e,"param")}function F2e(e){return le(e,"unionWith")}function M2e(e){return Ee(e)&&"field"in e}const D2e={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:S$e,domain:_$e,range:C$e,rangeMax:$$e,rangeMin:A$e,scheme:T$e,...O2e}=D2e,P2e=ae(O2e);function w_(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return jo(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return jo(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return jo(e);case"nice":return jo(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return uo(e)&&!Ze(["log","time","utc","threshold","quantile"],e)}}function pq(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return pf(e)?void 0:Fve(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function L2e(e,t){return Ze([$5,A5],t)?e===void 0||kn(e):t===qf?Ze([Rn.TIME,Rn.UTC,void 0],e):t===Bu?fq(e)||Wf(e)||e===void 0:!0}function I2e(e,t,n=!1){if(!ps(e))return!1;switch(e){case Dt:case _n:case El:case Ed:case Di:case wo:return jo(t)||t==="band"?!0:t==="point"?!n:!1;case kl:return Ze(["linear","band"],t);case oa:case Cl:case sa:case Sl:case _l:case rc:return jo(t)||Wf(t)||Ze(["band","point","ordinal"],t);case Lr:case fs:case ds:return t!=="band";case $l:case Ir:return t==="ordinal"||Wf(t)}}function z2e(e){return Ee(e)&&"value"in e}const br={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},gq=br.arc,Y2=br.area,X2=br.bar,j2e=br.image,K2=br.line,Q2=br.point,B2e=br.rect,Jy=br.rule,mq=br.text,T5=br.tick,U2e=br.trail,R5=br.circle,N5=br.square,yq=br.geoshape;function Tl(e){return["line","area","trail"].includes(e)}function ig(e){return["rect","bar","image","arc","tick"].includes(e)}const q2e=new Set(ae(br));function es(e){return le(e,"type")}const W2e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],H2e=["fill","fillOpacity"],V2e=[...W2e,...H2e],G2e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},e8=ae(G2e),WE=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Y2e={area:["line","point"],bar:WE,rect:WE,line:["point"],tick:["bandSize","thickness",...WE]},X2e={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},K2e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},vq=ae(K2e);function Uu(e){return le(e,"band")}const Q2e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Z2e=5,F5={binSpacing:0,continuousBandSize:Z2e,minBandSize:.25,timeUnitBandPosition:.5},J2e={...F5,binSpacing:1},exe={...F5,thickness:1};function txe(e){return es(e)?e.type:e}function xq(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function M5({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!uo(r)||i)return"always-valid";const o=xq(wt("invalid",e,t),{isPath:Tl(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function nxe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function wq({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function bq({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var f;const s=n==null?void 0:n.get("type"),a=fo(t),l=q2(a==null?void 0:a.aggregate),u=M5({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const h=((f=o.scale.invalid)==null?void 0:f[e])??"zero-or-min";return{test:G2(ye(a,{expr:"datum"}),!1),...rxe(h,n,r)}}}function rxe(e,t,n){if(z2e(e)){const{value:r}=e;return Re(r)?{signal:r.signal}:{value:r}}return wq({scale:t,scaleName:n,mode:"zeroOrMin"})}function D5(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=ic(t),l=O5(e),u=bq({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function ixe(e){const{datum:t}=e;return ac(t)?ju(t):`${ht(t)}`}function wu(e,t,n,r){const i={};if(t&&(i.scale=t),gs(e)){const{datum:o}=e;ac(o)?i.signal=ju(o):Re(o)?i.signal=o.signal:Yg(o)?i.signal=o.expr:i.value=o}else i.field=ye(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function ev({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!Re(s)&&0<s&&s<1?"datum":void 0,l=ye(t,{expr:a,suffix:i}),u=n!==void 0?ye(n,{expr:a}):ye(t,{suffix:o,expr:a}),f={};if(s===0||s===1){f.scale=e;const h=s===0?l:u;f.field=h}else{const h=Re(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;f.signal=`scale("${e}", ${h})`}return r&&(f.offset=r),f}function oxe({scaleName:e,fieldDef:t}){const n=ye(t,{expr:"datum"}),r=ye(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function O5({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:f}){if(t){if(We(t)){const h=s==null?void 0:s.get("type");if(xr(t)){f??(f=dl({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:p,timeUnit:m,type:y}=t;if(_t(p)||f&&m&&y===qf)return a!=null&&a.impute?wu(t,o,{binSuffix:"mid"},{offset:l}):f&&!kn(h)?ev({scaleName:o,fieldOrDatumDef:t,bandPosition:f,offset:l}):wu(t,o,e0(t,e)?{binSuffix:"range"}:{},{offset:l});if(An(p)){if(de(n))return ev({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:f,offset:l});fe(XU(e===Dt?xo:cs))}}return wu(t,o,kn(h)?{binSuffix:"range"}:{},{offset:l,band:h==="band"?f??t.bandPosition??.5:void 0})}else if(co(t)){const h=t.value,p=l?{offset:l}:{};return{...Ap(e,h),...p}}}return Ge(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function Ap(e,t){return Ze(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ze(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Tt(t)}function qu(e){return e&&e!=="number"&&e!=="time"}function Eq(e,t,n){return`${e}(${t}${n?`, ${ht(n)}`:""})`}const sxe="  ";function P5({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var l,u;if(qu(n))return no({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=kq(e,r,i),a=Hf(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return no({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return no({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&de(e)&&e.timeUnit===void 0)return no({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Gf(e)){const f=lxe({field:s,timeUnit:de(e)?(l=En(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:uc(e)&&((u=e.scale)==null?void 0:u.type)===Rn.UTC});return f?{signal:f}:void 0}if(t=b_({type:a,specifiedFormat:t,config:o,normalizeStack:i}),de(e)&&_t(e.bin)){const f=ye(e,{expr:r,binSuffix:"end"});return{signal:Kg(s,f,t,n,o)}}else return t||Hf(e)==="quantitative"?{signal:`${Cq(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function kq(e,t,n){return de(e)?n?`${ye(e,{expr:t,suffix:"end"})}-${ye(e,{expr:t,suffix:"start"})}`:ye(e,{expr:t}):ixe(e)}function no({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=kq(e,r,i)),s!=="datum.value"&&de(e)&&_t(e.bin)){const a=ye(e,{expr:r,binSuffix:"end"});return{signal:Kg(s,a,t,n,o)}}return{signal:Eq(n,s,t)}}function Sq(e,t,n,r,i,o){var s;if(!(we(r)&&qu(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Hf(e)==="quantitative"&&(i.normalizedNumberFormatType&&Vf(e)&&e.stack==="normalize"||i.numberFormatType))){if(Vf(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return b_({type:"quantitative",config:i,normalizeStack:!0});if(Gf(e)){const a=de(e)?(s=En(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:axe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return b_({type:t,specifiedFormat:n,config:i})}}function _q(e,t,n){var r;if(e&&(Re(e)||e==="number"||e==="time"))return e;if(Gf(t)&&n!=="time"&&n!=="utc")return de(t)&&((r=En(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function b_({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(we(t))return t;if(e===Bu)return r?n.normalizedNumberFormat:n.numberFormat}function axe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:rq(t)}:r?void 0:n.timeFormat)}function Cq(e,t){return`format(${e}, "${t||""}")`}function t8(e,t,n,r){return qu(n)?Eq(n,e,t):Cq(e,(we(t)?t:void 0)??r.numberFormat)}function Kg(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Kg(e,t,i.numberFormat,i.numberFormatType,i);const o=t8(e,n,r,i),s=t8(t,n,r,i);return`${G2(e,!1)} ? "null" : ${o} + "${sxe}" + ${s}`}function lxe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, ${ht(n)})`:(n=we(n)?n:i,`${o?"utc":"time"}Format(${e}, ${ht(n)})`):m2e(t,e,o)}const Z2="min",uxe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function n8(e){return ke(uxe,e)}function cxe(e){return le(e,"encoding")}function Hs(e){return e&&(e.op==="count"||le(e,"field"))}function $q(e){return e&&ie(e)}function Qg(e){return le(e,"row")||le(e,"column")}function L5(e){return le(e,"header")}function J2(e){return le(e,"facet")}function fxe(e){return le(e,"param")}function dxe(e){return!we(e)&&le(e,"repeat")}function r8(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function I5(e){return le(e,"sort")}function dl({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(We(e)&&e.bandPosition!==void 0)return e.bandPosition;if(de(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Jo("timeUnitBandPosition",n,r);if(_t(o))return .5}}function Aq({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,f,h;const a=zr(e),l=wt(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(de(t)){const{timeUnit:p,bin:m}=t;if(p&&!n)return{band:Jo("timeUnitBandSize",r,i)};if(_t(m)&&!kn(o))return{band:1}}if(ig(r.type))return o?kn(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(f=i[r.type])==null?void 0:f.continuousBandSize:(h=i[r.type])==null?void 0:h.discreteBandSize}function Tq(e,t,n,r){return _t(e.bin)||e.timeUnit&&xr(e)&&e.type==="temporal"?dl({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Rq(e){return le(e,"sort")&&!le(e,"field")}function Zg(e){return le(e,"condition")}function ex(e){const t=e==null?void 0:e.condition;return!!t&&!ie(t)&&de(t)}function Jg(e){const t=e==null?void 0:e.condition;return!!t&&!ie(t)&&We(t)}function hxe(e){const t=e==null?void 0:e.condition;return!!t&&(ie(t)||co(t))}function de(e){return le(e,"field")||(e==null?void 0:e.aggregate)==="count"}function Hf(e){return e==null?void 0:e.type}function gs(e){return le(e,"datum")}function Ga(e){return xr(e)&&!nv(e)||tv(e)}function i8(e){return xr(e)&&e.type==="quantitative"&&!e.bin||tv(e)}function tv(e){return gs(e)&&lt(e.datum)}function We(e){return de(e)||gs(e)}function xr(e){return e&&(le(e,"field")||e.aggregate==="count")&&le(e,"type")}function co(e){return le(e,"value")}function uc(e){return le(e,"scale")||le(e,"sort")}function Vf(e){return le(e,"axis")||le(e,"stack")||le(e,"impute")}function Nq(e){return le(e,"legend")}function Fq(e){return le(e,"format")||le(e,"formatType")}function pxe(e){return ni(e,["legend","axis","header","scale"])}function gxe(e){return le(e,"op")}function ye(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(yxe(e))n=bU("count");else{let s;if(!t.nofn)if(gxe(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;_t(a)?(s=OU(a),i=(t.binSuffix??"")+(t.suffix??"")):l?Al(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Zs(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!lc(u)&&(s=y2e(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?bd(n):t.expr?vU(n,t.expr)+o:Ni(n)+o}function nv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return de(e)&&!!e.bin;case"temporal":return!1}throw new Error(HU(e.type))}function mxe(e){var t;return uc(e)&&Wf((t=e.scale)==null?void 0:t.type)}function yxe(e){return e.aggregate==="count"}function vxe(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(_t(r))return`${n} (binned)`;if(i&&!lc(i)){const a=(s=En(i))==null?void 0:s.unit;if(a)return`${n} (${V2(a).join("-")})`}else if(o)return Al(o)?`${n} for max ${o.argmax}`:Zs(o)?`${n} for min ${o.argmin}`:`${Wg(o)} of ${n}`;return n}function xxe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Al(t))return`${i} for argmax(${t.argmax})`;if(Zs(t))return`${i} for argmin(${t.argmin})`;const o=r&&!lc(r)?En(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||_t(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const Mq=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return xxe(e);default:return vxe(e,t)}};let Dq=Mq;function Oq(e){Dq=e}function wxe(){Oq(Mq)}function gf(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=z5(e))==null?void 0:a.title;if(!de(e))return i??e.title;const o=e,s=r?j5(o,t):void 0;return n?Kt(i,o.title,s):i??o.title??s}function z5(e){if(Vf(e)&&e.axis)return e.axis;if(Nq(e)&&e.legend)return e.legend;if(L5(e)&&e.header)return e.header}function j5(e,t){return Dq(e,t)}function rv(e){if(Fq(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=z5(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function bxe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(I5(e)&&ie(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Al(n)&&!Zs(n))return"quantitative";if(uc(e)&&((o=e.scale)!=null&&o.type))switch(x_[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function fo(e){if(de(e))return e;if(ex(e))return e.condition}function un(e){if(We(e))return e;if(Jg(e))return e.condition}function Pq(e,t,n,r={}){if(we(e)||lt(e)||gl(e)){const i=we(e)?"string":lt(e)?"number":"boolean";return fe(wve(t,i,e)),{value:e}}return We(e)?iv(e,t,n,r):Jg(e)?{...e,condition:iv(e.condition,t,n,r)}:e}function iv(e,t,n,r){if(Fq(e)){const{format:i,formatType:o,...s}=e;if(qu(o)&&!n.customFormatTypes)return fe(KD(t)),iv(s,t,n,r)}else{const i=Vf(e)?"axis":Nq(e)?"legend":L5(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(qu(s)&&!n.customFormatTypes)return fe(KD(t)),iv({...e,[i]:a},t,n,r)}}return de(e)?B5(e,t,r):Exe(e)}function Exe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lt(n)?"quantitative":we(n)?"nominal":ac(n)?"temporal":void 0,{...e,type:t}}function B5(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!d5(r)&&!Al(r)&&!Zs(r)&&(fe(Eve(r)),delete a.aggregate),i&&(a.timeUnit=En(i)),s&&(a.field=`${s}`),_t(o)&&(a.bin=tx(o,t)),An(o)&&!Qt(t)&&fe(e2e(t)),xr(a)){const{type:l}=a,u=_2e(l);l!==u&&(a.type=u),l!=="quantitative"&&q2(r)&&(fe(bve(l,r)),a.type="quantitative")}else if(!TU(t)){const l=bxe(a,t);a.type=l}if(xr(a)){const{compatible:l,warning:u}=kxe(a,t)||{};l===!1&&fe(u)}if(I5(a)&&we(a.sort)){const{sort:l}=a;if(n8(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&n8(u))return{...a,sort:{encoding:u,order:"descending"}}}if(L5(a)){const{header:l}=a;if(l){const{orient:u,...f}=l;if(u)return{...a,header:{...f,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function tx(e,t){return gl(e)?{maxbins:BD(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:BD(t)}:e}const Gc={compatible:!0};function kxe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case qs:case Ws:case L2:return nv(e)?Gc:{compatible:!1,warning:Cve(t)};case Dt:case _n:case El:case Ed:case Lr:case fs:case ds:case Hg:case Vg:case I2:case Iu:case z2:case j2:case rc:case Di:case wo:case B2:return Gc;case Eo:case Fi:case bo:case ko:return n!==Bu?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Gc;case sa:case Sl:case _l:case Cl:case oa:case ia:case ra:case xo:case cs:case kl:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Gc;case Ir:case $l:return!nv(e)&&!mxe(e)?{compatible:!1,warning:$ve(t)}:Gc;case Uf:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Gc}}function Gf(e){const{formatType:t}=rv(e);return t==="time"||!t&&Sxe(e)}function Sxe(e){return e&&(e.type==="temporal"||de(e)&&!!e.timeUnit)}function nx(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=En(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return Yg(e)?a=e.expr:Re(e)?a=e.signal:ac(e)?(s=!0,a=ju(e)):(we(e)||lt(e))&&s&&(a=`datetime(${ht(e)})`,d2e(o)&&(lt(e)&&e<1e4||we(e)&&isNaN(Date.parse(e)))&&(a=ju({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:ht(e)}function Lq(e,t){const{type:n}=e;return t.map(r=>{const i=de(e)&&!lc(e.timeUnit)?e.timeUnit:void 0,o=nx(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function e0(e,t){return _t(e.bin)?ps(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const o8={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function t0(e){return e==null?void 0:e.condition}const Iq=["domain","grid","labels","ticks","title"],_xe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},zq={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Cxe={...zq,style:1,labelExpr:1,encoding:1};function s8(e){return ke(Cxe,e)}const $xe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},jq=ae($xe);function la(e){return le(e,"mark")}class rx{constructor(t,n){ee(this,"name");ee(this,"run");this.name=t,this.run=n}hasMatchingType(t){return la(t)?txe(t.mark)===this.name:!1}}function bu(e,t){const n=e==null?void 0:e[t];return n?ie(n)?jf(n,r=>!!r.field):de(n)||ex(n):!1}function Bq(e,t){const n=e==null?void 0:e[t];return n?ie(n)?jf(n,r=>!!r.field):de(n)||gs(n)||Jg(n):!1}function Uq(e,t){if(Qt(t)){const n=e[t];if((de(n)||gs(n))&&(lq(n.type)||de(n)&&n.timeUnit)){const r=a5(t);return Bq(e,r)}}return!1}function qq(e){return jf(Eye,t=>{if(bu(e,t)){const n=e[t];if(ie(n))return jf(n,r=>!!r.aggregate);{const r=fo(n);return r&&!!r.aggregate}}return!1})}function Wq(e,t){const n=[],r=[],i=[],o=[],s={};return U5(e,(a,l)=>{if(de(a)){const{field:u,aggregate:f,bin:h,timeUnit:p,...m}=a;if(f||p||h){const y=z5(a),v=y==null?void 0:y.title;let w=ye(a,{forAs:!0});const b={...v?[]:{title:gf(a,t,{allowDisabling:!0})},...m,field:w};if(f){let k;if(Al(f)?(k="argmax",w=ye({op:"argmax",field:f.argmax},{forAs:!0}),b.field=`${w}.${u}`):Zs(f)?(k="argmin",w=ye({op:"argmin",field:f.argmin},{forAs:!0}),b.field=`${w}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(k=f),k){const _={op:k,as:w};u&&(_.field=u),o.push(_)}}else if(n.push(w),xr(a)&&_t(h)){if(r.push({bin:h,field:u,as:w}),n.push(ye(a,{binSuffix:"end"})),e0(a,l)&&n.push(ye(a,{binSuffix:"range"})),Qt(l)){const k={field:`${w}_end`};s[`${l}2`]=k}b.bin="binned",TU(l)||(b.type=Bu)}else if(p&&!lc(p)){i.push({timeUnit:p,field:u,as:w});const k=xr(a)&&a.type!==qf&&"time";k&&(l===Hg||l===Iu?b.formatType=k:Mye(l)?b.legend={formatType:k,...b.legend}:Qt(l)&&(b.axis={formatType:k,...b.axis}))}s[l]=b}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function Axe(e,t,n){const r=Oye(t,n);if(r){if(r==="binned"){const i=e[t===xo?Dt:_n];return!!(de(i)&&de(e[t])&&An(i.bin))}}else return!1;return!0}function Txe(e,t,n,r){const i={};for(const o of ae(e))AU(o)||fe(_ve(o));for(let o of Aye){if(!e[o])continue;const s=e[o];if(Gg(o)){const a=$ye(o),l=i[a];if(de(l)&&S2e(l.type)&&de(s)&&!l.timeUnit){fe(xve(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(fe(vve),o=Di),!Axe(e,o,t)){fe(H2(o,t));continue}if(o===oa&&t==="line"){const a=fo(e[o]);if(a!=null&&a.aggregate){fe(Sve);continue}}if(o===Lr&&(n?"fill"in e:"stroke"in e)){fe(VU("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===Vg||o===Uf&&!ie(s)&&!co(s)||o===Iu&&ie(s)){if(s){if(o===Uf){const a=e[o];if(Rq(a)){i[o]=a;continue}}i[o]=xe(s).reduce((a,l)=>(de(l)?a.push(B5(l,o)):fe(v_(l,o)),a),[])}}else{if(o===Iu&&s===null)i[o]=null;else if(!de(s)&&!gs(s)&&!co(s)&&!Zg(s)&&!Re(s)){fe(v_(s,o));continue}i[o]=Pq(s,o,r)}}return i}function ix(e,t){const n={};for(const r of ae(e)){const i=Pq(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Rxe(e){const t=[];for(const n of ae(e))if(bu(e,n)){const r=e[n],i=xe(r);for(const o of i)de(o)?t.push(o):ex(o)&&t.push(o.condition)}return t}function U5(e,t,n){if(e)for(const r of ae(e)){const i=e[r];if(ie(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function Nxe(e,t,n,r){return e?ae(e).reduce((i,o)=>{const s=e[o];return ie(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function Hq(e,t){return ae(t).reduce((n,r)=>{switch(r){case Dt:case _n:case z2:case B2:case j2:case xo:case cs:case El:case Ed:case Di:case ia:case wo:case ra:case kl:case bo:case Eo:case ko:case Fi:case Hg:case Ir:case rc:case Iu:return n;case Uf:if(e==="line"||e==="trail")return n;case Vg:case I2:{const i=t[r];if(ie(i)||de(i))for(const o of xe(i))o.aggregate||n.push(ye(o,{}));return n}case oa:if(e==="trail")return n;case Lr:case fs:case ds:case sa:case Sl:case _l:case $l:case Cl:{const i=fo(t[r]);return i&&!i.aggregate&&n.push(ye(i,{})),n}}},[])}function Fxe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ie(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ie(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function E_(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${q5(t)}`:"";return{field:s+t.field,type:t.type,title:Re(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=Rxe(n).map(pxe);return{tooltip:[...i,...zo(o,Je)]}}function q5(e){const{title:t,field:n}=e;return Kt(t,n)}function W5(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:f=void 0,extraEncoding:h={}})=>{const p=q5(n);return Vq(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...we(f)?{[`${t}2`]:{field:`${f}_${n.field}`}}:{},...r,...h}})}}function Vq(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...es(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...gl(e[t])?{}:e[t]}}]:[]}function Gq(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:Ym(o,n),continuousAxisChannelDef2:Ym(s,n),continuousAxisChannelDefError:Ym(a,n),continuousAxisChannelDefError2:Ym(l,n),continuousAxis:i}}function Ym(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&fe(Jve(n,t)),r}else return e}function Yq(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(es(n)&&n.orient)return n.orient;if(Ga(i)){if(Ga(o)){const s=de(i)&&i.aggregate,a=de(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Gf(o)&&!Gf(i)?"horizontal":"vertical"}return"horizontal"}else{if(Ga(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const ov="boxplot",Mxe=["box","median","outliers","rule","ticks"],Dxe=new rx(ov,Kq);function Xq(e){return lt(e)?"tukey":e}function Kq(e,{config:t}){e={...e,encoding:ix(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=es(n)?n:{type:n};i&&fe(WU("boxplot"));const l=a.extent??t.boxplot.extent,u=wt("size",a,t),f=a.invalid,h=Xq(l),{bins:p,timeUnits:m,transform:y,continuousAxisChannelDef:v,continuousAxis:w,groupby:b,aggregate:k,encodingWithoutContinuousAxis:_,ticksOrient:C,boxOrient:$,customTooltipWithoutAggregatedField:R}=Oxe(e,l,t),A=bd(v.field),{color:N,size:F,...L}=_,O=Ur=>W5(a,w,v,Ur,t.boxplot),K=O(L),W=O(_),j=(Ee(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",M=O({...L,...F?{size:F}:{},color:{condition:{test:`${mt(`lower_box_${v.field}`)} >= ${mt(`upper_box_${v.field}`)}`,...N||{value:j}}}}),U=E_([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],v,_),X={type:"tick",color:"black",opacity:1,orient:C,invalid:f,aria:!1},q=h==="min-max"?U:E_([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],v,_),H=[...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:q}),...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:q}),...K({partName:"ticks",mark:X,positionPrefix:"lower_whisker",extraEncoding:q}),...K({partName:"ticks",mark:X,positionPrefix:"upper_whisker",extraEncoding:q})],J=[...h!=="tukey"?H:[],...W({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:$,invalid:f,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...M({partName:"median",mark:{type:"tick",invalid:f,...Ee(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:C,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(y),layer:J};const I=mt(`lower_box_${v.field}`),G=mt(`upper_box_${v.field}`),ve=`(${G} - ${I})`,Ce=`${I} - ${l} * ${ve}`,be=`${G} + ${l} * ${ve}`,Be=mt(v.field),nt={joinaggregate:Qq(v.field),groupby:b},Xe={transform:[{filter:`(${Ce} <= ${Be}) && (${Be} <= ${be})`},{aggregate:[{op:"min",field:v.field,as:`lower_whisker_${A}`},{op:"max",field:v.field,as:`upper_whisker_${A}`},{op:"min",field:`lower_box_${v.field}`,as:`lower_box_${A}`},{op:"max",field:`upper_box_${v.field}`,as:`upper_box_${A}`},...k],groupby:b}],layer:H},{tooltip:he,...Oe}=L,{scale:He,axis:ue}=v,jt=q5(v),it=Vq(a,"outliers",t.boxplot,{transform:[{filter:`(${Be} < ${Ce}) || (${Be} > ${be})`}],mark:"point",encoding:{[w]:{field:v.field,type:v.type,...jt!==void 0?{title:jt}:{},...He!==void 0?{scale:He}:{},...ue!==void 0?{axis:ue}:{}},...Oe,...N?{color:N}:{},...R?{tooltip:R}:{}}})[0];let Vt;const nn=[...p,...m,nt];return it?Vt={transform:nn,layer:[it,Xe]}:(Vt=Xe,Vt.transform.unshift(...nn)),{...s,layer:[Vt,{transform:y,layer:J}]}}function Qq(e){const t=bd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Oxe(e,t,n){const r=Yq(e,ov),{continuousAxisChannelDef:i,continuousAxis:o}=Gq(e,r,ov),s=i.field,a=bd(s),l=Xq(t),u=[...Qq(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],f=l==="min-max"||l==="tukey"?[]:[{calculate:`${mt(`upper_box_${a}`)} - ${mt(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${mt(`upper_box_${a}`)} + ${mt(`iqr_${a}`)} * ${t}, ${mt(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${mt(`lower_box_${a}`)} - ${mt(`iqr_${a}`)} * ${t}, ${mt(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:m,filteredEncoding:y}=Fxe(p),{bins:v,timeUnits:w,aggregate:b,groupby:k,encoding:_}=Wq(y,n),C=r==="vertical"?"horizontal":"vertical",$=r,R=[...v,...w,{aggregate:[...b,...u],groupby:k},...f];return{bins:v,timeUnits:w,transform:R,groupby:k,aggregate:b,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:_,ticksOrient:C,boxOrient:$,customTooltipWithoutAggregatedField:m}}const H5="errorbar",Pxe=["ticks","rule"],Lxe=new rx(H5,Zq);function Zq(e,{config:t}){e={...e,encoding:ix(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=Jq(e,H5,t);delete o.size;const f=W5(a,i,r,o,t.errorbar),h=a.thickness,p=a.size,m={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},y=[...f({partName:"ticks",mark:m,positionPrefix:"lower",extraEncoding:u}),...f({partName:"ticks",mark:m,positionPrefix:"upper",extraEncoding:u}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...y.length>1?{layer:y}:{...y[0]}}}function Ixe(e,t){const{encoding:n}=e;if(zxe(n))return{orient:Yq(e,t),inputType:"raw"};const r=jxe(n),i=Bxe(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(We(a)&&We(l))throw new Error(`${t} cannot have both x2 and y2`);if(We(a)){if(Ga(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(We(l)){if(Ga(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,f=n.yError2;if(We(l)&&!We(a))throw new Error(`${t} cannot have xError2 without xError`);if(We(f)&&!We(u))throw new Error(`${t} cannot have yError2 without yError`);if(We(a)&&We(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(We(a)){if(Ga(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(We(u)){if(Ga(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function zxe(e){return(We(e.x)||We(e.y))&&!We(e.x2)&&!We(e.y2)&&!We(e.xError)&&!We(e.xError2)&&!We(e.yError)&&!We(e.yError2)}function jxe(e){return We(e.x2)||We(e.y2)}function Bxe(e){return We(e.xError)||We(e.xError2)||We(e.yError)||We(e.yError2)}function Jq(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=es(r)?r:{type:r};o&&fe(WU(t));const{orient:u,inputType:f}=Ixe(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:y,continuousAxis:v}=Gq(e,u,t),{errorBarSpecificAggregate:w,postAggregateCalculates:b,tooltipSummary:k,tooltipTitleWithFieldName:_}=Uxe(l,h,p,m,y,f,t,n),{[v]:C,[v==="x"?"x2":"y2"]:$,[v==="x"?"xError":"yError"]:R,[v==="x"?"xError2":"yError2"]:A,...N}=i,{bins:F,timeUnits:L,aggregate:O,groupby:K,encoding:W}=Wq(N,n),j=[...O,...w],M=f!=="raw"?[]:K,U=E_(k,h,W,_);return{transform:[...a.transform??[],...F,...L,...j.length===0?[]:[{aggregate:j,groupby:M}],...b],groupby:M,continuousAxisChannelDef:h,continuousAxis:v,encodingWithoutContinuousAxis:W,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:U}}function Uxe(e,t,n,r,i,o,s,a){let l=[],u=[];const f=t.field;let h,p=!1;if(o==="raw"){const m=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,y=e.extent?e.extent:m==="mean"?"stderr":"iqr";if(m==="median"!=(y==="iqr")&&fe(Zve(m,y,s)),y==="stderr"||y==="stdev")l=[{op:y,field:f,as:`extent_${f}`},{op:m,field:f,as:`center_${f}`}],u=[{calculate:`${mt(`center_${f}`)} + ${mt(`extent_${f}`)}`,as:`upper_${f}`},{calculate:`${mt(`center_${f}`)} - ${mt(`extent_${f}`)}`,as:`lower_${f}`}],h=[{fieldPrefix:"center_",titlePrefix:Wg(m)},{fieldPrefix:"upper_",titlePrefix:a8(m,y,"+")},{fieldPrefix:"lower_",titlePrefix:a8(m,y,"-")}],p=!0;else{let v,w,b;y==="ci"?(v="mean",w="ci0",b="ci1"):(v="median",w="q1",b="q3"),l=[{op:w,field:f,as:`lower_${f}`},{op:b,field:f,as:`upper_${f}`},{op:v,field:f,as:`center_${f}`}],h=[{fieldPrefix:"upper_",titlePrefix:gf({field:f,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:gf({field:f,aggregate:w,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:gf({field:f,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&fe(Qve(e.center,e.extent)),o==="aggregated-upper-lower"?(h=[],u=[{calculate:mt(n.field),as:`upper_${f}`},{calculate:mt(f),as:`lower_${f}`}]):o==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:f}],u=[{calculate:`${mt(f)} + ${mt(r.field)}`,as:`upper_${f}`}],i?u.push({calculate:`${mt(f)} + ${mt(i.field)}`,as:`lower_${f}`}):u.push({calculate:`${mt(f)} - ${mt(r.field)}`,as:`lower_${f}`}));for(const m of u)h.push({fieldPrefix:m.as.substring(0,6),titlePrefix:Lu(Lu(m.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:p}}function a8(e,t,n){return`${Wg(e)} ${n} ${t}`}const V5="errorband",qxe=["band","borders"],Wxe=new rx(V5,eW);function eW(e,{config:t}){e={...e,encoding:ix(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=Jq(e,V5,t),u=s,f=W5(u,i,r,o,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},m={type:h?"line":"rule"};const y={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return h?(p={...p,...y,ariaRoleDescription:"errorband"},m={...m,...y,aria:!1}):u.interpolate?fe(ZD("interpolate")):u.tension&&fe(ZD("tension")),{...a,transform:n,layer:[...f({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...f({partName:"borders",mark:m,positionPrefix:"lower",extraEncoding:l}),...f({partName:"borders",mark:m,positionPrefix:"upper",extraEncoding:l})]}}const tW={};function G5(e,t,n){const r=new rx(e,t);tW[e]={normalizer:r,parts:n}}function Hxe(){return ae(tW)}G5(ov,Kq,Mxe);G5(H5,Zq,Pxe);G5(V5,eW,qxe);const Vxe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],nW={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},rW={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Gxe=ae(nW),Yxe=ae(rW),Xxe={header:1,headerRow:1,headerColumn:1,headerFacet:1},iW=ae(Xxe),oW=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Kxe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Qxe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ho="_vgsid_",Zxe={point:{on:"click",fields:[ho],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Y5(e){return e==="legend"||!!(e!=null&&e.legend)}function HE(e){return Y5(e)&&Ee(e)}function X5(e){return!!(e!=null&&e.select)}function sW(e){const t=[];for(const n of e||[]){if(X5(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function Jxe(e){return ox(e)||Q5(e)||K5(e)}function K5(e){return le(e,"concat")}function ox(e){return le(e,"vconcat")}function Q5(e){return le(e,"hconcat")}function aW({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ts(e){return le(e,"step")}function l8(e){return le(e,"view")||le(e,"width")||le(e,"height")}const u8=20,ewe={align:1,bounds:1,center:1,columns:1,spacing:1},twe=ae(ewe);function nwe(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(J2(e)&&!Qg(e.facet)||K5(e))&&(i.columns=s),ox(e)&&(i.columns=1);for(const a of twe)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=lt(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function k_(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function S_(e,t){const n=sv(e,t);return ts(n)?n.step:lW}function sv(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Kt(n,{step:e.step})}const lW=20,rwe={continuousWidth:300,continuousHeight:300,step:lW},iwe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:rwe,mark:X2e,arc:{},area:{},bar:J2e,circle:{},geoshape:{},image:{},line:{},point:{},rect:F5,rule:{color:"black"},square:{},text:{color:"black"},tick:exe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:R2e,projection:{},legend:Kxe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Zxe,style:{},title:{},facet:{spacing:u8},concat:{spacing:u8},normalizedNumberFormat:".0%"},$s=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],c8={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},f8={blue:$s[0],orange:$s[1],red:$s[2],teal:$s[3],green:$s[4],yellow:$s[5],purple:$s[6],pink:$s[7],brown:$s[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function owe(e={}){return{signals:[{name:"color",value:Ee(e)?{...f8,...e}:f8}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function swe(e){return{signals:[{name:"fontSize",value:Ee(e)?{...c8,...e}:c8}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function awe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function uW(e){const t=ae(e||{}),n={};for(const r of t){const i=e[r];n[r]=t0(i)?LU(i):Kr(i)}return n}function lwe(e){const t=ae(e),n={};for(const r of t)n[r]=uW(e[r]);return n}const uwe=[...vq,...jq,...iW,"background","padding","legend","lineBreak","scale","style","title","view"];function cW(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=id({},qe(iwe),n?awe(n):{},t?owe(t):{},r?swe(r):{},o||{});i&&od(s,"selection",i,!0);const a=ni(s,uwe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Kr(s[l]));for(const l of vq)s[l]&&(a[l]=Tn(s[l]));for(const l of jq)s[l]&&(a[l]=uW(s[l]));for(const l of iW)s[l]&&(a[l]=Tn(s[l]));if(s.legend&&(a.legend=Tn(s.legend)),s.scale){const{invalid:l,...u}=s.scale,f=Tn(l,{level:1});a.scale={...Tn(u),...ae(f).length>0?{invalid:f}:{}}}return s.style&&(a.style=lwe(s.style)),s.title&&(a.title=Tn(s.title)),s.view&&(a.view=Tn(s.view)),a}const cwe=new Set(["view",...q2e]),fwe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],dwe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Y2e};function hwe(e){e=qe(e);for(const t of fwe)delete e[t];if(e.axis)for(const t in e.axis)t0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Vxe)delete e.legend[t];if(e.mark){for(const t of e8)delete e.mark[t];e.mark.tooltip&&Ee(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(sW(e.params)),delete e.params);for(const t of cwe){for(const r of e8)delete e[t][r];const n=dwe[t];if(n)for(const r of n)delete e[t][r];gwe(e,t)}for(const t of Hxe())delete e[t];pwe(e);for(const t in e)Ee(e[t])&&kt(e[t])&&delete e[t];return kt(e)?void 0:e}function pwe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=PU(e.title);kt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),kt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),kt(r)?delete e.title:e.title=r}function gwe(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};kt(o)||(e.style[n??t]=o),delete e[t]}function sx(e){return le(e,"layer")}function mwe(e){return le(e,"repeat")}function ywe(e){return!ie(e.repeat)&&le(e.repeat,"layer")}class Z5{map(t,n){return J2(t)?this.mapFacet(t,n):mwe(t)?this.mapRepeat(t,n):Q5(t)?this.mapHConcat(t,n):ox(t)?this.mapVConcat(t,n):K5(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(sx(t))return this.mapLayer(t,n);if(la(t))return this.mapUnit(t,n);throw new Error(h5(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const vwe={zero:1,center:1,normalize:1};function xwe(e){return ke(vwe,e)}const wwe=new Set([gq,X2,Y2,Jy,Q2,R5,N5,K2,mq,T5]),bwe=new Set([X2,Y2,gq]);function Yc(e){return de(e)&&Hf(e)==="quantitative"&&!e.bin}function d8(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(de(s)&&de(a))if(Yc(s)&&Yc(a)){if(s.stack)return t;if(a.stack)return i;const l=de(s)&&!!s.aggregate,u=de(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Yc(s))return t;if(Yc(a))return i}else{if(Yc(s))return o&&n==="vertical"?void 0:t;if(Yc(a))return o&&n==="horizontal"?void 0:i}}function Ewe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function fW(e,t){var v,w;const n=es(e)?e:{type:e},r=n.type;if(!wwe.has(r))return null;const i=d8(t,"x",n)||d8(t,"theta",n);if(!i)return null;const o=t[i],s=de(o)?ye(o,{}):void 0,a=Ewe(i),l=[],u=new Set;if(t[a]){const b=t[a],k=de(b)?ye(b,{}):void 0;k&&k!==s&&(l.push(a),u.add(k))}const f=a==="x"?"xOffset":"yOffset",h=t[f],p=de(h)?ye(h,{}):void 0;p&&p!==s&&(l.push(f),u.add(p));const m=Tye.reduce((b,k)=>{if(k!=="tooltip"&&bu(t,k)){const _=t[k];for(const C of xe(_)){const $=fo(C);if($.aggregate)continue;const R=ye($,{});(!R||!u.has(R))&&b.push({channel:k,fieldDef:$})}}return b},[]);let y;return o.stack!==void 0?gl(o.stack)?y=o.stack?"zero":null:y=o.stack:bwe.has(r)&&(y="zero"),!y||!xwe(y)||qq(t)&&m.length===0?null:((v=o==null?void 0:o.scale)!=null&&v.type&&((w=o==null?void 0:o.scale)==null?void 0:w.type)!==Rn.LINEAR&&o!=null&&o.stack&&fe(Yve(o.scale.type)),We(t[hs(i)])?(o.stack!==void 0&&fe(Gve(i)),null):(de(o)&&o.aggregate&&!Uye.has(o.aggregate)&&fe(Xve(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:Tl(r),stackBy:m,offset:y}))}function dW(e,t,n){const r=Tn(e),i=wt("orient",r,n);if(r.orient=Cwe(r.type,t,i),i!==void 0&&i!==r.orient&&fe(Nve(r.orient,i)),r.type==="bar"&&r.orient){const l=wt("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Q2e[r.orient];for(const f of u)r[f]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=wt("opacity",r,n),s=wt("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=Swe(r.type,t)),wt("cursor",r,n)===void 0&&(r.cursor=kwe(r,t,n)),r}function kwe(e,t,n){return t.href||e.href||wt("href",e,n)?"pointer":e.cursor}function Swe(e,t){if(Ze([Q2,T5,R5,N5],e)&&!qq(t))return .7}function _we(e,t,{graticule:n}){if(n)return!1;const r=Jo("filled",e,t),i=e.type;return Kt(r,i!==Q2&&i!==K2&&i!==Jy)}function Cwe(e,t,n){switch(e){case Q2:case R5:case N5:case mq:case B2e:case j2e:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case X2:if(de(r)&&(An(r.bin)||de(i)&&i.aggregate&&!r.aggregate))return"vertical";if(de(i)&&(An(i.bin)||de(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(de(r)&&r.type===Bu&&!_t(r.bin)||tv(r))&&de(i)&&An(i.bin)?"horizontal":"vertical";if(!s)return(de(i)&&i.type===Bu&&!_t(i.bin)||tv(i))&&de(r)&&An(r.bin)?"vertical":"horizontal"}case Jy:if(o&&!(de(r)&&An(r.bin))&&s&&!(de(i)&&An(i.bin)))return;case Y2:if(s)return de(i)&&An(i.bin)?"horizontal":"vertical";if(o)return de(r)&&An(r.bin)?"vertical":"horizontal";if(e===Jy){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case K2:case T5:{const a=i8(r),l=i8(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=xr(r)&&r.type===qf,f=xr(i)&&i.type===qf;if(u&&!f)return"vertical";if(!u&&f)return"horizontal"}return}}return"vertical"}function $we(e){const{point:t,line:n,...r}=e;return ae(r).length>1?r:r.type}function Awe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ni(e[t],["point","line"])});return e}function VE(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ee(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ee(t.point)?t.point:{}:void 0}function h8(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Twe{constructor(){ee(this,"name","path-overlay")}hasMatchingType(t,n){if(la(t)){const{mark:r,encoding:i}=t,o=es(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!VE(o,n[o.type],i);case"area":return!!VE(o,n[o.type],i)||!!h8(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...f}=t,h=ix(u,i),p=es(a)?a:{type:a},m=VE(p,i[p.type],h),y=p.type==="area"&&h8(p,i[p.type]),v=[{name:l,...o?{params:o}:{},mark:$we({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:ni(h,["shape"])}],w=fW(dW(p,h,i),h);let b=h;if(w){const{fieldChannel:k,offset:_}=w;b={...h,[k]:{...h[k],..._?{stack:_}:{}}}}return b=ni(b,["y2","x2"]),y&&v.push({...s?{projection:s}:{},mark:{type:"line",...zf(p,["clip","interpolate","tension","tooltip"]),...y},encoding:b}),m&&v.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...zf(p,["clip","tooltip"]),...m},encoding:b}),r({...f,layer:v},{...n,config:Awe(i)})}}function Rwe(e,t){return t?Qg(e)?pW(e,t):hW(e,t):e}function GE(e,t){return t?pW(e,t):e}function __(e,t,n){const r=t[e];if(dxe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};fe(lve(r.repeat));return}return t}function hW(e,t){if(e=__("field",e,t),e!==void 0){if(e===null)return null;if(I5(e)&&Hs(e.sort)){const n=__("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function p8(e,t){if(de(e))return hW(e,t);{const n=__("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function g8(e,t){if(We(e)){const n=p8(e,t);if(n)return n;if(Zg(e))return{condition:e.condition}}else{if(Jg(e)){const n=p8(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function pW(e,t){const n={};for(const r in e)if(le(e,r)){const i=e[r];if(ie(i))n[r]=i.map(o=>g8(o,t)).filter(o=>o);else{const o=g8(i,t);o!==void 0&&(n[r]=o)}}return n}class Nwe{constructor(){ee(this,"name","RuleForRangedLine")}hasMatchingType(t){if(la(t)){const{encoding:n,mark:r}=t;if(r==="line"||es(r)&&r.type==="line")for(const i of Cye){const o=ic(i),s=n[o];if(n[i]&&(de(s)&&!An(s.bin)||gs(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return fe(Rve(!!i.x2,!!i.y2)),r({...t,mark:Ee(o)?{...o,type:"rule"}:"rule"},n)}}class Fwe extends Z5{constructor(){super(...arguments);ee(this,"nonFacetUnitNormalizers",[Dxe,Lxe,Wxe,new Twe,new Nwe])}map(n,r){if(la(n)){const i=bu(n.encoding,qs),o=bu(n.encoding,Ws),s=bu(n.encoding,L2);if(i||o||s)return this.mapFacetedUnit(n,r)}return super.map(n,r)}mapUnit(n,r){const{parentEncoding:i,parentProjection:o}=r,s=GE(n.encoding,r.repeater),a={...n,...n.name?{name:[r.repeaterPrefix,n.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(i||o)return this.mapUnitWithParentEncodingOrProjection(a,r);const l=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(a,r.config))return u.run(a,r,l);return a}mapRepeat(n,r){return ywe(n)?this.mapLayerRepeat(n,r):this.mapNonLayerRepeat(n,r)}mapLayerRepeat(n,r){const{repeat:i,spec:o,...s}=n,{row:a,column:l,layer:u}=i,{repeater:f={},repeaterPrefix:h=""}=r;return a||l?this.mapRepeat({...n,repeat:{...a?{row:a}:{},...l?{column:l}:{}},spec:{repeat:{layer:u},spec:o}},r):{...s,layer:u.map(p=>{const m={...f,layer:p},y=`${(o.name?`${o.name}_`:"")+h}child__layer_${Ft(p)}`,v=this.mapLayerOrUnit(o,{...r,repeater:m,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(n,r){const{repeat:i,spec:o,data:s,...a}=n;!ie(i)&&n.columns&&(n=ni(n,["columns"]),fe(YD("repeat")));const l=[],{repeater:u={},repeaterPrefix:f=""}=r,h=!ie(i)&&i.row||[u?u.row:null],p=!ie(i)&&i.column||[u?u.column:null],m=ie(i)&&i||[u?u.repeat:null];for(const v of m)for(const w of h)for(const b of p){const k={repeat:v,row:w,column:b,layer:u.layer},_=`${(o.name?`${o.name}_`:"")+f}child__${ie(i)?`${Ft(v)}`:(i.row?`row_${Ft(w)}`:"")+(i.column?`column_${Ft(b)}`:"")}`,C=this.map(o,{...r,repeater:k,repeaterPrefix:_});C.name=_,l.push(ni(C,["data"]))}const y=ie(i)?n.columns:i.column?i.column.length:1;return{data:o.data??s,align:"all",...a,columns:y,concat:l}}mapFacet(n,r){const{facet:i}=n;return Qg(i)&&n.columns&&(n=ni(n,["columns"]),fe(YD("facet"))),super.mapFacet(n,r)}mapUnitWithParentEncodingOrProjection(n,r){const{encoding:i,projection:o}=n,{parentEncoding:s,parentProjection:a,config:l}=r,u=y8({parentProjection:a,projection:o}),f=m8({parentEncoding:s,encoding:GE(i,r.repeater)});return this.mapUnit({...n,...u?{projection:u}:{},...f?{encoding:f}:{}},{config:l})}mapFacetedUnit(n,r){const{row:i,column:o,facet:s,...a}=n.encoding,{mark:l,width:u,projection:f,height:h,view:p,params:m,encoding:y,...v}=n,{facetMapping:w,layout:b}=this.getFacetMappingAndLayout({row:i,column:o,facet:s},r),k=GE(a,r.repeater);return this.mapFacet({...v,...b,facet:w,spec:{...u?{width:u}:{},...h?{height:h}:{},...p?{view:p}:{},...f?{projection:f}:{},mark:l,encoding:k,...m?{params:m}:{}}},r)}getFacetMappingAndLayout(n,r){const{row:i,column:o,facet:s}=n;if(i||o){s&&fe(Ave([...i?[qs]:[],...o?[Ws]:[]]));const a={},l={};for(const u of[qs,Ws]){const f=n[u];if(f){const{align:h,center:p,spacing:m,columns:y,...v}=f;a[u]=v;for(const w of["align","center","spacing"])f[w]!==void 0&&(l[w]??(l[w]={}),l[w][u]=f[w])}}return{facetMapping:a,layout:l}}else{const{align:a,center:l,spacing:u,columns:f,...h}=s;return{facetMapping:Rwe(h,r.repeater),layout:{...a?{align:a}:{},...l?{center:l}:{},...u?{spacing:u}:{},...f?{columns:f}:{}}}}}mapLayer(n,{parentEncoding:r,parentProjection:i,...o}){const{encoding:s,projection:a,...l}=n,u={...o,parentEncoding:m8({parentEncoding:r,encoding:s,layer:!0}),parentProjection:y8({parentProjection:i,projection:a})};return super.mapLayer({...l,...n.name?{name:[u.repeaterPrefix,n.name].filter(f=>f).join("_")}:{}},u)}}function m8({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ae(e),...ae(t)]);for(const o of i){const s=t[o],a=e[o];if(We(s)){const l={...a,...s};r[o]=l}else Jg(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||co(a)||Re(a)||We(a)||ie(a))&&(r[o]=a)}}else r=t;return!r||kt(r)?void 0:r}function y8(e){const{parentProjection:t,projection:n}=e;return t&&n&&fe(yve({parentProjection:t,projection:n})),n??t}function J5(e){return le(e,"filter")}function Mwe(e){return le(e,"stop")}function gW(e){return le(e,"lookup")}function Dwe(e){return le(e,"data")}function Owe(e){return le(e,"param")}function Pwe(e){return le(e,"pivot")}function Lwe(e){return le(e,"density")}function Iwe(e){return le(e,"quantile")}function zwe(e){return le(e,"regression")}function jwe(e){return le(e,"loess")}function Bwe(e){return le(e,"sample")}function Uwe(e){return le(e,"window")}function qwe(e){return le(e,"joinaggregate")}function Wwe(e){return le(e,"flatten")}function Hwe(e){return le(e,"calculate")}function mW(e){return le(e,"bin")}function Vwe(e){return le(e,"impute")}function Gwe(e){return le(e,"timeUnit")}function Ywe(e){return le(e,"aggregate")}function Xwe(e){return le(e,"stack")}function Kwe(e){return le(e,"fold")}function Qwe(e){return le(e,"extent")&&!le(e,"density")&&!le(e,"regression")}function Zwe(e){return e.map(t=>J5(t)?{filter:hf(t.filter,k2e)}:t)}class Jwe extends Z5{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=v8(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=v8(t,n),t.encoding){const r={};for(const[i,o]of cl(t.encoding))r[i]=yW(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:cl(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...f}=s;f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[o]=u!=="none";for(const h of en(n.selectionPredicates[o]??{}))h.empty=u!=="none";return{name:o,value:a,select:f,bind:l}})}:t}}function v8(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(J5(o))return{filter:C_(o,t)};if(mW(o)&&oc(o.bin))return{...o,bin:vW(o.bin)};if(gW(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function yW(e,t){var r,i;const n=qe(e);if(de(n)&&oc(n.bin)&&(n.bin=vW(n.bin)),uc(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(Zg(n))if(ie(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:C_(o,t)}});else{const{selection:o,param:s,test:a,...l}=yW(n.condition,t);n.condition=s?n.condition:{...l,test:C_(n.condition,t)}}return n}function vW(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function C_(e,t){const n=r=>hf(r,i=>{var a;const o=t.emptySelections[i]??!0,s={param:i,empty:o};return(a=t.selectionPredicates)[i]??(a[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):hf(e.test||e.filter,r=>r.selection?n(r.selection):r)}class $_ extends Z5{map(t,n){const r=n.selections??[];if(t.params&&!la(t)){const i=[];for(const o of t.params)X5(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(we(a)&&(a===t.name||i.includes(a))||ie(a)&&a.map(l=>i.indexOf(l)).every((l,u,f)=>l!==-1&&(u===0||l>f[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=$_.prototype[e];$_.prototype[e]=function(n,r){return t.call(this,n,ebe(n,r))}}function ebe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function xW(e,t){t===void 0&&(t=cW(e.config));const n=ibe(e,t),{width:r,height:i}=e,o=obe(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const tbe=new Fwe,nbe=new Jwe,rbe=new $_;function ibe(e,t={}){const n={config:t};return rbe.map(tbe.map(nbe.map(e,n),n),n)}function x8(e){return we(e)?{type:e}:e??{}}function obe(e,t,n){let{width:r,height:i}=t;const o=la(e)||sx(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(fe(WD("width")),r=void 0),i=="container"&&(fe(WD("height")),i=void 0));const a={type:"pad",...s,...n?x8(n.autosize):{},...x8(e.autosize)};if(a.type==="fit"&&!o&&(fe(Qye),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&fe(HD("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&fe(HD("height")),!Zr(a,{type:"pad"}))return a}function sbe(e){return["fit","fit-x","fit-y"].includes(e)}function abe(e){return e?`fit-${U2(e)}`:"fit"}const lbe=["background","padding"];function w8(e,t){const n={};for(const r of lbe)e&&e[r]!==void 0&&(n[r]=Kr(e[r]));return t&&(n.params=e.params),n}class ua{constructor(t={},n={}){ee(this,"explicit");ee(this,"implicit");this.explicit=t,this.implicit=n}clone(){return new ua(qe(this.explicit),qe(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Kt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ae(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Do(e){return{explicit:!0,value:e}}function Gr(e){return{explicit:!1,value:e}}function wW(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:ax(t,n,r,i)}}function ax(e,t,n,r){return e.explicit&&t.explicit&&fe(jve(n,r,e.value,t.value)),e}function hl(e,t,n,r,i=ax){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Zr(e.value,t.value)?e:i(e,t,n,r)}class ube extends ua{constructor(n={},r={},i=!1){super(n,r);ee(this,"explicit");ee(this,"implicit");ee(this,"parseNothing");this.explicit=n,this.implicit=r,this.parseNothing=i}clone(){const n=super.clone();return n.parseNothing=this.parseNothing,n}}function Yf(e){return le(e,"url")}function og(e){return le(e,"values")}function bW(e){return le(e,"name")&&!Yf(e)&&!og(e)&&!Ja(e)}function Ja(e){return e&&(EW(e)||kW(e)||eT(e))}function EW(e){return le(e,"sequence")}function kW(e){return le(e,"sphere")}function eT(e){return le(e,"graticule")}var zt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(zt||(zt={}));function SW({invalid:e,isPath:t}){switch(xq(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function cbe(e){const{marks:t,scales:n}=SW(e);return t===n?zt.Main:n==="include-invalid-values"?zt.PreFilterInvalid:zt.PostFilterInvalid}class xt{constructor(t,n){ee(this,"debugName");ee(this,"_children",[]);ee(this,"_parent",null);ee(this,"_hash");this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){fe(pve);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Mr extends xt{constructor(n,r,i,o){super(n,r);ee(this,"type");ee(this,"refCounts");ee(this,"_source");ee(this,"_name");this.type=i,this.refCounts=o,this._source=this._name=r,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const n=new this.constructor;return n.debugName=`clone_${this.debugName}`,n._source=this._source,n._name=`clone_${this._name}`,n.type=this.type,n.refCounts=this.refCounts,n.refCounts[n._name]=0,n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${wU()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(n){this._source=n}}function YE(e){return e.as!==void 0}function b8(e){return`${e}_end`}class Wo extends xt{constructor(n,r){super(n);ee(this,"timeUnits");this.timeUnits=r}clone(){return new Wo(null,qe(this.timeUnits))}static makeFromEncoding(n,r){const i=r.reduceFieldDef((o,s,a)=>{const{field:l,timeUnit:u}=s;if(u){let f;if(lc(u)){if(It(r)){const{mark:h,markDef:p,config:m}=r,y=dl({fieldDef:s,markDef:p,config:m});(ig(h)||y)&&(f={timeUnit:En(u),field:l})}}else f={as:ye(s,{forAs:!0}),field:l,timeUnit:u};if(It(r)){const{mark:h,markDef:p,config:m}=r,y=dl({fieldDef:s,markDef:p,config:m});ig(h)&&Qt(a)&&y!==.5&&(f.rectBandPosition=y)}f&&(o[Je(f)]=f)}return o},{});return kt(i)?null:new Wo(n,i)}static makeFromTransform(n,r){const{timeUnit:i,...o}={...r},s=En(i),a={...o,timeUnit:s};return new Wo(n,{[Je(a)]:a})}merge(n){this.timeUnits={...this.timeUnits};for(const r in n.timeUnits)this.timeUnits[r]||(this.timeUnits[r]=n.timeUnits[r]);for(const r of n.children)n.removeChild(r),r.parent=this;n.remove()}removeFormulas(n){const r={};for(const[i,o]of cl(this.timeUnits)){const s=YE(o)?o.as:`${o.field}_end`;n.has(s)||(r[i]=o)}this.timeUnits=r}producedFields(){return new Set(en(this.timeUnits).map(n=>YE(n)?n.as:b8(n.field)))}dependentFields(){return new Set(en(this.timeUnits).map(n=>n.field))}hash(){return`TimeUnit ${Je(this.timeUnits)}`}assemble(){const n=[];for(const r of en(this.timeUnits)){const{rectBandPosition:i}=r,o=En(r.timeUnit);if(YE(r)){const{field:s,as:a}=r,{unit:l,utc:u,...f}=o,h=[a,`${a}_end`];n.push({field:Ni(s),type:"timeunit",...l?{units:V2(l)}:{},...u?{timezone:"utc"}:{},...f,as:h}),n.push(...E8(h,i,o))}else if(r){const{field:s}=r,a=s.replaceAll("\\.","."),l=_W({timeUnit:o,field:a}),u=b8(a);n.push({type:"formula",expr:l,as:u}),n.push(...E8([a,u],i,o))}}return n}}const lx="offsetted_rect_start",ux="offsetted_rect_end";function _W({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=tq(r),{part:s,step:a}=oq(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', ${mt(t)}, ${n?-a:a})`}function E8([e,t],n,r){if(n!==void 0&&n!==.5){const i=mt(e),o=mt(t);return[{type:"formula",expr:k8([_W({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${lx}`},{type:"formula",expr:k8([i,o],n+.5),as:`${e}_${ux}`}]}return[]}function k8([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const n0="_tuple_fields";class fbe{constructor(...t){ee(this,"hasChannel");ee(this,"hasField");ee(this,"hasSelectionId");ee(this,"timeUnit");ee(this,"items");this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const dbe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new fbe),o={},s={},a=new Set,l=(y,v)=>{const w=v==="visual"?y.channel:y.field;let b=Ft(`${r}_${w}`);for(let k=1;a.has(b);k++)b=Ft(`${r}_${w}_${k}`);return a.add(b),{[v]:b}},u=t.type,f=e.config.selection[u],h=n.value!==void 0?xe(n.value):null;let{fields:p,encodings:m}=Ee(n.select)?n.select:{};if(!p&&!m&&h){for(const y of h)if(Ee(y))for(const v of ae(y))_ye(v)?(m||(m=[])).push(v):u==="interval"?(fe(ave),m=f.encodings):(p??(p=[])).push(v)}!p&&!m&&(m=f.encodings,"fields"in f&&(p=f.fields));for(const y of m??[]){const v=e.fieldDef(y);if(v){let w=v.field;if(v.aggregate){fe(Zye(y,v.aggregate));continue}else if(!w){fe(GD(y));continue}if(v.timeUnit&&!lc(v.timeUnit)){w=e.vgField(y);const b={timeUnit:v.timeUnit,as:w,field:v.field};s[Je(b)]=b}if(!o[w]){const b=u==="interval"&&ps(y)&&uo(e.getScaleComponent(y).get("type"))?"R":v.bin?"R-RE":"E",k={field:w,channel:y,type:b,index:i.items.length};k.signals={...l(k,"data"),...l(k,"visual")},i.items.push(o[w]=k),i.hasField[w]=o[w],i.hasSelectionId=i.hasSelectionId||w===ho,CU(y)?(k.geoChannel=y,k.channel=_U(y),i.hasChannel[k.channel]=o[w]):i.hasChannel[y]=o[w]}}else fe(GD(y))}for(const y of p??[]){if(i.hasField[y])continue;const v={type:"E",field:y,index:i.items.length};v.signals={...l(v,"data")},i.items.push(v),i.hasField[y]=v,i.hasSelectionId=i.hasSelectionId||y===ho}h&&(t.init=h.map(y=>i.items.map(v=>Ee(y)?y[v.geoChannel||v.channel]!==void 0?y[v.geoChannel||v.channel]:y[v.field]:y))),kt(s)||(i.timeUnit=new Wo(null,s))},signals:(e,t,n)=>{const r=t.name+n0;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(TW)})}},CW="_curr",D1="anim_value",Zc="anim_clock",A_="eased_anim_clock",$W="min_extent",AW="max_range_extent",XE="last_tick_at",KE="is_playing",hbe=1/60*1e3,pbe=(e,t)=>[{name:A_,update:Zc},{name:`${e}_domain`,init:`domain('${t}')`},{name:$W,init:`extent(${e}_domain)[0]`},{name:AW,init:`extent(range('${t}'))[1]`},{name:D1,update:`invert('${t}', ${A_})`}],gbe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Ho(t)&&(n=n.concat([{name:Zc,init:"0",on:[{events:{type:"timer",throttle:hbe},update:`${KE} ? (${Zc} + (now() - ${XE}) > ${AW} ? 0 : ${Zc} + (now() - ${XE})) : ${Zc}`}]},{name:XE,init:"now()",on:[{events:[{signal:Zc},{signal:KE}],update:"now()"}]},{name:KE,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+n0,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=en(e.component.selection??{}).reduce((f,h)=>h.type==="interval"?f.concat(h.name+mf):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Eu(e)}, `;if(t.project.hasSelectionId)u+=`${ho}: ${s}[${pe(ho)}]`;else if(Ho(t))u+=`fields: ${i}, values: [${D1} ? ${D1} : ${$W}]`;else{const f=o.items.map(h=>{const p=e.fieldDef(h.channel);return p!=null&&p.bin?`[${s}[${pe(e.vgField(h.channel,{}))}], ${s}[${pe(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${pe(h.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}if(Ho(t))return n.concat(pbe(t.name,e.scaleName(kl)),[{name:r+ea,on:[{events:[{signal:A_},{signal:D1}],update:`{${u}}`,force:!0}]}]);{const f=t.events;return n.concat([{name:r+ea,on:f?[{events:f,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function TW(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Ni(i.field),i}function Wu(e,t=!0,n=er){if(ie(e)){const r=e.map(i=>Wu(i,t,n));return t?`[${r.join(", ")}]`:r}else if(ac(e))return n(t?ju(e):f2e(e));return t?n(ht(e)):e}function mbe(e,t){for(const n of en(e.component.selection??{})){const r=n.name;let i=`${r}${ea}, ${n.resolve==="global"?"true":`{unit: ${Eu(e)}}`}`;for(const o of fx)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+qbe,on:[{events:{signal:n.name+ea},update:`modify(${pe(n.name+Hu)}, ${i})`}]})}return tT(t)}function ybe(e,t){if(e.component.selection&&ae(e.component.selection).length){const n=pe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:bl("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return tT(t)}function vbe(e,t){let n=!1;for(const r of en(e.component.selection??{})){const i=r.name,o=pe(i+Hu);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${VW}(${o}, ${pe(a)}${l}`})}n=!0;for(const a of fx)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),tT(t)}function xbe(e,t){const n=[],r=[],i=Eu(e,{escape:!1});for(const o of en(e.component.selection??{})){const s={name:o.name+Hu};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ho}}]),o.init){const l=o.project.items.map(TW);s.values=o.project.hasSelectionId?o.init.map(u=>({unit:i,[ho]:Wu(u,!1)[0]})):o.init.map(u=>({unit:i,fields:l,values:Wu(u,!1)}))}if([...n,...t].filter(l=>l.name===o.name+Hu).length||n.push(s),Ho(o)&&t.length){const l=e.lookupDataSource(e.getDataName(zt.Main)),u=t.find(h=>h.name===l),f=u.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(f){u.transform=u.transform.filter(p=>p!==f);const h={name:u.name+CW,source:u.name,transform:[f]};r.push(h)}}}return n.concat(t,r)}function RW(e,t){for(const n of en(e.component.selection??{}))for(const r of fx)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function wbe(e,t){for(const n of e.children)It(n)&&(t=RW(n,t));return t}function bbe(e,t,n,r){const i=QW(e,t.param,t);return{signal:uo(n.get("type"))&&ie(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function tT(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Vs={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ps(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&fe(nve),!o||!uo(s)){fe(tve);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||R_(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(VW))i.update=`{${r.map(s=>`${pe(Ni(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${pe(Ni(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!R_(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function T_(e,t){return`domain(${pe(e.scaleName(t))})`}function R_(e){return e.parent&&Ad(e.parent)&&(!e.parent.parent||R_(e.parent.parent))}const mf="_brush",NW="_scale_trigger",zh="geo_interval_init_tick",FW="_init",Ebe="_center",kbe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ee(n.select)?n.select:{}};i.fields=[ho],i.encodings||(i.encodings=n.value?ae(n.value):[Eo,bo]),n.select={type:"interval",...i}}if(t.translate&&!Vs.defined(t)){const i=`!event.item || event.item.mark.name !== ${pe(t.name+mf)}`;for(const o of t.events){if(!o.between){fe(`${o} is not an ordered event stream for interval selections.`);continue}const s=xe((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ea,o=en(t.project.hasChannel).filter(a=>a.channel===Dt||a.channel===_n),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(Sbe(e,t,l,s==null?void 0:s[l.index])),[])),e.hasProjection){const a=pe(e.projectionName()),l=e.projectionName()+Ebe,{x:u,y:f}=t.project.hasChannel,h=u==null?void 0:u.signals.visual,p=f==null?void 0:f.signals.visual,m=u?s==null?void 0:s[u.index]:`${l}[0]`,y=f?s==null?void 0:s[f.index]:`${l}[1]`,v=$=>e.getSizeSignalRef($).signal,w=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:v("width")}, ${p?`${p}[1]`:v("height")}]]`;s&&(n.unshift({name:r+FW,init:`[scale(${a}, [${u?m[0]:m}, ${f?y[0]:y}]), scale(${a}, [${u?m[1]:m}, ${f?y[1]:y}])]`}),(!u||!f)&&(n.find(R=>R.name===l)||n.unshift({name:l,update:`invert(${a}, [${v("width")}/2, ${v("height")}/2])`})));const b=`intersect(${w}, {markname: ${pe(e.getName("marks"))}}, unit.mark)`,k=`{unit: ${Eu(e)}}`,_=`vlSelectionTuples(${b}, ${k})`,C=o.map($=>$.signals.visual);return n.concat({name:i,on:[{events:[...C.length?[{signal:C.join(" || ")}]:[],...s?[{signal:zh}]:[]],update:_}]})}else{if(!Vs.defined(t)){const u=r+NW,f=o.map(h=>{const p=h.channel,{data:m,visual:y}=h.signals,v=pe(e.scaleName(p)),w=e.getScaleComponent(p).get("type"),b=uo(w)?"+":"";return`(!isArray(${m}) || (${b}invert(${v}, ${y})[0] === ${b}${m}[0] && ${b}invert(${v}, ${y})[1] === ${b}${m}[1]))`});f.length&&n.push({name:u,value:{},on:[{events:o.map(h=>({scale:e.scaleName(h.channel)})),update:`${f.join(" && ")} ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${Eu(e)}, fields: ${r+n0}, values`;return n.concat({name:i,...s?{init:`{${l}: ${Wu(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(It(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===zh).length||n.unshift({name:zh,value:null,on:[{events:"timer{1}",update:`${zh} === null ? {} : ${zh}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${pe(t.name+Hu)})`;if(Vs.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const w of ae(u))u[w]=[{test:`${l}.length && ${l}[0].unit === ${Eu(e)}`,...u[w]},{value:0}];const{fill:f,fillOpacity:h,cursor:p,...m}=t.mark,y=ae(m).reduce((w,b)=>(w[b]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(k=>k).join(" && "),value:m[b]},{value:null}],w),{}),v=p??(t.translate?"move":null);return[{name:`${r+mf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:h}},update:u}},...n,{name:r+mf,type:"rect",clip:!0,encode:{enter:{...v?{cursor:{value:v}}:{},fill:{value:"transparent"}},update:{...u,...y}}}]}};function Sbe(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=pe(i?e.scaleName(o):e.projectionName()),l=p=>`scale(${a}, ${p})`,u=e.getSizeSignalRef(o===Dt?"width":"height").signal,f=`${o}(unit)`,h=t.events.reduce((p,m)=>[...p,{events:m.between[0],update:`[${f}, ${f}]`},{events:m,update:`[${s}[0], clamp(${f}, 0, ${u})]`}],[]);if(i){const p=n.signals.data,m=Vs.defined(t),y=e.getScaleComponent(o),v=y?y.get("type"):void 0,w=r?{init:Wu(r,!0,l)}:{value:[]};return h.push({events:{signal:t.name+NW},update:uo(v)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),m?[{name:p,on:[]}]:[{name:s,...w,on:h},{name:p,...r?{init:Wu(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const p=o===Dt?0:1,m=t.name+FW,y=r?{init:`[${m}[0][${p}], ${m}[1][${p}]]`}:{value:[]};return[{name:s,...y,on:h}]}}function Sd({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=Zg(t)&&t.condition;let s=[];o&&(s=xe(o).map(u=>{const f=i(u);if(fxe(u)){const{param:h,empty:p}=u;return{test:KW(e,{param:h,empty:p}),...f}}else return{test:uv(e,u.test),...f}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function nT(e,t="text"){const n=e.encoding[t];return Sd({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>cx(r,e.config),invalidValueRef:void 0})}function cx(e,t,n="datum"){if(e){if(co(e))return Tt(e.value);if(We(e)){const{format:r,formatType:i}=rv(e);return P5({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function MW(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(ie(s))return{tooltip:S8({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return Sd({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const f=cx(u,i,a);if(f)return f;if(u===null)return;let h=wt("tooltip",r,i);if(h===!0&&(h={content:"encoding"}),we(h))return{value:h};if(Ee(h))return Re(h)?h:h.content==="encoding"?S8(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function DW(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(f,h){const p=ic(h),m=xr(f)?f:{...f,type:e[p].type},y=m.title||j5(m,i),v=xe(y).join(", ").replaceAll(/"/g,'\\"');let w;if(Qt(h)){const b=h==="x"?"x2":"y2",k=fo(e[b]);if(An(m.bin)&&k){const _=ye(m,{expr:s}),C=ye(k,{expr:s}),{format:$,formatType:R}=rv(m);w=Kg(_,C,$,R,i),o.add(b)}}if((Qt(h)||h===Di||h===wo)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:b,formatType:k}=rv(m);w=P5({fieldOrDatumDef:m,format:b,formatType:k,expr:s,config:i,normalizeStack:!0}).signal}w??(w=cx(m,i,s).signal),a.push({channel:h,key:v,value:w})}U5(e,(f,h)=>{de(f)?l(f,h):ex(f)&&l(f.condition,h)});const u={};for(const{channel:f,key:h,value:p}of a)!o.has(f)&&!u[h]&&(u[h]=p);return u}function S8(e,t,n,{reactiveGeom:r}={}){const i=DW(e,t,n,{reactiveGeom:r}),o=cl(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function _be(e){const{markDef:t,config:n}=e,r=wt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Cbe(e),...$be(e)}}function Cbe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=wt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:ke(Yye,t)?{}:{ariaRoleDescription:{value:t}}}function $be(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Sd({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>cx(l,e.config),invalidValueRef:void 0});const s=wt("description",n,r);if(s!=null)return{description:Tt(s)};if(r.aria===!1)return{};const a=DW(t,i,r);if(!kt(a))return{description:{signal:cl(a).map(([l,u],f)=>`"${f>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Nn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=wt(e,r,o,{vgChannel:s,ignoreVgConfig:!Zg(u)})),l!==void 0&&(a=Tt(l)));const f={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=bq({...f,scaleChannel:e,channelDef:u});return Sd({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:h,mainRefFn:m=>O5({...f,channel:e,channelDef:m,stack:null,defaultRef:a})})}function OW(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??wt("filled",n,i),a=Ze(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=wt(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=wt(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],f=s?"fill":"stroke",h={...l?{fill:Tt(l)}:{},...u?{stroke:Tt(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&fe(VU("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...Nn("color",e,{vgChannel:f,defaultValue:s?l:u}),...Nn("fill",e,{defaultValue:r.fill?l:void 0}),...Nn("stroke",e,{defaultValue:r.stroke?u:void 0})}}function Abe(e){const{encoding:t,mark:n}=e,r=t.order;return!Tl(n)&&co(r)?Sd({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Tt(i.value),invalidValueRef:void 0}):{}}function Xf({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:O5({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Tt(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function hr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[hs(e)],f=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:m}=Xf({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),y=rT({model:t,defaultPos:n,channel:e,scaleName:f,scale:h}),v=!l&&Qt(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Tbe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:f,scale:h,stack:a,offset:p,defaultRef:y,bandPosition:m==="encoding"?0:void 0});return v?{[r||e]:v}:void 0}function Tbe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(We(n)&&i&&t===i.fieldChannel){if(de(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return ev({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return wu(n,r,{suffix:"end"},{offset:o})}return D5(e)}function rT({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=ic(n),l=fl(n),u=wt(n,o,s,{vgChannel:l});if(u!==void 0)return Ap(n,u);switch(t){case"zeroOrMin":return _8({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return _8({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[zr(n)],mult:.5}}}}function _8({mainChannel:e,config:t,...n}){const r=wq(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const Rbe={left:"x",center:"xc",right:"x2"},Nbe={top:"y",middle:"yc",bottom:"y2"};function PW(e,t,n,r="middle"){if(e==="radius"||e==="theta")return fl(e);const i=e==="x"?"align":"baseline",o=wt(i,t,n);let s;return Re(o)?(fe(Tve(i)),s=void 0):s=o,e==="x"?Rbe[s||(r==="top"?"left":"center")]:Nbe[s||r]}function av(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?LW(e,t,{defaultPos:n,defaultPos2:r}):hr(e,t,{defaultPos:n})}function LW(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=hs(e),a=zr(e),l=Fbe(t,r,s),u=l[a]?PW(e,i,o):fl(e);return{...hr(e,t,{defaultPos:n,vgChannel:u}),...l}}function Fbe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=ic(n),u=zr(n),f=fl(n),h=r[l],p=e.scaleName(l),m=e.getScaleComponent(l),{offset:y}=n in r||n in o?Xf({channel:n,markDef:o,encoding:r,model:e}):Xf({channel:l,markDef:o,encoding:r,model:e});if(!h&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const w=zr(n),b=e.markDef[w];return b!=null?{[w]:{value:b}}:{[f]:{field:e.getName(n)}}}const v=Mbe({channel:n,channelDef:h,channel2Def:r[n],markDef:o,config:a,scaleName:p,scale:m,stack:s,offset:y,defaultRef:void 0});return v!==void 0?{[f]:v}:Xm(n,o)||Xm(n,{[n]:y_(n,o,a.style),[u]:y_(u,o,a.style)})||Xm(n,a[i])||Xm(n,a.mark)||{[f]:rT({model:e,defaultPos:t,channel:n,scaleName:p,scale:m})()}}function Mbe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return We(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?wu(t,o,{suffix:"start"},{offset:l}):D5({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function Xm(e,t){const n=zr(e),r=fl(e);if(t[r]!==void 0)return{[r]:Ap(e,t[r])};if(t[e]!==void 0)return{[r]:Ap(e,t[e])};if(t[n]){const i=t[n];if(Uu(i))fe(kve(n));else return{[n]:Ap(e,i)}}}function Js(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=hs(t),a=zr(t),l=r[t],u=r[s],f=e.getScaleComponent(t),h=f?f.get("type"):void 0,p=i.orient,m=r[a]??r.size??wt("size",i,n,{vgChannel:a}),y=RU(t),v=o==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||o==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return de(l)&&(_t(l.bin)||An(l.bin)||l.timeUnit&&!u)&&!(m&&!Uu(m))&&!r[y]&&!kn(h)?Pbe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(We(l)&&kn(h)||v)&&!u?Obe(l,t,e):LW(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Dbe(e,t,n,r,i,o,s){if(Uu(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const f=Jo("minBandSize",{type:s},r);return{signal:f?`max(${to(f)}, ${u})`:u}}else i.band!==1&&(fe(Mve(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Re(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(sc(l)&&lt(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:f,tickBandPaddingInner:h}=r.scale,p=Kt(l,s==="tick"?h:s==="bar"?u:f);if(Re(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(lt(p))return{signal:`${1-p} * ${e}`}}return{value:S_(r.view,e)-2}}function Obe(e,t,n){var F,L;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),f=zr(t),h=hs(t),p=RU(t),m=n.scaleName(p),y=n.getScaleComponent(a5(t)),v=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let w;(i.size||r.size)&&(v?w=Nn("size",n,{vgChannel:f,defaultRef:Tt(r.size)}):fe(Lve(r.type)));const b=!!w,k=Aq({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(F=u||y)==null?void 0:F.get("type"),useVlSizeChannel:v});w=w||{[f]:Dbe(f,m||l,y||u,o,k,!!e,r.type)};const _=((L=u||y)==null?void 0:L.get("type"))==="band"&&Uu(k)&&!b?"top":"middle",C=PW(t,r,o,_),$=C==="xc"||C==="yc",{offset:R,offsetType:A}=Xf({channel:t,markDef:r,encoding:i,model:n,bandPosition:$?.5:0}),N=D5({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:R,defaultRef:rT({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:$?A==="encoding"?0:.5:Re(k)?{signal:`(1-${k})/2`}:Uu(k)?(1-k.band)/2:0});if(f)return{[C]:N,...w};{const O=fl(h),K=w[f],W=R?{...K,offset:R}:K;return{[C]:N,[O]:ie(N)?[N[0],{...N[1],offset:W}]:{...N,offset:W}}}}function C8(e,t,n,r,i,o,s){if(SU(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(Re(n)||Re(i)||Re(r)||o){const u=to(n),f=to(i),h=to(r),p=to(o),y=o?`(${s} < ${p} ? ${a?"":"-"}0.5 * (${p} - (${s})) : ${l})`:l,v=h?`${h} + `:"",w=u?`(${u} ? -1 : 1) * `:"",b=f?`(${f} + ${y})`:y;return{signal:v+w+b}}else return i=i||0,r+(n?-i-l:+i+l)}function Pbe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var L;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,f=a.get("reverse"),h=Aq({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),p=(L=r.component.axes[n])==null?void 0:L[0],m=(p==null?void 0:p.get("translate"))??.5,y=Qt(n)?wt("binSpacing",o,i)??0:0,v=hs(n),w=fl(n),b=fl(v),k=Jo("minBandSize",o,i),{offset:_}=Xf({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:C}=Xf({channel:v,markDef:o,encoding:s,model:r,bandPosition:0}),$=oxe({fieldDef:e,scaleName:l}),R=C8(n,y,f,m,_,k,$),A=C8(v,y,f,m,C??_,k,$),N=Re(h)?{signal:`(1-${h.signal})/2`}:Uu(h)?(1-h.band)/2:.5,F=dl({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(_t(e.bin)||e.timeUnit){const O=e.timeUnit&&F!==.5;return{[b]:$8({fieldDef:e,scaleName:l,bandPosition:N,offset:A,useRectOffsetField:O}),[w]:$8({fieldDef:e,scaleName:l,bandPosition:Re(N)?{signal:`1-${N.signal}`}:1-N,offset:R,useRectOffsetField:O})}}else if(An(e.bin)){const O=wu(e,l,{},{offset:A});if(de(t))return{[b]:O,[w]:wu(t,l,{},{offset:R})};if(oc(e.bin)&&e.bin.step)return{[b]:O,[w]:{signal:`scale("${l}", ${ye(e,{expr:"datum"})} + ${e.bin.step})`,offset:R}}}fe(XU(v))}function $8({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return ev({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:lx,endSuffix:ux}:{}})}const Lbe=new Set(["aria","width","height"]);function Oi(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?OW(e):{};return{...Ibe(e.markDef,t),...A8("fill",n),...A8("stroke",r),...Nn("opacity",e),...Nn("fillOpacity",e),...Nn("strokeOpacity",e),...Nn("strokeWidth",e),...Nn("strokeDash",e),...Abe(e),...MW(e),...nT(e,"href"),..._be(e)}}function A8(e,t){return t?{[e]:t}:{}}function Ibe(e,t){return Gye.reduce((n,r)=>(!Lbe.has(r)&&le(e,r)&&t[r]!=="ignore"&&(n[r]=Tt(e[r])),n),{})}function iT(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!ps(o)||!(s=e.getScaleType(o)))return;const a=q2(i.aggregate),l=M5({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(nxe(l)){const f=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});f&&r.add(f)}}),r.size>0)return{defined:{signal:[...r].map(o=>G2(o,!0)).join(" && ")}}}function T8(e,t){if(t!==void 0)return{[e]:Tt(t)}}const QE="voronoi",IW={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(QE)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Tl(o))return fe(Jye(o)),n;const s={name:e.getName(QE),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...MW(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,f)=>{const h=u.name??"";h===e.component.mark[0].name?a=f:h.includes(QE)&&(l=!0)}),l||n.splice(a+1,0,s),n}},zW={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Y5(e.bind),parse:(e,t,n)=>GW(t,n),topLevelSignals:(e,t,n)=>{var l;const r=t.name,i=t.project,o=t.bind,s=(l=t.init)==null?void 0:l[0],a=IW.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,f)=>{const h=Ft(`${r}_${u.field}`);n.filter(m=>m.name===h).length||n.unshift({name:h,...s?{init:Wu(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${pe(u.field)}] : null`}]:[],bind:o[u.field]??o[u.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+ea),s=r+n0,a=i.items.map(u=>Ft(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},lv="_toggle",jW={defined:e=>e.type==="point"&&!Ho(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+lv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ea,r=t.name+lv;return`${r} ? null : ${n}, ${t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Eu(e)}}, `}${r} ? ${n} : null`}},zbe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Ho(e),parse:(e,t)=>{t.clear&&(t.clear=we(t.clear)?bl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(zW.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===Ft(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+ea);r(i,"null"),jW.defined(t)&&(i=n.findIndex(o=>o.name===t.name+lv),r(i,"false"))}return n}},BW={defined:e=>{const t=e.resolve==="global"&&e.bind&&Y5(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ho;return t&&!n&&fe(rve),t&&n},parse:(e,t,n)=>{const r=qe(n);if(r.select=we(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},GW(t,r),Ee(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=xe(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=HE(t.bind)?t.bind.legend:"click",o=we(i)?bl(i,"view"):xe(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=HE(t.bind)&&t.bind.legend,o=s=>a=>{const l=qe(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Ft(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(f=>f.name===l).length===0){const f=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:f,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(p=>p.name===r+ea),s=r+n0,a=i.items.filter(p=>p.hasLegend).map(p=>Ft(`${r}_${Ft(p.field)}_legend`)),u=`${a.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(p=>({signal:p})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const f=n.find(p=>p.name===r+lv),h=HE(t.bind)&&t.bind.legend;return f&&(t.events?f.on.push({...f.on[0],events:h}):f.on[0].events=h),n}};function jbe(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of en(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&BW.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const UW="_translate_anchor",qW="_translate_delta",Bbe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Vs.defined(t),o=r+UW,{x:s,y:a}=t.project.hasChannel;let l=bl(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+mf,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${i?T_(e,Dt):`slice(${s.signals.visual})`}`:""}${a!==void 0?`, extent_y: ${i?T_(e,_n):`slice(${a.signals.visual})`}`:""}}`}]},{name:r+qW,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&R8(e,t,s,"width",n),a!==void 0&&R8(e,t,a,"height",n),n}};function R8(e,t,n,r,i){const o=t.name,s=o+UW,a=o+qW,l=n.channel,u=Vs.defined(t),f=i.find($=>$.name===n.signals[u?"data":"visual"]),h=e.getSizeSignalRef(r).signal,p=e.getScaleComponent(l),m=p==null?void 0:p.get("type"),y=p==null?void 0:p.get("reverse"),v=u?l===Dt?y?"":"-":y?"-":"":"",w=`${s}.extent_${l}`,b=`${v}${a}.${l} / ${u?`${h}`:`span(${w})`}`,k=!u||!p?"panLinear":m==="log"?"panLog":m==="symlog"?"panSymlog":m==="pow"?"panPow":"panLinear",_=u?m==="pow"?`, ${p.get("exponent")??1}`:m==="symlog"?`, ${p.get("constant")??1}`:"":"",C=`${k}(${w}, ${b}${_})`;f.on.push({events:{signal:a},update:u?C:`clampRange(${C}, 0, ${h})`})}const WW="_zoom_anchor",HW="_zoom_delta",Ube={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Vs.defined(t),o=r+HW,{x:s,y:a}=t.project.hasChannel,l=pe(e.scaleName(Dt)),u=pe(e.scaleName(_n));let f=bl(t.zoom,"scope");return i||(f=f.map(h=>(h.markname=r+mf,h))),n.push({name:r+WW,on:[{events:f,update:i?`{${[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&N8(e,t,s,"width",n),a!==void 0&&N8(e,t,a,"height",n),n}};function N8(e,t,n,r,i){const o=t.name,s=n.channel,a=Vs.defined(t),l=i.find(k=>k.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(s),h=f==null?void 0:f.get("type"),p=a?T_(e,s):l.name,m=o+HW,y=`${o}${WW}.${s}`,v=!a||!f?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",w=a?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",b=`${v}(${p}, ${y}, ${m}${w})`;l.on.push({events:{signal:m},update:a?b:`clampRange(${b}, 0, ${u})`})}const Hu="_store",ea="_tuple",qbe="_modify",VW="vlSelectionResolve",fx=[gbe,kbe,dbe,jW,zW,Vs,BW,zbe,Bbe,Ube,IW];function Wbe(e){let t=e.parent;for(;t&&!ri(t);)t=t.parent;return t}function Eu(e,{escape:t}={escape:!0}){let n=t?pe(e.name):e.name;const r=Wbe(e);if(r){const{facet:i}=r;for(const o of bi)i[o]&&(n+=` + '__facet_${o}_' + (facet[${pe(r.vgField(o))}])`)}return n}function oT(e){return en(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function GW(e,t){(we(t.select)||!t.select.on)&&delete e.events,(we(t.select)||!t.select.clear)&&delete e.clear,(we(t.select)||!t.select.toggle)&&delete e.toggle}function Ho(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function N_(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...N_(e.object)),t.push(...N_(e.property))),t)}function YW(e){return e.object.type==="MemberExpression"?YW(e.object):e.object.name==="datum"}function XW(e){const t=SA(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&YW(r)&&n.add(N_(r).slice(1).join("."))}),n}class _d extends xt{constructor(n,r,i){super(n);ee(this,"model");ee(this,"filter");ee(this,"expr");ee(this,"_dependentFields");this.model=r,this.filter=i,this.expr=uv(this.model,this.filter,this),this._dependentFields=XW(this.expr)}clone(){return new _d(null,this.model,qe(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Hbe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const s=Ft(o.name),a=o.select,l=we(a)?a:a.type,u=Ee(a)?qe(a):{type:l},f=r[l];for(const m in f)m==="fields"||m==="encodings"||(m==="mark"&&(u.mark={...f.mark,...u.mark}),(u[m]===void 0||u[m]===!0)&&(u[m]=qe(f[m]??u[m])));const h=n[s]={...u,name:s,type:l,init:o.value,bind:o.bind,events:we(u.on)?bl(u.on,"scope"):xe(qe(u.on))};if(Ho(h)&&(i++,i>1)){delete n[s];continue}const p=qe(o);for(const m of fx)m.defined(h)&&m.parse&&m.parse(e,h,p)}return i>1&&fe(uve),n}function KW(e,t,n,r="datum"){const i=we(t)?t:t.param,o=Ft(i),s=pe(o+Hu);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const p=n??e.component.data.raw,m=a.project.timeUnit.clone();p.parent?m.insertAsParentOf(p):p.parent=m}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${pe(a.resolve)})`,f=`${l}${s}, ${r}${u}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${f}`:`!${h} || ${f}`}function QW(e,t,n){const r=Ft(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&fe(cve(o));else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,fe(fve(a,i,n,o))):o=a[0].field}return`${s.name}[${pe(Ni(o))}]`}function Vbe(e,t){for(const[n,r]of cl(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Mr(new _d(t,e,{param:n}),i,zt.Lookup,e.component.data.outputNodeRefCounts)}}function uv(e,t,n){return $p(t,r=>we(r)?r:w2e(r)?KW(e,r,n):aq(r))}function Gbe(e,t){if(e)return ie(e)&&!La(e)?e.map(n=>j5(n,t)).join(", "):e}function ZE(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function hp(e,t,n,r={header:!1}){var h,p;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...f}=e.combine();if(!i){for(const m in f){const y=m,v=_xe[y],w=f[y];if(v&&v!==t&&v!=="both")delete f[y];else if(t0(w)){const{condition:b,...k}=w,_=xe(b),C=o8[y];if(C){const{vgProp:$,part:R}=C,A=[..._.map(N=>{const{test:F,...L}=N;return{test:uv(null,F),...L}}),k];ZE(f,R,$,A),delete f[y]}else if(C===null){const $={signal:_.map(R=>{const{test:A,...N}=R;return`${uv(null,A)} ? ${qD(N)} : `}).join("")+qD(k)};f[y]=$}}else if(Re(w)){const b=o8[y];if(b){const{vgProp:k,part:_}=b;ZE(f,_,k,w),delete f[y]}}Ze(["labelAlign","labelBaseline"],y)&&f[y]===null&&delete f[y]}if(t==="grid"){if(!f.grid)return;if(f.encode){const{grid:m}=f.encode;f.encode={...m?{grid:m}:{}},kt(f.encode)&&delete f.encode}return{scale:s,orient:o,...f,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Kt(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let y=a;(p=(h=f.encode)==null?void 0:h.labels)!=null&&p.update&&Re(f.encode.labels.update.text)&&(y=Lu(a,"datum.label",f.encode.labels.update.text.signal)),ZE(f,"labels","text",{signal:y})}if(f.labelAlign===null&&delete f.labelAlign,f.encode){for(const y of Iq)e.hasAxisPart(y)||delete f.encode[y];kt(f.encode)&&delete f.encode}const m=Gbe(l,n);return{scale:s,orient:o,grid:!1,...m?{title:m}:{},...f,...n.aria===!1?{aria:!1}:{},zindex:Kt(u,0)}}}}function ZW(e){const{axes:t}=e.component,n=[];for(const r of aa)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function Ybe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>hp(i,"grid",t)),...r.map(i=>hp(i,"grid",t)),...n.map(i=>hp(i,"main",t)),...r.map(i=>hp(i,"main",t))].filter(i=>i)}function F8(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...ae(s),...ae(a)]),u={};for(const f of l.values())u[f]={signal:`${r.signal} === "${o}" ? ${to(s[f])} : ${to(a[f])}`};return u}return t[i]})])}function Xbe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:fq(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=Re(n)?"axisOrient":`axis${Wg(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:F8(a,r,e,n),vgAxisConfig:F8(l,r,e,n),axisConfigStyle:Kbe([...l,...a],r)}}function Kbe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=xe(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function F_(e,t,n,r={}){var o;const i=zU(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const M8={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Qbe(n,e),gridScale:({model:e,channel:t})=>Zbe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||eH(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||JW(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??eEe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??tEe(t.type,n,de(t)&&!!t.timeUnit,de(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??rEe({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??iEe({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=tH(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return BU(i?[r8(i)]:[],de(s)?[r8(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>oEe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??sEe(n,t)};function Qbe(e,t){return!kn(e)&&de(t)&&!_t(t==null?void 0:t.bin)&&!An(t==null?void 0:t.bin)}function Zbe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Jbe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return Re(o)?o:rg(o);{const{configValue:s}=F_("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?rg(s):n===Dt&&Ze([A5,$5],e.type)&&!(de(e)&&e.timeUnit)?270:void 0}}function M_(e){return`(((${e.signal} % 360) + 360) % 360)`}function JW(e,t,n,r){if(e!==void 0)if(n==="x"){if(Re(e)){const i=M_(e),o=Re(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Re(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Re(e)){const i=M_(e),o=Re(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Re(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function eH(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(Re(e)){const s=M_(e),a=Re(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Re(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function eEe(e,t){if(t==="x"&&Ze(["quantitative","temporal"],e))return!0}function tEe(e,t,n,r){if(n&&!Ee(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function nEe(e){return e==="x"?"bottom":"left"}function rEe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!kn(t)&&t!=="log"){if(de(e)){if(_t(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ze(["month","hours","day","quarter"],(i=En(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function iEe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(de(t)){const{timeUnit:n}=t;if(n){const r=iq(n);if(r)return{signal:r}}}}function tH(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return UU(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function oEe(e,t){const n=e.values;if(ie(n))return Lq(t,n);if(Re(n))return n}function sEe(e,t){return e==="rect"&&nv(t)?1:0}class Kf extends xt{constructor(n,r){super(n);ee(this,"transform");ee(this,"_dependentFields");this.transform=r,this._dependentFields=XW(this.transform.calculate)}clone(){return new Kf(null,qe(this.transform))}static parseAllForSortIndex(n,r){return r.forEachFieldDef((i,o)=>{if(uc(i)&&$q(i.sort)){const{field:s,timeUnit:a}=i,l=i.sort,u=l.map((f,h)=>`${aq({field:s,timeUnit:a,equal:f})} ? ${h} : `).join("")+l.length;n=new Kf(n,{calculate:u,as:Qf(i,o,{forAs:!0})})}}),n}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Je(this.transform)}`}}function Qf(e,t,n){return ye(e,{prefix:t,suffix:"sort_index",...n})}function dx(e,t){return Ze(["top","bottom"],t)?"column":Ze(["left","right"],t)||e==="row"?"row":"column"}function Zf(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Kt((t||{})[e],i[e],n.header[e])}function hx(e,t,n,r){const i={};for(const o of e){const s=Zf(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const sT=["row","column"],aT=["header","footer"];function aEe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=hx(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=dx(t,a),u=rg(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...rH(u,l),...nH(l,u,o),...iH(r,i,t,Gxe,nW)}}}function nH(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=eH(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function rH(e,t){const n=JW(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function lEe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of aT)if(n[i])for(const o of n[i]){const s=cEe(e,t,i,n,o);s!=null&&r.push(s)}return r}function uEe(e,t){const{sort:n}=e;return Hs(n)?{field:ye(n,{expr:"datum"}),order:n.order??"ascending"}:ie(n)?{field:Qf(e,t,{expr:"datum"}),order:"ascending"}:{field:ye(e,{expr:"datum"}),order:n??"ascending"}}function D_(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=hx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=P5({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,f=dx(t,a);return{text:{signal:l?Lu(Lu(l,"datum.label",u),"datum.value",ye(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...rH(o,f),...nH(f,o,s),...iH(n,e,t,Yxe,rW)}}function cEe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:h}=hx(["labelOrient"],s.header,a,t);(t==="row"&&!Ze(["top","bottom"],h)||t==="column"&&!Ze(["left","right"],h))&&(o=D_(s,t,a))}const l=ri(e)&&!Qg(e.facet),u=i.axes,f=(u==null?void 0:u.length)>0;if(o||f){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:uEe(s,t)}:{},...f&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[h]:i.sizeSignal}}}:{},...f?{axes:u}:{}}}}return null}const fEe={column:{start:0,end:1},row:{start:1,end:0}};function dEe(e,t){return fEe[t][e]}function hEe(e,t){const n={};for(const r of bi){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=hx(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=dx(r,s),l=dEe(o,a);l!==void 0&&(n[a]=l)}}return kt(n)?void 0:n}function iH(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=Zf(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function lT(e){return[...Km(e,"width"),...Km(e,"height"),...Km(e,"childWidth"),...Km(e,"childHeight")]}function Km(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(kn(s)&&sc(a)){const l=e.scaleName(n);return ri(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[D8(l,a)]:[D8(l,a),{name:i,update:oH(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=k_(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function D8(e,t){const n=`${e}_step`;return Re(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function oH(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Kt(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${to(s)}, ${to(o)}) * ${e}_step`}function sH(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function aH(e,t){return ae(e).reduce((n,r)=>({...n,...Sd({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Tt(i.value),invalidValueRef:void 0})}),{})}function lH(e,t){if(ri(t))return e==="theta"?"independent":"shared";if(Ad(t))return"shared";if(gT(t))return Qt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function uT(e,t){const n=e.scale[t],r=Qt(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&fe(Uve(t)),"independent"):e[r][t]||"shared"}const pEe={...Qxe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},uH=ae(pEe);class gEe extends ua{}const O8={symbols:mEe,gradient:yEe,labels:vEe,entries:xEe};function mEe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,f=s.filled&&u!=="trail";let h={...Kye({},n,V2e),...OW(n,{filled:f})};const p=i.get("symbolOpacity")??l.legend.symbolOpacity,m=i.get("symbolFillColor")??l.legend.symbolFillColor,y=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,v=p===void 0?cH(a.opacity)??s.opacity:void 0;if(h.fill){if(r==="fill"||f&&r===Lr)delete h.fill;else if(le(h.fill,"field"))m?delete h.fill:(h.fill=Tt(l.legend.symbolBaseFillColor??"black"),h.fillOpacity=Tt(v??1));else if(ie(h.fill)){const w=O_(a.fill??a.color)??s.fill??(f&&s.color);w&&(h.fill=Tt(w))}}if(h.stroke){if(r==="stroke"||!f&&r===Lr)delete h.stroke;else if(le(h.stroke,"field")||y)delete h.stroke;else if(ie(h.stroke)){const w=Kt(O_(a.stroke||a.color),s.stroke,f?s.color:void 0);w&&(h.stroke={value:w})}}if(r!==sa){const w=de(t)&&dH(n,i,t);w?h.opacity=[{test:w,...Tt(v??1)},Tt(l.legend.unselectedOpacity)]:v&&(h.opacity=Tt(v))}return h={...h,...e},kt(h)?void 0:h}function yEe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?cH(s.opacity)||o.opacity:void 0;return u&&(a.opacity=Tt(u)),a={...a,...e},kt(a)?void 0:a}function vEe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=de(t)?dH(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:f}=o;let h;qu(f)?h=no({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:f,config:s}):u===void 0&&f===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=no({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&de(t)&&t.timeUnit===void 0&&(h=no({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...l?{opacity:l}:{},...h?{text:h}:{},...e};return kt(p)?void 0:p}function xEe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function cH(e){return fH(e,(t,n)=>Math.max(t,n.value))}function O_(e){return fH(e,(t,n)=>Kt(t,n.value))}function fH(e,t){if(hxe(e))return xe(e.condition).reduce(t,e.value);if(co(e))return e.value}function dH(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=pe(n.field);return r.map(o=>`(!length(data(${pe(Ft(o)+Hu)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const P8={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Sq(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return _q(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??CEe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??$Ee(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??bEe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>gf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(pf(n)&&jo(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>wEe(t,e)};function wEe(e,t){const n=e.values;if(ie(n))return Lq(t,n);if(Re(n))return n}function bEe(e,t,n,r){if(t!=="shape"){const i=O_(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function EEe(e){const{legend:t}=e;return Kt(t.type,kEe(e))}function kEe({channel:e,timeUnit:t,scaleType:n}){if(pf(e)){if(Ze(["quarter","month","day"],t))return"symbol";if(jo(n))return"gradient"}return"symbol"}function SEe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??_Ee(n,t)}function _Ee(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function CEe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(jo(i))return n==="horizontal"?r==="top"||r==="bottom"?L8(t,"width",s,o):s:L8(t,"height",l,a)}function L8(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function $Ee(e){if(Ze(["quantile","threshold","log","symlog"],e))return"greedy"}function hH(e){const t=It(e)?AEe(e):FEe(e);return e.component.legends=t,t}function AEe(e){const{encoding:t}=e,n={};for(const r of[Lr,...oW]){const i=un(t[r]);!i||!e.getScaleComponent(r)||r===Ir&&de(i)&&i.type===kd||(n[r]=NEe(e,r))}return n}function TEe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function REe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function NEe(e,t){var C;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new gEe({},TEe(e,t));jbe(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),f=un(i[t]),h=de(f)?(C=En(f.timeUnit))==null?void 0:C.unit:void 0,p=n.orient||o.legend.orient||"right",m=EEe({legend:n,channel:t,timeUnit:h,scaleType:u}),y=SEe({legend:n,legendType:m,orient:p,legendConfig:s}),v={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:f,legendConfig:s,config:o,scaleType:u,orient:p,legendType:m,direction:y};for(const $ of uH){if(m==="gradient"&&$.startsWith("symbol")||m==="symbol"&&$.startsWith("gradient"))continue;const R=$ in P8?P8[$](v):n[$];if(R!==void 0){const A=REe(R,$,n,e.fieldDef(t));(A||o.legend[$]===void 0)&&a.set($,R,A)}}const w=(n==null?void 0:n.encoding)??{},b=a.get("selections"),k={},_={fieldOrDatumDef:f,model:e,channel:t,legendCmpt:a,legendType:m};for(const $ of["labels","legend","title","symbols","gradient","entries"]){const R=aH(w[$]??{},e),A=$ in O8?O8[$](R,_):R;A!==void 0&&!kt(A)&&(k[$]={...b!=null&&b.length&&de(f)?{name:`${Ft(f.field)}_legend_${$}`}:{},...b!=null&&b.length?{interactive:!!b}:{},update:A})}return kt(k)||a.set("encode",k,!!(n!=null&&n.encoding)),a}function FEe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){hH(r);for(const i of ae(r.component.legends))n.legend[i]=uT(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=pH(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ae(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function pH(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of uH){const f=hl(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(h,p)=>{switch(u){case"symbolType":return MEe(h,p);case"title":return qU(h,p);case"type":return i=!0,Gr("symbol")}return ax(h,p,u,"legend")});e.setWithExplicit(u,f)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&Qy(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&Qy(e.explicit,["encode","gradient"])),e}function MEe(e,t){return t.value==="circle"?t:e}function DEe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function gH(e){const t=e.component.legends,n={};for(const i of ae(t)){const o=e.getScaleComponent(i),s=ht(o.get("domains"));if(n[s])for(const a of n[s])pH(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return en(n).flat().map(i=>OEe(i,e.config)).filter(i=>i!==void 0)}function OEe(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const f of oW)o[f]&&delete u[f]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&Re(o.encode.labels.update.text)&&(u=Lu(r,"datum.label",o.encode.labels.update.text.signal)),DEe(o,"labels","text",{signal:u})}return o}}function PEe(e){return Ad(e)||gT(e)?LEe(e):mH(e)}function LEe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),mH(e))}function mH(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=Re(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Ze(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const IEe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class yH extends ua{constructor(n,r,i,o){super({...r},{name:n});ee(this,"specifiedProjection");ee(this,"size");ee(this,"data");ee(this,"merged",!1);this.specifiedProjection=r,this.size=i,this.data=o}get isFit(){return!!this.data}}function vH(e){e.component.projection=It(e)?zEe(e):UEe(e)}function zEe(e){if(e.hasProjection){const t=Tn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?jEe(e):void 0,o=new yH(e.projectionName(!0),{...Tn(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function jEe(e){const t=[],{encoding:n}=e;for(const r of[[Eo,bo],[Fi,ko]])(un(n[r[0]])||un(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ir)&&e.typedFieldDef(Ir).type===kd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(zt.Main)),t}function BEe(e,t){const n=e5(IEe,i=>!!(!ke(e.explicit,i)&&!ke(t.explicit,i)||ke(e.explicit,i)&&ke(t.explicit,i)&&Zr(e.get(i),t.get(i))));if(Zr(e.size,t.size)){if(n)return e;if(Zr(e.explicit,{}))return t;if(Zr(t.explicit,{}))return e}return null}function UEe(e){if(e.children.length===0)return;let t;for(const r of e.children)vH(r);const n=e5(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=BEe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new yH(r,t.specifiedProjection,t.size,qe(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function qEe(e,t,n,r){if(e0(t,n)){const i=It(e)?e.axis(n)??e.legend(n)??{}:{},o=ye(t,{expr:"datum"}),s=ye(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ye(t,{binSuffix:"range",forAs:!0}),formula:Kg(o,s,i.format,i.formatType,r)}}return{}}function xH(e,t){return`${OU(e)}_${t}`}function WEe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function cT(e,t,n){const r=tx(n,void 0)??{},i=xH(r,t);return e.getName(`${i}_bins`)}function HEe(e){return"as"in e}function I8(e,t,n){let r,i;HEe(e)?r=we(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ye(e,{forAs:!0}),ye(e,{binSuffix:"end",forAs:!0})];const o={...tx(t,void 0)},s=xH(o,e.field),{signal:a,extentSignal:l}=WEe(n,s);if(W2(o.extent)){const f=o.extent;i=QW(n,f.param,f),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class Vo extends xt{constructor(n,r){super(n);ee(this,"bins");this.bins=r}clone(){return new Vo(null,qe(this.bins))}static makeFromEncoding(n,r){const i=r.reduceFieldDef((o,s,a)=>{if(xr(s)&&_t(s.bin)){const{key:l,binComponent:u}=I8(s,s.bin,r);o[l]={...u,...o[l],...qEe(r,s,a,r.config)}}return o},{});return kt(i)?null:new Vo(n,i)}static makeFromTransform(n,r,i){const{key:o,binComponent:s}=I8(r,r.bin,i);return new Vo(n,{[o]:s})}merge(n,r){for(const i of ae(n.bins))i in this.bins?(r(n.bins[i].signal,this.bins[i].signal),this.bins[i].as=zo([...this.bins[i].as,...n.bins[i].as],Je)):this.bins[i]=n.bins[i];for(const i of n.children)n.removeChild(i),i.parent=this;n.remove()}producedFields(){return new Set(en(this.bins).map(n=>n.as).flat(2))}dependentFields(){return new Set(en(this.bins).map(n=>n.field))}hash(){return`Bin ${Je(this.bins)}`}assemble(){return en(this.bins).flatMap(n=>{const r=[],[i,...o]=n.as,{extent:s,...a}=n.bin,l={type:"bin",field:Ni(n.field),as:i,signal:n.signal,...W2(s)?{extent:null}:{extent:s},...n.span?{span:{signal:`span(${n.span})`}}:{},...a};!s&&n.extentSignal&&(r.push({type:"extent",field:Ni(n.field),signal:n.extentSignal}),l.extent={signal:n.extentSignal}),r.push(l);for(const u of o)for(let f=0;f<2;f++)r.push({type:"formula",expr:ye({field:i[f]},{expr:"datum"}),as:u[f]});return n.formula&&r.push({type:"formula",expr:n.formula,as:n.formulaAs}),r})}}function VEe(e,t,n,r){var o;const i=It(r)?r.encoding[hs(t)]:void 0;if(xr(n)&&It(r)&&Tq(n,i,r.markDef,r.config)){e.add(ye(n,{})),e.add(ye(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=dl({fieldDef:n,markDef:a,config:l});ig(s)&&u!==.5&&Qt(t)&&(e.add(ye(n,{suffix:lx})),e.add(ye(n,{suffix:ux}))),n.bin&&e0(n,t)&&e.add(ye(n,{binSuffix:"range"}))}else if(CU(t)){const s=_U(t);e.add(r.getName(s))}else e.add(ye(n));return uc(n)&&M2e((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function GEe(e,t){for(const n of ae(t)){const r=t[n];for(const i of ae(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class io extends xt{constructor(n,r,i){super(n);ee(this,"dimensions");ee(this,"measures");this.dimensions=r,this.measures=i}clone(){return new io(null,new Set(this.dimensions),qe(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(n,r){let i=!1;r.forEachFieldDef(a=>{a.aggregate&&(i=!0)});const o={},s=new Set;return!i||(r.forEachFieldDef((a,l)=>{const{aggregate:u,field:f}=a;if(u)if(u==="count")o["*"]??(o["*"]={}),o["*"].count=new Set([ye(a,{forAs:!0})]);else{if(Zs(u)||Al(u)){const h=Zs(u)?"argmin":"argmax",p=u[h];o[p]??(o[p]={}),o[p][h]=new Set([ye({op:h,field:p},{forAs:!0})])}else o[f]??(o[f]={}),o[f][u]=new Set([ye(a,{forAs:!0})]);ps(l)&&r.scaleDomain(l)==="unaggregated"&&(o[f]??(o[f]={}),o[f].min=new Set([ye({field:f,aggregate:"min"},{forAs:!0})]),o[f].max=new Set([ye({field:f,aggregate:"max"},{forAs:!0})]))}else VEe(s,l,a,r)}),s.size+ae(o).length===0)?null:new io(n,s,o)}static makeFromTransform(n,r){var s;const i=new Set,o={};for(const a of r.aggregate){const{op:l,field:u,as:f}=a;l&&(l==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([f||ye(a,{forAs:!0})])):(o[u]??(o[u]={}),(s=o[u])[l]??(s[l]=new Set),o[u][l].add(f||ye(a,{forAs:!0}))))}for(const a of r.groupby??[])i.add(a);return i.size+ae(o).length===0?null:new io(n,i,o)}merge(n){return yU(this.dimensions,n.dimensions)?(GEe(this.measures,n.measures),!0):(i2e("different dimensions, cannot merge"),!1)}addDimensions(n){n.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ae(this.measures)])}producedFields(){const n=new Set;for(const r of ae(this.measures))for(const i of ae(this.measures[r])){const o=this.measures[r][i];o.size===0?n.add(`${i}_${r}`):o.forEach(n.add,n)}return n}hash(){return`Aggregate ${Je({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const n=[],r=[],i=[];for(const s of ae(this.measures))for(const a of ae(this.measures[s]))for(const l of this.measures[s][a])i.push(l),n.push(a),r.push(s==="*"?null:Ni(s));return{type:"aggregate",groupby:[...this.dimensions].map(Ni),ops:n,fields:r,as:i}}}class Cd extends xt{constructor(n,r,i,o){super(n);ee(this,"model");ee(this,"name");ee(this,"data");ee(this,"column");ee(this,"row");ee(this,"facet");ee(this,"childModel");this.model=r,this.name=i,this.data=o;for(const s of bi){const a=r.facet[s];if(a){const{bin:l,sort:u}=a;this[s]={name:r.getName(`${s}_domain`),fields:[ye(a),..._t(l)?[ye(a,{binSuffix:"end"})]:[]],...Hs(u)?{sortField:u}:ie(u)?{sortIndexField:Qf(a,s)}:{}}}}this.childModel=r.child}hash(){let n="Facet";for(const r of bi)this[r]&&(n+=` ${r.charAt(0)}:${Je(this[r])}`);return n}get fields(){var r;const n=[];for(const i of bi)(r=this[i])!=null&&r.fields&&n.push(...this[i].fields);return n}dependentFields(){const n=new Set(this.fields);for(const r of bi)this[r]&&(this[r].sortField&&n.add(this[r].sortField.field),this[r].sortIndexField&&n.add(this[r].sortIndexField));return n}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const n={};for(const r of aa){const i=this.childModel.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(kn(o)&&sc(s)){const a=px(this.childModel,r),l=pT(a);l?n[r]=l:fe(p5(r))}}}return n}assembleRowColumnHeaderData(n,r,i){const o={row:"y",column:"x",facet:void 0}[n],s=[],a=[],l=[];o&&i&&i[o]&&(r?(s.push(`distinct_${i[o]}`),a.push("max")):(s.push(i[o]),a.push("distinct")),l.push(`distinct_${i[o]}`));const{sortField:u,sortIndexField:f}=this[n];if(u){const{op:h=Z2,field:p}=u;s.push(p),a.push(h),l.push(ye(u,{forAs:!0}))}else f&&(s.push(f),a.push("max"),l.push(f));return{name:this[n].name,source:r??this.data,transform:[{type:"aggregate",groupby:this[n].fields,...s.length?{fields:s,ops:a,as:l}:{}}]}}assembleFacetHeaderData(n){var u,f;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,o=[],s={};for(const h of sT){for(const p of aT){const m=((u=i[h])==null?void 0:u[p])??[];for(const y of m)if(((f=y.axes)==null?void 0:f.length)>0){s[h]=!0;break}}if(s[h]){const p=`length(data("${this.facet.name}"))`,m=h==="row"?r?{signal:`ceil(${p} / ${r})`}:1:r?{signal:`min(${p}, ${r})`}:{signal:p};o.push({name:`${this.facet.name}_${h}`,transform:[{type:"sequence",start:0,stop:m}]})}}const{row:a,column:l}=s;return(a||l)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,n)),o}assemble(){const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:o,row:s,facet:a}=this;if(o&&s&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const l=[].concat(i.x??[],i.y??[]),u=l.map(()=>"distinct");n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:u}]})}for(const l of[Ws,qs])this[l]&&n.push(this.assembleRowColumnHeaderData(l,r,i));if(a){const l=this.assembleFacetHeaderData(i);l&&n.push(...l)}return n}}function z8(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function YEe(e,t){const n=r5(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=z8(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=z8(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return fe(hve(t)),null}function XEe(e){const t={};return M1(e.filter,n=>{if(sq(n)){let r=null;w5(n)?r=Kr(n.equal):E5(n)?r=Kr(n.lte):b5(n)?r=Kr(n.lt):k5(n)?r=Kr(n.gt):S5(n)?r=Kr(n.gte):_5(n)?r=n.range[0]:C5(n)&&(r=(n.oneOf??n.in)[0]),r&&(ac(r)?t[n.field]="date":lt(r)?t[n.field]="number":we(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function KEe(e){const t={};function n(r){Gf(r)?t[r.field]="date":r.type==="quantitative"&&Bye(r.aggregate)?t[r.field]="number":Bf(r.field)>1?r.field in t||(t[r.field]="flatten"):uc(r)&&Hs(r.sort)&&Bf(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((It(e)||ri(e))&&e.forEachFieldDef((r,i)=>{if(xr(r))n(r);else{const o=ic(i),s=e.fieldDef(o);n({...r,type:s.type})}}),It(e)){const{mark:r,markDef:i,encoding:o}=e;if(Tl(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];de(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function QEe(e){const t={};if(It(e)&&e.component.selection)for(const n of ae(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Bf(i.field)>1&&(t[i.field]="flatten")}return t}class Xn extends xt{constructor(n,r){super(n);ee(this,"_parse");this._parse=r}clone(){return new Xn(null,qe(this._parse))}hash(){return`Parse ${Je(this._parse)}`}static makeExplicit(n,r,i){var a;let o={};const s=r.data;return!Ja(s)&&((a=s==null?void 0:s.format)!=null&&a.parse)&&(o=s.format.parse),this.makeWithAncestors(n,o,{},i)}static makeWithAncestors(n,r,i,o){for(const l of ae(i)){const u=o.getWithExplicit(l);u.value!==void 0&&(u.explicit||u.value===i[l]||u.value==="derived"||i[l]==="flatten"?delete i[l]:fe(XD(l,i[l],u.value)))}for(const l of ae(r)){const u=o.get(l);u!==void 0&&(u===r[l]?delete r[l]:fe(XD(l,r[l],u)))}const s=new ua(r,i);o.copyAll(s);const a={};for(const l of ae(s.combine())){const u=s.get(l);u!==null&&(a[l]=u)}return ae(a).length===0||o.parseNothing?null:new Xn(n,a)}get parse(){return this._parse}merge(n){this._parse={...this._parse,...n.parse},n.remove()}assembleFormatParse(){const n={};for(const r of ae(this._parse)){const i=this._parse[r];Bf(r)===1&&(n[r]=i)}return n}producedFields(){return new Set(ae(this._parse))}dependentFields(){return new Set(ae(this._parse))}assembleTransforms(n=!1){return ae(this._parse).filter(r=>n?Bf(r)>1:!0).map(r=>{const i=YEe(r,this._parse[r]);return i?{type:"formula",expr:i,as:bd(r)}:null}).filter(r=>r!==null)}}class pl extends xt{clone(){return new pl(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ho])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ho}}}class r0 extends xt{constructor(n,r){super(n);ee(this,"params");this.params=r}clone(){return new r0(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Je(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class i0 extends xt{constructor(n,r){super(n);ee(this,"params");this.params=r}clone(){return new i0(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Je(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Vu extends xt{constructor(n){super(null);ee(this,"_data");ee(this,"_name");ee(this,"_generator");n??(n={name:"source"});let r;if(Ja(n)||(r=n.format?{...ni(n.format,["parse"])}:{}),og(n))this._data={values:n.values};else if(Yf(n)){if(this._data={url:n.url},!r.type){let i=/(?:\.([^.]+))?$/.exec(n.url)[1];Ze(["json","csv","tsv","dsv","topojson"],i)||(i="json"),r.type=i}}else kW(n)?this._data={values:[{type:"Sphere"}]}:(bW(n)||Ja(n))&&(this._data={});this._generator=Ja(n),n.name&&(this._name=n.name),r&&!kt(r)&&(this._data.format=r)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(n){this._name=n}set parent(n){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function fT(e){return e instanceof Vu||e instanceof r0||e instanceof i0}var vf;class dT{constructor(){DN(this,vf);kb(this,vf,!1)}setModified(){kb(this,vf,!0)}get modifiedFlag(){return MN(this,vf)}}vf=new WeakMap;class cc extends dT{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class hT extends dT{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class ZEe extends hT{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ae(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class JEe extends hT{constructor(n){super();ee(this,"requiresSelectionId");this.requiresSelectionId=n&&oT(n)}run(n){n instanceof pl&&(this.requiresSelectionId&&(fT(n.parent)||n.parent instanceof io||n.parent instanceof Xn)||(this.setModified(),n.remove()))}}class eke extends dT{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Wo&&(r=t.producedFields(),t5(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class tke extends hT{constructor(){super()}run(t){t instanceof Mr&&!t.isRequired()&&(this.setModified(),t.remove())}}class nke extends cc{run(t){if(!fT(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Xn)if(t instanceof Xn)this.setModified(),t.merge(n);else{if(n5(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class rke extends cc{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Xn);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of ae(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!kt(i)){this.setModified();const s=new Xn(t,i);for(const a of n){if(a instanceof Xn)for(const l of ae(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Xn&&ae(a.parse).length===0&&a.remove()}}}}}class ike extends cc{run(t){t instanceof Mr||t.numChildren()>0||t instanceof Cd||t instanceof Vu||(this.setModified(),t.remove())}}class oke extends cc{run(t){const n=t.children.filter(i=>i instanceof Wo),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class ske extends cc{run(t){const n=t.children.filter(i=>i instanceof io),r={};for(const i of n){const o=Je(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of ae(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class ake extends cc{constructor(n){super();ee(this,"model");this.model=n}run(n){const r=!(fT(n)||n instanceof _d||n instanceof Xn||n instanceof pl),i=[],o=[];for(const s of n.children)s instanceof Vo&&(r&&!n5(n.producedFields(),s.dependentFields())?i.push(s):o.push(s));if(i.length>0){const s=i.pop();for(const a of i)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),n instanceof Vo?n.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(o.length>1){const s=o.pop();for(const a of o)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class lke extends cc{run(t){const n=[...t.children];if(!jf(n,s=>s instanceof Mr)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof Mr){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof Mr)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class fc extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new fc(null,qe(this.transform))}addDimensions(n){this.transform.groupby=zo(this.transform.groupby.concat(n),r=>r)}dependentFields(){const n=new Set;return this.transform.groupby&&this.transform.groupby.forEach(n.add,n),this.transform.joinaggregate.map(r=>r.field).filter(r=>r!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(n){return n.as??ye(n)}hash(){return`JoinAggregateTransform ${Je(this.transform)}`}assemble(){const n=[],r=[],i=[];for(const s of this.transform.joinaggregate)r.push(s.op),i.push(this.getDefaultName(s)),n.push(s.field===void 0?null:s.field);const o=this.transform.groupby;return{type:"joinaggregate",as:i,ops:r,fields:n,...o!==void 0?{groupby:o}:{}}}}class Jf extends xt{constructor(n,r){super(n);ee(this,"filter");this.filter=r}clone(){return new Jf(null,{...this.filter})}static make(n,r,i){const{config:o,markDef:s}=r,{marks:a,scales:l}=i;if(a==="include-invalid-values"&&l==="include-invalid-values")return null;const u=r.reduceFieldDef((f,h,p)=>{const m=ps(p)&&r.getScaleComponent(p);if(m){const y=m.get("type"),{aggregate:v}=h,w=M5({scaleChannel:p,markDef:s,config:o,scaleType:y,isCountAggregate:q2(v)});w!=="show"&&w!=="always-valid"&&(f[h.field]=h)}return f},{});return ae(u).length?new Jf(n,u):null}dependentFields(){return new Set(ae(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Je(this.filter)}`}assemble(){const n=ae(this.filter).reduce((r,i)=>{const o=this.filter[i],s=ye(o,{expr:"datum"});return o!==null&&(o.type==="temporal"?r.push(`(isDate(${s}) || (${P_(s)}))`):o.type==="quantitative"&&r.push(P_(s))),r},[]);return n.length>0?{type:"filter",expr:n.join(" && ")}:null}}function P_(e){return`isValid(${e}) && isFinite(+${e})`}function uke(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ye(r);return i&&t.push(i),t},[])}function cke(e){return ie(e)&&e.every(t=>we(t))&&e.length>1}class Gs extends xt{constructor(n,r){super(n);ee(this,"_stack");this._stack=r}clone(){return new Gs(null,qe(this._stack))}static makeFromTransform(n,r){const{stack:i,groupby:o,as:s,offset:a="zero"}=r,l=[],u=[];if(r.sort!==void 0)for(const p of r.sort)l.push(p.field),u.push(Kt(p.order,"ascending"));const f={field:l,order:u};let h;return cke(s)?h=s:we(s)?h=[s,`${s}_end`]:h=[`${r.stack}_start`,`${r.stack}_end`],new Gs(n,{dimensionFieldDefs:[],stackField:i,groupby:o,offset:a,sort:f,facetby:[],as:h})}static makeFromEncoding(n,r){const i=r.stack,{encoding:o}=r;if(!i)return null;const{groupbyChannels:s,fieldChannel:a,offset:l,impute:u}=i,f=s.map(y=>{const v=o[y];return fo(v)}).filter(y=>!!y),h=uke(r),p=r.encoding.order;let m;if(ie(p)||de(p))m=jU(p);else{const y=Rq(p)?p.sort:a==="y"?"descending":"ascending";m=h.reduce((v,w)=>(v.field.includes(w)||(v.field.push(w),v.order.push(y)),v),{field:[],order:[]})}return new Gs(n,{dimensionFieldDefs:f,stackField:r.vgField(a),facetby:[],stackby:h,sort:m,offset:l,impute:u,as:[r.vgField(a,{suffix:"start",forAs:!0}),r.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(n){this._stack.facetby.push(...n)}dependentFields(){const n=new Set;return n.add(this._stack.stackField),this.getGroupbyFields().forEach(n.add,n),this._stack.facetby.forEach(n.add,n),this._stack.sort.field.forEach(n.add,n),n}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Je(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:n,impute:r,groupby:i}=this._stack;return n.length>0?n.map(o=>o.bin?r?[ye(o,{binSuffix:"mid"})]:[ye(o,{}),ye(o,{binSuffix:"end"})]:[ye(o)]).flat():i??[]}assemble(){const n=[],{facetby:r,dimensionFieldDefs:i,stackField:o,stackby:s,sort:a,offset:l,impute:u,as:f}=this._stack;if(u)for(const h of i){const{bandPosition:p=.5,bin:m}=h;if(m){const y=ye(h,{expr:"datum"}),v=ye(h,{expr:"datum",binSuffix:"end"});n.push({type:"formula",expr:`${P_(y)} ? ${p}*${y}+${1-p}*${v} : ${y}`,as:ye(h,{binSuffix:"mid",forAs:!0})})}n.push({type:"impute",field:o,groupby:[...s,...r],key:ye(h,{binSuffix:"mid"}),method:"value",value:0})}return n.push({type:"stack",groupby:[...this.getGroupbyFields(),...r],field:o,sort:a,as:f,offset:l}),n}}class $d extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new $d(null,qe(this.transform))}addDimensions(n){this.transform.groupby=zo(this.transform.groupby.concat(n),r=>r)}dependentFields(){const n=new Set;return(this.transform.groupby??[]).forEach(n.add,n),(this.transform.sort??[]).forEach(r=>n.add(r.field)),this.transform.window.map(r=>r.field).filter(r=>r!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(n){return n.as??ye(n)}hash(){return`WindowTransform ${Je(this.transform)}`}assemble(){const n=[],r=[],i=[],o=[];for(const p of this.transform.window)r.push(p.op),i.push(this.getDefaultName(p)),o.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);const s=this.transform.frame,a=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&r.every(p=>d5(p)))return{type:"joinaggregate",as:i,ops:r,fields:n,...a!==void 0?{groupby:a}:{}};const l=[],u=[];if(this.transform.sort!==void 0)for(const p of this.transform.sort)l.push(p.field),u.push(p.order??"ascending");const f={field:l,order:u},h=this.transform.ignorePeers;return{type:"window",params:o,as:i,ops:r,fields:n,sort:f,...h!==void 0?{ignorePeers:h}:{},...a!==void 0?{groupby:a}:{},...s!==void 0?{frame:s}:{}}}}function fke(e){function t(n){if(!(n instanceof Cd)){const r=n.clone();if(r instanceof Mr){const i=I_+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof io||r instanceof Gs||r instanceof $d||r instanceof fc)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function L_(e){if(e instanceof Cd)if(e.numChildren()===1&&!(e.children[0]instanceof Mr)){const t=e.children[0];(t instanceof io||t instanceof Gs||t instanceof $d||t instanceof fc)&&t.addDimensions(e.fields),t.swapWithParent(),L_(e)}else{const t=e.model.component.data.main;wH(t);const n=fke(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(L_)}function wH(e){if(e instanceof Mr&&e.type===zt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Cd||(t.swapWithParent(),wH(e))}}const I_="scale_",Qm=5;function z_(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!z_(t.children))return!1}return!0}function qi(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function j8(e,t,n){let r=e.sources,i=!1;return i=qi(new tke,r)||i,i=qi(new JEe(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=qi(new ike,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=qi(new nke,r)||i,i=qi(new ake(t),r)||i,i=qi(new eke,r)||i,i=qi(new rke,r)||i,i=qi(new ske,r)||i,i=qi(new oke,r)||i,i=qi(new ZEe,r)||i,i=qi(new lke,r)||i),e.sources=r,i}function dke(e,t){z_(e.sources);let n=0,r=0;for(let i=0;i<Qm&&j8(e,t,!0);i++)n++;e.sources.map(L_);for(let i=0;i<Qm&&j8(e,t,!1);i++)r++;z_(e.sources),Math.max(n,r)===Qm&&fe(`Maximum optimization runs(${Qm}) reached.`)}class mn{constructor(t){ee(this,"signal");Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new mn(()=>t(n))}}function bH(e){It(e)?hke(e):pke(e)}function hke(e){const t=e.component.scales;for(const n of ae(t)){const r=mke(e,n);if(t[n].setWithExplicit("domains",r),vke(e,n),e.component.data.isFaceted){let o=e;for(;!ri(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)Is(a)&&(a.data=I_+a.data.replace(I_,""))}}}function pke(e){for(const n of e.children)bH(n);const t=e.component.scales;for(const n of ae(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=hl(r,s.getWithExplicit("domains"),"domains","scale",j_);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&fe(sve),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function gke(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=B8(t,n);if(!i){fe(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=B8(t,n);if(i)return"unaggregated"}return e}function mke(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=gke(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&un(r.x2)?un(r.x)?hl(Fa(n,i,e,"x"),Fa(n,i,e,"x2"),"domain","scale",j_):Fa(n,i,e,"x2"):t==="y"&&un(r.y2)?un(r.y)?hl(Fa(n,i,e,"y"),Fa(n,i,e,"y2"),"domain","scale",j_):Fa(n,i,e,"y2"):Fa(n,i,e,t)}function yke(e,t,n){return e.map(r=>({signal:`{data: ${nx(r,{timeUnit:n,type:t})}}`}))}function JE(e,t,n){var i;const r=(i=En(n))==null?void 0:i.unit;return t==="temporal"||r?yke(e,t,r):[e]}function Fa(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=un(i[r]),{type:f}=u,h=u.timeUnit,p=cbe({invalid:Jo("invalid",o,a),isPath:Tl(s)});if(F2e(t)){const v=Fa(e,void 0,n,r),w=JE(t.unionWith,f,h);return Do([...w,...v.value])}else{if(Re(t))return Do([t]);if(t&&t!=="unaggregated"&&!hq(t))return Do(JE(t,f,h))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Gr([[0,1]]);const v=n.requestDataName(p);return Gr([{data:v,field:n.vgField(r,{suffix:"start"})},{data:v,field:n.vgField(r,{suffix:"end"})}])}const m=ps(r)&&de(u)?xke(n,r,e):void 0;if(gs(u)){const v=JE([u.datum],f,h);return Gr(v)}const y=u;if(t==="unaggregated"){const{field:v}=u;return Gr([{data:n.requestDataName(p),field:ye({field:v,aggregate:"min"})},{data:n.requestDataName(p),field:ye({field:v,aggregate:"max"})}])}else if(_t(y.bin)){if(kn(e))return Gr(e==="bin-ordinal"?[]:[{data:ng(m)?n.requestDataName(p):n.requestDataName(zt.Raw),field:n.vgField(r,e0(y,r)?{binSuffix:"range"}:{}),sort:m===!0||!Ee(m)?{field:n.vgField(r,{}),op:"min"}:m}]);{const{bin:v}=y;if(_t(v)){const w=cT(n,y.field,v);return Gr([new mn(()=>{const b=n.getSignalName(w);return`[${b}.start, ${b}.stop]`})])}else return Gr([{data:n.requestDataName(p),field:n.vgField(r,{})}])}}else if(y.timeUnit&&Ze(["time","utc"],e)){const v=i[hs(r)];if(Tq(y,v,o,a)){const w=n.requestDataName(p),b=dl({fieldDef:y,fieldDef2:v,markDef:o,config:a}),k=ig(s)&&b!==.5&&Qt(r);return Gr([{data:w,field:n.vgField(r,k?{suffix:lx}:{})},{data:w,field:n.vgField(r,{suffix:k?ux:"end"})}])}}return Gr(m?[{data:ng(m)?n.requestDataName(p):n.requestDataName(zt.Raw),field:n.vgField(r),sort:m}]:[{data:n.requestDataName(p),field:n.vgField(r)}])}function ek(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Z2),...r?{field:Ni(r)}:{},...i?{order:i}:{}}}function vke(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=hq(r)?r:void 0,s=oc(i)&&W2(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function xke(e,t,n){if(!kn(n))return;const r=e.fieldDef(t),i=r.sort;if($q(i))return{op:"min",field:Qf(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Hs(i)){const a=o&&!s.has(i.field);return ek(i,a)}else if(cxe(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:f,field:h}=u,p=o&&!s.has(h);if(Zs(f)||Al(f))return ek({field:ye(u),order:l},p);if(d5(f)||!f)return ek({op:f,field:h,order:l},p)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ze(["ascending",void 0],i))return!0}}function B8(e,t){const{aggregate:n,type:r}=e;return n?we(n)&&!qye.has(n)?{valid:!1,reason:Ove(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Pve(e)}:{valid:!0}:{valid:!1,reason:Dve(e)}}function j_(e,t,n,r){return e.explicit&&t.explicit&&fe(Bve(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function wke(e){const t=zo(e.map(s=>{if(Is(s)){const{sort:a,...l}=s;return l}return s}),Je),n=zo(e.map(s=>{if(Is(s)){const a=s.sort;return a!==void 0&&!ng(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Je);if(t.length===0)return;if(t.length===1){const s=e[0];if(Is(s)&&n.length>0){let a=n[0];if(n.length>1){fe(QD);const l=n.filter(u=>Ee(u)&&"op"in u&&u.op!=="min");n.every(u=>Ee(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(Ee(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=zo(n.map(s=>ng(s)||!("op"in s)||we(s.op)&&ke(zye,s.op)?s:(fe(qve(s)),!0)),Je);let i;r.length===1?i=r[0]:r.length>1&&(fe(QD),i=!0);const o=zo(e.map(s=>Is(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function pT(e){if(Is(e)&&we(e.field))return e.field;if(Wye(e)){let t;for(const n of e.fields)if(Is(n)&&we(n.field)){if(!t)t=n.field;else if(t!==n.field)return fe(Wve),t}return fe(Hve),t}else if(Hye(e)){fe(Vve);const t=e.fields[0];return we(t)?t:void 0}}function px(e,t){const r=e.component.scales[t].get("domains").map(i=>(Is(i)&&(i.data=e.lookupDataSource(i.data)),i));return wke(r)}function EH(e){return Ad(e)||gT(e)?e.children.reduce((t,n)=>t.concat(EH(n)),U8(e)):U8(e)}function U8(e){return ae(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:f,...h}=i,p=bke(i.range,o,n,e),m=px(e,n),y=a?bbe(e,a,r,m):null;return t.push({name:o,type:s,...m?{domain:m}:{},...y?{domainRaw:y}:{},range:p,...f!==void 0?{reverse:f}:{},...h}),t},[])}function bke(e,t,n,r){if(Qt(n)){if(sc(e))return{step:{signal:`${t}_step`}}}else if(Ee(e)&&Is(e))return{...e,data:r.lookupDataSource(e.data)};return e}class kH extends ua{constructor(n,r){super({},{name:n});ee(this,"merged",!1);this.setWithExplicit("type",r)}domainHasZero(){const n=this.get("type");if(Ze([Rn.LOG,Rn.TIME,Rn.UTC],n))return"definitely-not";const r=this.get("zero");if(r===!0||r===void 0&&Ze([Rn.LINEAR,Rn.SQRT,Rn.POW],n))return"definitely";const i=this.get("domains");if(i.length>0){let o=!1,s=!1,a=!1;for(const l of i){if(ie(l)){const u=l[0],f=l[l.length-1];if(lt(u)&&lt(f))if(u<=0&&f>=0){o=!0;continue}else{s=!0;continue}}a=!0}if(o)return"definitely";if(s&&!a)return"definitely-not"}return"maybe"}}const Eke=["range","scheme"];function kke(e){const t=e.component.scales;for(const n of f5){const r=t[n];if(!r)continue;const i=Ske(n,e);r.setWithExplicit("range",i)}}function q8(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=zr(t),s=e.getName(o);if(Ee(r)&&r.binned&&r.step!==void 0)return new mn(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(_t(r)){const a=cT(e,i,r);return new mn(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function Ske(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const h of Eke)if(n[h]!==void 0){const p=w_(o,h),m=pq(e,h);if(!p)fe(GU(o,h,e));else if(m)fe(m);else switch(h){case"range":{const y=n.range;if(ie(y)){if(Qt(e))return Do(y.map(v=>{if(v==="width"||v==="height"){const w=t.getName(v),b=t.getSignalName.bind(t);return mn.fromName(b,w)}return v}))}else if(Ee(y))return Do({data:t.requestDataName(zt.Main),field:y.field,sort:{op:"min",field:t.vgField(e)}});return Do(y)}case"scheme":return Do(_ke(n[h]))}}const s=e===Dt||e==="xOffset"?"width":"height",a=r[s];if(ts(a)){if(Qt(e))if(kn(o)){const h=_H(a,t,e);if(h)return Do({step:h})}else fe(YU(s));else if(Gg(e)){const h=e===El?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const y=CH(a,o);if(y)return Do(y)}}}const{rangeMin:l,rangeMax:u}=n,f=Cke(e,t);return(l!==void 0||u!==void 0)&&w_(o,"rangeMin")&&ie(f)&&f.length===2?Do([l??f[0],u??f[1]]):Gr(f)}function _ke(e){return N2e(e)?{scheme:e.name,...ni(e,["name"])}:{scheme:e}}function SH(e,t,n,{center:r}={}){const i=zr(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===_n&&uo(n)?r?[mn.fromName(a=>`${s(a)}/2`,o),mn.fromName(a=>`-${s(a)}/2`,o)]:[mn.fromName(s,o),0]:r?[mn.fromName(a=>`-${s(a)}/2`,o),mn.fromName(a=>`${s(a)}/2`,o)]:[0,mn.fromName(s,o)]}function Cke(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=un(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:f}=t.specifiedScales[e];switch(e){case Dt:case _n:{if(Ze(["point","band"],l)){const h=$H(e,n,r.view);if(ts(h))return{step:_H(h,t,e)}}return SH(e,t,l)}case El:case Ed:return $ke(e,t,l);case oa:{const h=Rke(i,r),p=Nke(i,n,t,r);return Wf(l)?Tke(h,p,Ake(l,r,u,e)):[h,p]}case Di:return[0,Math.PI*2];case rc:return[0,360];case wo:return[0,new mn(()=>{const h=t.getSignalName(ri(t.parent)?"child_width":"width"),p=t.getSignalName(ri(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case kl:return{step:1e3/r.scale.framesPerSecond};case Cl:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case $l:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ir:return"symbol";case Lr:case fs:case ds:return l==="ordinal"?s==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case sa:case Sl:case _l:return[r.scale.minOpacity,r.scale.maxOpacity]}}function _H(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=a5(n),s=r[o];if(aW({step:e,offsetIsDiscrete:We(s)&&lq(s.type)})==="offset"&&Bq(r,o)){const l=t.getScaleComponent(o);let f=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,m=l.get("paddingOuter")??l.get("padding")??0;f=`bandspace(${f}, ${p}, ${m})`}const h=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${f} / (1-${Xye(h)})`}}else return e.step}function CH(e,t){if(aW({step:e,offsetIsDiscrete:kn(t)})==="offset")return{step:e.step}}function $ke(e,t,n){const r=e===El?"x":"y",i=t.getScaleComponent(r);if(!i)return SH(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=$H(r,t.size,t.config.view);if(ts(u)){const f=CH(u,n);if(f)return f}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(de(u)&&u.timeUnit){const f=iq(u.timeUnit,y=>`scale('${s}', ${y})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=dl({fieldDef:u,markDef:a,config:l})-.5,m=p!==0?` + ${p}`:"";if(h){const y=Re(h)?`${h.signal}/2${m}`:`${h/2+p}`,v=Re(h)?`(1 - ${h.signal}/2)${m}`:`${1-h/2+p}`;return[{signal:`${y} * (${f})`},{signal:`${v} * (${f})`}]}return[0,{signal:f}]}return gU(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function $H(e,t,n){const r=e===Dt?"width":"height",i=t[r];return i||sv(n,r)}function Ake(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ie(n)?n.length+1:(fe(t2e(r)),3)}}function Tke(e,t,n){const r=()=>{const i=to(t),o=to(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return Re(t)?new mn(r):{signal:r()}}function Rke(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(H2("size",e))}const W8=.95;function Nke(e,t,n,r){const i={x:q8(n,"x"),y:q8(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=H8(t,i,r.view);return lt(o)?o-1:new mn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=H8(t,i,r.view);return lt(o)?Math.pow(W8*o,2):new mn(()=>`pow(${W8} * ${o.signal}, 2)`)}}throw new Error(H2("size",e))}function H8(e,t,n){const r=ts(e.width)?e.width.step:S_(n,"width"),i=ts(e.height)?e.height.step:S_(n,"height");return t.x||t.y?new mn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function AH(e,t){It(e)?Fke(e,t):RH(e,t)}function Fke(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of ae(n)){const l=s[a],u=n[a],f=e.getScaleComponent(a),h=un(i[a]),p=l[t],m=f.get("type"),y=f.get("padding"),v=f.get("paddingInner"),w=w_(m,t),b=pq(a,t);if(p!==void 0&&(w?b&&fe(b):fe(GU(m,t,a))),w&&b===void 0)if(p!==void 0){const k=h.timeUnit,_=h.type;switch(t){case"domainMax":case"domainMin":ac(l[t])||_==="temporal"||k?u.set(t,{signal:nx(l[t],{type:_,timeUnit:k})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const k=le(V8,t)?V8[t]({model:e,channel:a,fieldOrDatumDef:h,scaleType:m,scalePadding:y,scalePaddingInner:v,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:Uq(i,a),hasSecondaryRangeChannel:!!i[hs(a)]}):r.scale[t];k!==void 0&&u.set(t,k,!1)}}}const V8={bins:({model:e,fieldOrDatumDef:t})=>de(t)?Mke(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Dke(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>Oke(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Pke(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>Lke(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>Ike(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=de(e)?e.sort:void 0;return zke(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>jke(e,t,n,r,i,o.scale,s)};function TH(e){It(e)?kke(e):RH(e,"range")}function RH(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?TH(r):AH(r,t);for(const r of ae(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=hl(i,a,t,"scale",wW((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Mke(e,t){const n=t.bin;if(_t(n)){const r=cT(e,t.field,n);return new mn(()=>e.getSignalName(r))}else if(An(n)&&oc(n)&&n.step!==void 0)return{step:n.step}}function Dke(e,t){if(Ze([Lr,fs,ds],e)&&t!=="nominal")return"hcl"}function Oke(e,t,n,r,i,o){var s;if(!((s=fo(o))!=null&&s.bin||ie(n)||i!=null||r!=null||Ze([Rn.TIME,Rn.UTC],e)))return Qt(t)?!0:void 0}function Pke(e,t,n,r,i,o){if(Qt(e)){if(jo(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(de(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Rn.POINT)return n.pointPadding}}function Lke(e,t,n,r,i,o=!1){if(e===void 0){if(Qt(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:f}=i;return o?f:Kt(s,n==="bar"?a:n==="tick"?u:l)}else if(Gg(t)&&r===Rn.BAND)return i.offsetBandPaddingInner}}function Ike(e,t,n,r,i,o=!1){if(e===void 0){if(Qt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Rn.BAND)return Kt(s,Re(r)?{signal:`${r.signal}/2`}:r/2)}else if(Gg(t)){if(n===Rn.POINT)return .5;if(n===Rn.BAND)return i.offsetBandPaddingOuter}}}function zke(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return uo(e)&&t==="descending"?Re(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(uo(e)&&t==="descending")return!0}function jke(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&uo(i)){if(ie(n)){const l=n[0],u=n[n.length-1];if(lt(l)&&l<=0&&lt(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Wf(i))return!0;if(!(de(t)&&t.bin)&&Ze([...aa,...Rye],e)){const{orient:l,type:u}=r;return Ze(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Ze(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function Bke(e,t,n,r,i=!1){const o=Uke(t,n,r,i),{type:s}=e;return ps(t)?s!==void 0?I2e(t,s)?de(n)&&!L2e(s,n.type)?(fe(zve(s,o)),o):s:(fe(Ive(t,s,o)),o):o:null}function Uke(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(pf(e)||UE(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&fe(qE(e,"ordinal")),"ordinal";if(BE(e))return"band";if(Qt(e)||Gg(e)){if(Ze(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in c5)return"band";const o=n[zr(e)];return Uu(o)||Vf(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return pf(e)?"time":UE(e)==="discrete"?(fe(qE(e,"temporal")),"ordinal"):de(t)&&t.timeUnit&&En(t.timeUnit).utc?"utc":BE(e)?"band":"time";case"quantitative":return pf(e)?de(t)&&_t(t.bin)?"bin-ordinal":"linear":UE(e)==="discrete"?(fe(qE(e,"quantitative")),"ordinal"):BE(e)?"band":"linear";case"geojson":return}throw new Error(HU(t.type))}function qke(e,{ignoreRange:t}={}){NH(e),bH(e);for(const n of P2e)AH(e,n);t||TH(e)}function NH(e){It(e)?e.component.scales=Wke(e):e.component.scales=Vke(e)}function Wke(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of f5){const s=un(t[o]);if(s&&n===yq&&o===Ir&&s.type===kd)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=Uq(t,o),u=Bke(a,o,s,r,l);i[o]=new kH(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const Hke=wW((e,t)=>JD(e)-JD(t));function Vke(e){var i;const t=e.component.scales={},n={},r=e.component.resolve;for(const o of e.children){NH(o);for(const s of ae(o.component.scales))if((i=r.scale)[s]??(i[s]=lH(s,e)),r.scale[s]==="shared"){const a=n[s],l=o.component.scales[s].getWithExplicit("type");a?C2e(a.value,l.value)?n[s]=hl(a,l,"type","scale",Hke):(r.scale[s]="independent",delete n[s]):n[s]=l}}for(const o of ae(n)){const s=e.scaleName(o,!0),a=n[o];t[o]=new kH(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return t}class tk{constructor(){ee(this,"nameMap");this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function It(e){return(e==null?void 0:e.type)==="unit"}function ri(e){return(e==null?void 0:e.type)==="facet"}function gT(e){return(e==null?void 0:e.type)==="concat"}function Ad(e){return(e==null?void 0:e.type)==="layer"}class mT{constructor(t,n,r,i,o,s,a){ee(this,"type");ee(this,"parent");ee(this,"config");ee(this,"name");ee(this,"size");ee(this,"title");ee(this,"description");ee(this,"data");ee(this,"transforms");ee(this,"layout");ee(this,"scaleNameMap");ee(this,"projectionNameMap");ee(this,"signalNameMap");ee(this,"component");ee(this,"view");this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=Tn(a),this.name=t.name??i,this.title=La(t.title)?{text:t.title}:t.title?Tn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new tk,this.projectionNameMap=r?r.projectionNameMap:new tk,this.signalNameMap=r?r.signalNameMap:new tk,this.data=t.data,this.description=t.description,this.transforms=Zwe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:nwe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:J2(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ua,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?qe(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){qke(this)}parseProjection(){vH(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){hH(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of ae(r)){const s=r[o];s!==void 0&&(i[o]=Tt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Tt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:kt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=hEe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of bi)t[r].title&&n.push(aEe(this,r));for(const r of sT)n=n.concat(lEe(this,r));return n}assembleAxes(){return Ybe(this.component.axes,this.config)}assembleLegends(){return gH(this)}assembleProjections(){return PEe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...PU(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Ze(["unit","layer"],this.type)?Ze(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),kt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||ri(this.parent)?EH(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Ft((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(zt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(ri(this.parent)){const n=sH(t),r=U2(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(kn(o)&&sc(s)){const a=i.get("name"),l=px(this,r),u=pT(l);if(u){const f=ye({aggregate:"distinct",field:u},{expr:"datum"});return{signal:oH(a,i,f)}}else return fe(p5(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(AU(t)&&ps(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(eve(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class FH extends mT{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ye(r,n)}reduceFieldDef(t,n){return Nxe(this.getMapping(),(r,i,o)=>{const s=fo(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){U5(this.getMapping(),(r,i)=>{const o=fo(r);o&&t(o,i)},n)}}class gx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const o=this.transform.resolve??"shared";this.transform.resolve=o}clone(){return new gx(null,qe(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Je(this.transform)}`}assemble(){const{density:n,...r}=this.transform,i={type:"kde",field:n,...r};return i.resolve=this.transform.resolve,i}}class mx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r)}clone(){return new mx(null,qe(this.transform))}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Je(this.transform)}`}assemble(){const{extent:n,param:r}=this.transform;return{type:"extent",field:n,signal:r}}}class yx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const{flatten:i,as:o=[]}=this.transform;this.transform.as=i.map((s,a)=>o[a]??s)}clone(){return new yx(this.parent,qe(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Je(this.transform)}`}assemble(){const{flatten:n,as:r}=this.transform;return{type:"flatten",fields:n,as:r}}}class vx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}clone(){return new vx(null,qe(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Je(this.transform)}`}assemble(){const{fold:n,as:r}=this.transform;return{type:"fold",fields:n,as:r}}}class yf extends xt{constructor(n,r,i,o){super(n);ee(this,"fields");ee(this,"geojson");ee(this,"signal");this.fields=r,this.geojson=i,this.signal=o}clone(){return new yf(null,qe(this.fields),this.geojson,this.signal)}static parseAll(n,r){if(r.component.projection&&!r.component.projection.isFit)return n;let i=0;for(const o of[[Eo,bo],[Fi,ko]]){const s=o.map(a=>{const l=un(r.encoding[a]);return de(l)?l.field:gs(l)?{expr:`${l.datum}`}:co(l)?{expr:`${l.value}`}:void 0});(s[0]||s[1])&&(n=new yf(n,s,null,r.getName(`geojson_${i++}`)))}if(r.channelHasField(Ir)){const o=r.typedFieldDef(Ir);o.type===kd&&(n=new yf(n,null,o.field,r.getName(`geojson_${i++}`)))}return n}dependentFields(){const n=(this.fields??[]).filter(we);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Je(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class sg extends xt{constructor(n,r,i,o){super(n);ee(this,"projection");ee(this,"fields");ee(this,"as");this.projection=r,this.fields=i,this.as=o}clone(){return new sg(null,this.projection,qe(this.fields),qe(this.as))}static parseAll(n,r){if(!r.projectionName())return n;for(const i of[[Eo,bo],[Fi,ko]]){const o=i.map(a=>{const l=un(r.encoding[a]);return de(l)?l.field:gs(l)?{expr:`${l.datum}`}:co(l)?{expr:`${l.value}`}:void 0}),s=i[0]===Fi?"2":"";(o[0]||o[1])&&(n=new sg(n,r.projectionName(),o,[r.getName(`x${s}`),r.getName(`y${s}`)]))}return n}dependentFields(){return new Set(this.fields.filter(we))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Je(this.fields)} ${Je(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ku extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new ku(null,qe(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(n){const{start:r=0,stop:i,step:o}=n;return{signal:`sequence(${[r,i,...o?[o]:[]].join(",")})`}}static makeFromTransform(n,r){return new ku(n,r)}static makeFromEncoding(n,r){const i=r.encoding,o=i.x,s=i.y;if(de(o)&&de(s)){const a=o.impute?o:s.impute?s:void 0;if(a===void 0)return;const l=o.impute?s:s.impute?o:void 0,{method:u,value:f,frame:h,keyvals:p}=a.impute,m=Hq(r.mark,i);return new ku(n,{impute:a.field,key:l.field,...u?{method:u}:{},...f!==void 0?{value:f}:{},...h?{frame:h}:{},...p!==void 0?{keyvals:p}:{},...m.length?{groupby:m}:{}})}return null}hash(){return`Impute ${Je(this.transform)}`}assemble(){const{impute:n,key:r,keyvals:i,method:o,groupby:s,value:a,frame:l=[null,null]}=this.transform,u={type:"impute",field:n,key:r,...i?{keyvals:Mwe(i)?this.processSequence(i):i}:{},method:"value",...s?{groupby:s}:{},value:!o||o==="value"?a:null};if(o&&o!=="value"){const f={type:"window",as:[`imputed_${n}_value`],ops:[o],fields:[n],frame:l,ignorePeers:!1,...s?{groupby:s}:{}},h={type:"formula",expr:`datum.${n} === null ? datum.imputed_${n}_value : datum.${n}`,as:n};return[u,f,h]}else return[u]}}class xx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.loess]}clone(){return new xx(null,qe(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Je(this.transform)}`}assemble(){const{loess:n,on:r,...i}=this.transform;return{type:"loess",x:r,y:n,...i}}}class ag extends xt{constructor(n,r,i){super(n);ee(this,"transform");ee(this,"secondary");this.transform=r,this.secondary=i}clone(){return new ag(null,qe(this.transform),this.secondary)}static make(n,r,i,o){const s=r.component.data.sources,{from:a}=i;let l=null;if(Dwe(a)){let u=OH(a.data,s);u||(u=new Vu(a.data),s.push(u));const f=r.getName(`lookup_${o}`);l=new Mr(u,f,zt.Lookup,r.component.data.outputNodeRefCounts),r.component.data.outputNodes[f]=l}else if(Owe(a)){const u=a.param;i={as:u,...i};let f;try{f=r.getSelectionComponent(Ft(u),u)}catch{throw new Error(ive(u))}if(l=f.materialized,!l)throw new Error(ove(u))}return new ag(n,i,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?xe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Je({transform:this.transform,secondary:this.secondary})}`}assemble(){let n;if(this.transform.from.fields)n={values:this.transform.from.fields,...this.transform.as?{as:xe(this.transform.as)}:{}};else{let r=this.transform.as;we(r)||(fe(mve),r="_lookup"),n={as:[r]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...n,...this.transform.default?{default:this.transform.default}:{}}}}class wx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}clone(){return new wx(null,qe(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Je(this.transform)}`}assemble(){const{quantile:n,...r}=this.transform;return{type:"quantile",field:n,...r}}}class bx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r,this.transform=qe(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.regression]}clone(){return new bx(null,qe(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Je(this.transform)}`}assemble(){const{regression:n,on:r,...i}=this.transform;return{type:"regression",x:r,y:n,...i}}}class Ex extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new Ex(null,qe(this.transform))}addDimensions(n){this.transform.groupby=zo((this.transform.groupby??[]).concat(n),r=>r)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Je(this.transform)}`}assemble(){const{pivot:n,value:r,groupby:i,limit:o,op:s}=this.transform;return{type:"pivot",field:n,value:r,...o!==void 0?{limit:o}:{},...s!==void 0?{op:s}:{},...i!==void 0?{groupby:i}:{}}}}class kx extends xt{constructor(n,r){super(n);ee(this,"transform");this.transform=r}clone(){return new kx(null,qe(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Je(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function MH(e){let t=0;function n(r,i){if(r instanceof Vu&&!r.isGenerator&&!Yf(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Xn&&(r.parent instanceof Vu&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Cd){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof r0||r instanceof i0||r instanceof Jf||r instanceof _d||r instanceof Kf||r instanceof sg||r instanceof io||r instanceof ag||r instanceof $d||r instanceof fc||r instanceof vx||r instanceof yx||r instanceof gx||r instanceof xx||r instanceof wx||r instanceof bx||r instanceof pl||r instanceof kx||r instanceof Ex||r instanceof mx)&&i.transform.push(r.assemble()),(r instanceof Vo||r instanceof Wo||r instanceof ku||r instanceof Gs||r instanceof yf)&&i.transform.push(...r.assemble()),r instanceof Mr&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Mr?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Mr&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function Gke(e){const t=[],n=MH(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Yke(e,t){const n=[],r=MH(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function Xke(e){return e==="top"||e==="left"||Re(e)?"header":"footer"}function Kke(e){for(const t of bi)Qke(e,t);G8(e,"x"),G8(e,"y")}function Qke(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=Zf("title",null,r,t);let u=gf(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=ie(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const f=Zf("labelOrient",a.header,r,t),h=a.header!==null?Kt((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,p=Ze(["bottom","right"],f)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[p]:t==="facet"?[]:[DH(e,t,h)]}}}function DH(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function G8(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=uT(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=Xke(a.get("orient"));s[l]??(s[l]=[DH(e,o,!1)]);const u=hp(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function Zke(e){yT(e),cv(e,"width"),cv(e,"height")}function Jke(e){yT(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";cv(e,t),cv(e,n)}function yT(e){for(const t of e.children)t.parseLayoutSize()}function cv(e,t){const n=sH(t),r=U2(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??lH(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=hl(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function eSe(e){const{size:t,component:n}=e;for(const r of aa){const i=zr(r);if(t[i]){const o=t[i];n.layoutSize.set(i,ts(o)?"step":o,!0)}else{const o=tSe(e,i);n.layoutSize.set(i,o,!1)}}}function tSe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(kn(o)){const a=sv(r.view,t);return sc(s)||ts(a)?"step":a}else return k_(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return k_(r.view,t);{const o=sv(r.view,t);return ts(o)?o.step:o}}}function B_(e,t,n){return ye(t,{suffix:`by_${ye(e)}`,...n})}class Tp extends FH{constructor(n,r,i,o){super(n,"facet",r,i,o,n.resolve);ee(this,"facet");ee(this,"child");ee(this,"children");this.child=ET(n.spec,this,this.getName("child"),void 0,o),this.children=[this.child],this.facet=this.initFacet(n.facet)}initFacet(n){if(!Qg(n))return{facet:this.initFacetFieldDef(n,"facet")};const r=ae(n),i={};for(const o of r){if(![qs,Ws].includes(o)){fe(H2(o,"facet"));break}const s=n[o];if(s.field===void 0){fe(v_(s,o));break}i[o]=this.initFacetFieldDef(s,o)}return i}initFacetFieldDef(n,r){const i=B5(n,r);return i.header?i.header=Tn(i.header):i.header===null&&(i.header=null),i}channelHasField(n){return le(this.facet,n)}fieldDef(n){return this.facet[n]}parseData(){this.component.data=Sx(this),this.child.parseData()}parseLayoutSize(){yT(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,en(this.component.selection).some(n=>Ho(n))&&m5(g5)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Kke(this)}assembleSelectionTopLevelSignals(n){return this.child.assembleSelectionTopLevelSignals(n)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(n){return this.child.assembleSelectionData(n)}getHeaderLayoutMixins(){const n={};for(const r of bi)for(const i of aT){const o=this.component.layoutHeaders[r],s=o[i],{facetFieldDef:a}=o;if(a){const l=Zf("titleOrient",a.header,this.config,r);if(["right","bottom"].includes(l)){const u=dx(r,l);n.titleAnchor??(n.titleAnchor={}),n.titleAnchor[u]="end"}}if(s!=null&&s[0]){const l=r==="row"?"height":"width",u=i==="header"?"headerBand":"footerBand";r!=="facet"&&!this.child.component.layoutSize.get(l)&&(n[u]??(n[u]={}),n[u][r]=.5),o.title&&(n.offset??(n.offset={}),n.offset[r==="row"?"rowTitle":"columnTitle"]=10)}}return n}assembleDefaultLayout(){const{column:n,row:r}=this.facet,i=n?this.columnDistinctSignal():r?1:void 0;let o="all";return(!r&&this.component.resolve.scale.x==="independent"||!n&&this.component.resolve.scale.y==="independent")&&(o="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:o}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Tp))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(n){return this.parent&&this.parent instanceof Tp?{...this.channelHasField("column")?{encode:{update:{columns:{field:ye(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(n)}:super.assembleGroup(n)}getCardinalityAggregateForChild(){const n=[],r=[],i=[];if(this.child instanceof Tp){if(this.child.channelHasField("column")){const o=ye(this.child.facet.column);n.push(o),r.push("distinct"),i.push(`distinct_${o}`)}}else for(const o of aa){const s=this.child.component.scales[o];if(s&&!s.merged){const a=s.get("type"),l=s.get("range");if(kn(a)&&sc(l)){const u=px(this.child,o),f=pT(u);f?(n.push(f),r.push("distinct"),i.push(`distinct_${f}`)):fe(p5(o))}}}return{fields:n,ops:r,as:i}}assembleFacet(){const{name:n,data:r}=this.component.data.facetRoot,{row:i,column:o}=this.facet,{fields:s,ops:a,as:l}=this.getCardinalityAggregateForChild(),u=[];for(const h of bi){const p=this.facet[h];if(p){u.push(ye(p));const{bin:m,sort:y}=p;if(_t(m)&&u.push(ye(p,{binSuffix:"end"})),Hs(y)){const{field:v,op:w=Z2}=y,b=B_(p,y);i&&o?(s.push(b),a.push("max"),l.push(b)):(s.push(v),a.push(w),l.push(b))}else if(ie(y)){const v=Qf(p,h);s.push(v),a.push("max"),l.push(v)}}}const f=!!i&&!!o;return{name:n,data:r,groupby:u,...f||s.length>0?{aggregate:{...f?{cross:f}:{},...s.length?{fields:s,ops:a,as:l}:{}}}:{}}}facetSortFields(n){const{facet:r}=this,i=r[n];return i?Hs(i.sort)?[B_(i,i.sort,{expr:"datum"})]:ie(i.sort)?[Qf(i,n,{expr:"datum"})]:[ye(i,{expr:"datum"})]:[]}facetSortOrder(n){const{facet:r}=this,i=r[n];if(i){const{sort:o}=i;return[(Hs(o)?o.order:!ie(o)&&o)||"ascending"]}return[]}assembleLabelTitle(){var o;const{facet:n,config:r}=this;if(n.facet)return D_(n.facet,"facet",r);const i={row:["top","bottom"],column:["left","right"]};for(const s of sT)if(n[s]){const a=Zf("labelOrient",(o=n[s])==null?void 0:o.header,r,s);if(i[s].includes(a))return D_(n[s],s,r)}}assembleMarks(){const{child:n}=this,r=this.component.data.facetRoot,i=Gke(r),o=n.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||n.assembleTitle(),a=n.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:bi.map(u=>this.facetSortFields(u)).flat(),order:bi.map(u=>this.facetSortOrder(u)).flat()},...i.length>0?{data:i}:{},...o?{encode:{update:o}}:{},...n.assembleGroup(ybe(this,[]))}]}getMapping(){return this.facet}}function nSe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(Hs(o.sort)){const{field:s,op:a=Z2}=o.sort;e=i=new fc(e,{joinaggregate:[{op:a,field:s,as:B_(o,o.sort,{forAs:!0})}],groupby:[ye(o)]})}return i}return null}function OH(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const f=(i=e.format)==null?void 0:i.feature;if((f||u)&&f!==u)continue;const h=(o=a.format)==null?void 0:o.mesh;if(!((l||h)&&l!==h)){if(og(e)&&og(a)){if(Zr(e.values,a.values))return s}else if(Yf(e)&&Yf(a)){if(e.url===a.url)return s}else if(bW(e)&&e.name===s.dataName)return s}}return null}function rSe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Vu({values:[]});return t.push(r),r}const n=OH(e.data,t);if(n)return Ja(e.data)||(n.data.format=mU({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Vu(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function iSe(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(Hwe(i))s=e=new Kf(e,i),o="derived";else if(J5(i)){const a=XEe(i);s=e=Xn.makeWithAncestors(e,{},a,n)??e,e=new _d(e,t,i.filter)}else if(mW(i))s=e=Vo.makeFromTransform(e,i,t),o="number";else if(Gwe(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Xn(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=Wo.makeFromTransform(e,i);else if(Ywe(i))s=e=io.makeFromTransform(e,i),o="number",oT(t)&&(e=new pl(e));else if(gW(i))s=e=ag.make(e,t,i,r++),o="derived";else if(Uwe(i))s=e=new $d(e,i),o="number";else if(qwe(i))s=e=new fc(e,i),o="number";else if(Xwe(i))s=e=Gs.makeFromTransform(e,i),o="derived";else if(Kwe(i))s=e=new vx(e,i),o="derived";else if(Qwe(i))s=e=new mx(e,i),o="derived";else if(Wwe(i))s=e=new yx(e,i),o="derived";else if(Pwe(i))s=e=new Ex(e,i),o="derived";else if(Bwe(i))e=new kx(e,i);else if(Vwe(i))s=e=ku.makeFromTransform(e,i),o="derived";else if(Lwe(i))s=e=new gx(e,i),o="derived";else if(Iwe(i))s=e=new wx(e,i),o="derived";else if(zwe(i))s=e=new bx(e,i),o="derived";else if(jwe(i))s=e=new xx(e,i),o="derived";else{fe(gve(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function Sx(e){var w;let t=rSe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(Ja(i)||Yf(i)||og(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new ube;Ja(i)?(EW(i)?t=new i0(t,i.sequence):eT(i)&&(t=new r0(t,i.graticule)),s.parseNothing=!0):((w=i==null?void 0:i.format)==null?void 0:w.parse)===null&&(s.parseNothing=!0),t=Xn.makeExplicit(t,e,s)??t,t=new pl(t);const a=e.parent&&Ad(e.parent);(It(e)||ri(e))&&a&&(t=Vo.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=iSe(t,e,s));const l=QEe(e),u=KEe(e);t=Xn.makeWithAncestors(t,{},{...l,...u},s)??t,It(e)&&(t=yf.parseAll(t,e),t=sg.parseAll(t,e)),(It(e)||ri(e))&&(a||(t=Vo.makeFromEncoding(t,e)??t),t=Wo.makeFromEncoding(t,e)??t,t=Kf.parseAllForSortIndex(t,e));const f=t=Zm(zt.Raw,e,t);if(It(e)){const b=io.makeFromEncoding(t,e);b&&(t=b,oT(e)&&(t=new pl(t))),t=ku.makeFromEncoding(t,e)??t,t=Gs.makeFromEncoding(t,e)??t}let h,p;if(It(e)){const{markDef:b,mark:k,config:_}=e,C=wt("invalid",b,_),{marks:$,scales:R}=p=SW({invalid:C,isPath:Tl(k)});$!==R&&R==="include-invalid-values"&&(h=t=Zm(zt.PreFilterInvalid,e,t)),$==="exclude-invalid-values"&&(t=Jf.make(t,e,p)??t)}const m=t=Zm(zt.Main,e,t);let y;if(It(e)&&p){const{marks:b,scales:k}=p;b==="include-invalid-values"&&k==="exclude-invalid-values"&&(t=Jf.make(t,e,p)??t,y=t=Zm(zt.PostFilterInvalid,e,t))}It(e)&&Vbe(e,m);let v=null;if(ri(e)){const b=e.getName("facet");t=nSe(t,e.facet)??t,v=new Cd(t,e,b,m.getSource()),n[b]=v}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:m,facetRoot:v,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:y}}function Zm(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new Mr(n,o,e,i);return r[o]=s,s}class oSe extends mT{constructor(n,r,i,o){var s,a,l,u;super(n,"concat",r,i,o,n.resolve);ee(this,"children");(((a=(s=n.resolve)==null?void 0:s.axis)==null?void 0:a.x)==="shared"||((u=(l=n.resolve)==null?void 0:l.axis)==null?void 0:u.y)==="shared")&&fe(dve),this.children=this.getChildren(n).map((f,h)=>ET(f,this,this.getName(`concat_${h}`),void 0,o))}parseData(){this.component.data=Sx(this);for(const n of this.children)n.parseData()}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const r of ae(n.component.selection))this.component.selection[r]=n.component.selection[r]}en(this.component.selection).some(n=>Ho(n))&&m5(g5)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){for(const n of this.children)n.parseAxesAndHeaders()}getChildren(n){return ox(n)?n.vconcat:Q5(n)?n.hconcat:n.concat}parseLayoutSize(){Jke(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(n){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),n)}assembleSignals(){return this.children.forEach(n=>n.assembleSignals()),[]}assembleLayoutSignals(){const n=lT(this);for(const r of this.children)n.push(...r.assembleLayoutSignals());return n}assembleSelectionData(n){return this.children.reduce((r,i)=>i.assembleSelectionData(r),n)}assembleMarks(){return this.children.map(n=>{const r=n.assembleTitle(),i=n.assembleGroupStyle(),o=n.assembleGroupEncodeEntry(!1);return{type:"group",name:n.getName("group"),...r?{title:r}:{},...i?{style:i}:{},...o?{encode:{update:o}}:{},...n.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const n=this.layout.columns;return{...n!=null?{columns:n}:{},bounds:"full",align:"each"}}}function sSe(e){return e===!1||e===null}const aSe={disable:1,gridScale:1,scale:1,...zq,labelExpr:1,encode:1},PH=ae(aSe);class vT extends ua{constructor(n={},r={},i=!1){super();ee(this,"explicit");ee(this,"implicit");ee(this,"mainExtracted");this.explicit=n,this.implicit=r,this.mainExtracted=i}clone(){return new vT(qe(this.explicit),qe(this.implicit),this.mainExtracted)}hasAxisPart(n){return n==="axis"?!0:n==="grid"||n==="title"?!!this.get(n):!sSe(this.get(n))}hasOrientSignalRef(){return Re(this.explicit.orient)}}function lSe(e,t,n){const{encoding:r,config:i}=e,o=un(r[t])??un(r[hs(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(qu(l))return{text:no({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(Hf(o)==="quantitative"){if(Vf(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:no({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:no({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Hf(o)==="temporal"&&i.timeFormatType&&de(o)&&!o.timeUnit)return{text:no({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function uSe(e){return aa.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[mSe(n,e)]),t),{})}const cSe={bottom:"top",top:"bottom",left:"right",right:"left"};function fSe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of ae(i.component.axes))n.axis[o]=uT(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=dSe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of aa){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!Re(a)){if(r[a]>0&&!l){const u=cSe[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function dSe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=hSe(i,o)}}}else return t.map(n=>n.clone());return e}function hSe(e,t){for(const n of PH){const r=hl(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return qU(i,o);case"gridScale":return{explicit:i.explicit,value:Kt(i.value,o.value)}}return ax(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function pSe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Re(n.labelAngle)?n.labelAngle:rg(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===tH(r,i))return!0}return e===n[t]}const gSe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function mSe(e,t){var b,k;let n=t.axis(e);const r=new vT,i=un(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((b=s[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((k=s.axis)==null?void 0:k.orient)||nEe(e),l=t.getScaleComponent(e).get("type"),u=Xbe(e,l,a,t.config),f=n!==void 0?!n:F_("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",f,n!==void 0),f)return r;n=n||{};const h=Jbe(i,n,e,s.style,u),p=_q(n.formatType,i,l),m=Sq(i,i.type,n.format,n.formatType,s,!0),y={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:h,format:m,formatType:p,mark:o,config:s};for(const _ of PH){const C=_ in M8?M8[_](y):s8(_)?n[_]:void 0,$=C!==void 0,R=pSe(C,_,n,t,e);if($&&R)r.set(_,C,R);else{const{configValue:A=void 0,configFrom:N=void 0}=s8(_)&&_!=="values"?F_(_,s.style,n.style,u):{},F=A!==void 0;$&&!F?r.set(_,C,R):(N!=="vgAxisConfig"||gSe.has(_)&&F||t0(A)||Re(A))&&r.set(_,A,!1)}}const v=n.encoding??{},w=Iq.reduce((_,C)=>{if(!r.hasAxisPart(C))return _;const $=aH(v[C]??{},t),R=C==="labels"?lSe(t,e,$):$;return R!==void 0&&!kt(R)&&(_[C]={update:R}),_},{});return kt(w)||r.set("encode",w,!!n.encoding||n.labelAngle!==void 0),r}function ySe({encoding:e,size:t}){for(const n of aa){const r=zr(n);ts(t[r])&&Ga(e[n])&&(delete t[r],fe(YU(r)))}return t}const vSe={vgMark:"arc",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...hr("x",e,{defaultPos:"mid"}),...hr("y",e,{defaultPos:"mid"}),...Js(e,"radius"),...Js(e,"theta")})},xSe={vgMark:"area",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...av("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...av("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...iT(e)})},wSe={vgMark:"rect",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y")})},bSe={vgMark:"shape",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&de(n)&&n.type===kd?{field:ye(n,{expr:"datum"})}:{}}]}},ESe={vgMark:"image",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y"),...nT(e,"url")})},kSe={vgMark:"line",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...hr("x",e,{defaultPos:"mid"}),...hr("y",e,{defaultPos:"mid"}),...Nn("size",e,{vgChannel:"strokeWidth"}),...iT(e)})},SSe={vgMark:"trail",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...hr("x",e,{defaultPos:"mid"}),...hr("y",e,{defaultPos:"mid"}),...Nn("size",e),...iT(e)})};function xT(e,t){const{config:n}=e;return{...Oi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...hr("x",e,{defaultPos:"mid"}),...hr("y",e,{defaultPos:"mid"}),...Nn("size",e),...Nn("angle",e),..._Se(e,n,t)}}function _Se(e,t,n){return n?{shape:{value:n}}:Nn("shape",e)}const CSe={vgMark:"symbol",encodeEntry:e=>xT(e)},$Se={vgMark:"symbol",encodeEntry:e=>xT(e,"circle")},ASe={vgMark:"symbol",encodeEntry:e=>xT(e,"square")},TSe={vgMark:"rect",encodeEntry:e=>({...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y")})},RSe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...av("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...av("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Nn("size",e,{vgChannel:"strokeWidth"})}}},NSe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Oi(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...hr("x",e,{defaultPos:"mid"}),...hr("y",e,{defaultPos:"mid"}),...nT(e),...Nn("size",e,{vgChannel:"fontSize"}),...Nn("angle",e),...T8("align",FSe(e.markDef,n,t)),...T8("baseline",MSe(e.markDef,n,t)),...hr("radius",e,{defaultPos:null}),...hr("theta",e,{defaultPos:null})}}};function FSe(e,t,n){if(wt("align",e,n)===void 0)return"center"}function MSe(e,t,n){if(wt("baseline",e,n)===void 0)return"middle"}const DSe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Oi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,i),...hr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:Tt(wt("thickness",n,t))}}},Jm={arc:vSe,area:xSe,bar:wSe,circle:$Se,geoshape:bSe,image:ESe,line:kSe,point:CSe,rect:TSe,rule:RSe,square:ASe,text:NSe,tick:DSe,trail:SSe};function OSe(e){if(Ze([K2,Y2,U2e],e.mark)){const t=Hq(e.mark,e.encoding);if(t.length>0)return PSe(e,t)}else if(e.mark===X2){const t=m_.some(n=>wt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return LSe(e)}return wT(e)}const Y8="faceted_path_";function PSe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Y8+e.requestDataName(zt.Main),data:e.requestDataName(zt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:wT(e,{fromPrefix:Y8})}]}const X8="stack_group_";function LSe(e){var u;const[t]=wT(e,{fromPrefix:X8}),n=e.scaleName(e.stack.fieldChannel),r=(f={})=>e.vgField(e.stack.fieldChannel,f),i=(f,h)=>{const p=[r({prefix:"min",suffix:"start",expr:h}),r({prefix:"max",suffix:"start",expr:h}),r({prefix:"min",suffix:"end",expr:h}),r({prefix:"max",suffix:"end",expr:h})];return`${f}(${p.map(m=>`scale('${n}',${m})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...zf(t.encode.update,["y","yc","y2","height",...m_]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ni(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...zf(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ni(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of m_){const h=Jo(f,e.markDef,e.config);t.encode.update[f]?(o[f]=t.encode.update[f],delete t.encode.update[f]):h&&(o[f]=Tt(h)),h&&(t.encode.update[f]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const f of e.stack.groupbyChannels){const h=e.fieldDef(f),p=ye(h);p&&a.push(p),(h!=null&&h.bin||h!=null&&h.timeUnit)&&a.push(ye(h,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,h)=>{if(t.encode.update[h])return{...f,[h]:t.encode.update[h]};{const p=Jo(h,e.markDef,e.config);return p!==void 0?{...f,[h]:Tt(p)}:f}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(zt.Main),name:X8+e.requestDataName(zt.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function ISe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!ie(s)&&co(s)&&p_(s.value)||!s&&p_(wt("order",i,o)))){if((ie(s)||de(s))&&!n)return jU(s,{expr:"datum"});if(Tl(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(de(l))return{field:a}}}}function wT(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=Kt(r.clip,zSe(e),jSe(e)),a=IU(r),l=i.key,u=ISe(e),f=BSe(e),h=wt("aria",r,o),p=Jm[n].postEncodingTransform?Jm[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Jm[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...f||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(zt.Main)},encode:{update:Jm[n].encodeEntry(e)},...p?{transform:p}:{}}]}function zSe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function jSe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function BSe(e){if(!e.component.selection)return null;const t=ae(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ae(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class LH extends FH{constructor(n,r,i,o={},s){super(n,"unit",r,i,s,void 0,l8(n)?n.view:void 0);ee(this,"markDef");ee(this,"encoding");ee(this,"specifiedScales",{});ee(this,"stack");ee(this,"specifiedAxes",{});ee(this,"specifiedLegends",{});ee(this,"specifiedProjection",{});ee(this,"selection",[]);ee(this,"children",[]);ee(this,"correctDataNames",n=>{var r,i,o;return(r=n.from)!=null&&r.data&&(n.from.data=this.lookupDataSource(n.from.data),"time"in this.encoding&&(n.from.data=n.from.data+CW)),(o=(i=n.from)==null?void 0:i.facet)!=null&&o.data&&(n.from.facet.data=this.lookupDataSource(n.from.facet.data)),n});const a=es(n.mark)?{...n.mark}:{type:n.mark},l=a.type;a.filled===void 0&&(a.filled=_we(a,s,{graticule:n.data&&eT(n.data)}));const u=this.encoding=Txe(n.encoding||{},l,a.filled,s);this.markDef=dW(a,u,s),this.size=ySe({encoding:u,size:l8(n)?{...o,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}}:o}),this.stack=fW(this.markDef,u),this.specifiedScales=this.initScales(l,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=n.projection,this.selection=(n.params??[]).filter(f=>X5(f))}get hasProjection(){const{encoding:n}=this,r=this.mark===yq,i=n&&bye.some(o=>We(n[o]));return r||i}scaleDomain(n){const r=this.specifiedScales[n];return r?r.domain:void 0}axis(n){return this.specifiedAxes[n]}legend(n){return this.specifiedLegends[n]}initScales(n,r){return f5.reduce((i,o)=>{const s=un(r[o]);return s&&(i[o]=this.initScale(s.scale??{})),i},{})}initScale(n){const{domain:r,range:i}=n,o=Tn(n);return ie(r)&&(o.domain=r.map(Kr)),ie(i)&&(o.range=i.map(Kr)),o}initAxes(n){return aa.reduce((r,i)=>{const o=n[i];if(We(o)||i===Dt&&We(n.x2)||i===_n&&We(n.y2)){const s=We(o)?o.axis:void 0;r[i]=s&&this.initAxis({...s})}return r},{})}initAxis(n){const r=ae(n),i={};for(const o of r){const s=n[o];i[o]=t0(s)?LU(s):Kr(s)}return i}initLegends(n){return Fye.reduce((r,i)=>{const o=un(n[i]);if(o&&Dye(i)){const s=o.legend;r[i]=s&&Tn(s)}return r},{})}parseData(){this.component.data=Sx(this)}parseLayoutSize(){eSe(this)}parseSelections(){this.component.selection=Hbe(this,this.selection)}parseMarkGroup(){this.component.mark=OSe(this)}parseAxesAndHeaders(){this.component.axes=uSe(this)}assembleSelectionTopLevelSignals(n){return vbe(this,n)}assembleSignals(){return[...ZW(this),...mbe(this,[])]}assembleSelectionData(n){return xbe(this,n)}assembleLayout(){return null}assembleLayoutSignals(){return lT(this)}assembleMarks(){let n=this.component.mark??[];return(!this.parent||!Ad(this.parent))&&(n=RW(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:n}=this.view||{};return n!==void 0?n:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(n){return bu(this.encoding,n)}fieldDef(n){const r=this.encoding[n];return fo(r)}typedFieldDef(n){const r=this.fieldDef(n);return xr(r)?r:null}}class bT extends mT{constructor(n,r,i,o,s){super(n,"layer",r,i,s,n.resolve,n.view);ee(this,"children");const a={...o,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}};this.children=n.layer.map((l,u)=>{if(sx(l))return new bT(l,this,this.getName(`layer_${u}`),a,s);if(la(l))return new LH(l,this,this.getName(`layer_${u}`),a,s);throw new Error(h5(l))})}parseData(){this.component.data=Sx(this);for(const n of this.children)n.parseData()}parseLayoutSize(){Zke(this)}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const r of ae(n.component.selection))this.component.selection[r]=n.component.selection[r]}en(this.component.selection).some(n=>Ho(n))&&m5(g5)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){fSe(this)}assembleSelectionTopLevelSignals(n){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),n)}assembleSignals(){return this.children.reduce((n,r)=>n.concat(r.assembleSignals()),ZW(this))}assembleLayoutSignals(){return this.children.reduce((n,r)=>n.concat(r.assembleLayoutSignals()),lT(this))}assembleSelectionData(n){return this.children.reduce((r,i)=>i.assembleSelectionData(r),n)}assembleGroupStyle(){const n=new Set;for(const i of this.children)for(const o of xe(i.assembleGroupStyle()))n.add(o);const r=Array.from(n);return r.length>1?r:r.length===1?r[0]:void 0}assembleTitle(){let n=super.assembleTitle();if(n)return n;for(const r of this.children)if(n=r.assembleTitle(),n)return n}assembleLayout(){return null}assembleMarks(){return wbe(this,this.children.flatMap(n=>n.assembleMarks()))}assembleLegends(){return this.children.reduce((n,r)=>n.concat(r.assembleLegends()),gH(this))}}function ET(e,t,n,r,i){if(J2(e))return new Tp(e,t,n,i);if(sx(e))return new bT(e,t,n,r,i);if(la(e))return new LH(e,t,n,r,i);if(Jxe(e))return new oSe(e,t,n,i);throw new Error(h5(e))}function USe(e,t={}){t.logger&&n2e(t.logger),t.fieldTitle&&Oq(t.fieldTitle);try{const n=cW(id(t.config,e.config)),r=xW(e,n),i=ET(r,null,"",void 0,n);return i.parse(),dke(i.component.data,i),{spec:WSe(i,qSe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&r2e(),t.fieldTitle&&wxe()}}function qSe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):we(t)&&(t={type:t}),i&&o&&sbe(t.type)){if(i==="step"&&o==="step")fe(VD()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";fe(VD(U2(s)));const a=s==="width"?"height":"width";t.type=abe(a)}}return{...ae(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...w8(n,!1),...w8(e,!0)}}function WSe(e,t,n={},r){const i=e.config?hwe(e.config):void 0,o=Yke(e.component.data,n),s=e.assembleSelectionData(o),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(y=>(y.name==="width"||y.name==="height")&&y.value!==void 0?(t[y.name]=+y.value,!1):!0);const{params:p,...m}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...m,...l?{title:l}:{},...u?{style:u}:{},...f?{encode:{update:f}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...sW(p)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const HSe=gye.version,VSe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Bf,accessPathWithDatum:r5,accessWithDatumToUnescapedPath:mt,compile:USe,contains:Ze,deepEqual:Zr,deleteNestedProperty:Qy,duplicate:qe,entries:cl,every:e5,fieldIntersection:n5,flatAccessWithDatum:vU,getFirstDefined:Kt,hasIntersection:t5,hasProperty:le,hash:Je,internalField:bU,isBoolean:ng,isEmpty:kt,isEqual:yye,isInternalField:EU,isNullOrFalse:p_,isNumeric:P2,keys:ae,logicalExpr:$p,mergeDeep:mU,never:gU,normalize:xW,normalizeAngle:rg,omit:ni,pick:zf,prefixGenerator:g_,removePathFromField:bd,replaceAll:Lu,replacePathInField:Ni,resetIdCounter:xye,setEqual:yU,some:jf,stringify:ht,titleCase:Wg,unique:zo,uniqueId:wU,vals:en,varName:Ft,version:HSe},Symbol.toStringTag,{value:"Module"}));function IH(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var GSe="2.15.0",YSe={version:GSe};const Xc="#fff",K8="#888",XSe={background:"#333",view:{stroke:K8},title:{color:Xc,subtitleColor:Xc},style:{"guide-label":{fill:Xc},"guide-title":{fill:Xc}},axis:{domainColor:Xc,gridColor:K8,tickColor:Xc}},Gl="#4572a7",KSe={background:"#fff",arc:{fill:Gl},area:{fill:Gl},line:{stroke:Gl,strokeWidth:2},path:{stroke:Gl},rect:{fill:Gl},shape:{stroke:Gl},symbol:{fill:Gl,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Yl="#30a2da",nk="#cbcbcb",QSe="#999",ZSe="#333",Q8="#f0f0f0",Z8="#333",JSe={arc:{fill:Yl},area:{fill:Yl},axis:{domainColor:nk,grid:!0,gridColor:nk,gridWidth:1,labelColor:QSe,labelFontSize:10,titleColor:ZSe,tickColor:nk,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Q8,group:{fill:Q8},legend:{labelColor:Z8,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Z8,titleFontSize:14,titlePadding:10},line:{stroke:Yl,strokeWidth:2},path:{stroke:Yl,strokeWidth:.5},rect:{fill:Yl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Yl},bar:{binSpacing:2,fill:Yl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Xl="#000",e_e={group:{fill:"#e5e5e5"},arc:{fill:Xl},area:{fill:Xl},line:{stroke:Xl},path:{stroke:Xl},rect:{fill:Xl},shape:{stroke:Xl},symbol:{fill:Xl,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},t_e=22,n_e="normal",J8="Benton Gothic, sans-serif",eO=11.5,r_e="normal",Kl="#82c6df",rk="Benton Gothic Bold, sans-serif",tO="normal",nO=13,jh={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},i_e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:rk,fontSize:t_e,fontWeight:n_e},arc:{fill:Kl},area:{fill:Kl},line:{stroke:Kl,strokeWidth:2},path:{stroke:Kl},rect:{fill:Kl},shape:{stroke:Kl},symbol:{fill:Kl,size:30},axis:{labelFont:J8,labelFontSize:eO,labelFontWeight:r_e,titleFont:rk,titleFontSize:nO,titleFontWeight:tO},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:J8,labelFontSize:eO,symbolType:"square",titleFont:rk,titleFontSize:nO,titleFontWeight:tO},range:{category:jh["category-6"],diverging:jh["fireandice-6"],heatmap:jh["fire-7"],ordinal:jh["fire-7"],ramp:jh["fire-7"]}},Ql="#ab5787",e1="#979797",o_e={background:"#f9f9f9",arc:{fill:Ql},area:{fill:Ql},line:{stroke:Ql},path:{stroke:Ql},rect:{fill:Ql},shape:{stroke:Ql},symbol:{fill:Ql,size:30},axis:{domainColor:e1,domainWidth:.5,gridWidth:.2,labelColor:e1,tickColor:e1,tickWidth:.2,titleColor:e1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Zl="#3e5c69",s_e={background:"#fff",arc:{fill:Zl},area:{fill:Zl},line:{stroke:Zl},path:{stroke:Zl},rect:{fill:Zl},shape:{stroke:Zl},symbol:{fill:Zl},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},gi="#1696d2",rO="#000000",a_e="#FFFFFF",t1="Lato",ik="Lato",l_e="Lato",u_e="#DEDDDD",c_e=18,Bh={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},f_e={background:a_e,title:{anchor:"start",fontSize:c_e,font:t1},axisX:{domain:!0,domainColor:rO,domainWidth:1,grid:!1,labelFontSize:12,labelFont:ik,labelAngle:0,tickColor:rO,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:t1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:u_e,gridWidth:1,labelFontSize:12,labelFont:ik,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:t1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:ik,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:t1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Bh["six-groups-cat-1"],diverging:Bh["diverging-colors"],heatmap:Bh["diverging-colors"],ordinal:Bh["six-groups-seq"],ramp:Bh["shades-blue"]},area:{fill:gi},rect:{fill:gi},line:{color:gi,stroke:gi,strokeWidth:5},trail:{color:gi,stroke:gi,strokeWidth:0,size:1},path:{stroke:gi,strokeWidth:.5},point:{filled:!0},text:{font:l_e,color:gi,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:gi,stroke:null}},arc:{fill:gi},shape:{stroke:gi},symbol:{fill:gi,size:30}},Jl="#3366CC",iO="#ccc",n1="Arial, sans-serif",d_e={arc:{fill:Jl},area:{fill:Jl},path:{stroke:Jl},rect:{fill:Jl},shape:{stroke:Jl},symbol:{stroke:Jl},circle:{fill:Jl},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:n1,fontSize:12},"guide-title":{font:n1,fontSize:12},"group-title":{font:n1,fontSize:12}},title:{font:n1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:iO,tickColor:iO,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},kT=e=>e*(1/3+1),oO=kT(9),sO=kT(10),aO=kT(12),Uh="Segoe UI",lO="wf_standard-font, helvetica, arial, sans-serif",uO="#252423",qh="#605E5C",cO="transparent",h_e="#C8C6C4",Hi="#118DFF",p_e="#12239E",g_e="#E66C37",m_e="#6B007B",y_e="#E044A7",v_e="#744EC2",x_e="#D9B300",w_e="#D64550",zH=Hi,jH="#DEEFFF",fO=[jH,zH],b_e=[jH,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",zH],E_e={view:{stroke:cO},background:cO,font:Uh,header:{titleFont:lO,titleFontSize:aO,titleColor:uO,labelFont:Uh,labelFontSize:sO,labelColor:qh},axis:{ticks:!1,grid:!1,domain:!1,labelColor:qh,labelFontSize:oO,titleFont:lO,titleColor:uO,titleFontSize:aO,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:h_e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Hi},line:{stroke:Hi,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Uh,fontSize:oO,fill:qh},arc:{fill:Hi},area:{fill:Hi,line:!0,opacity:.6},path:{stroke:Hi},rect:{fill:Hi},point:{fill:Hi,filled:!0,size:75},shape:{stroke:Hi},symbol:{fill:Hi,strokeWidth:1.5,size:50},legend:{titleFont:Uh,titleFontWeight:"bold",titleColor:qh,labelFont:Uh,labelFontSize:sO,labelColor:qh,symbolType:"circle",symbolSize:75},range:{category:[Hi,p_e,g_e,m_e,y_e,v_e,x_e,w_e],diverging:fO,heatmap:fO,ordinal:b_e}},ok='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',k_e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',sk=400,r1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},S_e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],__e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function _x({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=r1.gridBg[e],i=r1.textPrimary[e],o=r1.textSecondary[e],s=n==="dark"?S_e:__e,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:ok,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:k_e,labelFontWeight:sk,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:r1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:ok,fill:o,fontWeight:sk},"guide-title":{font:ok,fill:o,fontWeight:sk}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const C_e=_x({theme:"white",background:"#ffffff"}),$_e=_x({theme:"g10",background:"#f4f4f4"}),A_e=_x({theme:"g90",background:"#262626"}),T_e=_x({theme:"g100",background:"#161616"}),R_e=YSe.version,N_e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:$_e,carbong100:T_e,carbong90:A_e,carbonwhite:C_e,dark:XSe,excel:KSe,fivethirtyeight:JSe,ggplot2:e_e,googlecharts:d_e,latimes:i_e,powerbi:E_e,quartz:o_e,urbaninstitute:f_e,version:R_e,vox:s_e},Symbol.toStringTag,{value:"Module"}));function F_e(e,t,n,r){if(tye(e))return`[${e.map(i=>t(rye(i)?i:dO(i,n))).join(", ")}]`;if(zD(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let f=a[u];f!==void 0&&(zD(f)&&(f=dO(f,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function M_e(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function dO(e,t){return JSON.stringify(e,M_e(t))}var D_e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const BH="vg-tooltip-element",O_e={offsetX:10,offsetY:10,id:BH,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:P_e,maxDepth:2,formatTooltip:F_e,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function P_e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function L_e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return D_e.toString().replace(BH,e)}function UH(e,t,{offsetX:n,offsetY:r}){const i=qH({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),o=["bottom-right","bottom-left","top-right","top-left"];for(const s of o)if(WH(i[s],t))return i[s];return i["top-left"]}function I_e(e,t,n,r,i){const{position:o,offsetX:s,offsetY:a}=i,l=e._el.getBoundingClientRect(),u=e._origin,f=z_e(l,u,n),h=qH(f,r,s,a),p=Array.isArray(o)?o:[o];for(const m of p)if(WH(h[m],r)&&!j_e(t,h[m],r))return h[m];return UH(t,r,i)}function z_e(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,o=e.top+t[1]+r.y1,s=n;for(;s.mark.group;)s=s.mark.group,i+=s.x??0,o+=s.y??0;const a=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+a,y1:o,y2:o+l}}function qH(e,t,n,r){const i=(e.x1+e.x2)/2,o=(e.y1+e.y2)/2,s=e.x1-t.width-n,a=i-t.width/2,l=e.x2+n,u=e.y1-t.height-r,f=o-t.height/2,h=e.y2+r;return{top:{x:a,y:u},bottom:{x:a,y:h},left:{x:s,y:f},right:{x:l,y:f},"top-left":{x:s,y:u},"top-right":{x:l,y:u},"bottom-left":{x:s,y:h},"bottom-right":{x:l,y:h}}}function WH(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function j_e(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class B_e{constructor(t){this.options={...O_e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=L_e(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=this.options.anchor==="mark"?I_e(t,n,r,this.el.getBoundingClientRect(),this.options):UH(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var ak={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var U_e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),q_e=Object.prototype.hasOwnProperty;function U_(e,t){return q_e.call(e,t)}function q_(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)U_(e,i)&&r.push(i);return r}function Jr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function W_(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function iu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function HH(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function H_(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(H_(e[t]))return!0}else if(typeof e=="object"){for(var r=q_(e),i=r.length,o=0;o<i;o++)if(H_(e[r[o]]))return!0}}return!1}function hO(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var VH=function(e){U_e(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,hO(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=hO(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),qt=VH,W_e=Jr,sf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=fv(n,this.path);r&&(r=Jr(r));var i=Su(n,{op:"remove",path:this.from}).removed;return Su(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=fv(n,this.from);return Su(n,{op:"add",path:this.path,value:Jr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:lg(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},H_e={add:function(e,t,n){return W_(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:sf.move,copy:sf.copy,test:sf.test,_get:sf._get};function fv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Su(e,n),n.value}function Su(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):dv(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=fv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=lg(e,t.value),s.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Jr(e));var a=t.path||"",l=a.split("/"),u=e,f=1,h=l.length,p=void 0,m=void 0,y=void 0;for(typeof n=="function"?y=n:y=dv;;){if(m=l[f],m&&m.indexOf("~")!=-1&&(m=HH(m)),i&&(m=="__proto__"||m=="prototype"&&f>0&&l[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[m]===void 0?p=l.slice(0,f).join("/"):f==h-1&&(p=t.path),p!==void 0&&y(t,0,e,p)),f++,Array.isArray(u)){if(m==="-")m=u.length;else{if(n&&!W_(m))throw new qt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);W_(m)&&(m=~~m)}if(f>=h){if(n&&t.op==="add"&&m>u.length)throw new qt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=H_e[t.op].call(t,u,m,e);if(s.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(f>=h){var s=sf[t.op].call(t,u,m,e);if(s.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[m],n&&f<h&&(!u||typeof u!="object"))throw new qt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function Cx(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Jr(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Su(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function V_e(e,t,n){var r=Su(e,t);if(r.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function dv(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(sf[e.op]){if(typeof e.path!="string")throw new qt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&H_(e.value))throw new qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new qt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=GH([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function GH(e,t,n){try{if(!Array.isArray(e))throw new qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Cx(Jr(t),Jr(e),n||!0);else{n=n||dv;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qt)return i;throw i}}function lg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!lg(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!lg(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var G_e=Object.freeze({__proto__:null,JsonPatchError:qt,_areEquals:lg,applyOperation:Su,applyPatch:Cx,applyReducer:V_e,deepClone:W_e,getValueByPointer:fv,validate:GH,validator:dv});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var ST=new WeakMap,Y_e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),X_e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function K_e(e){return ST.get(e)}function Q_e(e,t){return e.observers.get(t)}function Z_e(e,t){e.observers.delete(t.callback)}function J_e(e,t){t.unobserve()}function eCe(e,t){var n=[],r,i=K_e(e);if(!i)i=new Y_e(e),ST.set(e,i);else{var o=Q_e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Jr(e),t){r.callback=t,r.next=null;var s=function(){V_(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){V_(r),clearTimeout(r.next),Z_e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new X_e(t,r)),r}function V_(e,t){t===void 0&&(t=!1);var n=ST.get(e.object);_T(n.value,e.object,e.patches,"",t),e.patches.length&&Cx(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function _T(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=q_(t),s=q_(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],f=e[u];if(U_(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var h=t[u];typeof f=="object"&&f!=null&&typeof h=="object"&&h!=null&&Array.isArray(f)===Array.isArray(h)?_T(f,h,n,r+"/"+iu(u),i):f!==h&&(i&&n.push({op:"test",path:r+"/"+iu(u),value:Jr(f)}),n.push({op:"replace",path:r+"/"+iu(u),value:Jr(h)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+iu(u),value:Jr(f)}),n.push({op:"remove",path:r+"/"+iu(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!U_(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+iu(u),value:Jr(t[u])})}}}function tCe(e,t,n){n===void 0&&(n=!1);var r=[];return _T(e,t,r,"",n),r}var nCe=Object.freeze({__proto__:null,compare:tCe,generate:V_,observe:eCe,unobserve:J_e});Object.assign({},G_e,nCe,{JsonPatchError:VH,deepClone:Jr,escapePathComponent:iu,unescapePathComponent:HH});function rCe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lk,pO;function iCe(){if(pO)return lk;pO=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return lk=e,lk}var uk,gO;function CT(){if(gO)return uk;gO=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return uk=r=>r?typeof r!="object"?e:r:t,uk}var i1={exports:{}},ck,mO;function $T(){if(mO)return ck;mO=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return ck={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ck}var fk,yO;function $x(){return yO||(yO=1,fk=typeof process=="object"&&ak&&ak.NODE_DEBUG&&/\bsemver\b/i.test(ak.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),fk}var vO;function AT(){return vO||(vO=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=$T(),o=$x();t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let f=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[h,r]],m=v=>{for(const[w,b]of p)v=v.split(`${w}*`).join(`${w}{0,${b}}`).split(`${w}+`).join(`${w}{1,${b}}`);return v},y=(v,w,b)=>{const k=m(w),_=f++;o(v,_,w),u[v]=_,l[_]=w,s[_]=new RegExp(w,b?"g":void 0),a[_]=new RegExp(k,b?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),y("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${h}+`),y("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),y("FULL",`^${l[u.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),y("LOOSE",`^${l[u.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),y("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",l[u.COERCE],!0),y("COERCERTLFULL",l[u.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(i1,i1.exports)),i1.exports}var dk,xO;function oCe(){if(xO)return dk;xO=1;const e=/^[0-9]+$/,t=(r,i)=>{const o=e.test(r),s=e.test(i);return o&&s&&(r=+r,i=+i),r===i?0:o&&!s?-1:s&&!o?1:r<i?-1:1};return dk={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},dk}var hk,wO;function TT(){if(wO)return hk;wO=1;const e=$x(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=$T(),{safeRe:r,t:i}=AT(),o=CT(),{compareIdentifiers:s}=oCe();class a{constructor(u,f){if(f=o(f),u instanceof a){if(u.loose===!!f.loose&&u.includePrerelease===!!f.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const h=u.trim().match(f.loose?r[i.LOOSE]:r[i.FULL]);if(!h)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+h[1],this.minor=+h[2],this.patch=+h[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");h[4]?this.prerelease=h[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const m=+p;if(m>=0&&m<n)return m}return p}):this.prerelease=[],this.build=h[5]?h[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if(typeof u=="string"&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),s(this.major,u.major)||s(this.minor,u.minor)||s(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let f=0;do{const h=this.prerelease[f],p=u.prerelease[f];if(e("prerelease compare",f,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++f)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let f=0;do{const h=this.build[f],p=u.build[f];if(e("build compare",f,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++f)}inc(u,f,h){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,h);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,h);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,h),this.inc("pre",f,h);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,h),this.inc("pre",f,h);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(h)?1:0;if(!f&&h===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[p];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(f===this.prerelease.join(".")&&h===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(f){let m=[f,p];h===!1&&(m=[f]),s(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return hk=a,hk}var pk,bO;function Td(){if(bO)return pk;bO=1;const e=TT();return pk=(n,r,i)=>new e(n,i).compare(new e(r,i)),pk}var gk,EO;function sCe(){if(EO)return gk;EO=1;const e=Td();return gk=(n,r,i)=>e(n,r,i)===0,gk}var mk,kO;function aCe(){if(kO)return mk;kO=1;const e=Td();return mk=(n,r,i)=>e(n,r,i)!==0,mk}var yk,SO;function lCe(){if(SO)return yk;SO=1;const e=Td();return yk=(n,r,i)=>e(n,r,i)>0,yk}var vk,_O;function uCe(){if(_O)return vk;_O=1;const e=Td();return vk=(n,r,i)=>e(n,r,i)>=0,vk}var xk,CO;function cCe(){if(CO)return xk;CO=1;const e=Td();return xk=(n,r,i)=>e(n,r,i)<0,xk}var wk,$O;function fCe(){if($O)return wk;$O=1;const e=Td();return wk=(n,r,i)=>e(n,r,i)<=0,wk}var bk,AO;function dCe(){if(AO)return bk;AO=1;const e=sCe(),t=aCe(),n=lCe(),r=uCe(),i=cCe(),o=fCe();return bk=(a,l,u,f)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a===u;case"!==":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,f);case"!=":return t(a,u,f);case">":return n(a,u,f);case">=":return r(a,u,f);case"<":return i(a,u,f);case"<=":return o(a,u,f);default:throw new TypeError(`Invalid operator: ${l}`)}},bk}var Ek,TO;function hCe(){if(TO)return Ek;TO=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,h){if(h=n(h),f instanceof t){if(f.loose===!!h.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),s("comparator",f,h),this.options=h,this.loose=!!h.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(f){const h=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],p=f.match(h);if(!p)throw new TypeError(`Invalid comparator: ${f}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new a(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(s("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new a(f,this.options)}catch{return!1}return o(f,this.operator,this.semver,this.options)}intersects(f,h){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,h).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,h).test(f.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||o(this.semver,"<",f.semver,h)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||o(this.semver,">",f.semver,h)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}Ek=t;const n=CT(),{safeRe:r,t:i}=AT(),o=dCe(),s=$x(),a=TT(),l=YH();return Ek}var kk,RO;function YH(){if(RO)return kk;RO=1;const e=/\s+/g;class t{constructor(M,U){if(U=i(U),M instanceof t)return M.loose===!!U.loose&&M.includePrerelease===!!U.includePrerelease?M:new t(M.raw,U);if(M instanceof o)return this.raw=M.value,this.set=[[M]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=M.trim().replace(e," "),this.set=this.raw.split("||").map(X=>this.parseRange(X.trim())).filter(X=>X.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const X=this.set[0];if(this.set=this.set.filter(q=>!v(q[0])),this.set.length===0)this.set=[X];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&w(q[0])){this.set=[q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let M=0;M<this.set.length;M++){M>0&&(this.formatted+="||");const U=this.set[M];for(let X=0;X<U.length;X++)X>0&&(this.formatted+=" "),this.formatted+=U[X].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(M){const X=((this.options.includePrerelease&&m)|(this.options.loose&&y))+":"+M,q=r.get(X);if(q)return q;const H=this.options.loose,J=H?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];M=M.replace(J,K(this.options.includePrerelease)),s("hyphen replace",M),M=M.replace(l[u.COMPARATORTRIM],f),s("comparator trim",M),M=M.replace(l[u.TILDETRIM],h),s("tilde trim",M),M=M.replace(l[u.CARETTRIM],p),s("caret trim",M);let I=M.split(" ").map(be=>k(be,this.options)).join(" ").split(/\s+/).map(be=>O(be,this.options));H&&(I=I.filter(be=>(s("loose invalid filter",be,this.options),!!be.match(l[u.COMPARATORLOOSE])))),s("range list",I);const G=new Map,ve=I.map(be=>new o(be,this.options));for(const be of ve){if(v(be))return[be];G.set(be.value,be)}G.size>1&&G.has("")&&G.delete("");const Ce=[...G.values()];return r.set(X,Ce),Ce}intersects(M,U){if(!(M instanceof t))throw new TypeError("a Range is required");return this.set.some(X=>b(X,U)&&M.set.some(q=>b(q,U)&&X.every(H=>q.every(J=>H.intersects(J,U)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new a(M,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(W(this.set[U],M,this.options))return!0;return!1}}kk=t;const n=iCe(),r=new n,i=CT(),o=hCe(),s=$x(),a=TT(),{safeRe:l,t:u,comparatorTrimReplace:f,tildeTrimReplace:h,caretTrimReplace:p}=AT(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:y}=$T(),v=j=>j.value==="<0.0.0-0",w=j=>j.value==="",b=(j,M)=>{let U=!0;const X=j.slice();let q=X.pop();for(;U&&X.length;)U=X.every(H=>q.intersects(H,M)),q=X.pop();return U},k=(j,M)=>(s("comp",j,M),j=R(j,M),s("caret",j),j=C(j,M),s("tildes",j),j=N(j,M),s("xrange",j),j=L(j,M),s("stars",j),j),_=j=>!j||j.toLowerCase()==="x"||j==="*",C=(j,M)=>j.trim().split(/\s+/).map(U=>$(U,M)).join(" "),$=(j,M)=>{const U=M.loose?l[u.TILDELOOSE]:l[u.TILDE];return j.replace(U,(X,q,H,J,I)=>{s("tilde",j,X,q,H,J,I);let G;return _(q)?G="":_(H)?G=`>=${q}.0.0 <${+q+1}.0.0-0`:_(J)?G=`>=${q}.${H}.0 <${q}.${+H+1}.0-0`:I?(s("replaceTilde pr",I),G=`>=${q}.${H}.${J}-${I} <${q}.${+H+1}.0-0`):G=`>=${q}.${H}.${J} <${q}.${+H+1}.0-0`,s("tilde return",G),G})},R=(j,M)=>j.trim().split(/\s+/).map(U=>A(U,M)).join(" "),A=(j,M)=>{s("caret",j,M);const U=M.loose?l[u.CARETLOOSE]:l[u.CARET],X=M.includePrerelease?"-0":"";return j.replace(U,(q,H,J,I,G)=>{s("caret",j,q,H,J,I,G);let ve;return _(H)?ve="":_(J)?ve=`>=${H}.0.0${X} <${+H+1}.0.0-0`:_(I)?H==="0"?ve=`>=${H}.${J}.0${X} <${H}.${+J+1}.0-0`:ve=`>=${H}.${J}.0${X} <${+H+1}.0.0-0`:G?(s("replaceCaret pr",G),H==="0"?J==="0"?ve=`>=${H}.${J}.${I}-${G} <${H}.${J}.${+I+1}-0`:ve=`>=${H}.${J}.${I}-${G} <${H}.${+J+1}.0-0`:ve=`>=${H}.${J}.${I}-${G} <${+H+1}.0.0-0`):(s("no pr"),H==="0"?J==="0"?ve=`>=${H}.${J}.${I}${X} <${H}.${J}.${+I+1}-0`:ve=`>=${H}.${J}.${I}${X} <${H}.${+J+1}.0-0`:ve=`>=${H}.${J}.${I} <${+H+1}.0.0-0`),s("caret return",ve),ve})},N=(j,M)=>(s("replaceXRanges",j,M),j.split(/\s+/).map(U=>F(U,M)).join(" ")),F=(j,M)=>{j=j.trim();const U=M.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return j.replace(U,(X,q,H,J,I,G)=>{s("xRange",j,X,q,H,J,I,G);const ve=_(H),Ce=ve||_(J),be=Ce||_(I),Be=be;return q==="="&&Be&&(q=""),G=M.includePrerelease?"-0":"",ve?q===">"||q==="<"?X="<0.0.0-0":X="*":q&&Be?(Ce&&(J=0),I=0,q===">"?(q=">=",Ce?(H=+H+1,J=0,I=0):(J=+J+1,I=0)):q==="<="&&(q="<",Ce?H=+H+1:J=+J+1),q==="<"&&(G="-0"),X=`${q+H}.${J}.${I}${G}`):Ce?X=`>=${H}.0.0${G} <${+H+1}.0.0-0`:be&&(X=`>=${H}.${J}.0${G} <${H}.${+J+1}.0-0`),s("xRange return",X),X})},L=(j,M)=>(s("replaceStars",j,M),j.trim().replace(l[u.STAR],"")),O=(j,M)=>(s("replaceGTE0",j,M),j.trim().replace(l[M.includePrerelease?u.GTE0PRE:u.GTE0],"")),K=j=>(M,U,X,q,H,J,I,G,ve,Ce,be,Be)=>(_(X)?U="":_(q)?U=`>=${X}.0.0${j?"-0":""}`:_(H)?U=`>=${X}.${q}.0${j?"-0":""}`:J?U=`>=${U}`:U=`>=${U}${j?"-0":""}`,_(ve)?G="":_(Ce)?G=`<${+ve+1}.0.0-0`:_(be)?G=`<${ve}.${+Ce+1}.0-0`:Be?G=`<=${ve}.${Ce}.${be}-${Be}`:j?G=`<${ve}.${Ce}.${+be+1}-0`:G=`<=${G}`,`${U} ${G}`.trim()),W=(j,M,U)=>{for(let X=0;X<j.length;X++)if(!j[X].test(M))return!1;if(M.prerelease.length&&!U.includePrerelease){for(let X=0;X<j.length;X++)if(s(j[X].semver),j[X].semver!==o.ANY&&j[X].semver.prerelease.length>0){const q=j[X].semver;if(q.major===M.major&&q.minor===M.minor&&q.patch===M.patch)return!0}return!1}return!0};return kk}var Sk,NO;function pCe(){if(NO)return Sk;NO=1;const e=YH();return Sk=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},Sk}var gCe=pCe(),XH=rCe(gCe);function mCe(e,t,n){const r=e.open(t),i=250,{origin:o}=new URL(t);let s=40;function a(u){u.source===r&&(s=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function l(){s<=0||(r.postMessage(n,o),setTimeout(l,i),s-=1)}setTimeout(l,i)}var yCe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function KH(e,...t){for(const n of t)vCe(e,n);return e}function vCe(e,t){for(const n of Object.keys(t))od(e,n,t[n],!0)}const Vi=X1e;let ug=VSe;const o1=typeof window<"u"?window:void 0;var HO;ug===void 0&&((HO=o1==null?void 0:o1.vl)!=null&&HO.compile)&&(ug=o1.vl);const xCe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},wCe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},pp={vega:"Vega","vega-lite":"Vega-Lite"},hv={vega:Vi.version,"vega-lite":ug?ug.version:"not available"},bCe={vega:e=>e,"vega-lite":(e,t)=>ug.compile(e,{config:t}).spec},ECe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,kCe="chart-wrapper";function SCe(e){return typeof e=="function"}function FO(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${pp[r]} JSON Source`}function _Ce(e,t){if(e.$schema){const n=IH(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${pp[n.library]}, but mode argument sets ${pp[t]??t}.`);const r=n.library;return XH(hv[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${pp[r]} ${n.version}, but the current version of ${pp[r]} is v${hv[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function QH(e){return!!(e&&"load"in e)}function MO(e){return QH(e)?e:Vi.loader(e)}function CCe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return we(t.defaultStyle)&&(t.defaultStyle=!1),t}async function $Ce(e,t,n={}){let r,i;we(t)?(i=MO(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=CCe(r),s=o.loader;(!i||s)&&(i=MO(n.loader??s));const a=await DO(o,i),l=await DO(n,i),u={...KH(l,a),config:id(l.config??{},a.config??{})};return await TCe(e,r,u,i)}async function DO(e,t){const n=we(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=we(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function ACe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function TCe(e,t,n={},r){const i=n.theme?id(N_e[n.theme],n.config??{}):n.config,o=gl(n.actions)?n.actions:KH({},xCe,n.actions??{}),s={...wCe,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Vi.Warn,u=n.downloadFileName??"visualization",f=typeof e=="string"?document.querySelector(e):e;if(!f)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const $="vega-embed-style",{root:R,rootContainer:A}=ACe(f);if(!R.getElementById($)){const N=document.createElement("style");N.id=$,N.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?yCe.toString():n.defaultStyle,A.appendChild(N)}}const h=_Ce(t,n.mode);let p=bCe[h](t,i);if(h==="vega-lite"&&p.$schema){const $=IH(p.$schema);XH(hv.vega,`^${$.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${$.version}, but current version is v${hv.vega}.`)}f.classList.add("vega-embed"),o&&f.classList.add("has-actions"),f.innerHTML="";let m=f;if(o){const $=document.createElement("div");$.classList.add(kCe),f.appendChild($),m=$}const y=n.patch;if(y&&(p=y instanceof Function?y(p):Cx(p,y,!0,!1).newDocument),n.formatLocale&&Vi.formatLocale(n.formatLocale),n.timeFormatLocale&&Vi.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const $ in n.expressionFunctions){const R=n.expressionFunctions[$];"fn"in R?Vi.expressionFunction($,R.fn,R.visitor):R instanceof Function&&Vi.expressionFunction($,R)}const{ast:v}=n,w=Vi.parse(p,h==="vega-lite"?{}:i,{ast:v}),b=new(n.viewClass||Vi.View)(w,{loader:r,logLevel:l,renderer:a,...v?{expr:Vi.expressionInterpreter??n.expr??hye}:{}});if(b.addSignalListener("autosize",($,R)=>{const{type:A}=R;A=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):A=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):A=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:$,tooltip:R}=n,A=$&&!QH($)?$==null?void 0:$.baseURL:void 0,N=SCe(R)?R:new B_e({baseURL:A,...R===!0?{}:R}).call;b.tooltip(N)}let{hover:k}=n;if(k===void 0&&(k=h==="vega"),k){const{hoverSet:$,updateSet:R}=typeof k=="boolean"?{}:k;b.hover($,R)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(m,n.bind).runAsync();let _;if(o!==!1){let $=f;if(n.defaultStyle!==!1||n.forceActionsMenu){const A=document.createElement("details");A.title=s.CLICK_TO_VIEW_ACTIONS,f.append(A),$=A;const N=document.createElement("summary");N.innerHTML=ECe,A.append(N),_=F=>{A.contains(F.target)||A.removeAttribute("open")},document.addEventListener("click",_)}const R=document.createElement("div");if($.append(R),R.classList.add("vega-actions"),o===!0||o.export!==!1){for(const A of["svg","png"])if(o===!0||o.export===!0||o.export[A]){const N=s[`${A.toUpperCase()}_ACTION`],F=document.createElement("a"),L=Ee(n.scaleFactor)?n.scaleFactor[A]:n.scaleFactor;F.text=N,F.href="#",F.target="_blank",F.download=`${u}.${A}`,F.addEventListener("mousedown",async function(O){O.preventDefault();const K=await b.toImageURL(A,L);this.href=K}),R.append(F)}}if(o===!0||o.source!==!1){const A=document.createElement("a");A.text=s.SOURCE_ACTION,A.href="#",A.addEventListener("click",function(N){FO(Db(t),n.sourceHeader??"",n.sourceFooter??"",h),N.preventDefault()}),R.append(A)}if(h==="vega-lite"&&(o===!0||o.compiled!==!1)){const A=document.createElement("a");A.text=s.COMPILED_ACTION,A.href="#",A.addEventListener("click",function(N){FO(Db(p),n.sourceHeader??"",n.sourceFooter??"","vega"),N.preventDefault()}),R.append(A)}if(o===!0||o.editor!==!1){const A=n.editorUrl??"https://vega.github.io/editor/",N=document.createElement("a");N.text=s.EDITOR_ACTION,N.href="#",N.addEventListener("click",function(F){mCe(window,A,{config:i,mode:y?"vega":h,renderer:a,spec:Db(y?p:t)}),F.preventDefault()}),R.append(N)}}function C(){_&&document.removeEventListener("click",_),b.finalize()}return{view:b,spec:t,vgSpec:p,finalize:C,embedOptions:n}}function RCe(e){return!!e&&{}.toString.call(e)==="[object Function]"}function NCe(e,t,n){n&&(RCe(n)?n(e.data(t)):e.change(t,Vi.changeset().remove(()=>!0).insert(n)))}function FCe(e,t){Object.keys(t).forEach(n=>{NCe(e,n,t[n])})}function ZH(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const JH=()=>{};function _k(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}var Ck,OO;function MCe(){return OO||(OO=1,Ck=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),Ck}var DCe=MCe();const OCe=Z_(DCe);function PCe(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=ZH([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!OCe(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function PO(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function $k(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function gp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class eV extends pu.PureComponent{constructor(){super(...arguments),gp(this,"containerRef",pu.createRef()),gp(this,"resultPromise",void 0),gp(this,"handleError",t=>{const{onError:n=JH}=this.props;n(t,this.containerRef.current),console.warn(t)}),gp(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=ZH([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=PCe($k(this.props),$k(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!Rk(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&PO(a,o),i&&_k(a,i)),a.run()})}else Rk(i,o)||this.modifyView(s=>{o&&PO(s,o),i&&_k(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=$k(this.props);this.resultPromise=$Ce(this.containerRef.current,a,s).then(l=>{if(l){const{view:u}=l;_k(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return pu.createElement("div",{ref:this.containerRef,className:t,style:n})}}gp(eV,"propTypes",{className:Pe.string,onError:Pe.func});function G_(){return G_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G_.apply(this,arguments)}function Y_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const LCe={};class tV extends pu.PureComponent{constructor(){super(...arguments),Y_(this,"vegaEmbed",pu.createRef()),Y_(this,"handleNewView",t=>{this.update();const{onNewView:n=JH}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){Rk(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{FCe(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return pu.createElement(eV,G_({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Y_(tV,"defaultProps",{data:LCe});function X_(){return X_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X_.apply(this,arguments)}function nV(e){return pu.createElement(tV,X_({},e,{mode:"vega-lite"}))}const ICe=({data:e,view:t})=>{const[n,r]=Z.useState("fade-in"),[i,o]=Z.useState(t);Z.useEffect(()=>{if(t===i)return;r("fade-out");const f=setTimeout(()=>{o(t),r("fade-in")},300);return()=>clearTimeout(f)},[t,i]);const s=i==="visits"?"visits":"admits",a=i==="visits"?"ARI Visits":"ARI Admits",l=i==="visits"?Hn.orangePrimary:Hn.orangeAccent,u=Z.useMemo(()=>({$schema:"https://vega.github.io/schema/vega-lite/v6.json",description:"Weekly ARI trends",width:900,height:300,autosize:{type:"fit",contains:"padding"},data:{values:e},mark:{type:"bar",cornerRadiusTopLeft:4,cornerRadiusTopRight:4},encoding:{x:{field:"week",type:"temporal",timeUnit:"yearmonthdate",title:"Week",axis:{format:"%b %d",labelAngle:-40}},y:{field:s,type:"quantitative",title:a},color:{value:l},tooltip:[{field:"week",type:"temporal",title:"Week"},{field:s,type:"quantitative",title:a}]}}),[e,i,s,a,l]);return P.jsx("div",{className:`chart-fade-wrapper ${n}`,children:P.jsxs("div",{className:"chart-vega-wrapper",children:[P.jsx(nV,{spec:u,actions:!1,config:{autosize:{type:"fit",contains:"padding"}}}),"      "]})})},rV=({data:e,onToggle:t})=>{const[n,r]=Z.useState("visits"),i=s=>{r(s),t&&t(s)},o=Z.useMemo(()=>{if(!e||e.length===0)return null;const s=e.reduce((a,l)=>a[n]>l[n]?a:l);return{value:s[n].toLocaleString(),date:new Date(s.week).toLocaleDateString("en-US",{month:"short",day:"numeric"})}},[n,e]);return P.jsxs("div",{className:"toggle-controls",children:[P.jsx("button",{className:`toggle-button ${n==="visits"?"active":""}`,onClick:()=>i("visits"),children:"Visits"}),P.jsx("button",{className:`toggle-button ${n==="admits"?"active":""}`,onClick:()=>i("admits"),children:"Admits"}),o&&P.jsxs("div",{className:"chart-peak",children:[P.jsxs("p",{className:"peak-label",children:["Peak ",n.charAt(0).toUpperCase()+n.slice(1)]}),P.jsx("p",{className:"peak-value",children:o.value}),P.jsx("p",{className:"peak-date",children:o.date})]})]})};rV.propTypes={data:Pe.array.isRequired,onToggle:Pe.func};function RT(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let dc=RT();function iV(e){dc=e}const Rp={exec:()=>null};function pt(e,t=""){let n=typeof e=="string"?e:e.source;const r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(pr.caret,"$1"),n=n.replace(i,s),r},getRegex:()=>new RegExp(n,t)};return r}const pr={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},zCe=/^(?:[ \t]*(?:\n|$))+/,jCe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,BCe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,o0=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,UCe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,NT=/(?:[*+-]|\d{1,9}[.)])/,oV=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,sV=pt(oV).replace(/bull/g,NT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),qCe=pt(oV).replace(/bull/g,NT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),FT=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,WCe=/^[^\n]+/,MT=/(?!\s*\])(?:\\.|[^\[\]\\])+/,HCe=pt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",MT).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),VCe=pt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,NT).getRegex(),Ax="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",DT=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,GCe=pt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",DT).replace("tag",Ax).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),aV=pt(FT).replace("hr",o0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ax).getRegex(),YCe=pt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",aV).getRegex(),OT={blockquote:YCe,code:jCe,def:HCe,fences:BCe,heading:UCe,hr:o0,html:GCe,lheading:sV,list:VCe,newline:zCe,paragraph:aV,table:Rp,text:WCe},LO=pt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",o0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ax).getRegex(),XCe={...OT,lheading:qCe,table:LO,paragraph:pt(FT).replace("hr",o0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",LO).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ax).getRegex()},KCe={...OT,html:pt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",DT).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Rp,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:pt(FT).replace("hr",o0).replace("heading",` *#{1,6} *[^
]`).replace("lheading",sV).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},QCe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ZCe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,lV=/^( {2,}|\\)\n(?!\s*$)/,JCe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Tx=/[\p{P}\p{S}]/u,PT=/[\s\p{P}\p{S}]/u,uV=/[^\s\p{P}\p{S}]/u,e3e=pt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,PT).getRegex(),cV=/(?!~)[\p{P}\p{S}]/u,t3e=/(?!~)[\s\p{P}\p{S}]/u,n3e=/(?:[^\s\p{P}\p{S}]|~)/u,r3e=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,fV=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,i3e=pt(fV,"u").replace(/punct/g,Tx).getRegex(),o3e=pt(fV,"u").replace(/punct/g,cV).getRegex(),dV="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",s3e=pt(dV,"gu").replace(/notPunctSpace/g,uV).replace(/punctSpace/g,PT).replace(/punct/g,Tx).getRegex(),a3e=pt(dV,"gu").replace(/notPunctSpace/g,n3e).replace(/punctSpace/g,t3e).replace(/punct/g,cV).getRegex(),l3e=pt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,uV).replace(/punctSpace/g,PT).replace(/punct/g,Tx).getRegex(),u3e=pt(/\\(punct)/,"gu").replace(/punct/g,Tx).getRegex(),c3e=pt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),f3e=pt(DT).replace("(?:-->|$)","-->").getRegex(),d3e=pt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",f3e).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),pv=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,h3e=pt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",pv).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),hV=pt(/^!?\[(label)\]\[(ref)\]/).replace("label",pv).replace("ref",MT).getRegex(),pV=pt(/^!?\[(ref)\](?:\[\])?/).replace("ref",MT).getRegex(),p3e=pt("reflink|nolink(?!\\()","g").replace("reflink",hV).replace("nolink",pV).getRegex(),LT={_backpedal:Rp,anyPunctuation:u3e,autolink:c3e,blockSkip:r3e,br:lV,code:ZCe,del:Rp,emStrongLDelim:i3e,emStrongRDelimAst:s3e,emStrongRDelimUnd:l3e,escape:QCe,link:h3e,nolink:pV,punctuation:e3e,reflink:hV,reflinkSearch:p3e,tag:d3e,text:JCe,url:Rp},g3e={...LT,link:pt(/^!?\[(label)\]\((.*?)\)/).replace("label",pv).getRegex(),reflink:pt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",pv).getRegex()},K_={...LT,emStrongRDelimAst:a3e,emStrongLDelim:o3e,url:pt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},m3e={...K_,br:pt(lV).replace("{2,}","*").getRegex(),text:pt(K_.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},s1={normal:OT,gfm:XCe,pedantic:KCe},Wh={normal:LT,gfm:K_,breaks:m3e,pedantic:g3e},y3e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},IO=e=>y3e[e];function Fo(e,t){if(t){if(pr.escapeTest.test(e))return e.replace(pr.escapeReplace,IO)}else if(pr.escapeTestNoEncode.test(e))return e.replace(pr.escapeReplaceNoEncode,IO);return e}function zO(e){try{e=encodeURI(e).replace(pr.percentDecode,"%")}catch{return null}return e}function jO(e,t){var o;const n=e.replace(pr.findPipe,(s,a,l)=>{let u=!1,f=a;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),r=n.split(pr.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((o=r.at(-1))!=null&&o.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(pr.slashPipe,"|");return r}function Hh(e,t,n){const r=e.length;if(r===0)return"";let i=0;for(;i<r&&e.charAt(r-i-1)===t;)i++;return e.slice(0,r-i)}function v3e(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function BO(e,t,n,r,i){const o=t.href,s=t.title||null,a=e[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function x3e(e,t,n){const r=e.match(n.other.indentCodeCompensation);if(r===null)return t;const i=r[1];return t.split(`
`).map(o=>{const s=o.match(n.other.beginningSpace);if(s===null)return o;const[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}class gv{constructor(t){ee(this,"options");ee(this,"rules");ee(this,"lexer");this.options=t||dc}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Hh(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],i=x3e(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){const i=Hh(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:Hh(n[0],`
`)}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){let r=Hh(n[0],`
`).split(`
`),i="",o="";const s=[];for(;r.length>0;){let a=!1;const l=[];let u;for(u=0;u<r.length;u++)if(this.rules.other.blockquoteStart.test(r[u]))l.push(r[u]),a=!0;else if(!a)l.push(r[u]);else break;r=r.slice(u);const f=l.join(`
`),h=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,o=o?`${o}
${h}`:h;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,s,!0),this.lexer.state.top=p,r.length===0)break;const m=s.at(-1);if((m==null?void 0:m.type)==="code")break;if((m==null?void 0:m.type)==="blockquote"){const y=m,v=y.raw+`
`+r.join(`
`),w=this.blockquote(v);s[s.length-1]=w,i=i.substring(0,i.length-y.raw.length)+w.raw,o=o.substring(0,o.length-y.text.length)+w.text;break}else if((m==null?void 0:m.type)==="list"){const y=m,v=y.raw+`
`+r.join(`
`),w=this.list(v);s[s.length-1]=w,i=i.substring(0,i.length-m.raw.length)+w.raw,o=o.substring(0,o.length-y.raw.length)+w.raw,r=v.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:o}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim();const i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const s=this.rules.other.listItemRegex(r);let a=!1;for(;t;){let u=!1,f="",h="";if(!(n=s.exec(t))||this.rules.block.hr.test(t))break;f=n[0],t=t.substring(f.length);let p=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,k=>" ".repeat(3*k.length)),m=t.split(`
`,1)[0],y=!p.trim(),v=0;if(this.options.pedantic?(v=2,h=p.trimStart()):y?v=n[1].length+1:(v=n[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,h=p.slice(v),v+=n[1].length),y&&this.rules.other.blankLine.test(m)&&(f+=m+`
`,t=t.substring(m.length+1),u=!0),!u){const k=this.rules.other.nextBulletRegex(v),_=this.rules.other.hrRegex(v),C=this.rules.other.fencesBeginRegex(v),$=this.rules.other.headingBeginRegex(v),R=this.rules.other.htmlBeginRegex(v);for(;t;){const A=t.split(`
`,1)[0];let N;if(m=A,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),N=m):N=m.replace(this.rules.other.tabCharGlobal,"    "),C.test(m)||$.test(m)||R.test(m)||k.test(m)||_.test(m))break;if(N.search(this.rules.other.nonSpaceChar)>=v||!m.trim())h+=`
`+N.slice(v);else{if(y||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(p)||$.test(p)||_.test(p))break;h+=`
`+m}!y&&!m.trim()&&(y=!0),f+=A+`
`,t=t.substring(A.length+1),p=N.slice(v)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(a=!0));let w=null,b;this.options.gfm&&(w=this.rules.other.listIsTask.exec(h),w&&(b=w[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:f,task:!!w,checked:b,loose:!1,text:h,tokens:[]}),o.raw+=f}const l=o.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let u=0;u<o.items.length;u++)if(this.lexer.state.top=!1,o.items[u].tokens=this.lexer.blockTokens(o.items[u].text,[]),!o.loose){const f=o.items[u].tokens.filter(p=>p.type==="space"),h=f.length>0&&f.some(p=>this.rules.other.anyLine.test(p.raw));o.loose=h}if(o.loose)for(let u=0;u<o.items.length;u++)o.items[u].loose=!0;return o}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:o}}}table(t){var a;const n=this.rules.block.table.exec(t);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;const r=jO(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const l of i)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<r.length;l++)s.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:s.align[l]});for(const l of o)s.rows.push(jO(l,s.header.length).map((u,f)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:s.align[f]})));return s}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const s=Hh(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=v3e(n[2],"()");if(s===-2)return;if(s>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let i=n[2],o="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),BO(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=n[i.toLowerCase()];if(!o){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return BO(r,o,r[0],this.lexer,this.rules)}}emStrong(t,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...i[0]].length-1;let a,l,u=s,f=0;const h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*t.length+s);(i=h.exec(n))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){u+=l;continue}else if((i[5]||i[6])&&s%3&&!((s+l)%3)){f+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+f);const p=[...i[0]][0].length,m=t.slice(0,s+i.index+p+l);if(Math.min(s,l)%2){const v=m.slice(1,-1);return{type:"em",raw:m,text:v,tokens:this.lexer.inlineTokens(v)}}const y=m.slice(2,-2);return{type:"strong",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),o=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&o&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let n;if(n=this.rules.inline.url.exec(t)){let i,o;if(n[2]==="@")i=n[0],o="mailto:"+i;else{let s;do s=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(s!==n[0]);i=n[0],n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){const r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}}class Ei{constructor(t){ee(this,"tokens");ee(this,"options");ee(this,"state");ee(this,"tokenizer");ee(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||dc,this.options.tokenizer=this.options.tokenizer||new gv,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:pr,block:s1.normal,inline:Wh.normal};this.options.pedantic?(n.block=s1.pedantic,n.inline=Wh.pedantic):this.options.gfm&&(n.block=s1.gfm,this.options.breaks?n.inline=Wh.breaks:n.inline=Wh.gfm),this.tokenizer.rules=n}static get rules(){return{block:s1,inline:Wh}}static lex(t,n){return new Ei(n).lex(t)}static lexInline(t,n){return new Ei(n).inlineTokens(t)}lex(t){t=t.replace(pr.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){var i,o,s;for(this.options.pedantic&&(t=t.replace(pr.tabCharGlobal,"    ").replace(pr.spaceLine,""));t;){let a;if((o=(i=this.options.extensions)==null?void 0:i.block)!=null&&o.some(u=>(a=u.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);const u=n.at(-1);a.raw.length===1&&u!==void 0?u.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),n.push(a);continue}let l=t;if((s=this.options.extensions)!=null&&s.startBlock){let u=1/0;const f=t.slice(1);let h;this.options.extensions.startBlock.forEach(p=>{h=p.call({lexer:this},f),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(l=t.substring(0,u+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const u=n.at(-1);r&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a),r=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var a,l,u;let r=t,i=null;if(this.tokens.links){const f=Object.keys(this.tokens.links);if(f.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)f.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,s="";for(;t;){o||(s=""),o=!1;let f;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(p=>(f=p.call({lexer:this},t,n))?(t=t.substring(f.raw.length),n.push(f),!0):!1))continue;if(f=this.tokenizer.escape(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.tag(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.link(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(f.raw.length);const p=n.at(-1);f.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=f.raw,p.text+=f.text):n.push(f);continue}if(f=this.tokenizer.emStrong(t,r,s)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.codespan(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.br(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.del(t)){t=t.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.autolink(t)){t=t.substring(f.raw.length),n.push(f);continue}if(!this.state.inLink&&(f=this.tokenizer.url(t))){t=t.substring(f.raw.length),n.push(f);continue}let h=t;if((u=this.options.extensions)!=null&&u.startInline){let p=1/0;const m=t.slice(1);let y;this.options.extensions.startInline.forEach(v=>{y=v.call({lexer:this},m),typeof y=="number"&&y>=0&&(p=Math.min(p,y))}),p<1/0&&p>=0&&(h=t.substring(0,p+1))}if(f=this.tokenizer.inlineText(h)){t=t.substring(f.raw.length),f.raw.slice(-1)!=="_"&&(s=f.raw.slice(-1)),o=!0;const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=f.raw,p.text+=f.text):n.push(f);continue}if(t){const p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return n}}class mv{constructor(t){ee(this,"options");ee(this,"parser");this.options=t||dc}space(t){return""}code({text:t,lang:n,escaped:r}){var s;const i=(s=(n||"").match(pr.notSpaceStart))==null?void 0:s[0],o=t.replace(pr.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Fo(i)+'">'+(r?o:Fo(o,!0))+`</code></pre>
`:"<pre><code>"+(r?o:Fo(o,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:n}){return`<h${n}>${this.parser.parseInline(t)}</h${n}>
`}hr(t){return`<hr>
`}list(t){const n=t.ordered,r=t.start;let i="";for(let a=0;a<t.items.length;a++){const l=t.items[a];i+=this.listitem(l)}const o=n?"ol":"ul",s=n&&r!==1?' start="'+r+'"':"";return"<"+o+s+`>
`+i+"</"+o+`>
`}listitem(t){var r;let n="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?((r=t.tokens[0])==null?void 0:r.type)==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+Fo(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):n+=i+" "}return n+=this.parser.parse(t.tokens,!!t.loose),`<li>${n}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let n="",r="";for(let o=0;o<t.header.length;o++)r+=this.tablecell(t.header[o]);n+=this.tablerow({text:r});let i="";for(let o=0;o<t.rows.length;o++){const s=t.rows[o];r="";for(let a=0;a<s.length;a++)r+=this.tablecell(s[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const n=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Fo(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:n,tokens:r}){const i=this.parser.parseInline(r),o=zO(t);if(o===null)return i;t=o;let s='<a href="'+t+'"';return n&&(s+=' title="'+Fo(n)+'"'),s+=">"+i+"</a>",s}image({href:t,title:n,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));const o=zO(t);if(o===null)return Fo(r);t=o;let s=`<img src="${t}" alt="${r}"`;return n&&(s+=` title="${Fo(n)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Fo(t.text)}}class IT{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class ki{constructor(t){ee(this,"options");ee(this,"renderer");ee(this,"textRenderer");this.options=t||dc,this.options.renderer=this.options.renderer||new mv,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new IT}static parse(t,n){return new ki(n).parse(t)}static parseInline(t,n){return new ki(n).parseInline(t)}parse(t,n=!0){var i,o;let r="";for(let s=0;s<t.length;s++){const a=t[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const u=a,f=this.options.extensions.renderers[u.type].call({parser:this},u);if(f!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){r+=f||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let u=l,f=this.renderer.text(u);for(;s+1<t.length&&t[s+1].type==="text";)u=t[++s],f+=`
`+this.renderer.text(u);n?r+=this.renderer.paragraph({type:"paragraph",raw:f,text:f,tokens:[{type:"text",raw:f,text:f,escaped:!0}]}):r+=f;continue}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}parseInline(t,n=this.renderer){var i,o;let r="";for(let s=0;s<t.length;s++){const a=t[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=u||"";continue}}const l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}}class Np{constructor(t){ee(this,"options");ee(this,"block");this.options=t||dc}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Ei.lex:Ei.lexInline}provideParser(){return this.block?ki.parse:ki.parseInline}}ee(Np,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class w3e{constructor(...t){ee(this,"defaults",RT());ee(this,"options",this.setOptions);ee(this,"parse",this.parseMarkdown(!0));ee(this,"parseInline",this.parseMarkdown(!1));ee(this,"Parser",ki);ee(this,"Renderer",mv);ee(this,"TextRenderer",IT);ee(this,"Lexer",Ei);ee(this,"Tokenizer",gv);ee(this,"Hooks",Np);this.use(...t)}walkTokens(t,n){var i,o;let r=[];for(const s of t)switch(r=r.concat(n.call(this,s)),s.type){case"table":{const a=s;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const u of l)r=r.concat(this.walkTokens(u.tokens,n));break}case"list":{const a=s;r=r.concat(this.walkTokens(a.items,n));break}default:{const a=s;(o=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const u=a[l].flat(1/0);r=r.concat(this.walkTokens(u,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=n.renderers[o.name];s?n.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=n[o.level];s?s.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),i.extensions=n),r.renderer){const o=this.defaults.renderer||new mv(this.defaults);for(const s in r.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const a=s,l=r.renderer[a],u=o[a];o[a]=(...f)=>{let h=l.apply(o,f);return h===!1&&(h=u.apply(o,f)),h||""}}i.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new gv(this.defaults);for(const s in r.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,l=r.tokenizer[a],u=o[a];o[a]=(...f)=>{let h=l.apply(o,f);return h===!1&&(h=u.apply(o,f)),h}}i.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new Np;for(const s in r.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const a=s,l=r.hooks[a],u=o[a];Np.passThroughHooks.has(s)?o[a]=f=>{if(this.defaults.async)return Promise.resolve(l.call(o,f)).then(p=>u.call(o,p));const h=l.call(o,f);return u.call(o,h)}:o[a]=(...f)=>{let h=l.apply(o,f);return h===!1&&(h=u.apply(o,f)),h}}i.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return Ei.lex(t,n??this.defaults)}parser(t,n){return ki.parse(t,n??this.defaults)}parseMarkdown(t){return(r,i)=>{const o={...i},s={...this.defaults,...o},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&o.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=t);const l=s.hooks?s.hooks.provideLexer():t?Ei.lex:Ei.lexInline,u=s.hooks?s.hooks.provideParser():t?ki.parse:ki.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(f=>l(f,s)).then(f=>s.hooks?s.hooks.processAllTokens(f):f).then(f=>s.walkTokens?Promise.all(this.walkTokens(f,s.walkTokens)).then(()=>f):f).then(f=>u(f,s)).then(f=>s.hooks?s.hooks.postprocess(f):f).catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let f=l(r,s);s.hooks&&(f=s.hooks.processAllTokens(f)),s.walkTokens&&this.walkTokens(f,s.walkTokens);let h=u(f,s);return s.hooks&&(h=s.hooks.postprocess(h)),h}catch(f){return a(f)}}}onError(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+Fo(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}}const Gu=new w3e;function vt(e,t){return Gu.parse(e,t)}vt.options=vt.setOptions=function(e){return Gu.setOptions(e),vt.defaults=Gu.defaults,iV(vt.defaults),vt};vt.getDefaults=RT;vt.defaults=dc;vt.use=function(...e){return Gu.use(...e),vt.defaults=Gu.defaults,iV(vt.defaults),vt};vt.walkTokens=function(e,t){return Gu.walkTokens(e,t)};vt.parseInline=Gu.parseInline;vt.Parser=ki;vt.parser=ki.parse;vt.Renderer=mv;vt.TextRenderer=IT;vt.Lexer=Ei;vt.lexer=Ei.lex;vt.Tokenizer=gv;vt.Hooks=Np;vt.parse=vt;vt.options;vt.setOptions;vt.use;vt.walkTokens;vt.parseInline;ki.parse;Ei.lex;const b3e=(e,t)=>{const n=e.split(`
`),r=[];let i=!1;const o=t.trim().toLowerCase();for(const s of n){if(s.trim().startsWith("## ")){if(s.trim().slice(3).trim().toLowerCase()===o){i=!0;continue}else if(i)break}i&&r.push(s)}return r.join(`
`).trim()},E3e=(e,t={})=>e.replace(/{(\w+)}/g,(n,r)=>t[r]??`{${r}}`),s0=({filePath:e,rawContent:t,sectionTitle:n,showTitle:r=!1,className:i="markdown-body",variables:o={}})=>{const[s,a]=Z.useState("");return Z.useEffect(()=>{const l=async()=>{try{let u=t;if(!u){const p=await fetch(e);if(!p.ok)throw new Error(`Markdown file not found or inaccessible: ${e}`);u=await p.text()}const f=E3e(u,o),h=n?b3e(f,n)||`### ${n}
_Section not found._`:f;a(vt.parse(h))}catch(u){console.error("Failed to load markdown:",u),a(`<p style="color:red;"><strong>Error:</strong> ${u.message}</p>`)}};console.log("Loading markdown from:",e),l()},[e,t,n,o]),P.jsxs("div",{className:i,children:[r&&n&&P.jsx("h3",{children:n}),P.jsx("div",{dangerouslySetInnerHTML:{__html:s}})]})};s0.propTypes={filePath:Pe.string,rawContent:Pe.string,sectionTitle:Pe.string,showTitle:Pe.bool,className:Pe.string,variables:Pe.object};const Q_=({title:e,content:t,markdownPath:n,isOpen:r,onClose:i})=>r?P.jsx("div",{className:"info-modal-overlay",onClick:i,children:P.jsxs("div",{className:"info-modal",onClick:o=>o.stopPropagation(),children:[P.jsx("button",{className:"info-modal-close",onClick:i,"aria-label":"Close info popup",children:""}),P.jsx("h3",{className:"info-modal-title",children:e}),P.jsx("div",{className:"info-modal-content",children:n?P.jsx(s0,{filePath:n}):t})]})}):null;Q_.propTypes={title:Pe.string.isRequired,content:Pe.node,markdownPath:Pe.string,isOpen:Pe.bool.isRequired,onClose:Pe.func.isRequired};const k3e={title:"Respiratory Virus Overview",subtitle:"Explore Acute Respiratory Virus data in NYC",indicators:{title:"Emergency Department Key Indicators"},charts:{monthlyARIChart:{title:"Acute Respiratory Infection Overview",subtitle:" {edType} have {trend} since last week"}}},S3e={mainTitle:"Emergency Department Visits & Admissions",mainSubtitle:"Trends and characteristics of Emergency Department use for COVID-19, influenza, and RSV",summarySection:{summaryTitle:"Emergency Department Summary"},charts:{seasonalEdVisits:{title:"{virus} Emergency Department {view}",subtitle:"{view} for the week of {date} have {trend} since the previous week"},percentEdVisitsByAge:{title:"{virus} Emergency Department Visits by Age Group",subtitle:"{view} for the week of {date} have {trend} since the previous week"},percentEdVisitsByGeo:{title:"{virus} Emergency Department Visits by Borough",subtitle:"{view} for the week of {date} have {trend} since the previous week"}}},_3e={mainTitle:"Laboratory Surveillance",mainSubtitle:"Trends and characteristics of COVID-19, influenza, and RSV laboratory reports",summarySection:{summaryTitle:"Case Data Summary"},charts:{seasonalComparison:{title:"{virus} Laboratory Reports by Season",subtitle:"Reports for the week of {date} have {trend} since the previous week"},reportsByTestType:{title:"{virus} Laboratory Reports by Test Type",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"},reportsByAge:{title:"{virus} Laboratory Reports by Age Group",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"},reportsByBorough:{title:"{virus} Laboratory Reports by Borough",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"},reportsByRE:{title:"{virus} COVID-19 Laboratory Reports by Race and Ethnicity",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"}}},C3e={mainTitle:"COVID-19 Death Surveillance",mainSubtitle:"Trends and characteristics of COVID-19 deaths",summarySection:{summaryTitle:"Case Data Summary"},charts:{seasonalComparison:{title:"COVID-19 Deaths by Season",subtitle:"Deaths for the week of {date} have {trend} since the previous week"},deathsByAge:{title:"COVID-19 Deaths by Age Group",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"},deathsByBorough:{title:"COVID-19 Deaths by Borough",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"},deathsByRE:{title:"COVID-19 Deaths by Race and Ethnicity",subtitle:"Emergency department visits for {virus} are {trend} this week than the same week last season"}}},gV={overview:k3e,emergencyDeptPage:S3e,caseDataPage:_3e,CovidDeathPage:C3e};console.log("Loaded text.json:",gV);const af=(e,t=e)=>{const n=e.split(".").reduce((r,i)=>r==null?void 0:r[i],gV);return n===void 0&&console.warn(`[getText] Missing text key: ${e}`),n??t},$3e=(e,t={})=>{const n=typeof e=="string"&&e.includes(".")?af(e):e;return typeof n!="string"?n:n.replace(/{(\w+)}/g,(r,i)=>{const o=t[i]??`{${i}}`;return i==="trend"?`<span class='trend-text trend-${t.trendDirection||"neutral"}'>${o}</span>`:o})},yv=({title:e,subtitle:t,subtitleVariables:n={},children:r,className:i="",animateOnScroll:o=!0,infoIcon:s=!1,downloadIcon:a=!1,modalTitle:l="More Info",modalContent:u=null,onDownloadClick:f=null})=>{const h=Z.useRef(null),[p,m]=Z.useState(!1),[y,v]=Z.useState(!1),[w,b]=Z.useState(!1);Z.useEffect(()=>{if(!o)return;const _=new IntersectionObserver(([$])=>m($.isIntersecting),{threshold:.2}),C=h.current;return C&&_.observe(C),()=>C&&_.unobserve(C)},[o]);const k=typeof t=="string"?$3e(t,n):t;return P.jsxs("div",{ref:h,className:`content-container ${i} ${o?p?"fade-in":"fade-out":""}`,children:[(e||t)&&P.jsxs("div",{className:"content-header",children:[P.jsxs("div",{className:"content-title-row",children:[P.jsx("h3",{className:"content-title",children:e}),P.jsxs("div",{className:"content-title-icons",children:[s&&P.jsx("img",{src:"/assets/info-icon.png",alt:"More info",className:"icon info-icon",onClick:()=>v(!0)}),a&&P.jsx("img",{src:"/assets/download-data-icon.png",alt:"Download CSV",className:"icon download-icon",onClick:()=>b(!0),style:{cursor:"pointer"}})]})]}),typeof k=="string"?P.jsx("p",{className:"content-subtitle",dangerouslySetInnerHTML:{__html:k}}):P.jsx("p",{className:"content-subtitle",children:k})]}),P.jsx("div",{className:"content-body",children:r}),s&&u&&P.jsx(Q_,{isOpen:y,onClose:()=>v(!1),title:l,content:u}),a&&f&&P.jsx(Q_,{isOpen:w,onClose:()=>b(!1),title:"Download Data",content:P.jsxs(P.Fragment,{children:[P.jsx("p",{children:"Would you like to download a CSV of this charts data?"}),P.jsx("button",{className:"toggle-button active",onClick:()=>{f(),b(!1)},style:{marginTop:"12px"},children:"Yes, Download"})]})})]})};yv.propTypes={title:Pe.string,subtitle:Pe.node,subtitleVariables:Pe.object,children:Pe.node.isRequired,className:Pe.string,animateOnScroll:Pe.bool,infoIcon:Pe.bool,downloadIcon:Pe.bool,modalTitle:Pe.string,modalContent:Pe.node,onDownloadClick:Pe.func};const Rx=({title:e,subtitle:t,topControls:n,info:r,children:i})=>P.jsxs("main",{className:"data-page",children:[P.jsx("div",{className:"data-section-wrapper",children:P.jsxs("div",{className:"data-section-container",children:[P.jsx("h2",{className:"data-title",children:e}),t&&P.jsx("p",{className:"data-subtitle",children:t}),n&&P.jsx("div",{className:"data-controls-wrapper",children:P.jsx("div",{className:"data-controls-row",children:n})}),P.jsx("hr",{className:"data-divider"}),P.jsx("div",{className:"info-container",children:r})]})}),P.jsx("div",{className:"data-highlight",children:P.jsx("div",{className:"data-container",children:i})})]});Rx.propTypes={title:Pe.string.isRequired,subtitle:Pe.node,topControls:Pe.node,info:Pe.node,children:Pe.node.isRequired};function mV(e,t="data.csv"){if(!e||e.length===0)return;const n=Object.keys(e[0]),r=[n.join(","),...e.map(a=>n.map(l=>`"${a[l]}"`).join(","))],i=new Blob([r.join(`
`)],{type:"text/csv"}),o=URL.createObjectURL(i),s=document.createElement("a");s.href=o,s.download=t,s.click(),URL.revokeObjectURL(o)}function yV(e,t){var o,s;if(!Array.isArray(e)||e.length<2)return null;const n=(o=e.at(-1))==null?void 0:o[t],r=(s=e.at(-2))==null?void 0:s[t];if(typeof n!="number"||typeof r!="number"||r===0)return null;const i=(n-r)/r*100;return i>.5?{label:"increased",value:Math.round(i),direction:"up"}:i<-.5?{label:"decreased",value:Math.abs(Math.round(i)),direction:"down"}:{label:"not changed",value:0,direction:"neutral"}}const Vh=[{week:"2025-01-01",visits:12456,admits:4800},{week:"2025-01-08",visits:11789,admits:4400},{week:"2025-01-15",visits:13210,admits:5100},{week:"2025-01-22",visits:14032,admits:5800},{week:"2025-01-29",visits:19044,admits:6100},{week:"2025-02-05",visits:19500,admits:5900}],A3e=()=>{const[e,t]=Z.useState("visits"),n=Z.useMemo(()=>yV(Vh,e),[Vh,e]),r=n?P.jsxs(P.Fragment,{children:[e==="visits"?"Visits":"Admits"," have"," ",P.jsxs("span",{className:`trend-text trend-${n.direction}`,children:[n.label,n.value?` ${n.value}%`:""]})," ","since last week."]}):"",i=()=>{const o=Vh.map(({week:s,[e]:a})=>({week:s,[e]:a}));mV(o,`ari-${e}-trend.csv`)};return P.jsxs(Rx,{title:af("overview.title"),subtitle:af("overview.subtitle"),children:[P.jsx(yv,{title:af("overview.indicators.title"),animateOnScroll:!0,children:P.jsx(cK,{})}),P.jsx(yv,{title:af("overview.charts.monthlyARIChart.title"),subtitle:r,animateOnScroll:!0,infoIcon:!0,downloadIcon:!0,onDownloadClick:i,modalTitle:"About These Metrics",modalContent:P.jsx(s0,{filePath:"/content/modals/metric-explainer.md",showTitle:!0,sectionTitle:"ARI Visits"}),children:P.jsx(bv,{sidebar:P.jsx(rV,{data:Vh,onToggle:t}),chart:P.jsx(ICe,{data:Vh,view:e}),footer:"Source: NYC Health Department Syndromic Surveillance"})}),P.jsx(fK,{})]})},T3e={"ed-visits":"Emergency Department Visits & Admissions",cases:"Case Data & Demographics",deaths:"COVID-19 Deaths"},R3e=()=>{const{topic:e}=oX(),t=T3e[e]||"Data Explorer";return P.jsx(Rx,{title:t,subtitle:"Explore NYC public health trends by topic",children:P.jsxs("div",{style:{padding:"24px",color:"#6B7280"},children:["Charts and data for ",P.jsx("strong",{children:t})," will appear here."]})})},vV=Z.createContext(),zT=()=>Z.useContext(vV),jT=({children:e,initialData:t})=>{const[n,r]=Z.useState("COVID-19"),[i,o]=Z.useState("visits"),s=()=>{const a=t.map(({week:l,season:u,visits:f})=>({week:l,season:u,[i]:f}));mV(a,`${n.toLowerCase()}-${i}-seasonal.csv`)};return P.jsx(vV.Provider,{value:{activeVirus:n,setActiveVirus:r,view:i,setView:o,handleDownload:s},children:e})},xV=({label:e,icon:t,active:n,onClick:r})=>P.jsxs("button",{onClick:r,className:`filter-button ${n?"active":""}`,children:[P.jsx("img",{src:t,alt:e,className:"filter-icon"}),e]});xV.propTypes={label:Pe.string.isRequired,icon:Pe.string.isRequired,active:Pe.bool,onClick:Pe.func.isRequired};const N3e="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Frame'%3e%3cg%20clip-path='url(%23clip0_4496_2242)'%3e%3cpath%20id='Vector'%20d='M10.125%201.125C10.125%200.502734%209.62227%200%209%200C8.37773%200%207.875%200.502734%207.875%201.125V1.5293C7.875%203.28359%205.75508%204.1625%204.51406%202.92148L4.22578%202.63672C3.78633%202.19727%203.07617%202.19727%202.63672%202.63672C2.19727%203.07617%202.19727%203.78984%202.63672%204.2293L2.925%204.51758C4.1625%205.75508%203.28359%207.875%201.5293%207.875H1.125C0.502734%207.875%200%208.37773%200%209C0%209.62227%200.502734%2010.125%201.125%2010.125H1.5293C3.28359%2010.125%204.1625%2012.2449%202.92148%2013.4859L2.63672%2013.7742C2.19727%2014.2137%202.19727%2014.9273%202.63672%2015.3668C3.07617%2015.8063%203.78984%2015.8063%204.2293%2015.3668L4.51758%2015.0785C5.75859%2013.8375%207.87852%2014.7164%207.87852%2016.4707V16.875C7.87852%2017.4973%208.38125%2018%209.00352%2018C9.62578%2018%2010.1285%2017.4973%2010.1285%2016.875V16.4707C10.1285%2014.7164%2012.2484%2013.8375%2013.4895%2015.0785L13.7777%2015.3668C14.2172%2015.8063%2014.9309%2015.8063%2015.3703%2015.3668C15.8098%2014.9273%2015.8098%2014.2137%2015.3703%2013.7742L15.082%2013.4859C13.841%2012.2449%2014.7199%2010.125%2016.4742%2010.125H16.875C17.4973%2010.125%2018%209.62227%2018%209C18%208.37773%2017.4973%207.875%2016.875%207.875H16.4707C14.7164%207.875%2013.8375%205.75508%2015.0785%204.51406L15.3668%204.22578C15.8063%203.78633%2015.8063%203.07266%2015.3668%202.6332C14.9273%202.19375%2014.2137%202.19375%2013.7742%202.6332L13.4859%202.92148C12.2449%204.1625%2010.125%203.28359%2010.125%201.5293V1.125ZM6.1875%207.875C6.1875%207.65339%206.23115%207.43396%206.31595%207.22922C6.40076%207.02448%206.52506%206.83846%206.68176%206.68176C6.83846%206.52506%207.02448%206.40076%207.22922%206.31595C7.43396%206.23115%207.65339%206.1875%207.875%206.1875C8.09661%206.1875%208.31604%206.23115%208.52078%206.31595C8.72552%206.40076%208.91154%206.52506%209.06824%206.68176C9.22494%206.83846%209.34924%207.02448%209.43405%207.22922C9.51885%207.43396%209.5625%207.65339%209.5625%207.875C9.5625%208.09661%209.51885%208.31604%209.43405%208.52078C9.34924%208.72552%209.22494%208.91154%209.06824%209.06824C8.91154%209.22494%208.72552%209.34924%208.52078%209.43405C8.31604%209.51885%208.09661%209.5625%207.875%209.5625C7.65339%209.5625%207.43396%209.51885%207.22922%209.43405C7.02448%209.34924%206.83846%209.22494%206.68176%209.06824C6.52506%208.91154%206.40076%208.72552%206.31595%208.52078C6.23115%208.31604%206.1875%208.09661%206.1875%207.875ZM10.6875%209.84375C10.9113%209.84375%2011.1259%209.93264%2011.2841%2010.0909C11.4424%2010.2491%2011.5312%2010.4637%2011.5312%2010.6875C11.5312%2010.9113%2011.4424%2011.1259%2011.2841%2011.2841C11.1259%2011.4424%2010.9113%2011.5312%2010.6875%2011.5312C10.4637%2011.5312%2010.2491%2011.4424%2010.0909%2011.2841C9.93264%2011.1259%209.84375%2010.9113%209.84375%2010.6875C9.84375%2010.4637%209.93264%2010.2491%2010.0909%2010.0909C10.2491%209.93264%2010.4637%209.84375%2010.6875%209.84375Z'%20fill='%232563EB'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4496_2242'%3e%3cpath%20d='M0%200H18V18H0V0Z'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",F3e="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Frame'%3e%3cg%20clip-path='url(%23clip0_4496_2246)'%3e%3cpath%20id='Vector'%20d='M10.125%201.125C10.125%200.502734%209.62227%200%209%200C8.37773%200%207.875%200.502734%207.875%201.125V1.5293C7.875%203.28359%205.75508%204.1625%204.51406%202.92148L4.22578%202.63672C3.78633%202.19727%203.07617%202.19727%202.63672%202.63672C2.19727%203.07617%202.19727%203.78984%202.63672%204.2293L2.925%204.51758C4.1625%205.75508%203.28359%207.875%201.5293%207.875H1.125C0.502734%207.875%200%208.37773%200%209C0%209.62227%200.502734%2010.125%201.125%2010.125H1.5293C3.28359%2010.125%204.1625%2012.2449%202.92148%2013.4859L2.63672%2013.7742C2.19727%2014.2137%202.19727%2014.9273%202.63672%2015.3668C3.07617%2015.8063%203.78984%2015.8063%204.2293%2015.3668L4.51758%2015.0785C5.75859%2013.8375%207.87852%2014.7164%207.87852%2016.4707V16.875C7.87852%2017.4973%208.38125%2018%209.00352%2018C9.62578%2018%2010.1285%2017.4973%2010.1285%2016.875V16.4707C10.1285%2014.7164%2012.2484%2013.8375%2013.4895%2015.0785L13.7777%2015.3668C14.2172%2015.8063%2014.9309%2015.8063%2015.3703%2015.3668C15.8098%2014.9273%2015.8098%2014.2137%2015.3703%2013.7742L15.082%2013.4859C13.841%2012.2449%2014.7199%2010.125%2016.4742%2010.125H16.875C17.4973%2010.125%2018%209.62227%2018%209C18%208.37773%2017.4973%207.875%2016.875%207.875H16.4707C14.7164%207.875%2013.8375%205.75508%2015.0785%204.51406L15.3668%204.22578C15.8063%203.78633%2015.8063%203.07266%2015.3668%202.6332C14.9273%202.19375%2014.2137%202.19375%2013.7742%202.6332L13.4859%202.92148C12.2449%204.1625%2010.125%203.28359%2010.125%201.5293V1.125ZM6.1875%207.875C6.1875%207.65339%206.23115%207.43396%206.31595%207.22922C6.40076%207.02448%206.52506%206.83846%206.68176%206.68176C6.83846%206.52506%207.02448%206.40076%207.22922%206.31595C7.43396%206.23115%207.65339%206.1875%207.875%206.1875C8.09661%206.1875%208.31604%206.23115%208.52078%206.31595C8.72552%206.40076%208.91154%206.52506%209.06824%206.68176C9.22494%206.83846%209.34924%207.02448%209.43405%207.22922C9.51885%207.43396%209.5625%207.65339%209.5625%207.875C9.5625%208.09661%209.51885%208.31604%209.43405%208.52078C9.34924%208.72552%209.22494%208.91154%209.06824%209.06824C8.91154%209.22494%208.72552%209.34924%208.52078%209.43405C8.31604%209.51885%208.09661%209.5625%207.875%209.5625C7.65339%209.5625%207.43396%209.51885%207.22922%209.43405C7.02448%209.34924%206.83846%209.22494%206.68176%209.06824C6.52506%208.91154%206.40076%208.72552%206.31595%208.52078C6.23115%208.31604%206.1875%208.09661%206.1875%207.875ZM10.6875%209.84375C10.9113%209.84375%2011.1259%209.93264%2011.2841%2010.0909C11.4424%2010.2491%2011.5312%2010.4637%2011.5312%2010.6875C11.5312%2010.9113%2011.4424%2011.1259%2011.2841%2011.2841C11.1259%2011.4424%2010.9113%2011.5312%2010.6875%2011.5312C10.4637%2011.5312%2010.2491%2011.4424%2010.0909%2011.2841C9.93264%2011.1259%209.84375%2010.9113%209.84375%2010.6875C9.84375%2010.4637%209.93264%2010.2491%2010.0909%2010.0909C10.2491%209.93264%2010.4637%209.84375%2010.6875%209.84375Z'%20fill='%237C3AED'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4496_2246'%3e%3cpath%20d='M0%200H18V18H0V0Z'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",M3e="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20id='Vector'%20d='M8.4375%200.9375C8.4375%200.418945%208.01855%200%207.5%200C6.98145%200%206.5625%200.418945%206.5625%200.9375V1.27441C6.5625%202.73633%204.7959%203.46875%203.76172%202.43457L3.52148%202.19727C3.15527%201.83105%202.56348%201.83105%202.19727%202.19727C1.83105%202.56348%201.83105%203.1582%202.19727%203.52441L2.4375%203.76465C3.46875%204.7959%202.73633%206.5625%201.27441%206.5625H0.9375C0.418945%206.5625%200%206.98145%200%207.5C0%208.01855%200.418945%208.4375%200.9375%208.4375H1.27441C2.73633%208.4375%203.46875%2010.2041%202.43457%2011.2383L2.19727%2011.4785C1.83105%2011.8447%201.83105%2012.4395%202.19727%2012.8057C2.56348%2013.1719%203.1582%2013.1719%203.52441%2012.8057L3.76465%2012.5654C4.79883%2011.5312%206.56543%2012.2637%206.56543%2013.7256V14.0625C6.56543%2014.5811%206.98438%2015%207.50293%2015C8.02148%2015%208.44043%2014.5811%208.44043%2014.0625V13.7256C8.44043%2012.2637%2010.207%2011.5312%2011.2412%2012.5654L11.4814%2012.8057C11.8477%2013.1719%2012.4424%2013.1719%2012.8086%2012.8057C13.1748%2012.4395%2013.1748%2011.8447%2012.8086%2011.4785L12.5684%2011.2383C11.5342%2010.2041%2012.2666%208.4375%2013.7285%208.4375H14.0625C14.5811%208.4375%2015%208.01855%2015%207.5C15%206.98145%2014.5811%206.5625%2014.0625%206.5625H13.7256C12.2637%206.5625%2011.5312%204.7959%2012.5654%203.76172L12.8057%203.52148C13.1719%203.15527%2013.1719%202.56055%2012.8057%202.19434C12.4395%201.82812%2011.8447%201.82812%2011.4785%202.19434L11.2383%202.43457C10.2041%203.46875%208.4375%202.73633%208.4375%201.27441V0.9375ZM5.15625%206.5625C5.15625%206.37783%205.19262%206.19497%205.26329%206.02435C5.33396%205.85374%205.43755%205.69871%205.56813%205.56813C5.69871%205.43755%205.85374%205.33396%206.02435%205.26329C6.19497%205.19262%206.37783%205.15625%206.5625%205.15625C6.74717%205.15625%206.93003%205.19262%207.10065%205.26329C7.27126%205.33396%207.42629%205.43755%207.55687%205.56813C7.68745%205.69871%207.79104%205.85374%207.86171%206.02435C7.93238%206.19497%207.96875%206.37783%207.96875%206.5625C7.96875%206.74717%207.93238%206.93003%207.86171%207.10065C7.79104%207.27126%207.68745%207.42629%207.55687%207.55687C7.42629%207.68745%207.27126%207.79104%207.10065%207.86171C6.93003%207.93238%206.74717%207.96875%206.5625%207.96875C6.37783%207.96875%206.19497%207.93238%206.02435%207.86171C5.85374%207.79104%205.69871%207.68745%205.56813%207.55687C5.43755%207.42629%205.33396%207.27126%205.26329%207.10065C5.19262%206.93003%205.15625%206.74717%205.15625%206.5625ZM8.90625%208.20312C9.09273%208.20312%209.27157%208.2772%209.40343%208.40907C9.5353%208.54093%209.60938%208.71977%209.60938%208.90625C9.60938%209.09273%209.5353%209.27157%209.40343%209.40343C9.27157%209.5353%209.09273%209.60938%208.90625%209.60938C8.71977%209.60938%208.54093%209.5353%208.40907%209.40343C8.2772%209.27157%208.20312%209.09273%208.20312%208.90625C8.20312%208.71977%208.2772%208.54093%208.40907%208.40907C8.54093%208.2772%208.71977%208.20312%208.90625%208.20312Z'%20fill='%23059669'/%3e%3c/svg%3e",D3e=[{label:"COVID-19",icon:N3e},{label:"Influenza",icon:F3e},{label:"RSV",icon:M3e}],O3e=({onChange:e})=>{const[t,n]=Z.useState("COVID-19"),r=i=>{n(i),e&&e(i)};return P.jsx("div",{style:{display:"flex",gap:"12px"},children:D3e.map(({label:i,icon:o})=>P.jsx(xV,{label:i,icon:o,active:t===i,onClick:()=>r(i)},i))})},wV=({activeView:e,onChange:t})=>P.jsxs("div",{className:"view-toggle-group",children:[P.jsx("button",{className:`view-toggle ${e==="visits"?"active":""}`,onClick:()=>t("visits"),children:"Visits"}),P.jsx("button",{className:`view-toggle ${e==="admits"?"active":""}`,onClick:()=>t("admits"),children:"Admits"})]});wV.propTypes={activeView:Pe.string.isRequired,onChange:Pe.func.isRequired};const bV=({controls:e={}})=>{const{view:t,setView:n,activeVirus:r,setActiveVirus:i}=zT(),{virusToggle:o,viewToggle:s}=e;return P.jsxs(P.Fragment,{children:[o&&P.jsxs("div",{className:"data-filter-group",children:[P.jsx("span",{className:"data-filter-label",children:"Virus"}),P.jsx(O3e,{onChange:i})]}),s&&P.jsxs("div",{className:"data-filter-group right-aligned",children:[P.jsx("span",{className:"data-filter-label",children:"Choose Between"}),P.jsx(wV,{activeView:t,onChange:n})]})]})};bV.propTypes={controls:Pe.shape({virusToggle:Pe.bool,viewToggle:Pe.bool})};const EV=({sectionTitle:e,date:t,trendDirection:n,animateOnScroll:r=!0,markdownPath:i,showTitle:o=!1,children:s,metricLabel:a})=>{const l=Z.useRef(null),[u,f]=Z.useState(!1),{activeVirus:h,view:p}=zT();Z.useEffect(()=>{if(!r)return;const b=new IntersectionObserver(([_])=>f(_.isIntersecting),{threshold:.2}),k=l.current;return k&&b.observe(k),()=>k&&b.unobserve(k)},[r]);const m=n==="up"?"higher than last week":"lower than last week",y=n==="up"?"":"",v=n==="up"?"#DC2626":"#059669",w=a||p;return P.jsxs("div",{ref:l,className:`trend-summary-container ${r?u?"fade-in":"fade-out":""}`,children:[t&&P.jsxs("p",{className:"trend-date",children:["Latest data as of ",P.jsx("strong",{children:t})]}),n&&P.jsxs("div",{className:"trend-status",children:[P.jsx("span",{className:"trend-arrow",style:{color:v},children:y}),P.jsxs("span",{className:"trend-text",children:[h," ",w," are"," ",P.jsx("strong",{children:m})]})]}),i&&P.jsx(s0,{filePath:i,sectionTitle:e,showTitle:!1,className:"markdown-body"}),s&&P.jsx("div",{className:"trend-body",children:s})]})};EV.propTypes={sectionTitle:Pe.string,date:Pe.string,trendDirection:Pe.oneOf(["up","down"]),markdownPath:Pe.string,showTitle:Pe.bool,metricLabel:Pe.string,children:Pe.node,animateOnScroll:Pe.bool};const P3e=({title:e,subtitle:t,subtitleVariables:n,infoIcon:r,downloadIcon:i,modalTitle:o,modalContent:s,onDownloadClick:a,chartTitle:l,chart:u,footer:f,children:h,animateOnScroll:p})=>P.jsx(yv,{title:e,subtitle:t,subtitleVariables:n,infoIcon:r,downloadIcon:i,modalTitle:o,modalContent:s,onDownloadClick:a,animateOnScroll:p,children:h??P.jsx(bv,{title:l||e,chart:u,footer:f})}),L3e=[{week:"2025-04-01",visits:12e3,admits:3e3},{week:"2025-04-08",visits:12500,admits:3100},{week:"2025-04-15",visits:13e3,admits:3200},{week:"2025-04-22",visits:14e3,admits:3500},{week:"2025-04-29",visits:15e3,admits:3700}],I3e={"COVID-19":Hn.bluePrimary,Influenza:Hn.purpleAccent,RSV:Hn.greenMuted,ARI:Hn.orangeMuted},z3e=({data:e=L3e,virus:t="COVID-19",view:n="visits"})=>{const r=I3e[t]||Hn.gray700,i={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Simple weekly bar chart of ED activity",data:{name:"table"},width:800,height:300,mark:{type:"bar",opacity:1,stroke:"#1E3A8A",strokeWidth:.8},encoding:{x:{field:"week",type:"ordinal",title:"Week"},y:{field:n,type:"quantitative",title:`ED ${n==="admits"?"Admits":"Visits"}`},color:{value:r},tooltip:[{field:"week",type:"ordinal"},{field:n,type:"quantitative",title:n==="admits"?"Admits":"Visits"}]}};return P.jsx(nV,{spec:i,data:{table:e}})},j3e={edSeasonalComparisonChart:z3e},eu=(e,t={})=>{const n=typeof e=="string"&&e.includes(".")?af(e):e;return typeof n!="string"?n:n.replace(/{(\w+)}/g,(r,i)=>t[i]??`{${i}}`)},Nx=({config:e})=>{const{titleKey:t,subtitleKey:n,summary:r,sections:i=[],data:o={},controls:s={}}=e,{activeVirus:a,view:l,handleDownload:u}=zT();return P.jsxs(Rx,{title:eu(t),subtitle:eu(n),topControls:P.jsx(bV,{controls:s}),children:[r&&P.jsx(EV,{sectionTitle:eu(r.title),date:r.lastUpdated,trendDirection:r.showTrendArrow?"up":"down",markdownPath:r.markdownPath,showTitle:!0,animateOnScroll:r.animateOnScroll!==!1}),i.map((f,h)=>{var R,A,N,F,L,O;const p=j3e[(R=f.chart)==null?void 0:R.type];if(!p)return console.error(`Chart type '${(A=f.chart)==null?void 0:A.type}' not found`),null;const m=(N=f.chart.props)==null?void 0:N.dataSourceKey,y=o[m]||[],v=l==="admits"?"admits":"visits",w=f.trendEnabled?yV(y,v):null,b=typeof w=="object"&&w!==null?`${w.label}${w.value?` ${w.value}%`:""}`:w??"not available",k=typeof w=="object"&&(w!=null&&w.direction)?w.direction:"neutral",_=((F=y.at(-1))==null?void 0:F.week)??"N/A",C={...f.chart.props,data:y,virus:a,view:l},$={virus:a,view:l,trend:b,trendDirection:k,date:_};return P.jsx(P3e,{title:eu(f.title,$),subtitle:f.subtitle,subtitleVariables:$,infoIcon:f.infoIcon,downloadIcon:f.downloadIcon,onDownloadClick:u,modalTitle:eu((L=f.modal)==null?void 0:L.title,$),modalContent:((O=f.modal)==null?void 0:O.markdownPath)&&P.jsx(s0,{filePath:f.modal.markdownPath,showTitle:!1,sectionTitle:eu(f.modal.title||"",$),variables:$}),animateOnScroll:f.animateOnScroll!==!1,children:P.jsx(bv,{title:eu(f.title,$),chart:P.jsx(p,{...C}),footer:f.chart.footer})},f.id||h)})]})};Nx.propTypes={config:Pe.object.isRequired};const UO={id:"emergencyDeptPage",titleKey:"emergencyDeptPage.mainTitle",subtitleKey:"emergencyDeptPage.mainSubtitle",controls:{virusToggle:!0,viewToggle:!0},summary:{markdownPath:"/content/sections/edSectionText.md",title:"Page Overview",lastUpdated:"05/01/2025",showTrendArrow:!0,showSecondayTitle:!1},sections:[{id:"ed-trends",title:"emergencyDeptPage.charts.seasonalEdVisits.title",subtitle:"emergencyDeptPage.charts.seasonalEdVisits.subtitle",trendEnabled:!0,infoIcon:!0,downloadIcon:!0,modal:{title:"{virus} Seasonal ED {view}",markdownPath:"/content/modals/emergency-dept-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}",view:"{view}"},footer:"Source: NYC Health Department Syndromic Surveillance"}},{id:"percent-ed-visits-age",title:"emergencyDeptPage.charts.percentEdVisitsByAge.title",trendEnabled:!0,infoIcon:!0,downloadIcon:!0,modal:{title:"{virus} ED {view} by Age Group",markdownPath:"/content/modals/emergency-dept-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}",view:"{view}"},footer:"Source: NYC Health Department Syndromic Surveillance"}},{id:"percent-ed-visits-geo",title:"emergencyDeptPage.charts.percentEdVisitsByGeo.title",trendEnabled:!0,infoIcon:!0,downloadIcon:!0,modal:{title:" {virus} ED {view} by Borough",markdownPath:"/content/modals/emergency-dept-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}",view:"{view}"},footer:"Source: NYC Health Department Syndromic Surveillance"}}],data:{seasonalEDData:[{week:"2025-04-01",visits:12e3,admits:3e3},{week:"2025-04-08",visits:12500,admits:3100},{week:"2025-04-15",visits:13e3,admits:3200},{week:"2025-04-22",visits:14e3,admits:3500},{week:"2025-04-29",visits:15e3,admits:3700}]}},B3e=()=>P.jsx(jT,{initialData:UO.data,children:P.jsx(Nx,{config:UO})}),qO={id:"caseDataPage",titleKey:"caseDataPage.mainTitle",subtitleKey:"caseDataPage.mainSubtitle",controls:{virusToggle:!0},summary:{title:"Page Overview",markdownPath:"/content/sections/caseDataSectionText.md",lastUpdated:"05/01/2025",showTrendArrow:!0,showSecondayTitle:!1,metricLabel:"cases"},sections:[{id:"case-reports-season",title:"caseDataPage.charts.seasonalComparison.title",subtitle:"caseDataPage.charts.seasonalComparison.subtitle",infoIcon:!0,downloadIcon:!0,trendEnabled:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Season",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}"},footer:"Source: NYC Health Department Syndromic Surveillance"}},{id:"case-reports-test-type",title:"caseDataPage.charts.reportsByTestType.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Test Type",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}"},footer:"Source: NYC Health Department Syndromic Surveillance"}},{id:"case-reports-age",title:"caseDataPage.charts.reportsByAge.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Age Group",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}"},footer:"Source: NYC Health Department Syndromic Surveillance"}},{id:"case-reports-borough",title:"caseDataPage.charts.reportsByBorough.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Borough",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}"},footer:"Source: NYC Health Department Syndromic Surveillance"}},{id:"case-reports-re",title:"caseDataPage.charts.reportsByRE.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"{virus} Laboratory Reports by Race and Ethnicity",markdownPath:"/content/modals/cases-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}"},footer:"Source: NYC Health Department Syndromic Surveillance"}}],data:{seasonalEDData:[{week:"1",season:"2021-22",visits:3400},{week:"1",season:"2022-23",visits:4e3},{week:"1",season:"2023-24",visits:4200},{week:"1",season:"2024-25",visits:4600},{week:"2",season:"2021-22",visits:3900},{week:"2",season:"2022-23",visits:4400},{week:"2",season:"2023-24",visits:4700},{week:"2",season:"2024-25",visits:5100}]}},U3e=()=>P.jsx(jT,{initialData:qO.data,children:P.jsx(Nx,{config:qO})}),WO={id:"covidDeathPage",titleKey:"CovidDeathPage.mainTitle",subtitleKey:"CovidDeathPage.mainSubtitle",controls:{virusToggle:!1},summary:{title:"Covid Death Page Overview",markdownPath:"/content/sections/covidDeathSectionText.md",lastUpdated:"05/01/2025",showTrendArrow:!0,showSecondayTitle:!1,metricLabel:"cases"},sections:[{id:"case-reports-season",title:"CovidDeathPage.charts.seasonalComparison.title",subtitle:"CovidDeathPage.charts.seasonalComparison.subtitle",infoIcon:!0,downloadIcon:!0,trendEnabled:!0,animateOnScroll:!0,modal:{title:"COVID-19 Deaths by Season",markdownPath:"/content/modals/covid-deaths-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}"},footer:"Source: NYC Health Department Syndromic Surveillance"}},{id:"case-reports-test-type",title:"CovidDeathPage.charts.deathsByAge.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"COVID-19 Deaths by Age Group",markdownPath:"/content/modals/covid-deaths-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}"},footer:"Source: NYC Health Department Syndromic Surveillance"}},{id:"case-reports-age",title:"CovidDeathPage.charts.deathsByBorough.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"COVID-19 Deaths by Borough",markdownPath:"/content/modals/covid-deaths-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}"},footer:"Source: NYC Health Department Syndromic Surveillance"}},{id:"case-reports-borough",title:"CovidDeathPage.charts.deathsByRE.title",infoIcon:!0,downloadIcon:!0,animateOnScroll:!0,modal:{title:"COVID-19 Deaths by Race & Ethnicity",markdownPath:"/content/modals/covid-deaths-explainer.md"},chart:{type:"edSeasonalComparisonChart",props:{dataSourceKey:"seasonalEDData",virus:"{virus}"},footer:"Source: NYC Health Department Syndromic Surveillance"}}],data:{seasonalEDData:[{week:"1",season:"2021-22",visits:3400},{week:"1",season:"2022-23",visits:4e3},{week:"1",season:"2023-24",visits:4200},{week:"1",season:"2024-25",visits:4600},{week:"2",season:"2021-22",visits:3900},{week:"2",season:"2022-23",visits:4400},{week:"2",season:"2023-24",visits:4700},{week:"2",season:"2024-25",visits:5100}]}},q3e=()=>P.jsx(jT,{initialData:WO.data,children:P.jsx(Nx,{config:WO})});function W3e(){return P.jsxs(HX,{children:[P.jsx(tK,{}),P.jsx(iK,{}),P.jsx("main",{className:"flex-grow",children:P.jsxs(bX,{children:[P.jsx(tu,{path:"/",element:P.jsx(A3e,{})}),P.jsx(tu,{path:"/data-explorer",element:P.jsx(xX,{to:"/data-explorer/emergency-dept",replace:!0})}),P.jsx(tu,{path:"/data-explorer/emergency-dept",element:P.jsx(B3e,{})}),P.jsx(tu,{path:"/data-explorer/:topic",element:P.jsx(R3e,{})}),P.jsx(tu,{path:"/data-explorer/cases",element:P.jsx(U3e,{})}),P.jsx(tu,{path:"/data-explorer/deaths",element:P.jsx(q3e,{})})]})}),P.jsx(uK,{})]})}TY.createRoot(document.getElementById("root")).render(P.jsx(Z.StrictMode,{children:P.jsx(W3e,{})}));
